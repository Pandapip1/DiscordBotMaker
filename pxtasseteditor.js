!function o(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=e("react"),i=e("react-dom"),s=e("./components/ImageFieldEditor"),l=e("./components/TilemapFieldEditor"),c=e("./components/ImageEditor/store/imageReducer");document.addEventListener("DOMContentLoaded",function(){var e;e=document.getElementById("asset-editor-field-div"),i.render(a.createElement(p,null),e)});var u="tilemap_asset",f=16,p=function(i){function e(e){var t=i.call(this,e)||this;t.tilemapName=u,t.tileWidth=f,t.handleMessage=function(e){if(e.data._fromVscode)if("initialize"===e.data.type)switch(t.state.viewType){case"sprite":t.editor.loadJres(e.data.message);break;case"tilemap":t.tilemapName=e.data.name,t.tileWidth=e.data.tileWidth,t.initTilemap(e.data.message)}else"update"===e.data.type&&t.sendJres()},t.refHandler=function(e){t.editor=e,"tilemap"===t.state.viewType&&t.initTilemap()},t.callbackOnDoneClick=function(){t.sendJres()};var n="sprite",r=/view(?:[:=])([a-zA-Z]+)/i.exec(window.location.href);return r&&"tilemap"===r[1]&&(n="tilemap"),t.state={viewType:n},c.setTelemetryFunction(d),t}return o(e,i),e.prototype.postMessage=function(e){window.parent.postMessage(e,"*")},e.prototype.initTilemap=function(e){this.tilemapProject=new pxt.TilemapProject,this.tilemapProject.loadTilemapJRes(e?this.parseJres(e):{});var t=this.tilemapProject.getTilemap(this.tilemapName).data;if(!t){var n=this.tilemapProject.createNewTilemap(this.tilemapName,this.tileWidth,16,16),r=n[0];t=n[1],this.tilemapName=r}this.editor.init(t,this.callbackOnDoneClick)},e.prototype.updateTilemap=function(){var r=this.editor.getValue();if(r.deletedTiles)for(var e=0,t=r.deletedTiles;e<t.length;e++){var n=t[e];this.tilemapProject.deleteTile(n)}if(r.editedTiles)for(var i=function(t){var e=r.tileset.tiles.findIndex(function(e){return e.id===t}),n=r.tileset.tiles[e];if(!n||n.id.startsWith("*"))return"continue";r.tileset.tiles[e]=o.tilemapProject.updateTile(n)},o=this,a=0,s=r.editedTiles;a<s.length;a++)i(s[a]);for(var l=0;l<r.tileset.tiles.length;l++){var c=r.tileset.tiles[l];if(c.id.startsWith("*")){var u=this.tilemapProject.createNewTile(c.bitmap);r.tileset.tiles[l]=u}else c.jresData||(r.tileset.tiles[l]=this.tilemapProject.resolveTile(c.id))}this.tilemapProject.updateTilemap(this.tilemapName,r)},e.prototype.componentDidMount=function(){window.addEventListener("message",this.handleMessage,null),this.postMessage({type:"ready",message:this.state.viewType}),d("asset-editor-shown")},e.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.handleMessage,null)},e.prototype.sendJres=function(){var e;switch(this.state.viewType){case"sprite":e=this.editor.getJres();break;case"tilemap":this.updateTilemap();var t=this.tilemapProject.getProjectTilesetJRes(),n={jres:t,ts:pxt.emitTilemapsFromJRes(t)};e=JSON.stringify(n)}this.postMessage({type:"update",message:e})},e.prototype.parseJres=function(e){var t={},n=JSON.parse(e);return pxt.inflateJRes(n,t),t},e.prototype.render=function(){return"tilemap"===this.state.viewType?a.createElement(l.TilemapFieldEditor,{ref:this.refHandler}):a.createElement(s.ImageFieldEditor,{ref:this.refHandler,singleFrame:!0,doneButtonCallback:this.callbackOnDoneClick})},e}(a.Component);function d(e){pxt.tickEvent("asset.editor",{action:e})}n.AssetEditor=p},{"./components/ImageEditor/store/imageReducer":23,"./components/ImageFieldEditor":29,"./components/TilemapFieldEditor":30,react:228,"react-dom":184}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./package");n.isNameTaken=function(e){return i.mainEditorPkg().tilemapProject.isNameTaken("image",e)},n.createNewImageAsset=function(e,t,n){var r=i.mainEditorPkg().tilemapProject;switch(e){case"tile":return r.createNewTile(new pxt.sprite.Bitmap(t,n).data());case"image":return r.createNewImage(t,n)}return null},n.createProjectImage=function(e){return i.mainEditorPkg().tilemapProject.createNewProjectImage(e)},n.createTile=function(e){return i.mainEditorPkg().tilemapProject.createNewTile(e)},n.lookupAsset=function(e,t){return i.mainEditorPkg().tilemapProject.lookupAsset(e,t)},n.getNewInternalID=function(){return i.mainEditorPkg().tilemapProject.getNewInternalId()}},{"./package":43}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,a=e("./db");function s(t){return i.getAsync(t.id).then(function(e){return{header:t,text:e.files,version:e._rev}})}function l(e,t,n){return c(r,i,e,t,n)}function c(e,t,n,r,i){var o="";return(i?t.setAsync({id:n.id,files:i,_rev:r}).then(function(e){o=e}):Promise.resolve()).then(function(){return e.setAsync(n)}).then(function(e){return n._rev=e,o})}n.copyProjectToLegacyEditor=function(e,t){var n=pxt.appTarget.appTheme.browserDbPrefixes&&pxt.appTarget.appTheme.browserDbPrefixes[t],r=new a.Table(n?n+"-header":"header"),i=new a.Table(n?n+"-text":"text"),o=pxt.Util.clone(e);return delete o._id,delete o._rev,o.id=pxt.Util.guidGen(),s(e).then(function(e){return c(r,i,o,void 0,e.text)}).then(function(e){return o})},n.provider={getAsync:s,setAsync:l,deleteAsync:function(e,t){return r.deleteAsync(e).then(function(){return i.deleteAsync({id:e.id,_rev:e._rev})})},listAsync:function(){return(o=pxt.semver.parse(pxt.appTarget.versions.target).major,e=pxt.appTarget.appTheme.browserDbPrefixes&&pxt.appTarget.appTheme.browserDbPrefixes[o],e?(r=new a.Table(e+"-header"),i=new a.Table(e+"-text"),r.getAllAsync().then(function(e){if(e.length)return Promise.resolve();var t=o-1,n=t<0?"":pxt.appTarget.appTheme.browserDbPrefixes&&pxt.appTarget.appTheme.browserDbPrefixes[t],r=new a.Table("header"),i=new a.Table("text");return n&&(r=new a.Table(n+"-header"),i=new a.Table(n+"-text")),r.getAllAsync().then(function(e){return Promise.map(e,function(e){return t=e,i.getAsync(t.id).then(function(e){return delete t._id,delete t._rev,l(t,void 0,e.files)});var t})}).then(function(){})})):(r=new a.Table("header"),i=new a.Table("text"),Promise.resolve())).then(function(){return r.getAllAsync()});var o,e},resetAsync:function(){return Promise.resolve()}}},{"./db":34}],4:[function(e,t,u){"use strict";var p=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},d=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(u,"__esModule",{value:!0});var n,i,h=e("./core"),g=e("./package"),m=e("./workspace"),o=e("./data"),v=pxt.Util,y=v.lf,r="",b=".cloudheader.json";function a(e){var t=new Error(e);return t.isUserError=!0,t.isSyncError=!0,t}u.OAUTH_TYPE="oauthType",u.OAUTH_STATE="oauthState",u.OAUTH_REDIRECT="oauthRedirect",u.OAUTH_HASH="oauthHash",u.OAUTH_REMEMBER_STATE="oauthRememberState";var s="token",l="tokenExp",c="AutoLogin",f="cloudUser";function _(e,t,n,r){var i=ts.pxtc.Util.guidGen();return pxt.storage.setLocal(u.OAUTH_TYPE,e),pxt.storage.setLocal(u.OAUTH_STATE,i),pxt.storage.setLocal(u.OAUTH_REDIRECT,n||window.location.hash),pxt.storage.setLocal(u.OAUTH_HASH,r),t?pxt.storage.setLocal(u.OAUTH_REMEMBER_STATE,i):pxt.storage.removeLocal(u.OAUTH_REMEMBER_STATE),i}function w(){pxt.storage.removeLocal(u.OAUTH_TYPE),pxt.storage.removeLocal(u.OAUTH_STATE),pxt.storage.removeLocal(u.OAUTH_REDIRECT),pxt.storage.removeLocal(u.OAUTH_HASH),pxt.storage.removeLocal(u.OAUTH_REMEMBER_STATE)}u.setOauth=_;var E=function(){function e(e,t,n,r){this.name=e,this.friendlyName=t,this.icon=n,this.urlRoot=r,this._token=pxt.storage.getLocal(this.name+s)}return e.prototype.hasSync=function(){return!0},e.prototype.syncError=function(e){throw a(e)},e.prototype.user=function(){return pxt.Util.jsonTryParse(pxt.storage.getLocal(this.name+f))},e.prototype.setUser=function(e){e?pxt.storage.setLocal(this.name+f,JSON.stringify(e)):pxt.storage.removeLocal(this.name+f),o.invalidate("sync:user"),o.invalidate("github:user")},e.prototype.token=function(){if(!this.hasTokenExpired())return this._token},e.prototype.reqAsync=function(e){var t=this.token();if(!t)throw this.pleaseLogin();return e.headers||(e.headers={}),e.headers.Authorization="Bearer "+t,/^https:\/\//.test(e.url)||(e.url=this.urlRoot+e.url),e.allowHttpErrors=!0,v.requestAsync(e)},e.prototype.getJsonAsync=function(t){var n=this;return this.reqAsync({url:t}).then(function(e){if(e.statusCode<300)return e.json;throw n.syncError(y("Invalid {0} response {1} at {2}",n.friendlyName,e.statusCode,t))})},e.prototype.fileSuffix=function(){return".mkcd-"+pxt.appTarget.id},e.prototype.createFileNameWithSuffix=function(e){return e.replace(/[~"#%&*:<>?\/\\{|}]+/g,"_")+this.fileSuffix()},e.prototype.parseTime=function(e){return Math.round(new Date(e).getTime()/1e3)},e.prototype.pleaseLogin=function(){var e=y("Please log in to {0}",this.friendlyName);h.infoNotification(e);var t=a(e);return t.isLoginError=!0,t},e.prototype.loginCheck=function(){var t=this;if(this.token())if(this.hasTokenExpired()){if(pxt.storage.getLocal(this.name+c))return void this.pleaseLogin();pxt.storage.setLocal(this.name+c,"yes"),this.loginAsync(void 0,!0).then(function(e){return e&&t.setNewToken(e.accessToken,e.rememberMe,e.expiresIn)}).done()}else O(this)},e.prototype.loginAsync=function(e,t){return v.userError("Not implemented"),Promise.resolve(void 0)},e.prototype.loginInner=function(){var e=this.name;h.showLoading(e+"login",y("Signing you in to {0}...",this.friendlyName));var t=_(e,!1),n=pxt.appTarget.cloud&&pxt.appTarget.cloud.cloudProviders&&pxt.appTarget.cloud.cloudProviders[this.name],r=window.location.protocol+"//"+window.location.host+"/oauth-redirect",i={client_id:n.client_id,response_type:"token",state:t,redirect_uri:r,scope:"",expires_in:86400};return n.redirect&&(i.redirect=n.redirect),i},e.prototype.loginCompleteInner=function(){var e=this.name;h.hideLoading(e+"login")},e.prototype.loginCallback=function(e,t){var n=this.name;pxt.storage.removeLocal(n+c),this.setNewToken(t.access_token,e,parseInt(t.expires_in)),this.setUser(void 0)},e.prototype.setNewToken=function(e,t,n){var r=this.name,i=r+s,o=r+l;if(this._token=e,!t)return pxt.debug("token storage non-opted in"),pxt.storage.removeLocal(i),void pxt.storage.removeLocal(o);if(e)if(pxt.storage.setLocal(i,e),n){var a=Math.round(Date.now()/1e3+.75*n);pxt.storage.setLocal(o,a+"")}else pxt.storage.removeLocal(o);else pxt.storage.removeLocal(i),pxt.storage.removeLocal(o);L()},e.prototype.hasTokenExpired=function(){var e=parseInt(pxt.storage.getLocal(this.name+l)||"0");return!(!e||e<v.nowSeconds())},e.prototype.logout=function(){pxt.storage.removeLocal(this.name+s),pxt.storage.removeLocal(this.name+l),pxt.storage.removeLocal(this.name+c),this._token=void 0,this.setUser(void 0),L()},e}();u.ProviderBase=E,u.reconstructMeta=function(e){var t=JSON.parse(e[pxt.CONFIG_NAME]),n={meta:{cloudId:pxt.CLOUD_ID+pxt.appTarget.id,editor:pxt.BLOCKS_PROJECT_NAME,name:t.name},source:JSON.stringify(e)},r=JSON.parse(e[b]||"{}");return r&&(r.editor&&(n.meta.editor=r.editor),r.target&&(n.meta.cloudId=pxt.CLOUD_ID+r.target),r.targetVersion&&(n.meta.targetVersions={target:r.targetVersion})),n};var k=e("./onedrive"),x=e("./googledrive"),S=e("./githubprovider");function C(){if(!n){n={};var t=pxt.appTarget.cloud;if(t&&t.cloudProviders&&[new k.Provider,new x.Provider].filter(function(e){return!!t.cloudProviders[e.name]}).forEach(function(e){return n[e.name]=e}),t&&t.githubPackages){var e=new S.GithubProvider;n[e.name]=e}}return pxt.Util.values(n)}function T(){return C().filter(function(e){return e.hasSync()}).map(function(e){return e})}function A(e){var t=C().filter(function(e){return e.name==S.PROVIDER_NAME})[0];return!t&&e&&v.userError(y("GitHub not configured in this editor.")),t}function O(e){e!==i&&(i=e,L())}function P(a,s){return p(this,void 0,void 0,function(){var t,n,r,i,o;return d(this,function(e){switch(e.label){case 0:return t={},s.saveId=t,[4,m.getTextAsync(s.id)];case 1:n=e.sent(),(n=v.flatClone(n))[b]=JSON.stringify(s,null,4),r=null==s.blobId,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,a.uploadAsync(s.blobId,s.blobVersion,n)];case 3:return i=e.sent(),[3,5];case 4:if(409==(o=e.sent()).statusCode)return h.warningNotification(y("Conflict saving {0}; please do a full cloud sync",s.name)),[2];throw o;case 5:return pxt.debug("synced up "+i.id),r?s.blobId=i.id:v.assert(s.blobId==i.id),s.blobVersion=i.version,s.saveId===t&&(s.blobCurrent=!0),[4,m.saveAsync(s,null,!0)];case 6:return e.sent(),[2]}})})}function N(r){return r?r.user()?Promise.resolve():r.getUserInfoAsync().then(function(e){if(!e)return Promise.resolve();if(r.hasSync()){var t=r.name+":"+e.id,n=pxt.storage.getLocal("cloudId");if(n&&n!=t)return h.confirmAsync({header:y("Sign in mismatch"),body:y("You have previously signed in with a different account. You can sign out now, which will locally clear all projects, or you can try to sign in again."),agreeClass:"red",agreeIcon:"sign out",agreeLbl:y("Sign out"),disagreeLbl:y("Sign in again"),disagreeIcon:"user circle"}).then(function(e){e?m.resetAsync().then(function(){location.hash="#reload",location.reload()}):console.log("Show the cloud sign in dialog")}),new Promise(function(){});pxt.storage.setLocal("cloudId",t)}return e.initials||(e.initials=function(e){if(!e)return"?";var t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}(e.name)),r.setUser(e),null}):Promise.resolve()}function I(e){e!=r&&(r=e,o.invalidate("sync:status"))}function L(){o.invalidate("sync:status"),o.invalidate("sync:user"),o.invalidate("sync:loggedin"),o.invalidate("sync:hascloud"),o.invalidate("sync:hassync"),o.invalidate("sync:provider"),o.invalidate("sync:providericon"),o.invalidate("github:user")}u.providers=T,u.githubProvider=A,u.ensureGitHubTokenAsync=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,A(!0).loginAsync()];case 1:return e.sent(),pxt.github.token||v.userError(y("Please sign in to GitHub to perform this operation.")),[2]}})})},u.setProvider=O,u.renameAsync=function(n,r){return p(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:t=i&&i.hasSync()&&i,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.updateAsync(n.blobId,r)];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})})},u.resetAsync=function(){var e=A(),t=e&&e.hasToken();return i&&i.logout(),i=null,pxt.storage.removeLocal("cloudId"),w(),L(),t&&e.logout(),Promise.resolve()},u.refreshToken=function(){i&&i.loginAsync(void 0,!0).done()},u.syncAsync=function(){return Promise.all([(e=A(),e?N(e):Promise.resolve()),function(){if(!i)return Promise.resolve(void 0);if(!i.hasSync())return N(i);var o=i,n=0,a=0,s={};function l(e){return pxt.debug("uninstall local "+e.blobId),e.isDeleted=!0,e.blobVersion="DELETED",e.blobCurrent=!1,m.saveAsync(e,null,!0)}function c(r,e){var i=r;i||(i={blobId:e.id}),a++,v.assert(i.blobId==e.id);var t=e.version;return pxt.debug("sync down "+i.blobId+" - "+t),o.downloadAsync(e.id).catch(h.handleNetworkError).then(function(e){v.assert(e.id==i.blobId);var t=e.content,n=JSON.parse(t[b]||"{}");return delete t[b],i.cloudSync=!0,i.blobCurrent=!0,i.blobVersion=e.version,i.name=n.name||i.name||"???",i.id=i.id||n.id||v.guidGen(),i.pubId=n.pubId,i.pubCurrent=n.pubCurrent,delete i.isDeleted,i.saveId=null,i.target=pxt.appTarget.id,i.recentUse=n.recentUse,i.modificationTime=n.modificationTime,i.modificationTime||(i.modificationTime=e.updatedAt||v.nowSeconds()),i.recentUse||(i.recentUse=i.modificationTime),s[i.blobId]=1,r?m.saveAsync(i,t,!0):m.importAsync(i,t,!0)}).then(function(){return u(--a)})}function r(e){h.infoNotification(e)}function u(e){var t="";0==a&&0==n?t=y("All synced"):(t=y("Syncing")+" (",a&&(t+=y("{0} down",a)),n&&(t+=(a?", ":"")+y("{0} up",n)),t+=")"),r(t)}function f(e){return n++,P(o,e).then(function(){return u(--n)})}return I("syncing"),N(o).then(function(){return o.listAsync()}).then(function(e){var t=m.getHeaders(!0),r=v.toDictionary(e,function(e){return e.id}),n=v.toDictionary(t.filter(function(e){return e.blobId}),function(e){return e.blobId}),i=t.filter(function(e){return e.cloudSync}).map(function(e){if(r.hasOwnProperty(e.blobId)){var t=r[e.blobId];return e.isDeleted?(console.log("deleted header: "+e.id),n=e,o.deleteAsync(n.blobId).then(function(){return l(n)})):t.version==e.blobVersion?e.blobCurrent?Promise.resolve():(console.log("might have synced up: ",e.name),f(e)):e.blobCurrent?(console.log("might have synced down: ",e.name),c(e,t)):(console.log("there's a conflict with these two: ",e,t),function(r,i){return p(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return[4,m.getTextAsync(r.id)];case 1:return t=e.sent(),[4,m.duplicateAsync(r,t)];case 2:return n=e.sent(),r.blobId=null,r.blobVersion=null,r.blobCurrent=!1,[4,m.saveAsync(r,t)];case 3:return e.sent(),[4,c(n,i)];case 4:return e.sent(),[2]}})})}(e,t))}return e.blobVersion?l(e):(console.log("might have synced up: ",e.name),f(e));var n});return i=i.concat(e.filter(function(e){return!n[e.id]}).map(function(e){return c(null,e)})),u(),Promise.all(i)}).then(function(){I(""),r(y("Syncing done"))}).then(function(){return g.notifySyncDone(s)}).catch(function(e){e.isSyncError?e.isLoginError||h.warningNotification(e.message):h.handleNetworkError(e)})}()]).then(function(){});var e},u.loginCheck=function(){var e=C();if(e.length){var t;if((t=h.parseQueryString(pxt.storage.getLocal(u.OAUTH_HASH)||"")).access_token){var n=pxt.storage.getLocal(u.OAUTH_TYPE);if(c=e.filter(function(e){return e.name==n})[0]){pxt.storage.removeLocal(u.OAUTH_HASH);var r=t.state===pxt.storage.getLocal(u.OAUTH_REMEMBER_STATE);c.loginCallback(r,t)}w()}if((t=h.parseQueryString((location.hash||"#").slice(1).replace(/%23access_token/,"access_token"))).access_token){var i=pxt.storage.getLocal(u.OAUTH_STATE),o=pxt.storage.getLocal(u.OAUTH_TYPE);if(i&&i==t.state&&(pxt.storage.removeLocal(u.OAUTH_STATE),pxt.storage.removeLocal(u.OAUTH_TYPE),r=t.state===pxt.storage.getLocal(u.OAUTH_REMEMBER_STATE),c=e.filter(function(e){return e.name==o})[0])){c.loginCallback(r,t);var a=pxt.storage.getLocal(u.OAUTH_REDIRECT)||"";location.hash=a}w()}for(var s=0,l=e;s<l.length;s++){var c;(c=l[s]).loginCheck()}}},u.saveToCloudAsync=function(e){return i&&i.hasSync()&&i?P(i,e):Promise.resolve()},o.mountVirtualApi("sync",{getSync:function(e){var t=i;switch(o.stripProtocol(e)){case"user":return t&&t.user();case"loggedin":return!!t;case"status":return r;case"hascloud":return 0<T().length;case"hassync":return t&&t.hasSync();case"provider":return t&&t.name;case"providericon":if(t)return t.icon;var n=T();return 1==n.length?n[0].icon:"user"}return null}}),o.mountVirtualApi("github",{getSync:function(e){var t=A();switch(o.stripProtocol(e)){case"user":return t&&t.user()}return null}}),o.mountVirtualApi("ping",{getAsync:function(e){var t=o.stripProtocol(e);if(/\.ico$/.test(e)){var n=pxt.BrowserUtils.isEdge()?t:t+"?v="+Math.random()+"&origin="+encodeURIComponent(window.location.origin),r=document.createElement("img");return new Promise(function(e,t){r.onload=function(){return e(!0)},r.onerror=function(){return e(!1)},r.src=n})}return pxt.Util.requestAsync({url:t,method:"GET",allowHttpErrors:!0}).then(function(e){return 200===e.statusCode||403==e.statusCode||400==e.statusCode}).catch(function(e){return!1})},expirationTime:function(e){return 864e5},isOffline:function(){return!pxt.Cloud.isOnline()}})},{"./core":31,"./data":33,"./githubprovider":37,"./googledrive":38,"./onedrive":42,"./package":43,"./workspace":45}],5:[function(e,t,n){"use strict";var d=this&&this.__assign||function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},B=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var F=e("./package"),i=e("./core"),a=e("./workspace"),q=pxt.Util;function o(e,t){var o=F.mainEditorPkg();o.forEachFile(function(e){return e.diagnostics=[]});var a="",s=void 0;if(0<e.length&&o.files["main.ts"]&&o.files["main.py"]&&t){var n=o.files["main.ts"].content,r=o.files["main.py"].content,i=pxtc.BuildSourceMapHelpers(t,n,r);s=i.ts.locToLoc}for(var l=function(t){if(t.fileName){a+=(t.category==ts.pxtc.DiagnosticCategory.Error?lf("error"):t.category==ts.pxtc.DiagnosticCategory.Warning?lf("warning"):lf("message"))+": "+t.fileName+"("+(t.line+1)+","+(t.column+1)+"): ";var e=o.filterFiles(function(e){return e.getTextFileName()==t.fileName})[0];if(e&&(e.diagnostics.push(t),s&&"main.ts"===t.fileName)){var n=s(t);if(n){var r=d(d({},t),n);o.files["main.py"].diagnostics.push(r)}}}var i=ts.pxtc.DiagnosticCategory[t.category].toLowerCase();a+=i+" TS"+t.code+": "+ts.pxtc.flattenDiagnosticMessageText(t.messageText,"\n")+"\n"},c=0,u=e;c<u.length;c++)l(u[c]);a&&pxt.log(a),a||(a=q.lf("Everything seems fine!\n"));var f=o.outputPkg.setFile("output.txt",a),p=e.filter(function(e){return e.category==ts.pxtc.DiagnosticCategory.Error});f.numDiagnosticsOverride=p.length,h(p)}var s="";function h(e){if(e&&e.length){var t={};e.filter(function(e){return e.code}).forEach(function(e){return t[e.code]=(t[e.code]||0)+1});var n=JSON.stringify(e);n!==s&&(pxt.tickEvent("diagnostics",t),s=n)}else s=""}var l,c,u,f=new Promise(function(){});function p(t){return function(e){return e.isUserError?(i.errorNotification(e.message),F.mainEditorPkg().outputPkg.setFile("output.txt",e.message).numDiagnosticsOverride=1,t):Promise.reject(e)}}function g(e){return _("assemble",{fileContent:e})}function m(e){return _("compile",{options:e})}function v(t,e,n){var r=F.mainPkg.getTargetOptions();return F.mainPkg.getCompileOptionsAsync(r).then(function(e){return e.fileSystem["main.ts"]=t,e.fileSystem["main.blocks"]="",e.snippetMode=n&&n.snippetMode||!1,-1===e.sourceFiles.indexOf("main.ts")&&e.sourceFiles.push("main.ts"),-1===e.sourceFiles.indexOf("main.blocks")&&e.sourceFiles.push("main.blocks"),e.ast=!0,y(e,"main.ts")})}function y(e,t){return _("decompile",{options:e,fileName:t})}function b(e,t){return _("pydecompile",{options:e,fileName:t})}function _(t,e){var n=Date.now();return pxt.debug("worker op: "+t),pxt.worker.getWorker(pxt.webConfig.workerjs).opAsync(t,e).then(function(e){return pxt.appTarget.compile.switches.time&&(pxt.log("Worker perf: "+t+" "+(Date.now()-n)+"ms"),e.times&&console.log(e.times)),pxt.debug("worker op done: "+t),e})}n.emptyProgram="(function (ectx) {\n'use strict';\nectx.runtime.setupPerfCounters([]);\nectx.setupDebugger(1)\nreturn function (s) {\n    // START\n    ectx.runtime.kill()\n    return ectx.leave(s, s.r0)\n}\n})\n",n.emptyCompileResult=function(){return{success:!0,diagnostics:[],times:{},breakpoints:[],outfiles:{"binary.js":n.emptyProgram.replace("// START",pxt.appTarget.simulator.emptyRunCode||"")}}},n.compileAsync=function(i){void 0===i&&(i={});var e=F.mainPkg.getTargetOptions();return e.isNative=i.native,F.mainEditorPkg().buildAssetsAsync().then(function(){return F.mainPkg.getCompileOptionsAsync(e)}).then(function(e){return i.debug&&(e.breakpoints=!0,e.justMyCode=!i.debugExtensionCode,e.testMode=!0),i.trace&&(e.breakpoints=!0,e.justMyCode=!0,e.trace=!0),e.computeUsedSymbols=!0,i.forceEmit&&(e.forceEmit=!0),/test=1/i.test(window.location.href)&&(e.testMode=!0),e}).then(m).then(function(r){var e=F.mainEditorPkg().outputPkg.files[pxtc.BINARY_ASM];if(e&&!r.outfiles[pxtc.BINARY_ASM]&&(r.outfiles[pxtc.BINARY_ASM]=e.content),i.jsMetaVersion&&r.outfiles[pxtc.BINARY_JS]){var t={simUrl:pxt.webConfig.simUrl.replace(/\/[^\-]*---simulator/,"/v"+pxt.appTarget.versions.target+"/---simulator"),cdnUrl:pxt.webConfig.cdnUrl,version:i.jsMetaVersion,target:pxt.appTarget.id,targetVersion:pxt.appTarget.versions.target},n=F.mainPkg.readGitJson();n&&(t.repo=pxt.github.parseRepoId(n.repo).fullName),r.outfiles[pxtc.BINARY_JS]="// meta="+JSON.stringify(t)+"\n"+r.outfiles[pxtc.BINARY_JS]}return F.mainEditorPkg().outputPkg.setFiles(r.outfiles),o(r.diagnostics),k().then(function(){if(!r.usedSymbols||!c)return r;for(var e=0,t=Object.keys(r.usedSymbols);e<t.length;e++){var n=t[e];r.usedSymbols[n]=q.lookup(c.byQName,n)}return r})}).catch(p(f))},n.assembleAsync=function(e){return g(".startaddr 536887040\n"+e).then(function(t){return g(".startaddr "+(536887296-4*(t.words.length+1))+"\n"+e).then(function(e){return q.assert(e.words.length==t.words.length),e})})},n.py2tsAsync=function(e){void 0===e&&(e=!1);var t=F.mainPkg.getTargetOptions();return E().then(function(){return F.mainPkg.getCompileOptionsAsync(t)}).then(function(e){return e.target.preferredEditor=pxt.PYTHON_PROJECT_NAME,_("py2ts",{options:e})})},n.completionsAsync=function(e,t,n,r,i,o){return _("getCompletions",{fileName:e,fileContent:i,position:t,wordStartPos:n,wordEndPos:r,light:o,runtime:pxt.appTarget.runtime})},n.syntaxInfoAsync=function(e,t,n,r){return _("syntaxInfo",{fileName:t,fileContent:r,position:n,infoType:e})},n.decompileAsync=function(t,n,r,i){var e=F.mainPkg.getTargetOptions();return F.mainPkg.getCompileOptionsAsync(e).then(function(e){return e.ast=!0,e.testMode=!0,e.alwaysDecompileOnStart=pxt.appTarget.runtime&&pxt.appTarget.runtime.onStartUnDeletable,y(e,t)}).then(function(e){if(e.success&&n&&r&&i){var t=pxt.blocks.layout.patchBlocksFromOldWorkspace(n,r,e.outfiles[i]);e.outfiles[i]=t}return F.mainEditorPkg().outputPkg.setFiles(e.outfiles),o(e.diagnostics),e})},n.decompileBlocksSnippetAsync=v,n.pySnippetToBlocksAsync=function(t,e){var n=F.mainPkg.getTargetOptions();return E().then(function(){return F.mainPkg.getCompileOptionsAsync(n)}).then(function(e){return e.fileSystem["main.py"]=t,e.fileSystem["main.blocks"]="",-1===e.sourceFiles.indexOf("main.py")&&e.sourceFiles.push("main.py"),-1===e.sourceFiles.indexOf("main.blocks")&&e.sourceFiles.push("main.blocks"),_("py2ts",{options:e})}).then(function(e){return v(e.outfiles["main.ts"])})},n.pySnippetArrayToBlocksAsync=function(r,e){var a=/^\s*namespace\s+[^\s]+\s*{([\S\s]*)}\s*$/im,t=F.mainPkg.getTargetOptions(),s=[];return E().then(function(){return F.mainPkg.getCompileOptionsAsync(t)}).then(function(e){for(var t=0;t<r.length;t++){var n="snippet_"+t;e.fileSystem[n+".py"]=r[t],e.sourceFiles.push(n+".py"),s.push(n)}return e.fileSystem["main.blocks"]="",-1===e.sourceFiles.indexOf("main.blocks")&&e.sourceFiles.push("main.blocks"),_("py2ts",{options:e})}).then(function(e){for(var t="",n=0,r=s;n<r.length;n++){var i=r[n],o=e.outfiles[i+".ts"].match(a);o&&o[1]&&(t+="{\n"+o[1]+"\n}\n")}return v(t)})},n.pyDecompileAsync=function(t){var e=F.mainPkg.getTargetOptions();return F.mainPkg.getCompileOptionsAsync(e).then(function(e){return e.ast=!0,e.testMode=!0,e.alwaysDecompileOnStart=pxt.appTarget.runtime&&pxt.appTarget.runtime.onStartUnDeletable,b(e,t)}).then(function(e){return F.mainEditorPkg().outputPkg.setFiles(e.outfiles),h(e.diagnostics.filter(function(e){return e.category==ts.pxtc.DiagnosticCategory.Error})),e})},n.decompilePythonSnippetAsync=function(t){var e=F.mainPkg.getTargetOptions();return F.mainPkg.getCompileOptionsAsync(e).then(function(e){return e.fileSystem["main.ts"]=t,e.fileSystem["main.py"]="",-1===e.sourceFiles.indexOf("main.ts")&&e.sourceFiles.push("main.ts"),-1===e.sourceFiles.indexOf("main.py")&&e.sourceFiles.push("main.py"),e.ast=!0,b(e,"main.ts")}).then(function(e){return e.outfiles["main.py"]})},n.workerOpAsync=_;var w=!1;function E(){return l||x()}function k(){return w||!c?_("apiInfo",{}).then(function(e){if(0!==Object.keys(e).length)return w=!1,ts.pxtc.localizeApisAsync(e,F.mainPkg)}).then(function(e){c=e}):Promise.resolve()}function x(){var e=F.mainEditorPkg().buildAssetsAsync().then(function(){return F.mainPkg.getCompileOptionsAsync()}).then(function(e){return e.testMode=!0,_("setOptions",{options:e})}).then(function(){return _("allDiags",{})}).then(function(e){return o(e.diagnostics,e.sourceMap)}).then(k).catch(p(null));return l||(l=e),e}function S(){return E().then(function(){return c})}function C(){if(!u){var t=F.mainPkg.resolveBannedCategories();return function(j,M){return r(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,c,u,f,p,d,h,g,m,v,y,b,_,w,E,k,x,S,C,T,A,O,P,N,I,L,R,D;return B(this,function(e){switch(e.label){case 0:if(!M)return[2,null];if(t="libs/"+pxt.appTarget.corepkg,!(n=M[t]))return[2,null];if(r=j.getAllFiles(),i=["main.ts",pxt.TUTORIAL_CODE_START,pxt.TUTORIAL_CODE_STOP,pxt.TILEMAP_CODE,pxt.IMAGES_CODE],Object.keys(r).some(function(e){return-1===i.indexOf(e)&&-1===e.indexOf("/")&&pxt.Util.endsWith(e,".ts")}))return[2,null];for(o=pxt.appTarget.bundleddirs.map(function(e){var t=pxt.appTarget.bundledpkgs[e.substr(e.lastIndexOf("/")+1)];return t?{dirname:e,files:t,config:JSON.parse(t[pxt.CONFIG_NAME])}:null}).filter(function(e){return e&&e.config}),a=j.pkgAndDeps(),s=[],l=[{dirname:t,info:n}],c=0,u=a;c<u.length;c++)if("built"!==(y=u[c]).id&&!y.isTopLevel()){for(f=!1,p=0,d=o;p<d.length;p++)if((h=d[p]).config.name===U(y)){l.push({dirname:h.dirname,info:M[h.dirname]}),f=!0;break}f||s.push(y)}return s.length?[4,H.createAsync()]:[3,5];case 1:g=e.sent(),m=0,v=s,e.label=2;case 2:return m<v.length?(y=v[m],[4,g.getAsync(y)]):[3,5];case 3:if(!(b=e.sent()))return pxt.debug("Could not find cached API info for "+U(y)+", waiting for full compile"),[2,null];pxt.debug("Fetched cached API info for "+U(y)),l.push({dirname:y.getPkgId(),info:b}),e.label=4;case 4:return m++,[3,2];case 5:for(_={byQName:{},jres:{}},w=0,E=l;w<E.length;w++)if(k=E[w]){for(x=k.info,S=k.dirname,C=0,T=Object.keys(x.apis.byQName);C<T.length;C++)A=T[C],x.apis.byQName[A].pkg=S;pxt.Util.jsonCopyFrom(_.byQName,x.apis.byQName),x.apis.jres&&pxt.Util.jsonCopyFrom(_.jres,x.apis.jres)}for(O=F.mainPkg.getJRes(),P=0,N=Object.keys(_.byQName);P<N.length;P++)I=N[P],L=_.byQName[I],(R=L.attributes.jres)&&("true"==R&&(R=I),(D=q.lookup(O||{},R))&&D.icon&&!L.attributes.iconURL&&(L.attributes.iconURL=D.icon),D&&D.data&&!L.attributes.jresURL&&(L.attributes.jresURL="data:"+D.mimeType+";base64,"+D.data));return[2,_]}})})}(F.mainEditorPkg(),pxt.getBundledApiInfo()).then(function(e){return e?ts.pxtc.localizeApisAsync(e,F.mainPkg).then(function(e){return u=pxtc.getBlocksInfo(e,t)}):S().then(function(e){var t=F.mainPkg.resolveBannedCategories();return u=pxtc.getBlocksInfo(e,t),function(h,g){return r(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,c,u,f,p,d;return B(this,function(e){switch(e.label){case 0:return t=pxt.Package.corePackages().map(function(e){return e.name}),(n=h.pkgAndDeps().filter(function(e){return"built"!==e.id&&!e.isTopLevel()&&-1===t.indexOf(e.getPkgId())})).length?(r=Object.keys(g.byQName),[4,H.createAsync()]):[3,5];case 1:i=e.sent(),o=0,a=n,e.label=2;case 2:if(!(o<a.length))return[3,5];for(s=a[o],l=s.getPkgId(),c={sha:null,apis:{byQName:{}}},u=0,f=r;u<f.length;u++)p=f[u],(d=g.byQName[p]).pkg===l&&(c.apis.byQName[p]=d);return[4,i.setAsync(s,c)];case 3:e.sent(),pxt.debug("Stored API info for "+U(s)),e.label=4;case 4:return o++,[3,2];case 5:return[2]}})})}(F.mainEditorPkg(),e)}).then(function(){return u})})}return Promise.resolve(u)}function T(){var i,e=F.mainPkg,o=F.getEditorPkg(e),a=o.header.targetVersion,s=o.files["main.blocks"]?o.files["main.blocks"].content:'<block type="'+ts.pxtc.ON_START_TYPE+'"></block>',l={};return pxt.debug("Applying upgrades to blocks"),pxt.BrowserUtils.loadBlocklyAsync().then(function(){return C()}).then(function(e){i=new Blockly.Workspace;var t=pxt.blocks.importXml(a,s,e,!0),n=Blockly.Xml.textToDom(t);pxt.blocks.domToWorkspaceNoEvents(n,i),pxtblockly.upgradeTilemapsInWorkspace(i,pxt.react.getTilemapProject());var r=Blockly.Xml.workspaceToDom(i);return l["main.blocks"]=Blockly.Xml.domToText(r),pxt.blocks.compileAsync(i,e)}).then(function(e){return l["main.ts"]=e.source,o.buildAssetsAsync()}).then(function(){for(var e=o.getAllFiles(),t=0,n=Object.keys(e).filter(function(e){return!/^main\.(blocks|ts|py)$/.test(e)});t<n.length;t++){var r=n[t];l[r]=e[r]}return O(l)}).then(function(){return{success:!0,editor:pxt.BLOCKS_PROJECT_NAME,patchedFiles:l}}).catch(function(){return pxt.debug("Block upgrade failed, falling back to TS"),A()})}function A(){var e=F.mainPkg,t=F.getEditorPkg(e),n=t.header.targetVersion,r={};return pxt.Util.values(t.files).filter(P).forEach(function(e){var t=pxt.patching.patchJavaScript(n,e.content);t!=e.content&&(r[e.name]=t)}),pxt.debug("Applying upgrades to TypeScript"),O(r).then(function(){return{success:!0,editor:pxt.JAVASCRIPT_PROJECT_NAME,patchedFiles:r}}).catch(function(e){return{success:!1,errorCodes:e.errorCodes}})}function O(n){var e=F.mainPkg;return F.mainEditorPkg().buildAssetsAsync().then(function(){return e.getCompileOptionsAsync()}).then(function(t){return n&&Object.keys(n).forEach(function(e){n[e]&&(t.fileSystem[e]=n[e])}),m(t)}).then(function(e){if(!e.success){var n={};e.diagnostics&&e.diagnostics.forEach(function(e){var t="TS"+e.code;n[t]=(n[t]||0)+1});var t=new Error("Compile failed on updated package");return t.errorCodes=n,Promise.reject(t)}return Promise.resolve()})}function P(e){return pxt.Util.endsWith(e.getName(),".ts")}function N(){return I(),_("reset",{})}function I(){u=c=l=null}function L(e){var t=JSON.stringify(e.getAllFiles())+pxt.appTarget.versions.pxt+"_"+pxt.appTarget.versions.target;return pxtc.U.sha256(t)}function U(e){var t=e.getKsPkg(),n=t._verspec;return pxt.github.isGithubId(n)?/^([^#]+)/.exec(n)[1]:t.config.name}n.refreshLanguageServiceApisInfo=function(){w=!0},n.apiSearchAsync=function(e){return k().then(function(){return e.localizedApis=c,e.localizedStrings=pxt.Util.getLocalizedStrings(),_("apiSearch",{search:e,blocks:function(){var e=F.mainPkg.resolveBannedCategories();if(e)return{bannedCategories:e}}()})})},n.projectSearchAsync=function(e){return k().then(function(){return _("projectSearch",{projectSearch:e})})},n.projectSearchClear=function(){return k().then(function(){return _("projectSearchClear",{})})},n.formatAsync=function(e,t){return _("format",{format:{input:e,pos:t}})},n.snippetAsync=function(e,t){var n=Promise.resolve();return t&&(n=x().then(function(){})),n.then(function(){return _("snippet",{snippet:{qName:e,python:t},runtime:pxt.appTarget.runtime})}).then(function(e){return e})},n.typecheckAsync=x,n.getApisInfoAsync=S,n.getBlocksAsync=C,n.applyUpgradesAsync=function(){var e=F.mainPkg,i=F.getEditorPkg(e),t=pxt.semver.parse(i.header.targetVersion||"0.0.0"),n=pxt.semver.parse(pxt.appTarget.versions.target);if(0===pxt.semver.cmp(t,n))return pxt.debug("Skipping project upgrade"),Promise.resolve({success:!0});var r=i.header.editor!==pxt.BLOCKS_PROJECT_NAME?A:T,o=!1;return O().catch(function(){return o=!0}).then(r).then(function(e){return e.success?(pxt.tickEvent("upgrade.success",{projectEditor:i.header.editor,upgradedEditor:e.editor,preUpgradeVersion:i.header.targetVersion||"unknown",projectNeverCompiled:""+o}),pxt.debug("Upgrade successful!"),(t=i,n=e.patchedFiles,r=e.editor,Object.keys(n).forEach(function(e){return t.setFile(e,n[e])}),t.header.targetVersion=pxt.appTarget.versions.target,t.header.editor=r,t.saveFilesAsync()).then(function(){return e})):(pxt.tickEvent("upgrade.failed",{projectEditor:i.header.editor,preUpgradeVersion:i.header.targetVersion||"unknown",errors:JSON.stringify(e.errorCodes),projectNeverCompiled:""+o}),pxt.debug("Upgrade failed; bailing out and leaving project as-is"),Promise.resolve(e));var t,n,r})},n.updatePackagesAsync=function(t,n){var r,i=F.mainEditorPkg(),o=0;return n&&n.startOperation(),a.getTextAsync(i.header.id).then(function(e){return a.makeBackupAsync(i.header,e)}).then(function(e){return r=e,i.header.backupRef=r.id,a.saveAsync(i.header)}).then(function(){return Promise.each(t,function(e){return n&&n.throwIfCancelled(),i.updateDepAsync(e.getPkgId()).then(function(){++o,n&&!n.isCancelled()&&n.reportProgress(o,t.length)})})}).then(function(){return F.loadPkgAsync(i.header.id)}).then(function(){return N()}).then(function(){return O()}).then(function(){return n&&n.throwIfCancelled(),delete i.header.backupRef,a.saveAsync(i.header)}).then(function(){return!0}).catch(function(){return a.restoreFromBackupAsync(i.header).then(function(){return!1})}).finally(function(){var e=Promise.resolve();return r&&(r.isDeleted=!0,e=a.forceSaveAsync(r)),e.finally(function(){n&&n.resolveCancel()})})},n.newProjectAsync=N,n.clearCaches=I,n.getPackagesWithErrors=function(){var t={},e=F.mainEditorPkg();if(e){var n=pxt.Package.corePackages().map(function(e){return e.name});e.forEachFile(function(e){e.diagnostics&&e.diagnostics.length&&e.epkg&&-1===n.indexOf(e.epkg.getPkgId())&&!e.epkg.isTopLevel()&&e.diagnostics.some(function(e){return e.category===ts.pxtc.DiagnosticCategory.Error})&&(t[e.epkg.getPkgId()]=e.epkg)})}return pxt.Util.values(t)};var H=function(){function r(e){this.db=e}return r.dbName=function(){return"__pxt_apis_"+(pxt.appTarget.id||"")},r.createAsync=function(){function t(){var e=new pxt.BrowserUtils.IDBWrapper(r.dbName(),2,function(e,t){t.result.createObjectStore(r.TABLE,{keyPath:r.KEYPATH})},function(){pxt.BrowserUtils.IDBWrapper.deleteDatabaseAsync(r.dbName())});return e.openAsync().then(function(){return new r(e)})}return t().catch(function(e){return console.log("db: failed to open api database, try delete entire store..."),pxt.BrowserUtils.IDBWrapper.deleteDatabaseAsync(r.dbName()).then(function(){return t()})})},r.prototype.getAsync=function(e){var t=U(e),n=L(e);return this.db.getAsync(r.TABLE,t).then(function(e){if(e&&e.hash===n)return e.apis})},r.prototype.setAsync=function(e,t){pxt.perf.measureStart("compiler db setAsync");var n={id:U(e),hash:L(e),apis:t};return this.db.setAsync(r.TABLE,n).then(function(){pxt.perf.measureEnd("compiler db setAsync")})},r.prototype.clearAsync=function(){return this.db.deleteAllAsync(r.TABLE).then(function(){return console.debug("db: all clean")}).catch(function(e){console.error("db: failed to delete all")})},r.TABLE="files",r.KEYPATH="id",r}();n.clearApiInfoDbAsync=function(){return H.createAsync().then(function(e){return e.clearAsync()}).catch(function(e){return pxt.BrowserUtils.IDBWrapper.deleteDatabaseAsync(H.dbName()).done()})}},{"./core":31,"./package":43,"./workspace":45}],6:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("react-redux"),s=e("./actions/dispatch"),l=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.render=function(){var e=this.props,t=e.title,n=e.text,r=e.options,i=e.dispatchHideAlert;return o.createElement("div",{className:"image-editor-alert-container",role:"region",onClick:i},o.createElement("div",{className:"image-editor-alert",role:"dialog"},o.createElement("div",{className:"title"},o.createElement("span",{className:"ms-Icon ms-Icon--Warning"}),o.createElement("span",null,t),o.createElement("span",{className:"ms-Icon ms-Icon--Cancel",role:"button",onClick:i})),o.createElement("div",{className:"text"},n),r&&o.createElement("div",{className:"options"},r.map(function(e,t){return o.createElement("div",{key:t,className:"button",role:"button",onClick:e.onClick},e.label)}))))},e}(o.Component);var c={dispatchHideAlert:s.dispatchHideAlert};n.Alert=a.connect(function(e,t){return e.editor?t:{}},c)(l)},{"./actions/dispatch":19,react:228,"react-redux":207}],7:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var b=e("react"),o=e("react-redux"),a=e("./actions/dispatch"),_=e("./Button"),w=e("./util"),l=e("../../assets"),s=function(t){function e(e){var s=t.call(this,e)||this;return s.handleWidthChange=function(e){var t=e.target.value,n=parseInt(t),r=s.props,i=r.aspectRatioLocked,o=r.imageDimensions;!isNaN(n)&&i?s.setState({width:n+"",height:Math.floor(n*(o[1]/o[0]))+""}):s.setState({width:t})},s.handleHeightChange=function(e){var t=e.target.value,n=parseInt(t),r=s.props,i=r.aspectRatioLocked,o=r.imageDimensions;!isNaN(n)&&i?s.setState({height:n+"",width:Math.floor(n*(o[0]/o[1]))+""}):s.setState({height:t})},s.handleDimensionalBlur=function(){var e=s.props,t=e.imageDimensions,n=e.dispatchChangeImageDimensions,r=parseInt(s.state.width),i=parseInt(s.state.height),o=isNaN(r)?t[0]:Math.min(Math.max(r,1),512),a=isNaN(i)?t[1]:Math.min(Math.max(i,1),512);o===t[0]&&a===t[1]||n([o,a]),s.setState({width:null,height:null})},s.handleDimensionalKeydown=function(e){13===("number"==typeof e.which?e.which:e.keyCode)&&e.currentTarget.blur()},s.handleAssetNameChange=function(e){var t=null;pxt.validateAssetName(e.target.value)?l.isNameTaken(e.target.value)&&e.target.value!==s.props.assetName&&(t=lf("This name is already used elsewhere in your project")):t=lf("Names may only contain letters, numbers, '-', '_', and space"),s.setState({assetName:e.target.value,assetNameMessage:t})},s.handleAssetNameBlur=function(){var e=s.props,t=e.dispatchChangeAssetName,n=e.assetName,r=s.state.assetName;s.state.assetName!==n&&pxt.validateAssetName(s.state.assetName)&&!l.isNameTaken(s.state.assetName)&&t(r),s.setState({assetName:null,assetNameMessage:null})},s.zoomIn=function(){s.props.dispatchChangeZoom(1)},s.zoomOut=function(){s.props.dispatchChangeZoom(-1)},s.state={},s}return i(e,t),e.prototype.render=function(){var e=this.props,t=e.imageDimensions,n=e.cursorLocation,r=e.hasUndo,i=e.hasRedo,o=e.dispatchUndoImageEdit,a=e.dispatchRedoImageEdit,s=e.aspectRatioLocked,l=e.onionSkinEnabled,c=e.dispatchToggleAspectRatioLocked,u=e.dispatchToggleOnionSkinEnabled,f=e.resizeDisabled,p=e.singleFrame,d=e.onDoneClick,h=e.assetName,g=this.state.assetNameMessage,m=null==this.state.width?t[0]:this.state.width,v=null==this.state.height?t[1]:this.state.height,y=null==this.state.assetName?h||"":this.state.assetName;return b.createElement("div",{className:"image-editor-bottombar"},!f&&b.createElement("div",{className:"image-editor-resize"},b.createElement("input",{className:"image-editor-input",title:lf("Image Width"),value:m,tabIndex:0,onChange:this.handleWidthChange,onBlur:this.handleDimensionalBlur,onKeyDown:this.handleDimensionalKeydown}),b.createElement(_.IconButton,{onClick:c,iconClass:s?"ms-Icon ms-Icon--Lock":"ms-Icon ms-Icon--Unlock",title:s?lf("Unlock Aspect Ratio"):lf("Lock Aspect Ratio"),toggle:!s,noTab:!0}),b.createElement("input",{className:"image-editor-input",title:lf("Image Height"),value:v,tabIndex:0,onChange:this.handleHeightChange,onBlur:this.handleDimensionalBlur,onKeyDown:this.handleDimensionalKeydown})),!p&&b.createElement("div",{className:"image-editor-seperator"}),!p&&b.createElement("div",null,b.createElement(_.IconButton,{onClick:u,iconClass:"ms-Icon ms-Icon--MapLayers",title:l?lf("Hide Previous Frame"):lf("Show Previous Frame"),toggle:!l})),n&&!f&&b.createElement("div",{className:"image-editor-seperator"}),b.createElement("div",{className:"image-editor-coordinate-preview"},n&&n[0]+", "+n[1]),b.createElement("div",{className:"image-editor-change-name"},b.createElement("input",{className:"image-editor-input",title:lf("Asset Name"),value:y,placeholder:lf("Asset Name"),tabIndex:0,onChange:this.handleAssetNameChange,onBlur:this.handleAssetNameBlur,onKeyDown:this.handleDimensionalKeydown}),g&&b.createElement("div",{className:"ui pointing below red basic label"},g)),b.createElement("div",{className:"image-editor-undo-redo"},b.createElement(_.IconButton,{title:lf("Undo"),iconClass:"ms-Icon ms-Icon--Undo",onClick:r?o:null,disabled:!r}),b.createElement(_.IconButton,{title:lf("Redo"),iconClass:"ms-Icon ms-Icon--Redo",onClick:i?a:null,disabled:!i})),b.createElement("div",{className:"image-editor-seperator"}),b.createElement("div",{className:"image-editor-zoom-controls"},b.createElement(_.IconButton,{onClick:this.zoomOut,iconClass:"ms-Icon ms-Icon--ZoomOut",title:lf("Zoom Out"),toggle:!0}),b.createElement(_.IconButton,{onClick:this.zoomIn,iconClass:"ms-Icon ms-Icon--ZoomIn",title:lf("Zoom In"),toggle:!0})),b.createElement("div",{role:"button",className:"image-editor-confirm",title:lf("Done"),tabIndex:0,onClick:d,onKeyDown:w.fireClickOnlyOnEnter},lf("Done")))},e}(b.Component);n.BottomBarImpl=s;var c={dispatchChangeImageDimensions:a.dispatchChangeImageDimensions,dispatchUndoImageEdit:a.dispatchUndoImageEdit,dispatchRedoImageEdit:a.dispatchRedoImageEdit,dispatchToggleAspectRatioLocked:a.dispatchToggleAspectRatioLocked,dispatchToggleOnionSkinEnabled:a.dispatchToggleOnionSkinEnabled,dispatchChangeZoom:a.dispatchChangeZoom,dispatchChangeAssetName:a.dispatchChangeAssetName};n.BottomBar=o.connect(function(e,t){var n=e.store,r=n.present,i=n.past,o=n.future,a=e.editor;if(!r)return{};var s=a.isTilemap?r.tilemap.bitmap:r.frames[r.currentFrame].bitmap;return{imageDimensions:[s.width,s.height],aspectRatioLocked:r.aspectRatioLocked,onionSkinEnabled:a.onionSkinEnabled,cursorLocation:a.cursorLocation,resizeDisabled:a.resizeDisabled,assetName:a.assetName,hasUndo:!!i.length,hasRedo:!!o.length}},c)(s)},{"../../assets":2,"./Button":8,"./actions/dispatch":19,"./util":28,react:228,"react-redux":207}],8:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("react"),l=e("./util"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.iconClass,r=e.onClick,i=e.toggle,o=e.disabled,a=e.noTab;return s.createElement("div",{role:"button",className:"image-editor-button "+(i?"toggle":"")+" "+(o?"disabled":""),title:t,tabIndex:a||o?-1:0,onClick:r,onKeyDown:l.fireClickOnlyOnEnter},s.createElement("span",{className:n}))},t}(s.Component);n.IconButton=o},{"./util":28,react:228}],9:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("./actions/dispatch"),s=e("react-redux"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handlers=[],e}return i(e,t),e.prototype.render=function(){var e=this.props.selected;return o.createElement("div",{className:"cursor-buttons"},o.createElement("div",{className:"cursor-button-outer "+(1===e?"selected":""),title:lf("Small Cursor (1px)"),role:"button",onClick:this.clickHandler(1)},o.createElement("div",{className:"cursor-button small"})),o.createElement("div",{className:"cursor-button-outer "+(3===e?"selected":""),title:lf("Medium Cursor (3px)"),role:"button",onClick:this.clickHandler(3)},o.createElement("div",{className:"cursor-button medium"})),o.createElement("div",{className:"cursor-button-outer "+(5===e?"selected":""),title:lf("Large Cursor (5px)"),role:"button",onClick:this.clickHandler(5)},o.createElement("div",{className:"cursor-button large"})))},e.prototype.clickHandler=function(e){var t=this;return this.handlers[e]||(this.handlers[e]=function(){(0,t.props.dispatchChangeCursorSize)(e)}),this.handlers[e]},e}(o.Component);var c={dispatchChangeCursorSize:a.dispatchChangeCursorSize};n.CursorSizes=s.connect(function(e,t){var n=e.editor;return n?{selected:n.cursorSize}:{}},c)(l)},{"./actions/dispatch":19,react:228,"react-redux":207}],10:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var l=e("react"),o=function(n){function e(e){var t=n.call(this,e)||this;return t.handlers=[],t.handleDropdownClick=function(){t.setState({open:!t.state.open})},t.state={open:!1},t}return i(e,n),e.prototype.componentDidUpdate=function(){this.handlers=[]},e.prototype.componentWillUnmount=function(){this.handlers=null},e.prototype.render=function(){var e,t,n=this,r=this.props,i=r.options,o=r.selected,a=this.state.open,s=i[o];return l.createElement("div",{className:"image-editor-dropdown-outer"},l.createElement("button",{className:"image-editor-dropdown","aria-haspopup":"listbox",onClick:this.handleDropdownClick,tabIndex:-1},(null===(e=s)||void 0===e?void 0:e.text)||"",l.createElement("span",{className:"image-editor-dropdown-chevron ms-Icon ms-Icon--ChevronDown"})),l.createElement("ul",{tabIndex:-1,role:"listbox","aria-activedescendant":null===(t=s)||void 0===t?void 0:t.id,className:a&&i.length?"":"hidden"},i.map(function(e,t){return l.createElement("li",{key:e.id,role:"option","aria-selected":t===o,className:t===o?"selected":"",onClick:n.clickHandler(t)},e.text)})))},e.prototype.clickHandler=function(e){var t=this;if(!this.handlers[e]){var n=this.props,r=n.onChange,i=n.options;this.handlers[e]=function(){t.setState({open:!1}),r(i[e],e)}}return this.handlers[e]},e}(l.Component);n.Dropdown=o},{react:228}],11:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("react-redux"),b=e("./store/imageReducer"),s=e("./actions/dispatch"),c=e("./util"),_=e("./toolDefinitions"),y=e("../../assets"),w="image/x-mkcd-f4",l=pxt.BrowserUtils.isEdge()?25:1,u=pxt.BrowserUtils.isEdge()?2:1,f=[b.TileDrawingMode.Wall],p=function(e){function t(){var l=null!==e&&e.apply(this,arguments)||this;return l.cursor=_.ToolCursor.Crosshair,l.zoom=2.5,l.panX=0,l.panY=0,l.hasInteracted=!1,l.tileCache=[],l.onKeyDown=function(e){var t,n,r,i,o,a;if(l.hasInteracted=!0,l.shouldHandleCanvasShortcut()&&(null===(n=null===(t=l.editState)||void 0===t?void 0:t.floating)||void 0===n?void 0:n.image)){var s=!1;switch(e.key){case"ArrowLeft":l.editState.layerOffsetX=Math.max(l.editState.layerOffsetX-1,-l.editState.floating.image.width),s=!0;break;case"ArrowUp":l.editState.layerOffsetY=Math.max(l.editState.layerOffsetY-1,-l.editState.floating.image.height),s=!0;break;case"ArrowRight":l.editState.layerOffsetX=Math.min(l.editState.layerOffsetX+1,l.editState.width),s=!0;break;case"ArrowDown":l.editState.layerOffsetY=Math.min(l.editState.layerOffsetY+1,l.editState.height),s=!0}s&&(l.props.dispatchImageEdit(l.editState.toImageState()),e.preventDefault())}if(!e.repeat){switch(!e.ctrlKey&&!e.metaKey||"c"!==e.key&&"v"!==e.key||e.stopPropagation(),(e.ctrlKey||e.metaKey)&&"a"===e.key&&l.shouldHandleCanvasShortcut()&&(l.selectAll(),e.preventDefault()),"Escape"==e.key&&(null===(i=null===(r=l.editState)||void 0===r?void 0:r.floating)||void 0===i?void 0:i.image)&&l.shouldHandleCanvasShortcut()&&(l.cancelSelection(),e.preventDefault()),("Backspace"===e.key||"Delete"===e.key)&&(null===(a=null===(o=l.editState)||void 0===o?void 0:o.floating)||void 0===a?void 0:a.image)&&l.shouldHandleCanvasShortcut()&&(l.deleteSelection(),e.preventDefault()),l.lastTool=l.props.tool,e.keyCode){case 18:l.props.dispatchChangeImageTool(b.ImageEditorTool.ColorSelect),e.preventDefault();break;case 32:l.props.dispatchChangeImageTool(b.ImageEditorTool.Pan);break;default:l.lastTool=null}l.updateCursor(!1,!1)}},l.onKeyUp=function(e){null!=l.lastTool&&(l.props.dispatchChangeImageTool(l.lastTool),l.lastTool=null,l.updateCursor(!1,!1))},l.onCopy=function(e){var t,n;if(l.props.tool===b.ImageEditorTool.Marquee&&(null===(n=null===(t=l.editState)||void 0===t?void 0:t.floating)||void 0===n?void 0:n.image))if(e.preventDefault(),l.props.isTilemap)e.clipboardData.setData("application/makecode-tilemap",JSON.stringify(c.createTilemapPatchFromFloatingLayer(l.editState,l.props.tilemapState.tileset)));else{var r=pxt.sprite.bitmapToImageLiteral(l.editState.floating.image,"typescript");e.clipboardData.setData("application/makecode-image",r),e.clipboardData.setData("text/plain",r)}},l.onPaste=function(e){if(l.props.isTilemap){var t=e.clipboardData.getData("application/makecode-tilemap"),n=void 0;try{n=JSON.parse(t)}catch(e){}if(!(n&&n.map&&n.layers&&n.tiles))return;return e.preventDefault(),void l.applyTilemapPatch(n)}var r=e.clipboardData.getData("application/makecode-image");if(!r){var i=e.clipboardData.getData("text/plain"),o=/img(`|\(""")[\s\da-f.#tngrpoyw]+(`|"""\))/im.exec(i);o&&(r=o[0])}var a=r&&pxt.sprite.imageLiteralToBitmap(r);a&&a.width&&a.height&&(e.preventDefault(),l.props.tool!==b.ImageEditorTool.Marquee&&l.props.dispatchChangeImageTool(b.ImageEditorTool.Marquee),l.editState.setFloatingLayer(a),l.props.dispatchImageEdit(l.editState.toImageState()))},l.preventContextMenu=function(e){return e.preventDefault()},l}return i(t,e),t.prototype.render=function(){var n=this,e=this.getImageState(),t=!e||e.bitmap.height>e.bitmap.width;return o.createElement("div",{ref:"canvas-bounds",className:"image-editor-canvas "+(t?"portrait":"landscape"),onContextMenu:this.preventContextMenu},o.createElement("div",{className:"paint-container"},o.createElement("canvas",{ref:"paint-surface-bg",className:"paint-surface"}),o.createElement("canvas",{ref:"paint-surface",className:"paint-surface"}),f.map(function(e,t){return o.createElement("canvas",{ref:"paint-surface-"+e.toString(),className:"paint-surface overlay "+(n.props.overlayEnabled?"":"hide"),key:t})}),o.createElement("div",{ref:"floating-layer-border",className:"image-editor-floating-layer"})))},t.prototype.componentDidMount=function(){var e,t=this;null===(e=document.activeElement)||void 0===e||e.blur(),this.cellWidth=this.props.isTilemap?this.props.tilemapState.tileset.tileWidth*u:l,this.canvas=this.refs["paint-surface"],this.background=this.refs["paint-surface-bg"],this.floatingLayer=this.refs["floating-layer-border"],this.canvasLayers=f.map(function(e){return t.refs["paint-surface-"+e.toString()]}),c.bindGestureEvents(this.refs["canvas-bounds"],this);var n=this.refs["canvas-bounds"];n.addEventListener("wheel",function(e){t.hasInteracted=!0,t.updateZoom(e.deltaY/30,e.clientX,e.clientY),e.preventDefault()}),n.addEventListener("mousemove",function(e){e.button||(t.hasHover=!0),t.edit||t.updateCursorLocation(e)}),n.addEventListener("mouseout",function(e){t.edit||t.updateCursorLocation(null)}),document.addEventListener("keydown",this.onKeyDown,!0),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("copy",this.onCopy),document.addEventListener("paste",this.onPaste);var r=this.getImageState();this.editState=_.getEditState(r,this.props.isTilemap,this.props.drawingMode),this.redraw(),this.updateBackground()},t.prototype.componentDidUpdate=function(){if(!this.edit||!this.editState){var e=this.getImageState();this.editState=_.getEditState(e,this.props.isTilemap,this.props.drawingMode)}if(this.cellWidth=this.props.isTilemap?this.props.tilemapState.tileset.tileWidth*u:l,this.props.zoomDelta||0===this.props.zoomDelta)return 0===this.props.zoomDelta?this.hasInteracted||this.zoomToCanvas():(this.hasInteracted=!0,this.updateZoom(this.props.zoomDelta)),void this.props.dispatchChangeZoom(null);this.redraw(),this.updateBackground()},t.prototype.componentWillUnmount=function(){this.tileCache=[],document.removeEventListener("keydown",this.onKeyDown,!0),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("copy",this.onCopy),document.removeEventListener("paste",this.onPaste)},t.prototype.onClick=function(e,t){this.hasInteracted=!0,this.isPanning()||(this.isColorSelect()?this.selectCanvasColor(e,t):(this.updateCursorLocation(e),this.inBounds(this.cursorLocation[0],this.cursorLocation[1])&&(this.startEdit(!!t),this.updateEdit(this.cursorLocation[0],this.cursorLocation[1]),this.commitEdit())))},t.prototype.onDragStart=function(e,t){this.hasInteracted=!0,this.isPanning()?(this.lastPanX=e.clientX,this.lastPanY=e.clientY,this.updateCursor(!0,!1)):this.isColorSelect()?this.selectCanvasColor(e,t):(this.updateCursorLocation(e),this.startEdit(!!t))},t.prototype.onDragMove=function(e){if(this.isPanning()&&null!=this.lastPanX&&null!=this.lastPanY)this.panX+=this.lastPanX-e.clientX,this.panY+=this.lastPanY-e.clientY,this.lastPanX=e.clientX,this.lastPanY=e.clientY,this.updateCursor(!0,!1);else{if(!this.edit)return;this.updateCursorLocation(e)&&this.updateEdit(this.cursorLocation[0],this.cursorLocation[1])}},t.prototype.onDragEnd=function(e){if(this.isPanning()&&null!=this.lastPanX&&null!=this.lastPanY)this.panX+=this.lastPanX-e.clientX,this.panY+=this.lastPanY-e.clientY,this.lastPanX=void 0,this.lastPanY=void 0,this.updateCursor(!1,!1);else{if(!this.edit)return;this.updateCursorLocation(e)&&this.updateEdit(this.cursorLocation[0],this.cursorLocation[1]),this.commitEdit()}},t.prototype.updateCursorLocation=function(e){if(!e)return this.cursorLocation&&(this.cursorLocation=null,this.props.dispatchChangeCursorLocation(null),this.edit||this.redraw()),!1;if(this.canvas){var t=this.canvas.getBoundingClientRect(),n=Math.floor((e.clientX-t.left)/t.width*this.imageWidth),r=Math.floor((e.clientY-t.top)/t.height*this.imageHeight);return!(this.cursorLocation&&n===this.cursorLocation[0]&&r===this.cursorLocation[1]||(this.cursorLocation=[n,r],this.hasHover&&this.props.dispatchChangeCursorLocation(n<0||r<0||n>=this.imageWidth||r>=this.imageHeight?null:this.cursorLocation),this.edit||this.redraw(),this.updateCursor(!!this.edit,this.editState.inFloatingLayer(n,r)),0))}return!(this.cursorLocation=[0,0])},t.prototype.updateCursor=function(e,t){var n=this.props.tool,r=_.tools.find(function(e){return e.tool===n});r?t?e?this.updateCursorCore(r.downLayerCursor||r.hoverLayerCursor||r.downCursor||r.hoverCursor):this.updateCursorCore(r.hoverLayerCursor||r.hoverCursor):e?this.updateCursorCore(r.downCursor||r.hoverCursor):this.updateCursorCore(r.hoverCursor):this.updateCursorCore(_.ToolCursor.Default)},t.prototype.updateCursorCore=function(e){this.cursor=e||_.ToolCursor.Default,this.updateBackground()},t.prototype.startEdit=function(e){var t=this.props,n=t.tool,r=t.toolWidth,i=t.selectedColor,o=t.backgroundColor,a=t.drawingMode,s=this.cursorLocation,l=s[0],c=s[1];if(this.inBounds(l,c)){var u=a==b.TileDrawingMode.Wall?2:e?o:i;this.edit=_.getEdit(n,this.editState,u,r),this.edit.start(this.cursorLocation[0],this.cursorLocation[1],this.editState)}},t.prototype.updateEdit=function(e,t){this.edit&&this.edit.inBounds(e,t)&&(this.edit.update(e,t),this.redraw())},t.prototype.commitEdit=function(){var e=this.props.dispatchImageEdit,t=this.getImageState();this.edit&&(this.editState=_.getEditState(t,this.props.isTilemap,this.props.drawingMode),this.edit.doEdit(this.editState),this.edit=void 0,e(this.editState.toImageState()))},t.prototype.redraw=function(){var t=this,e=this.props,n=e.prevFrame,r=e.onionSkinEnabled,i=e.selectedColor,o=e.toolWidth,a=e.drawingMode,s=e.tool,l=this.getImageState(),c=a==b.TileDrawingMode.Wall?2:i;if(this.canvas){if(this.imageWidth=l.bitmap.width,this.imageHeight=l.bitmap.height,this.canvas.width=l.bitmap.width*this.cellWidth,this.canvas.height=l.bitmap.height*this.cellWidth,this.canvasLayers.forEach(function(e){e.width=t.canvas.width,e.height=t.canvas.height}),r&&n){var u=_.getEditState(n,this.props.isTilemap,a),f=this.canvas.getContext("2d");f.globalAlpha=.5,this.drawImage(u.image),u.floating&&u.floating.image&&this.drawImage(u.floating.image,u.layerOffsetX,u.layerOffsetY,!0),f.globalAlpha=1}if(this.edit){var p=this.editState.copy();p.setActiveLayer(a),this.edit.doEdit(p),this.drawImage(p.image),this.drawOverlayLayers(p.overlayLayers),this.redrawFloatingLayer(p)}else if(this.drawImage(this.editState.image),this.drawOverlayLayers(this.editState.overlayLayers),this.redrawFloatingLayer(this.editState),this.cursorLocation&&this.shouldDrawCursor()){var d=s===b.ImageEditorTool.Erase?0:c;this.drawCursor(this.cursorLocation[0]-(o>>1),this.cursorLocation[1]-(o>>1),o,d)}if(this.background.width!=this.canvas.width<<1||this.background.height!=this.canvas.height<<1){this.background.width=this.canvas.width<<1,this.background.height=this.canvas.height<<1;var h=this.background.getContext("2d");h.imageSmoothingEnabled=!1,h.fillStyle="#aeaeae",h.fillRect(0,0,this.background.width,this.background.height),h.fillStyle="#dedede";for(var g=this.imageHeight<<1,m=this.imageWidth<<1,v=0;v<m;v++)for(var y=0;y<g;y++)v+y&1&&h.fillRect(v*this.cellWidth,y*this.cellWidth,this.cellWidth,this.cellWidth)}}},t.prototype.drawImage=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!0),this.props.isTilemap?this.drawTilemap(e,t,n,r):this.drawBitmap(e,t,n,r)},t.prototype.redrawFloatingLayer=function(e,t){void 0===t&&(t=!1);var n=this.refs["floating-layer-border"];if(e.floating&&e.floating.image){t||(this.drawImage(e.floating.image,e.layerOffsetX,e.layerOffsetY,!0),e.floating.overlayLayers&&this.drawOverlayLayers(e.floating.overlayLayers,e.layerOffsetX,e.layerOffsetY));var r=this.canvas.getBoundingClientRect(),i=Math.max(e.layerOffsetX,0),o=Math.max(e.layerOffsetY,0),a=Math.min(e.layerOffsetX+e.floating.image.width,e.width),s=Math.min(e.layerOffsetY+e.floating.image.height,e.height),l=r.width/e.width,c=r.height/e.height;n.style.display="",(a-i<1||s-o<1)&&(n.style.display="none"),n.style.left=-this.panX+l*i+"px",n.style.top=-this.panY+c*o+"px",n.style.width=l*(a-i)+"px",n.style.height=c*(s-o)+"px",n.style.borderLeft=0<=i?"":"none",n.style.borderTop=0<=o?"":"none",n.style.borderRight=a<e.width?"":"none",n.style.borderBottom=s<e.height?"":"none"}else n.style.display="none"},t.prototype.drawOverlayLayers=function(e,n,r,i){var o=this;void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=!0),e&&e.forEach(function(e,t){o.drawBitmap(e,n,r,i,o.cellWidth,o.canvasLayers[t])})},t.prototype.drawBitmap=function(e,t,n,r,i,o){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===i&&(i=this.cellWidth),void 0===o&&(o=this.canvas);var a=this.props.colors,s=o.getContext("2d");s.imageSmoothingEnabled=!1;for(var l=0;l<e.width;l++)for(var c=0;c<e.height;c++){var u=e.get(l,c);u?(s.fillStyle=a[u],s.fillRect((l+t)*i,(c+n)*i,i,i)):r||s.clearRect((l+t)*i,(c+n)*i,i,i)}},t.prototype.generateTile=function(e,t){if(!t.tiles[e])return null;var n=document.createElement("canvas");return n.width=t.tileWidth*u,n.height=t.tileWidth*u,this.drawBitmap(pxt.sprite.Bitmap.fromData(t.tiles[e].bitmap),0,0,!0,u,n),this.tileCache[e]=n},t.prototype.drawTilemap=function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===i&&(i=this.canvas);var o,a,s=this.props.tilemapState.tileset,l=i.getContext("2d");this.tileCache=[],l.imageSmoothingEnabled=!1;for(var c=0;c<e.width;c++)for(var u=0;u<e.height;u++)if((o=e.get(c,u))&&o<s.tiles.length){if((a=this.tileCache[o])||(a=this.generateTile(o,s)),!a)continue;l.drawImage(a,(c+t)*this.cellWidth,(u+n)*this.cellWidth)}else r||l.clearRect((c+t)*this.cellWidth,(u+n)*this.cellWidth,this.cellWidth,this.cellWidth)},t.prototype.drawCursor=function(e,t,n,r){var i=this.props.isTilemap&&this.props.drawingMode===b.TileDrawingMode.Wall,o=(i?this.canvasLayers[0]:this.canvas).getContext("2d");if(o.imageSmoothingEnabled=!1,r)if(this.props.isTilemap&&!i){if(r>=this.props.tilemapState.tileset.tiles.length)return;var a=this.tileCache[r];if(a||(a=this.generateTile(r,this.props.tilemapState.tileset)),!a)return;for(var s=0;s<n;s++)for(var l=0;l<n;l++)o.drawImage(a,(e+s)*this.cellWidth,(t+l)*this.cellWidth)}else o.fillStyle=this.props.colors[r],o.fillRect(e*this.cellWidth,t*this.cellWidth,n*this.cellWidth,n*this.cellWidth);else o.clearRect(e*this.cellWidth,t*this.cellWidth,n*this.cellWidth,n*this.cellWidth)},t.prototype.updateBackground=function(){this.refs["canvas-bounds"].style.cursor=this.cursor,this.canvas.style.cursor=this.cursor,this.updateZoom(0)},t.prototype.updateZoom=function(e,t,n){var r=this.refs["canvas-bounds"];if(this.canvas&&r){var i=r.getBoundingClientRect();t=void 0===t?i.left+(i.width>>1):t,n=void 0===n?i.top+(i.height>>1):n;var o=this.clientToCanvas(t,n,i),a=o.canvasX,s=o.canvasY;this.zoom=Math.max(this.zoom+e,2.5);var l=this.getCanvasUnit(i),c=this.clientToCanvas(t,n,i),u=c.canvasX,f=c.canvasY;if(isNaN(u)||isNaN(f)||isNaN(a)||isNaN(s))return;this.panX+=(a-u)*l,this.panY+=(s-f)*l,this.applyZoom()}},t.prototype.getCenteredPan=function(){var e=[0,0],t=e[0],n=e[1],r=this.refs["canvas-bounds"].getBoundingClientRect(),i=this.canvas.getBoundingClientRect();return i.width<r.width&&(t=-((r.width>>1)-(i.width>>1))),i.height<r.height&&(n=-((r.height>>1)-(i.height>>1))),[t,n]},t.prototype.zoomToCanvas=function(){var e;this.zoom=10;var t=this.refs["canvas-bounds"];this.applyZoom(),this.canvas&&t&&(e=this.getCenteredPan(),this.panX=e[0],this.panY=e[1]),this.applyZoom()},t.prototype.applyZoom=function(e){var t,n=this,r=this.refs["canvas-bounds"];if(this.canvas&&r){e=e||r.getBoundingClientRect();var i=this.getCanvasUnit(e),o=i*this.imageWidth,a=i*this.imageHeight,s=1<this.imageWidth&&1<this.imageHeight?2*i:i>>1;this.hasInteracted||(t=this.getCenteredPan(),this.panX=t[0],this.panY=t[1]),this.panX=Math.max(Math.min(this.panX,o-s),-(e.width-s)),this.panY=Math.max(Math.min(this.panY,a-s),-(e.height-s)),this.canvas.style.position="fixed",this.canvas.style.width=o+"px",this.canvas.style.height=a+"px",this.canvas.style.left=-this.panX+"px",this.canvas.style.top=-this.panY+"px",this.canvas.style.clipPath="polygon("+this.panX+"px "+this.panY+"px, "+(this.panX+e.width)+"px "+this.panY+"px, "+(this.panX+e.width)+"px "+(this.panY+e.height)+"px, "+this.panX+"px "+(this.panY+e.height)+"px)",this.cloneCanvasStyle(this.canvas,this.background),this.canvasLayers.forEach(function(e){return n.cloneCanvasStyle(n.canvas,e)}),this.redrawFloatingLayer(this.editState,!0)}},t.prototype.selectCanvasColor=function(e,t){var n=this.refs["canvas-bounds"].getBoundingClientRect(),r=this.clientToCanvas(e.clientX,e.clientY,n),i=r.canvasX,o=r.canvasY,a=this.editState.image.get(Math.floor(i),Math.floor(o));t?this.props.dispatchChangeBackgroundColor(a):this.props.dispatchChangeSelectedColor(a)},t.prototype.selectAll=function(){this.props.tool!==b.ImageEditorTool.Marquee&&this.props.dispatchChangeImageTool(b.ImageEditorTool.Marquee),this.editState.mergeFloatingLayer(),this.editState.copyToLayer(0,0,this.imageWidth,this.imageHeight,!0),this.props.dispatchImageEdit(this.editState.toImageState())},t.prototype.cancelSelection=function(){this.editState.mergeFloatingLayer(),this.props.dispatchImageEdit(this.editState.toImageState())},t.prototype.deleteSelection=function(){this.editState.floating=null,this.props.dispatchImageEdit(this.editState.toImageState())},t.prototype.cloneCanvasStyle=function(e,t){t.style.position=e.style.position,t.style.width=e.style.width,t.style.height=e.style.height,t.style.left=e.style.left,t.style.top=e.style.top,t.style.clipPath=e.style.clipPath},t.prototype.clientToCanvas=function(e,t,n){var r=this.getCanvasUnit(n);return{canvasX:(e-n.left+this.panX)/r,canvasY:(t-n.top+this.panY)/r}},t.prototype.getCanvasUnit=function(e){var t=e.width/e.height,n=this.imageWidth/this.imageHeight,r=Math.pow(this.zoom/10,2);return n<t?r*(e.height/this.imageHeight):r*(e.width/this.imageWidth)},t.prototype.inBounds=function(e,t){return 0<=e&&e<this.imageWidth&&0<=t&&t<this.imageHeight},t.prototype.isPanning=function(){return this.props.tool===b.ImageEditorTool.Pan},t.prototype.isColorSelect=function(){return this.props.tool===b.ImageEditorTool.ColorSelect},t.prototype.shouldHandleCanvasShortcut=function(){return!this.props.suppressShortcuts&&document.activeElement===document.body||!document.activeElement},t.prototype.shouldDrawCursor=function(){if(!this.hasHover)return!1;switch(this.props.tool){case b.ImageEditorTool.Fill:case b.ImageEditorTool.Marquee:case b.ImageEditorTool.Pan:case b.ImageEditorTool.ColorSelect:return!1;default:return!0}},t.prototype.getImageState=function(){return this.props.isTilemap?this.props.tilemapState.tilemap:this.props.imageState},t.prototype.applyTilemapPatch=function(e){var t=this.props,n=t.tilemapState,r=t.dispatchCreateNewTile,i=t.gallery,o=t.backgroundColor,a=n.tileset,s=pxt.sprite.tilemapLiteralToTilemap(e.map);if(s&&s.width&&s.height){for(var l=e.tiles.map(function(e){return pxt.sprite.getBitmapFromJResURL("data:"+w+";base64,"+e)}),c=e.layers.map(function(e){return pxt.sprite.getBitmapFromJResURL("data:"+w+";base64,"+e)}),u=[],f=a.tiles.length,p=function(t){var e=a.tiles.findIndex(function(e){return t.equals(pxt.sprite.Bitmap.fromData(e.bitmap))});if(0<=e)return u.push(e),"continue";if(i){var n=i.find(function(e){return t.equals(pxt.sprite.Bitmap.fromData(e.bitmap))});if(n)return r(null,a.tiles.length,o,n.qualifiedName),u.push(f),f++,"continue"}r(y.createTile(t.data()),a.tiles.length,o),u.push(f),f++},d=0,h=l;d<h.length;d++)p(h[d]);this.editState.mergeFloatingLayer();for(var g=new pxt.sprite.Tilemap(s.width,s.height),m=0;m<g.width;m++)for(var v=0;v<g.height;v++)g.set(m,v,u[s.get(m,v)]);this.editState.floating={image:g,overlayLayers:c},this.editState.layerOffsetX=0,this.editState.layerOffsetY=0,this.props.dispatchImageEdit(this.editState.toImageState())}},t}(o.Component);var d={dispatchImageEdit:s.dispatchImageEdit,dispatchChangeCursorLocation:s.dispatchChangeCursorLocation,dispatchChangeZoom:s.dispatchChangeZoom,dispatchChangeImageTool:s.dispatchChangeImageTool,dispatchChangeSelectedColor:s.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:s.dispatchChangeBackgroundColor,dispatchCreateNewTile:s.dispatchCreateNewTile};n.ImageCanvas=a.connect(function(e,t){var n=e.store.present,r=e.editor;if(r.isTilemap){var i=n;return i?{selectedColor:r.selectedColor,tilemapState:i,tool:r.tool,toolWidth:r.cursorSize,zoomDelta:r.zoomDelta,onionSkinEnabled:!1,overlayEnabled:r.overlayEnabled,backgroundColor:r.backgroundColor,colors:i.colors,isTilemap:r.isTilemap,drawingMode:r.drawingMode,gallery:r.tileGallery}:{}}var o=n;return o?{selectedColor:r.selectedColor,colors:o.colors,imageState:o.frames[o.currentFrame],tool:r.tool,toolWidth:r.cursorSize,zoomDelta:r.zoomDelta,onionSkinEnabled:r.onionSkinEnabled,backgroundColor:r.backgroundColor,prevFrame:o.frames[o.currentFrame-1],isTilemap:r.isTilemap}:{}},d)(p)},{"../../assets":2,"./actions/dispatch":19,"./store/imageReducer":23,"./toolDefinitions":27,"./util":28,react:228,"react-redux":207}],12:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var l=e("react"),c=e("react-redux"),u=e("./store/imageStore"),p=e("./SideBar"),d=e("./BottomBar"),h=e("./TopBar"),g=e("./ImageCanvas"),m=e("./Alert"),v=e("./Timeline"),a=e("./keyboardShortcuts"),y=e("./actions/dispatch"),b=e("./util"),_=e("../../assets"),o=pxt.sprite.Bitmap.fromData,s=function(t){function s(e){var o=t.call(this,e)||this;return o.onStoreChange=function(){o.props.onChange&&o.props.onChange(o.props.singleFrame?pxt.sprite.bitmapToImageLiteral(o.getCurrentFrame(),"typescript"):"");var e=o.getStore(),t=e.getState();if(a.setStore(e),t.editor&&o.setState({alert:t.editor.alert}),!!t.editor.editingTile!=!!o.state.editingTile)if(t.editor.editingTile){var n=t.editor.editingTile.tilesetIndex;if(n){var r=t.store.present.tileset.tiles[n];o.setState({editingTile:!0,tileToEdit:r})}else{var i=t.store.present.tileset.tileWidth;o.setState({editingTile:!0,tileToEdit:_.createNewImageAsset("tile",i,i)})}}else o.setState({editingTile:!1})},o.onDoneClick=function(){o.props.onDoneClicked&&o.props.onDoneClicked(o.getAsset())},o.onTileEditorFinished=function(e){var t=o.getStore().getState().editor.editingTile;e.isProjectTile=!0,o.dispatchOnStore(y.dispatchCloseTileEditor(e,t.tilesetIndex))},o.state={editingTile:!1},o}return i(s,t),s.prototype.componentDidMount=function(){a.addKeyListener(),this.props.asset&&this.openAsset(this.props.asset),this.unsubscribeChangeListener=this.getStore().subscribe(this.onStoreChange),this.onResize()},s.prototype.componentWillUnmount=function(){this.props.nested||a.removeKeyListener(),this.unsubscribeChangeListener&&this.unsubscribeChangeListener()},s.prototype.render=function(){var e=this.props.singleFrame,t=this.getStore(),n=this.state,r=n.tileToEdit,i=n.editingTile,o=n.alert,a="Animation"===t.getState().store.present.kind;return l.createElement("div",{className:"image-editor-outer"},l.createElement(c.Provider,{store:t},l.createElement("div",{className:"image-editor "+(i?"editing-tile":"")},l.createElement(h.TopBar,{singleFrame:e}),l.createElement("div",{className:"image-editor-content"},l.createElement(p.SideBar,null),l.createElement(g.ImageCanvas,{suppressShortcuts:i}),a&&!e?l.createElement(v.Timeline,null):void 0),l.createElement(d.BottomBar,{singleFrame:e,onDoneClick:this.onDoneClick}),o&&o.title&&l.createElement(m.Alert,{title:o.title,text:o.text,options:o.options}))),i&&l.createElement(s,{store:u.tileEditorStore,ref:"nested-image-editor",onDoneClicked:this.onTileEditorFinished,asset:r,singleFrame:!0,nested:!0}))},s.prototype.openAsset=function(e,t){switch(void 0===t&&(t=[]),(this.editingAsset=e).type){case"image":this.initSingleFrame(o(e.bitmap));break;case"tile":this.initSingleFrame(o(e.bitmap)),this.disableResize();break;case"animation":this.initAnimation(e.frames.map(o),e.interval);break;case"tilemap":this.initTilemap(e.data,t)}e.meta.displayName&&this.dispatchOnStore(y.dispatchChangeAssetName(e.meta.displayName))},s.prototype.initSingleFrame=function(e){this.dispatchOnStore(y.dispatchSetInitialFrames([{bitmap:e.data()}],100))},s.prototype.initAnimation=function(e,t){this.dispatchOnStore(y.dispatchSetInitialFrames(e.map(function(e){return{bitmap:e.data()}}),t))},s.prototype.initTilemap=function(e,t){this.dispatchOnStore(y.dispatchSetInitialTilemap(e.tilemap.data(),e.tileset,t,[e.layers],e.nextId,e.projectReferences))},s.prototype.onResize=function(){this.dispatchOnStore(y.dispatchChangeZoom(0))},s.prototype.getCurrentFrame=function(){var e=this.getStore().getState().store.present,t=e.frames[e.currentFrame];return b.imageStateToBitmap(t)},s.prototype.getAsset=function(){switch(this.editingAsset.type){case"tile":return this.getTile();case"animation":return this.getAnimation();case"tilemap":return this.getTilemap();default:return this.getImage()}},s.prototype.getImage=function(){var e,t=this.getStore().getState(),n=this.getCurrentFrame().data(),r=this.editingAsset?f({},this.editingAsset.meta):{};return r.displayName=t.editor.assetName||r.displayName,{id:null===(e=this.editingAsset)||void 0===e?void 0:e.id,internalID:this.editingAsset?this.editingAsset.internalID:_.getNewInternalID(),type:"image",bitmap:n,jresData:pxt.sprite.base64EncodeBitmap(n),meta:r}},s.prototype.getTile=function(){var e,t=this.getStore().getState(),n=this.getCurrentFrame().data(),r=this.editingAsset?f({},this.editingAsset.meta):{};return r.displayName=t.editor.assetName||r.displayName,{id:null===(e=this.editingAsset)||void 0===e?void 0:e.id,internalID:this.editingAsset?this.editingAsset.internalID:_.getNewInternalID(),type:"tile",bitmap:n,jresData:pxt.sprite.base64EncodeBitmap(n),meta:r}},s.prototype.getAnimation=function(){var e,t=this.getStore().getState(),n=t.store.present,r=this.editingAsset?f({},this.editingAsset.meta):{};return r.displayName=t.editor.assetName||r.displayName,{id:null===(e=this.editingAsset)||void 0===e?void 0:e.id,internalID:this.editingAsset?this.editingAsset.internalID:_.getNewInternalID(),type:"animation",interval:n.interval,frames:n.frames.map(function(e){return b.imageStateToBitmap(e).data()}),meta:r}},s.prototype.getTilemap=function(){var e,t=this.getStore().getState(),n=t.store.present,r=n.tilemap,i=r.floating,o=r.overlayLayers,a=r.layerOffsetX,s=r.layerOffsetY,l=b.applyBitmapData(o[0],i&&i.overlayLayers&&i.overlayLayers[0],a,s),c=new pxt.sprite.TilemapData(b.imageStateToTilemap(n.tilemap),n.tileset,l);c.deletedTiles=t.editor.deletedTiles,c.editedTiles=t.editor.editedTiles;var u=this.editingAsset?f({},this.editingAsset.meta):{};return u.displayName=t.editor.assetName||u.displayName,{id:null===(e=this.editingAsset)||void 0===e?void 0:e.id,internalID:this.editingAsset?this.editingAsset.internalID:_.getNewInternalID(),type:"tilemap",data:c,meta:u}},s.prototype.getPersistentData=function(){var e=this.getStore().getState();return{editor:e.editor,past:e.store.past}},s.prototype.restorePersistentData=function(e){e&&(this.editingAsset&&(this.editingAsset.meta.displayName?e.editor.assetName=this.editingAsset.meta.displayName:e.editor.assetName=null),this.dispatchOnStore(y.dispatchSetInitialState(e.editor,e.past)))},s.prototype.setCurrentFrame=function(e){this.dispatchOnStore(y.dispatchImageEdit({bitmap:e.data()}))},s.prototype.disableResize=function(){this.dispatchOnStore(y.dispatchDisableResize())},s.prototype.closeNestedEditor=function(){var e;this.state.editingTile&&(null===(e=this.refs["nested-image-editor"])||void 0===e||e.onDoneClick())},s.prototype.getStore=function(){return this.props.store||u.mainStore},s.prototype.dispatchOnStore=function(e){this.getStore().dispatch(e)},s}(l.Component);n.ImageEditor=s},{"../../assets":2,"./Alert":6,"./BottomBar":7,"./ImageCanvas":11,"./SideBar":14,"./Timeline":15,"./TopBar":18,"./actions/dispatch":19,"./keyboardShortcuts":21,"./store/imageStore":24,"./util":28,react:228,"react-redux":207}],13:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("./util"),s=function(n){function e(e){var t=n.call(this,e)||this;return t.handlers=[],t.state={open:!1},t}return i(e,n),e.prototype.componentWillUnmount=function(){this.handlers=null},e.prototype.render=function(){var n=this,e=this.props,t=e.options,r=t[e.selected];return o.createElement("div",{className:"image-editor-pivot-outer"},t.map(function(e,t){return o.createElement("div",{role:"tab",key:e.id,className:"image-editor-pivot-option "+(e===r?"selected":""),tabIndex:0,onClick:n.clickHandler(t),onKeyDown:a.fireClickOnlyOnEnter},e.text)}))},e.prototype.clickHandler=function(e){var t=this;if(!this.handlers[e]){var n=this.props,r=n.onChange,i=n.options;this.handlers[e]=function(){t.setState({open:!1}),r(i[e],e)}}return this.handlers[e]},e}(o.Component);n.Pivot=s},{"./util":28,react:228}],14:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("react-redux"),s=e("./toolDefinitions"),l=e("./Button"),c=e("./actions/dispatch"),u=e("./sprite/Palette"),f=e("./tilemap/TilePalette"),p=e("./tilemap/Minimap"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handlers=[],e}return i(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.selectedTool,r=e.isTilemap;return o.createElement("div",{className:"image-editor-sidebar "+(r?"tilemap":"")},r&&o.createElement("div",{className:"image-editor-tilemap-minimap"},o.createElement(p.Minimap,null)),o.createElement("div",{className:"image-editor-tool-buttons"},s.tools.filter(function(e){return!e.hiddenTool}).map(function(e){return o.createElement(l.IconButton,{key:e.tool,iconClass:e.iconClass,toggle:n!=e.tool,title:e.title,onClick:t.clickHandler(e.tool)})})),o.createElement("div",{className:"image-editor-palette"},r?o.createElement(f.TilePalette,null):o.createElement(u.Palette,null)))},e.prototype.clickHandler=function(e){var t=this;return this.handlers[e]||(this.handlers[e]=function(){return t.props.dispatchChangeImageTool(e)}),this.handlers[e]},e}(o.Component);n.SideBarImpl=d;var h={dispatchChangeImageTool:c.dispatchChangeImageTool};n.SideBar=a.connect(function(e,t){var n=e.editor;return n?{isTilemap:n.isTilemap,selectedTool:n.tool}:{}},h)(d)},{"./Button":8,"./actions/dispatch":19,"./sprite/Palette":22,"./tilemap/Minimap":25,"./tilemap/TilePalette":26,"./toolDefinitions":27,react:228,"react-redux":207}],15:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var p=e("react"),o=e("react-redux"),a=e("./actions/dispatch"),d=e("./TimelineFrame"),l=e("./util"),s=function(t){function e(e){var n=t.call(this,e)||this;return n.handlers=[],n.scrollOffset=0,n.dragEnd=!1,n.duplicateFrame=function(){var e=n.props,t=e.currentFrame;(0,e.dispatchDuplicateFrame)(t)},n.deleteFrame=function(){var e=n.props,t=e.currentFrame;(0,e.dispatchDeleteFrame)(t)},n.newFrame=function(){var e=n.props.dispatchNewFrame;n.dragEnd?n.dragEnd=!1:e()},n.state={},n}return i(e,t),e.prototype.render=function(){var e,r=this,t=this.props,n=t.frames,i=t.colors,o=t.currentFrame,a=t.interval,s=t.previewAnimating,l=this.state,c=l.isMovingFrame,u=l.dropPreviewIndex,f=n.slice();return c&&(e=n[o],f.splice(o,1),f.splice(u,0,null)),p.createElement("div",{className:"image-editor-timeline "+(pxt.BrowserUtils.isEdge()?"edge":"")},p.createElement("div",{className:"image-editor-timeline-preview"},p.createElement(d.TimelineFrame,{frames:s?n:[n[o]],colors:i,interval:a,animating:!0})),p.createElement("div",{className:"image-editor-timeline-frames-outer"},p.createElement("div",{className:"image-editor-timeline-frames",ref:"frame-scroller-ref"},f.map(function(e,t){var n=!c&&t===o;return e?p.createElement("div",{className:"image-editor-timeline-frame "+(n?"active":""),key:t,role:"button",onClick:r.clickHandler(t)},p.createElement(d.TimelineFrame,{frames:[e],colors:i,showActions:n,duplicateFrame:r.duplicateFrame,deleteFrame:r.deleteFrame})):p.createElement("div",{className:"image-editor-timeline-frame drop-marker",key:t})}),e&&p.createElement("div",{ref:"floating-frame",className:"image-editor-timeline-frame dragging"},p.createElement(d.TimelineFrame,{frames:[e],colors:i,duplicateFrame:this.duplicateFrame,deleteFrame:this.deleteFrame})),p.createElement("div",{className:"image-editor-timeline-frame collapsed",role:"button",onClick:this.newFrame},p.createElement("span",{className:"ms-Icon ms-Icon--Add"})))))},e.prototype.componentDidMount=function(){var o,a=this;this.frameScroller=this.refs["frame-scroller-ref"];var s=!1;l.bindGestureEvents(this.frameScroller,{onClick:function(e){a.dragEnd=!1},onDragStart:function(e){o=e.clientY,pxt.BrowserUtils.addClass(a.frameScroller,"scrolling");var t=a.frameScroller.getBoundingClientRect(),n=e.clientY-t.top,r=a.frameScroller.firstElementChild.getBoundingClientRect().height,i=Math.floor(n/r);s=i!==a.props.currentFrame},onDragMove:function(e){if(s){a.scrollOffset-=o-e.clientY,o=e.clientY;try{var t=a.frameScroller.getBoundingClientRect(),n=a.frameScroller.parentElement.getBoundingClientRect();t.height>n.height?a.scrollOffset=Math.max(Math.min(a.scrollOffset,0),n.height-t.height-15):a.scrollOffset=0,a.frameScroller.parentElement.scrollTop=-a.scrollOffset}catch(e){}}else a.updateDragDrop(e)},onDragEnd:function(){if(o=null,pxt.BrowserUtils.removeClass(a.frameScroller,"scrolling"),a.dragEnd=!0,a.state.isMovingFrame){var e=a.props;(0,e.dispatchMoveFrame)(e.currentFrame,a.state.dropPreviewIndex),a.setState({isMovingFrame:!1})}}}),this.frameScroller.addEventListener("wheel",function(e){a.scrollOffset-=e.deltaY;try{var t=a.frameScroller.getBoundingClientRect(),n=a.frameScroller.parentElement.getBoundingClientRect();t.height>n.height?a.scrollOffset=Math.max(Math.min(a.scrollOffset,0),n.height-t.height-15):a.scrollOffset=0,a.frameScroller.parentElement.scrollTop=-a.scrollOffset}catch(e){}})},e.prototype.clickHandler=function(r){var i=this;return this.handlers[r]||(this.handlers[r]=function(){var e=i.props,t=e.currentFrame,n=e.dispatchChangeCurrentFrame;i.dragEnd?i.dragEnd=!1:r!=t&&n(r)}),this.handlers[r]},e.prototype.updateDragDrop=function(e){var t=this.frameScroller.getBoundingClientRect(),n=e.clientY-t.top,r=this.frameScroller.firstElementChild.getBoundingClientRect().height,i=Math.floor(n/r);this.state.isMovingFrame?this.refs["floating-frame"]&&(this.refs["floating-frame"].style.top=n+"px",this.setState({dropPreviewIndex:i})):this.setState({isMovingFrame:!0,dropPreviewIndex:this.props.currentFrame})},e}(p.Component);n.TimelineImpl=s;var c={dispatchDuplicateFrame:a.dispatchDuplicateFrame,dispatchDeleteFrame:a.dispatchDeleteFrame,dispatchChangeCurrentFrame:a.dispatchChangeCurrentFrame,dispatchNewFrame:a.dispatchNewFrame,dispatchMoveFrame:a.dispatchMoveFrame};n.Timeline=o.connect(function(e,t){var n=e.store.present,r=e.editor,i=n;return i?{frames:i.frames,currentFrame:i.currentFrame,colors:i.colors,interval:i.interval,previewAnimating:r.previewAnimating}:{}},c)(s)},{"./TimelineFrame":16,"./actions/dispatch":19,"./util":28,react:228,"react-redux":207}],16:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var l=e("react"),c=e("./Button"),u=pxt.BrowserUtils.isEdge()?25:1,o=function(n){function e(e){var t=n.call(this,e)||this;return t.state={index:0},t}return i(e,n),e.prototype.render=function(){var e=this.props,t=e.frames,n=e.animating,r=e.showActions,i=e.duplicateFrame,o=e.deleteFrame,a=t[n?Math.min(Math.max(0,this.state.index),t.length-1):0],s=a.bitmap.height>a.bitmap.width;return l.createElement("div",{className:"timeline-frame-outer "+(s?"portrait":"landscape")},l.createElement("div",{className:"timeline-frame-spacer"}),l.createElement("canvas",{ref:"preview-canvas"}),l.createElement("div",{className:"timeline-frame-spacer"}),r&&l.createElement("div",{className:"timeline-frame-actions"},l.createElement(c.IconButton,{iconClass:"ms-Icon ms-Icon--Copy",title:lf("Duplicate Current Frame"),onClick:i}),l.createElement(c.IconButton,{iconClass:"ms-Icon ms-Icon--Delete",title:lf("Delete Current Frame"),onClick:o})))},e.prototype.componentDidMount=function(){this.canvas=this.refs["preview-canvas"],this.redraw(),this.updateAnimation()},e.prototype.componentDidUpdate=function(){this.redraw(),this.updateAnimation()},e.prototype.componentWillUnmount=function(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=void 0},e.prototype.redraw=function(){if(this.canvas){var e=this.props,t=e.animating,n=e.frames,r=n[t?Math.min(Math.max(0,this.state.index),n.length-1):0];this.canvas.height=r.bitmap.height*u,this.canvas.width=r.bitmap.width*u;var i=pxt.sprite.Bitmap.fromData(r.bitmap);if(this.drawBitmap(i),r.floating&&r.floating.bitmap){var o=pxt.sprite.Bitmap.fromData(r.floating.bitmap);this.drawBitmap(o,r.layerOffsetX,r.layerOffsetY,!0)}}},e.prototype.updateAnimation=function(){var e=this,t=this.props,n=t.animating,r=t.interval,i=t.frames,o=n&&5<r&&1<i.length;o&&r!==this.intervalcurrent?(this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(function(){return e.setState({index:(e.state.index+1)%e.props.frames.length})},r),this.intervalcurrent=r):!o&&this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0,this.intervalcurrent=void 0)},e.prototype.drawBitmap=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!1);for(var i=this.props.colors,o=this.canvas.getContext("2d"),a=0;a<e.width;a++)for(var s=0;s<e.height;s++){var l=e.get(a,s);l?(o.fillStyle=i[l],o.fillRect((a+t)*u,(s+n)*u,u,u)):r||o.clearRect((a+t)*u,(s+n)*u,u,u)}},e}(l.Component);n.TimelineFrame=o},{"./Button":8,react:228}],17:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=function(n){function e(e){var t=n.call(this,e)||this;return t.checked=!1,t.handleToggleClick=function(e){t.checked=!t.checked,t.props.onChange&&t.props.onChange(e.target.checked)},t.checked=e.initialValue,t}return i(e,n),e.prototype.render=function(){var e=this.props,t=e.initialValue,n=e.label;return o.createElement("div",{className:"image-editor-toggle-container"},n&&o.createElement("span",null,n),o.createElement("label",{className:"image-editor-toggle"},o.createElement("input",{type:"checkbox",onClick:this.handleToggleClick,defaultChecked:t,"aria-checked":this.checked}),o.createElement("span",{className:"image-editor-toggle-switch"})))},e}(o.Component);n.Toggle=a},{react:228}],18:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=e("react"),o=e("react-redux"),a=e("./actions/dispatch"),l=e("./Button"),c=e("./CursorSizes"),u=e("./Toggle"),f=function(t){function e(e){var n=t.call(this,e)||this;return n.togglePreviewAnimating=function(){return n.props.dispatchChangePreviewAnimating(!n.props.previewAnimating)},n.handleIntervalChange=function(e){n.setState({interval:e.target.value})},n.handleIntervalBlur=function(){var e=n.props.dispatchChangeInterval,t=parseInt(n.state.interval);isNaN(t)||e(Math.min(Math.max(t,50),1e6)),n.setState({interval:null})},n.state={},n}return i(e,t),e.prototype.render=function(){var e=this.props,t=e.interval,n=e.previewAnimating,r=e.singleFrame,i=e.isTilemap,o=e.dispatchChangeOverlayEnabled,a=null==this.state.interval?t:this.state.interval;return s.createElement("div",{className:"image-editor-topbar"},s.createElement("div",{className:"cursor-group"},s.createElement(c.CursorSizes,null)),s.createElement("div",{className:"spacer"}),!r&&s.createElement("div",{className:"image-editor-seperator"}),!r&&s.createElement("div",{className:"timeline-controls"},s.createElement(l.IconButton,{onClick:this.togglePreviewAnimating,iconClass:n?"ms-Icon ms-Icon--Stop":"ms-Icon ms-Icon--Play",title:n?lf("Stop Animation Preview"):lf("Play Animation Preview"),toggle:!0}),s.createElement("div",{className:"image-editor-interval-label image-editor-label"},s.createElement("span",{className:"ms-Icon ms-Icon--Clock"})),s.createElement("div",{className:"image-editor-interval"},s.createElement("input",{className:"image-editor-input",title:lf("Interval Between Frames (ms)"),value:a,onChange:this.handleIntervalChange,onBlur:this.handleIntervalBlur}))),i&&s.createElement(u.Toggle,{initialValue:!0,label:lf("Show walls"),onChange:o}))},e}(s.Component);n.TopBarImpl=f;var p={dispatchChangeInterval:a.dispatchChangeInterval,dispatchChangePreviewAnimating:a.dispatchChangePreviewAnimating,dispatchChangeOverlayEnabled:a.dispatchChangeOverlayEnabled};n.TopBar=o.connect(function(e,t){var n=e.store.present,r=e.editor;return n?{interval:n.interval,previewAnimating:r.previewAnimating,isTilemap:r.isTilemap}:{}},p)(f)},{"./Button":8,"./CursorSizes":9,"./Toggle":17,"./actions/dispatch":19,react:228,"react-redux":207}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./types");n.dispatchChangeImageTool=function(e){return{type:a.CHANGE_IMAGE_TOOL,tool:e}},n.dispatchChangeCursorSize=function(e){return{type:a.CHANGE_CURSOR_SIZE,cursorSize:e}},n.dispatchChangeSelectedColor=function(e){return{type:a.CHANGE_SELECTED_COLOR,selectedColor:e}},n.dispatchChangeImageDimensions=function(e){return{type:a.CHANGE_IMAGE_DIMENSIONS,imageDimensions:e}},n.dispatchChangeKeyModifiers=function(e){return{type:a.CHANGE_KEY_MODIFIERS,keyModifiers:e}},n.dispatchChangeCursorLocation=function(e){return{type:a.CHANGE_CURSOR_LOCATION,cursorLocation:e}},n.dispatchImageEdit=function(e){return{type:a.IMAGE_EDIT,newState:e}},n.dispatchUndoImageEdit=function(){return{type:a.UNDO_IMAGE_EDIT}},n.dispatchRedoImageEdit=function(){return{type:a.REDO_IMAGE_EDIT}},n.dispatchToggleAspectRatioLocked=function(){return{type:a.TOGGLE_ASPECT_RATIO}},n.dispatchNewFrame=function(e){return{type:a.NEW_FRAME,index:e}},n.dispatchDeleteFrame=function(e){return{type:a.DELETE_FRAME,index:e}},n.dispatchDuplicateFrame=function(e){return{type:a.DUPLICATE_FRAME,index:e}},n.dispatchChangeCurrentFrame=function(e){return{type:a.CHANGE_CURRENT_FRAME,index:e}},n.dispatchMoveFrame=function(e,t){return{type:a.MOVE_FRAME,oldIndex:e,newIndex:t}},n.dispatchChangeInterval=function(e){return{type:a.CHANGE_INTERVAL,newInterval:e}},n.dispatchChangePreviewAnimating=function(e){return{type:a.CHANGE_PREVIEW_ANIMATING,animating:e}},n.dispatchToggleOnionSkinEnabled=function(){return{type:a.TOGGLE_ONION_SKIN_ENABLED}},n.dispatchChangeOverlayEnabled=function(e){return{type:a.CHANGE_OVERLAY_ENABLED,enabled:e}},n.dispatchChangeZoom=function(e){return{type:a.CHANGE_CANVAS_ZOOM,zoom:e}},n.dispatchShowAlert=function(e,t,n){return{type:a.SHOW_ALERT,title:e,text:t,options:n}},n.dispatchHideAlert=function(){return{type:a.HIDE_ALERT}},n.dispatchSwapBackgroundForeground=function(){return{type:a.SWAP_FOREGROUND_BACKGROUND}},n.dispatchChangeBackgroundColor=function(e){return{type:a.CHANGE_BACKGROUND_COLOR,backgroundColor:e}},n.dispatchSetInitialFrames=function(e,t){return{type:a.SET_INITIAL_FRAMES,frames:e,interval:t}},n.dispatchSetInitialState=function(e,t){return{type:a.SET_INITIAL_STATE,state:e,past:t}},n.dispatchSetInitialTilemap=function(e,t,n,r,i,o){return{type:a.SET_INITIAL_TILEMAP,tilemap:e,tileset:t,layers:r,gallery:n,nextId:i,referencedTiles:o}},n.dispatchChangeTilePaletteCategory=function(e){return{type:a.CHANGE_TILE_PALETTE_CATEGORY,category:e}},n.dispatchChangeTilePalettePage=function(e){return{type:a.CHANGE_TILE_PALETTE_PAGE,page:e}},n.dispatchChangeDrawingMode=function(e){return{type:a.CHANGE_DRAWING_MODE,drawingMode:e}},n.dispatchCreateNewTile=function(e,t,n,r){return{type:a.CREATE_NEW_TILE,tile:e,foreground:t,background:n,qualifiedName:r}},n.dispatchSetGalleryOpen=function(e){return{type:a.SET_GALLERY_OPEN,open:e}},n.dispatchOpenTileEditor=function(e,t){return{type:a.OPEN_TILE_EDITOR,index:e,id:t}},n.dispatchCloseTileEditor=function(e,t){return{type:a.CLOSE_TILE_EDITOR,result:e,index:t}},n.dispatchDeleteTile=function(e,t){return{type:a.DELETE_TILE,id:t,index:e}},n.dispatchDisableResize=function(){return{type:a.DISABLE_RESIZE}},n.dispatchChangeAssetName=function(e){return{type:a.CHANGE_ASSET_NAME,name:e}}},{"./types":20}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SET_INITIAL_STATE="SET_INITIAL_STATE",n.SET_INITIAL_FRAMES="SET_INITIAL_FRAMES",n.SET_INITIAL_TILEMAP="SET_INITIAL_TILEMAP",n.CHANGE_IMAGE_TOOL="CHANGE_IMAGE_TOOL",n.CHANGE_CURSOR_SIZE="CHANGE_CURSOR_SIZE",n.CHANGE_SELECTED_COLOR="CHANGE_SELECTED_COLOR",n.CHANGE_IMAGE_DIMENSIONS="CHANGE_IMAGE_DIMENSIONS",n.CHANGE_KEY_MODIFIERS="CHANGE_KEY_MODIFIERS",n.CHANGE_CURSOR_LOCATION="CHANGE_CURSOR_LOCATION",n.IMAGE_EDIT="IMAGE_EDIT",n.UNDO_IMAGE_EDIT="UNDO_IMAGE_EDIT",n.REDO_IMAGE_EDIT="REDO_IMAGE_EDIT",n.TOGGLE_ASPECT_RATIO="TOGGLE_ASPECT_RATIO",n.SET_GALLERY_OPEN="SET_GALLERY_OPEN",n.NEW_FRAME="NEW_FRAME",n.DELETE_FRAME="DELETE_FRAME",n.DUPLICATE_FRAME="DUPLICATE_FRAME",n.MOVE_FRAME="MOVE_FRAME",n.CHANGE_CURRENT_FRAME="CHANGE_CURRENT_FRAME",n.CHANGE_INTERVAL="CHANGE_INTERVAL",n.CHANGE_PREVIEW_ANIMATING="CHANGE_PREVIEW_ANIMATING",n.TOGGLE_ONION_SKIN_ENABLED="TOGGLE_ONION_SKIN_ENABLED",n.CHANGE_OVERLAY_ENABLED="CHANGE_OVERLAY_ENABLED",n.CHANGE_CANVAS_ZOOM="CHANGE_CANVAS_ZOOM",n.SHOW_ALERT="SHOW_ALERT",n.HIDE_ALERT="HIDE_ALERT",n.SWAP_FOREGROUND_BACKGROUND="SWAP_FOREGROUND_BACKGROUND",n.CHANGE_BACKGROUND_COLOR="CHANGE_BACKGROUND_COLOR",n.CHANGE_TILE_PALETTE_PAGE="CHANGE_TILE_PALETTE_PAGE",n.CHANGE_TILE_PALETTE_CATEGORY="CHANGE_TILE_PALETTE_CATEGORY",n.CHANGE_DRAWING_MODE="CHANGE_DRAWING_MODE",n.CREATE_NEW_TILE="CREATE_NEW_TILE",n.OPEN_TILE_EDITOR="OPEN_TILE_EDITOR",n.CLOSE_TILE_EDITOR="CLOSE_TILE_EDITOR",n.DELETE_TILE="DELETE_TILE",n.DISABLE_RESIZE="DISABLE_RESIZE",n.CHANGE_ASSET_NAME="CHANGE_ASSET_NAME"},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./store/imageReducer"),i=e("./actions/dispatch"),o=e("./store/imageStore"),a=o.mainStore;function s(e){var t=e.ctrlKey||e.metaKey;"Undo"===e.key||t&&"z"===e.key?(p(i.dispatchUndoImageEdit()),e.preventDefault(),e.stopPropagation()):("Redo"===e.key||t&&"y"===e.key)&&(p(i.dispatchRedoImageEdit()),e.preventDefault(),e.stopPropagation())}function l(e){"Backspace"!==e.key&&"Delete"!==e.key||e.stopPropagation()}function c(e){switch(e.key){case"e":u(r.ImageEditorTool.Erase);break;case"h":u(r.ImageEditorTool.Pan);break;case"b":case"p":u(r.ImageEditorTool.Paint);break;case"g":u(r.ImageEditorTool.Fill);break;case"m":u(r.ImageEditorTool.Marquee);break;case"u":u(r.ImageEditorTool.Rect);break;case"-":case"_":f(-1);break;case"=":case"+":f(1);break;case"x":p(i.dispatchSwapBackgroundForeground())}if(!a.getState().editor.isTilemap&&/^Digit\d$/.test(e.code)){var t=+e.code.slice(-1)+(e.shiftKey?9:0);0<=t&&t<16&&(n=t,p(i.dispatchChangeSelectedColor(n)))}var n}function u(e){p(i.dispatchChangeImageTool(e))}function f(e){p(i.dispatchChangeZoom(e))}function p(e){a.dispatch(e)}n.addKeyListener=function(){document.addEventListener("keydown",c),document.addEventListener("keydown",s,!0),document.addEventListener("keydown",l,!0)},n.removeKeyListener=function(){document.removeEventListener("keydown",c),document.removeEventListener("keydown",s,!0),document.removeEventListener("keydown",l,!0)},n.setStore=function(e){a=e||o.mainStore}},{"./actions/dispatch":19,"./store/imageReducer":23,"./store/imageStore":24}],22:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=e("react"),o=e("react-redux"),s=e("../actions/dispatch"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handlers=[],e.preventContextMenu=function(e){return e.preventDefault()},e}return i(e,t),e.prototype.render=function(){var n=this,e=this.props,t=e.colors,r=e.selected,i=e.backgroundColor,o=e.dispatchSwapBackgroundForeground;return a.createElement("div",null,a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 15",onClick:o},a.createElement("defs",null,a.createElement("pattern",{id:"alpha-background",width:"6",height:"6",patternUnits:"userSpaceOnUse"},a.createElement("rect",{x:"0",y:"0",width:"6px",height:"6px",fill:"#aeaeae"}),a.createElement("rect",{x:"0",y:"0",width:"3px",height:"3px",fill:"#dedede"}),a.createElement("rect",{x:"3",y:"3",width:"3px",height:"3px",fill:"#dedede"}))),a.createElement("g",null,a.createElement("rect",{fill:i?t[i]:"url(#alpha-background)",x:6,y:4,width:15,height:10,stroke:"#3c3c3c",strokeWidth:"0.5"}),a.createElement("rect",{fill:r?t[r]:"url(#alpha-background)",x:2,y:1,width:15,height:10,stroke:"#3c3c3c",strokeWidth:"0.5"}))),a.createElement("div",{className:"image-editor-color-buttons",onContextMenu:this.preventContextMenu},this.props.colors.map(function(e,t){return a.createElement("div",{key:t,className:"image-editor-button "+(0===t?"checkerboard":""),role:"button",title:lf("Color {0}",t),onMouseDown:n.clickHandler(t),style:0===t?null:{backgroundColor:e}})})))},e.prototype.clickHandler=function(t){var n=this;return this.handlers[t]||(this.handlers[t]=function(e){0===e.button?n.props.dispatchChangeSelectedColor(t):(n.props.dispatchChangeBackgroundColor(t),e.preventDefault(),e.stopPropagation())}),this.handlers[t]},e}(a.Component);var c={dispatchChangeSelectedColor:s.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:s.dispatchChangeBackgroundColor,dispatchSwapBackgroundForeground:s.dispatchSwapBackgroundForeground};n.Palette=o.connect(function(e,t){var n=e.store.present,r=e.editor,i=n;return i?{selected:r.selectedColor,backgroundColor:r.backgroundColor,colors:i.colors}:{}},c)(l)},{"../actions/dispatch":19,react:228,"react-redux":207}],23:[function(e,t,n){"use strict";var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var o,a,s,r,i,l,c,u,m=e("../../../assets"),v=e("../actions/types");(u=o=n.ImageEditorTool||(n.ImageEditorTool={}))[u.Paint=0]="Paint",u[u.Fill=1]="Fill",u[u.Line=2]="Line",u[u.Erase=3]="Erase",u[u.Circle=4]="Circle",u[u.Rect=5]="Rect",u[u.ColorSelect=6]="ColorSelect",u[u.Marquee=7]="Marquee",u[u.Pan=8]="Pan",(c=n.CursorSize||(n.CursorSize={}))[c.One=1]="One",c[c.Three=3]="Three",c[c.Five=5]="Five",(l=n.KeyModifiers||(n.KeyModifiers={}))[l.Alt=1]="Alt",l[l.Shift=2]="Shift",(i=a=n.TileCategory||(n.TileCategory={}))[i.Forest=0]="Forest",i[i.Aquatic=1]="Aquatic",i[i.Dungeon=2]="Dungeon",i[i.Misc=3]="Misc",(r=s=n.TileDrawingMode||(n.TileDrawingMode={})).Default="default";var f,p={store:{present:{kind:"Animation",visible:!0,colors:["#000000","#ffffff","#ff2121","#ff93c4","#ff8135","#fff609","#249ca3","#78dc52","#003fad","#87f2ff","#8e2ec4","#a4839f","#5c406c","#e5cdc4","#91463d","#000000"],aspectRatioLocked:!(r.Wall="wall"),currentFrame:0,frames:[_(16,16)],interval:200},past:[],future:[]},editor:{selectedColor:3,tool:o.Paint,cursorSize:1,backgroundColor:1,previewAnimating:!1,onionSkinEnabled:!1,overlayEnabled:!0,isTilemap:!1}},d=function(n,r){switch(r.type){case v.TOGGLE_ASPECT_RATIO:return w("toggle-aspect-ratio-lock"),h(h({},n),{aspectRatioLocked:!n.aspectRatioLocked});case v.CHANGE_CURRENT_FRAME:return w("change-frame"),h(h({},n),{currentFrame:r.index});case v.CHANGE_INTERVAL:return w("change-interval"),h(h({},n),{interval:r.newInterval});case v.CHANGE_IMAGE_DIMENSIONS:w("change-dimensions");var e=r.imageDimensions,i=e[0],o=e[1];return h(h({},n),{frames:n.frames.map(function(e,t){return h(h({},e),{bitmap:pxt.sprite.Bitmap.fromData(e.bitmap).resize(i,o).data()})})});case v.IMAGE_EDIT:return w("image-edit"),h(h({},n),{frames:n.frames.map(function(e,t){return t===n.currentFrame?r.newState:e})});case v.DELETE_FRAME:if(1===n.frames.length)return n;w("delete-frame");var t=n.frames.slice();t.splice(r.index,1);var a=n.currentFrame;return n.currentFrame>=r.index&&0<n.currentFrame&&a--,h(h({},n),{currentFrame:a,frames:t});case v.DUPLICATE_FRAME:w("duplicate-frame");var s=n.frames.slice();return s.splice(r.index,0,((u=n.frames[r.index]).floating&&(u.floating.bitmap&&(p=pxt.sprite.Bitmap.fromData(u.floating.bitmap).copy().data()),u.floating.overlayLayers&&(d=u.floating.overlayLayers.map(function(e){return pxt.sprite.Bitmap.fromData(e).copy().data()})),f={bitmap:p,overlayLayers:d}),h(h({},u),{bitmap:pxt.sprite.Bitmap.fromData(u.bitmap).copy().data(),overlayLayers:u.overlayLayers&&u.overlayLayers.map(function(e){return pxt.sprite.Bitmap.fromData(e).copy().data()}),floating:f}))),h(h({},n),{frames:s,currentFrame:r.index+1});case v.NEW_FRAME:return w("new-frame"),h(h({},n),{frames:g(n.frames,[_(n.frames[0].bitmap.width,n.frames[0].bitmap.height)]),currentFrame:n.frames.length});case v.MOVE_FRAME:if(r.newIndex<0||r.newIndex>=n.frames.length||r.newIndex<0||r.newIndex>=n.frames.length)return n;w("move-frame");var l=n.frames.slice(),c=l.splice(r.oldIndex,1)[0];return l.splice(r.newIndex,0,c),h(h({},n),{frames:l,currentFrame:r.oldIndex===n.currentFrame?r.newIndex:n.currentFrame});default:return n}var u,f,p,d},y=function(e,t,n){var r;switch(t.type){case v.CHANGE_PREVIEW_ANIMATING:return w("preview-animate-"+(t.animating?"on":"off")),h(h({},e),{previewAnimating:t.animating});case v.CHANGE_CANVAS_ZOOM:return(0<t.zoom||t.zoom<0)&&w("zoom-"+(0<t.zoom?"in":"out")),h(h({},e),{zoomDelta:t.zoom});case v.CHANGE_IMAGE_TOOL:return w("change-tool-"+o[t.tool]),h(h({},e),{tool:t.tool});case v.CHANGE_CURSOR_SIZE:return w("change-cursor-size-"+t.cursorSize),h(h({},e),{cursorSize:t.cursorSize});case v.CHANGE_SELECTED_COLOR:return w("foreground-color-"+t.selectedColor),h(h({},e),{selectedColor:t.selectedColor,tool:e.tool===o.Erase?o.Paint:e.tool});case v.CHANGE_CURSOR_LOCATION:return h(h({},e),{cursorLocation:t.cursorLocation});case v.CHANGE_BACKGROUND_COLOR:return w("background-color-"+t.backgroundColor),h(h({},e),{backgroundColor:t.backgroundColor});case v.SWAP_FOREGROUND_BACKGROUND:return w("swap-foreground-background"),h(h({},e),{backgroundColor:e.selectedColor,selectedColor:e.backgroundColor});case v.TOGGLE_ONION_SKIN_ENABLED:return w("toggle-onion-skin"),h(h({},e),{onionSkinEnabled:!e.onionSkinEnabled});case v.CHANGE_TILE_PALETTE_CATEGORY:return w("change-tile-category-"+a[t.category]),h(h({},e),{tilemapPalette:h(h({},e.tilemapPalette),{category:t.category,page:0})});case v.CHANGE_TILE_PALETTE_PAGE:return w("change-tile-page"),h(h({},e),{tilemapPalette:h(h({},e.tilemapPalette),{page:t.page})});case v.CHANGE_DRAWING_MODE:return w("change-drawing-mode"),h(h({},e),{drawingMode:t.drawingMode||s.Default});case v.CHANGE_OVERLAY_ENABLED:return w("change-overlay-enabled"),h(h({},e),{overlayEnabled:t.enabled});case v.CREATE_NEW_TILE:return r=e.editedTiles,!t.tile||r&&-1!==r.indexOf(t.tile.id)||(r=(r||[]).concat([t.tile.id])),h(h({},e),{editedTiles:r,selectedColor:t.foreground,backgroundColor:t.background});case v.SET_GALLERY_OPEN:return w("set-gallery-open-"+t.open),h(h({},e),{tileGalleryOpen:t.open,tilemapPalette:h(h({},e.tilemapPalette),{page:0})});case v.DELETE_TILE:return h(h({},e),{deletedTiles:(e.deletedTiles||[]).concat([t.id]),selectedColor:t.index===e.selectedColor?0:e.selectedColor,backgroundColor:t.index===e.backgroundColor?0:e.backgroundColor});case v.OPEN_TILE_EDITOR:var i=t.index?"edit":"new";return w("open-tile-editor-"+i),h(h({},e),{editingTile:{type:i,tilesetIndex:t.index}});case v.CLOSE_TILE_EDITOR:return r=e.editedTiles,!t.result||r&&-1!==r.indexOf(t.result.id)||(r=(r||[]).concat([t.result.id])),h(h({},e),{editedTiles:r,selectedColor:t.index||n.present.tileset.tiles.length,editingTile:void 0});case v.SHOW_ALERT:return w("show-alert"),h(h({},e),{alert:{title:t.title,text:t.text,options:t.options}});case v.HIDE_ALERT:return w("hide-alert"),h(h({},e),{alert:null});case v.DISABLE_RESIZE:return h(h({},e),{resizeDisabled:!0});case v.CHANGE_ASSET_NAME:return w("change-asset-name"),h(h({},e),{assetName:t.name})}return e},b=function(e,t){switch(t.type){case v.TOGGLE_ASPECT_RATIO:return w("toggle-aspect-ratio-lock"),h(h({},e),{aspectRatioLocked:!e.aspectRatioLocked});case v.CHANGE_IMAGE_DIMENSIONS:w("change-dimensions");var n=t.imageDimensions,i=n[0],o=n[1];return h(h({},e),{tilemap:h(h({},e.tilemap),{bitmap:(f=e.tilemap.bitmap,p=i,d=o,pxt.sprite.Tilemap.fromData(f).resize(p,d).data()),overlayLayers:e.tilemap.overlayLayers&&e.tilemap.overlayLayers.map(function(e){return t=e,n=i,r=o,pxt.sprite.Bitmap.fromData(t).resize(n,r).data();var t,n,r})})});case v.CREATE_NEW_TILE:var r=!t.qualifiedName;w(r?"new-tile":"used-tile-"+t.qualifiedName);var a=void 0;return r?(a=t.tile).isProjectTile=!0:a=m.lookupAsset("tile",t.qualifiedName),h(h({},e),{tileset:h(h({},e.tileset),{tiles:e.tileset.tiles.concat([a])}),nextId:r?e.nextId+1:e.nextId});case v.CLOSE_TILE_EDITOR:return w("close-tile-editor"),t.result?t.index?h(h({},e),{tileset:(l=e.tileset,c=t.index,u=t.result,h(h({},l),{tiles:l.tiles.map(function(e,t){return t===c?u:e})}))}):h(h({},e),{tileset:h(h({},e.tileset),{tiles:e.tileset.tiles.concat([t.result])}),nextId:e.nextId+1}):e;case v.DELETE_TILE:w("delete-tile");var s=e.tileset.tiles.slice();return s.splice(t.index,1),h(h({},e),{tilemap:h(h({},e.tilemap),{bitmap:function(e,t){for(var n=t.copy(),r=0;r<n.width;r++)for(var i=0;i<n.height;i++){var o=n.get(r,i);o===e?n.set(r,i,0):e<o&&n.set(r,i,o-1)}return n}(t.index,pxt.sprite.Tilemap.fromData(e.tilemap.bitmap)).data()}),tileset:h(h({},e.tileset),{tiles:s})});case v.IMAGE_EDIT:return w("image-edit"),h(h({},e),{tilemap:t.newState});default:return e}var l,c,u,f,p,d};function _(e,t){return{bitmap:new pxt.sprite.Bitmap(e,t).data()}}function w(e){f&&f(e)}n.setTelemetryFunction=function(e){f=e},n.default=function(e,t){switch(void 0===e&&(e=p),t.type){case v.OPEN_TILE_EDITOR:case v.CHANGE_PREVIEW_ANIMATING:case v.CHANGE_CANVAS_ZOOM:case v.CHANGE_IMAGE_TOOL:case v.CHANGE_CURSOR_SIZE:case v.CHANGE_SELECTED_COLOR:case v.CHANGE_CURSOR_LOCATION:case v.CHANGE_BACKGROUND_COLOR:case v.SWAP_FOREGROUND_BACKGROUND:case v.TOGGLE_ONION_SKIN_ENABLED:case v.CHANGE_OVERLAY_ENABLED:case v.CHANGE_TILE_PALETTE_PAGE:case v.CHANGE_TILE_PALETTE_CATEGORY:case v.CHANGE_DRAWING_MODE:case v.SET_GALLERY_OPEN:case v.SHOW_ALERT:case v.HIDE_ALERT:case v.DISABLE_RESIZE:return h(h({},e),{editor:y(e.editor,t,e.store)});case v.SET_INITIAL_STATE:var n=t.state;return h(h({},e),{editor:h(h({},p.editor),{assetName:n.assetName,selectedColor:n.selectedColor,backgroundColor:n.backgroundColor,tilemapPalette:n.tilemapPalette,tileGalleryOpen:n.tileGalleryOpen,tileGallery:n.tileGallery,isTilemap:n.isTilemap,referencedTiles:e.editor.referencedTiles}),store:h(h({},e.store),{past:t.past||e.store.past,future:t.past?[]:e.store.future})});case v.UNDO_IMAGE_EDIT:return e.store.past.length?(w("undo"),h(h({},e),{store:h(h({},e.store),{past:e.store.past.slice(0,e.store.past.length-1),present:e.store.past[e.store.past.length-1],future:g(e.store.future,[e.store.present])})})):e;case v.REDO_IMAGE_EDIT:return e.store.future.length?(w("redo"),h(h({},e),{store:h(h({},e.store),{past:g(e.store.past,[e.store.present]),present:e.store.future[e.store.future.length-1],future:e.store.future.slice(0,e.store.future.length-1)})})):e;case v.SET_INITIAL_FRAMES:return h(h({},e),{editor:h(h({},p.editor),{isTilemap:!1}),store:h(h({},e.store),{past:[],present:{kind:"Animation",visible:!0,colors:pxt.appTarget.runtime.palette.slice(),aspectRatioLocked:!1,currentFrame:0,frames:t.frames,interval:t.interval},future:[]})});case v.SET_INITIAL_TILEMAP:return h(h({},e),{editor:h(h({},e.editor),{selectedColor:-1,backgroundColor:-1,isTilemap:!0,tilemapPalette:{category:a.Forest,page:0},drawingMode:s.Default,overlayEnabled:!0,tileGallery:t.gallery,tileGalleryOpen:!!t.gallery,referencedTiles:t.referencedTiles}),store:h(h({},e.store),{past:[],present:{kind:"Tilemap",colors:pxt.appTarget.runtime.palette.slice(),aspectRatioLocked:!1,tilemap:{bitmap:t.tilemap,overlayLayers:t.layers},tileset:function(e,t){for(var n=0,r=e.tiles;n<r.length;n++){var i=r[n];if(!i.jresData&&!i.isProjectTile)for(var o=0,a=t;o<a.length;o++){var s=a[o];if(s.qualifiedName===i.id){i.bitmap=s.bitmap;break}}}return e}(t.tileset,t.gallery),nextId:t.nextId},future:[]})});default:return h(h({},e),{editor:y(e.editor,t,e.store),store:h(h({},e.store),{past:g(e.store.past,[e.store.present]),present:e.editor.isTilemap?b(e.store.present,t):d(e.store.present,t),future:[]})})}}},{"../../../assets":2,"../actions/types":20}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("redux"),i=e("./imageReducer"),o=r.createStore(i.default);n.default=o,n.tileEditorStore=r.createStore(i.default),n.mainStore=o},{"./imageReducer":23,redux:249}],25:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("react-redux"),p=pxt.BrowserUtils.isEdge()?25:1,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tileColors=[],e}return i(e,t),e.prototype.componentDidMount=function(){this.canvas=this.refs["minimap-canvas"],this.redrawCanvas()},e.prototype.componentDidUpdate=function(){this.redrawCanvas()},e.prototype.render=function(){return o.createElement("div",{className:"minimap-outer"},o.createElement("canvas",{ref:"minimap-canvas",className:"paint-surface"}))},e.prototype.redrawCanvas=function(){var e=this.props.tilemap,t=e.bitmap,n=e.floating,r=e.layerOffsetX,i=e.layerOffsetY,o=this.canvas.getContext("2d"),a=pxt.sprite.Tilemap.fromData(t),s=n&&n.bitmap?pxt.sprite.Tilemap.fromData(n.bitmap):null;this.canvas.width=a.width*p,this.canvas.height=a.height*p,this.tileColors=[];for(var l=0;l<a.width;l++)for(var c=0;c<a.height;c++){var u=s?s.get(l-r,c-i):null,f=a.get(l,c);u?(o.fillStyle=this.getColor(u),o.fillRect(l*p,c*p,p,p)):f?(o.fillStyle=this.getColor(f),o.fillRect(l*p,c*p,p,p)):o.clearRect(l*p,c*p,p,p)}},e.prototype.getColor=function(e){if(!this.tileColors[e]){var t=this.props,n=t.tileset,r=t.colors;if(e>=n.tiles.length)return"#ffffff";var i=pxt.sprite.Bitmap.fromData(n.tiles[e].bitmap);this.tileColors[e]=pxt.sprite.computeAverageColor(i,r)}return this.tileColors[e]},e}(o.Component);n.Minimap=a.connect(function(e,t){var n=e.store.present,r=(e.editor,n);return r?{tilemap:r.tilemap,tileset:r.tileset,colors:r.colors}:{}},{})(s)},{react:228,"react-redux":207}],26:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var h=e("react"),o=e("react-redux"),g=e("../store/imageReducer"),a=e("../actions/dispatch"),m=e("../TimelineFrame"),v=e("../Dropdown"),y=e("../Pivot"),b=e("../Button"),c=e("../../../assets"),f=pxt.BrowserUtils.isEdge()?25:1,u=[{id:"forest",text:lf("Forest"),tiles:[]},{id:"aquatic",text:lf("Aquatic"),tiles:[]},{id:"dungeon",text:lf("Dungeon"),tiles:[]},{id:"misc",text:lf("Miscellaneous"),tiles:[]}],_=[{id:"custom",text:lf("My Tiles")},{id:"gallery",text:lf("Gallery")}],w=new pxt.sprite.Bitmap(16,16),s=function(l){function e(e){var s=l.call(this,e)||this;s.dropdownHandler=function(e,t){s.props.dispatchChangeTilePaletteCategory(t)},s.pivotHandler=function(e,t){s.props.dispatchSetGalleryOpen(1===t)},s.pageHandler=function(e){s.props.dispatchChangeTilePalettePage(e)},s.tileCreateHandler=function(){s.props.dispatchOpenTileEditor()},s.tileEditHandler=function(){var e,t=s.props,n=t.tileset,r=t.selected,i=t.dispatchOpenTileEditor,o=n.tiles[r];(null===(e=o)||void 0===e?void 0:e.isProjectTile)&&0!==r&&i(r,o.id)},s.tileDuplicateHandler=function(){var e=s.props,t=e.tileset,n=e.selected,r=e.backgroundColor,i=e.dispatchCreateNewTile;t.tiles[n]&&t.tiles[n].isProjectTile&&0!==n&&i(c.createTile(t.tiles[n].bitmap),t.tiles.length,r)},s.tileDeleteAlertHandler=function(){var e=s.props,t=e.tileset,n=e.selected,r=e.dispatchShowAlert,i=e.dispatchHideAlert,o=e.referencedTiles,a=t.tiles[n];n&&a&&a.isProjectTile&&(o&&-1!==o.indexOf(a.id)?r(lf("Unable to delete"),lf("This tile is used in your game. Remove all blocks using the tile before deleting."),[{label:lf("Cancel"),onClick:i}]):r(lf("Are you sure?"),lf("Deleting this tile will remove it from all other tile maps in your game."),[{label:lf("Yes"),onClick:s.deleteTile},{label:lf("No"),onClick:i}]))},s.deleteTile=function(){var e=s.props.tileset.tiles[s.props.selected];e&&s.props.dispatchDeleteTile(s.props.selected,e.id)},s.canvasClickHandler=function(e){s.handleCanvasClickCore(e.clientX,e.clientY,0<e.button)},s.canvasTouchHandler=function(e){s.handleCanvasClickCore(e.changedTouches[0].clientX,e.changedTouches[0].clientY,!1)},s.foregroundBackgroundClickHandler=function(){s.props.drawingMode!=g.TileDrawingMode.Default?s.props.dispatchChangeDrawingMode(g.TileDrawingMode.Default):s.props.dispatchSwapBackgroundForeground()},s.wallClickHandler=function(){s.props.dispatchChangeDrawingMode(g.TileDrawingMode.Wall)},s.preventContextMenu=function(e){return e.preventDefault()};var t=e.gallery;if(s.refreshGallery(e),t){for(var n={},r=0,i=t;r<i.length;r++){var o=i[r],a=o.tags.find(function(e){return pxt.Util.startsWith(e,"category-")});a&&(n[a]||(n[a]={id:a,text:pxt.Util.rlf("{id:tilecategory}"+a.substr(9)),tiles:[]}),n[a].tiles.push(o))}s.categories=u.concat(Object.keys(n).map(function(e){return n[e]}))}else s.categories=[];return s}return i(e,l),e.prototype.componentDidMount=function(){this.canvas=this.refs["tile-canvas-surface"],this.updateGalleryTiles(),this.redrawCanvas()},e.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.selected!=e.selected?this.jumpToPageContaining(e.selected):this.props.backgroundColor!=e.backgroundColor&&this.jumpToPageContaining(e.backgroundColor),this.refreshGallery(e)},e.prototype.componentDidUpdate=function(){this.updateGalleryTiles(),this.redrawCanvas()},e.prototype.render=function(){var e=this.props,t=e.colors,n=e.selected,r=e.backgroundColor,i=e.tileset,o=e.category,a=e.page,s=e.drawingMode,l=e.galleryOpen,c=i.tiles[n]?i.tiles[n].bitmap:w.data(),u=i.tiles[r]?i.tiles[r].bitmap:w.data();w.data(),this.updateGalleryTiles();var f=Math.ceil(this.categoryTiles.length/16);l||this.categoryTiles.length%16!=0||f++;var p=!l&&(1===f||a===f-1),d=l||!this.renderedTiles.some(function(e){return!E(e)&&e.index===n});return h.createElement("div",{className:"tile-palette"},h.createElement("div",{className:"tile-palette-fg-bg"},h.createElement("div",{className:"tile-palette-swatch fg "+(s==g.TileDrawingMode.Default?"selected":""),onClick:this.foregroundBackgroundClickHandler,role:"button"},h.createElement(m.TimelineFrame,{frames:[{bitmap:c}],colors:t})),h.createElement("div",{className:"tile-palette-swatch bg",onClick:this.foregroundBackgroundClickHandler,role:"button"},h.createElement(m.TimelineFrame,{frames:[{bitmap:u}],colors:t}),h.createElement(b.IconButton,{iconClass:"ms-Icon ms-Icon--ReturnKey",title:lf("Swap the background and foreground colors."),toggle:!0})),h.createElement("div",{className:"tile-palette-swatch wall "+(s==g.TileDrawingMode.Wall?"selected":""),onClick:this.wallClickHandler,title:lf("Draw walls"),role:"button"},h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",width:"1000",height:"1000"},h.createElement("path",{d:"M 968.49289,108.05443 771.30518,3.7581533 183.65231,166.0694 l 2.58963,202.62638 -156.247366,54.4148 0.872799,492.65563 179.544267,81.08212 758.08125,-222.4989 z M 765.6275,42.836761 916.79721,122.02922 412.26526,262.35026 250.08966,187.43643 Z M 934.62189,739.077 234.56171,946.92199 233.81426,554.79578 422.38222,493.25053 423.42046,300.4059 934.62189,157.54989 Z M 204.96854,402.33519 361.49056,473.98651 222.88861,518.46222 75.008408,444.5191 Z"})))),h.createElement(y.Pivot,{options:_,selected:l?1:0,onChange:this.pivotHandler}),h.createElement("div",{className:"tile-palette-controls-outer"},l&&h.createElement(v.Dropdown,{onChange:this.dropdownHandler,options:this.categories.filter(function(e){return!!e.tiles.length}),selected:o}),!l&&h.createElement("div",{className:"tile-palette-controls"},h.createElement(b.IconButton,{onClick:this.tileEditHandler,iconClass:"ms-Icon ms-Icon--SingleColumnEdit",title:lf("Edit the selected tile"),disabled:d,toggle:!d}),h.createElement(b.IconButton,{onClick:this.tileDuplicateHandler,iconClass:"ms-Icon ms-Icon--Copy",title:lf("Duplicate the selected tile"),disabled:d,toggle:!d}),h.createElement(b.IconButton,{onClick:this.tileDeleteAlertHandler,iconClass:"ms-Icon ms-Icon--Delete",title:lf("Delete the selected tile"),disabled:d,toggle:!d}))),h.createElement("div",{className:"tile-canvas-outer",onContextMenu:this.preventContextMenu},h.createElement("div",{className:"tile-canvas"},h.createElement("canvas",{ref:"tile-canvas-surface",className:"paint-surface",onMouseDown:this.canvasClickHandler,onTouchStart:this.canvasTouchHandler,role:"complementary"}),p&&h.createElement("div",{ref:"create-tile-ref"},h.createElement(b.IconButton,{onClick:this.tileCreateHandler,iconClass:"ms-Icon ms-Icon--Add",title:lf("Create a new tile"),toggle:!0}))),h.createElement("div",{className:"tile-canvas-controls"},function(e,t,n){for(var r=16+5*(e-1),i=[],o=0;o<e;o++)i[o]=o===t;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+r+" 10",className:"tile-palette-pages "+(e<2?"disabled":"")},h.createElement("polygon",{className:"tile-palette-page-arrow",points:"1,5 4,3 4,7",onClick:t?function(){return n(t-1)}:void 0}),i.map(function(e,t){return h.createElement("circle",{className:"tile-palette-page-dot",key:t,cx:8+5*t,cy:"5",r:e?2:1,onClick:e?void 0:function(){return n(t)}})}),h.createElement("polygon",{className:"tile-palette-page-arrow",points:r-1+",5 "+(r-4)+",3 "+(r-4)+",7",onClick:t<e-1?function(){return n(t+1)}:void 0}))}(f,a,this.pageHandler))))},e.prototype.updateGalleryTiles=function(){var e=this.props,t=e.page,n=e.category,r=e.galleryOpen;this.categoryTiles=r?this.categories[n].tiles:this.getCustomTiles().map(function(e){var t=e[0];return{index:e[1],bitmap:t.bitmap}});var i=16*t;this.renderedTiles=this.categoryTiles.slice(i,i+16)},e.prototype.jumpToPageContaining=function(e){var t=this.props,n=t.tileset,r=t.dispatchSetGalleryOpen,i=t.dispatchChangeTilePaletteCategory,o=t.dispatchChangeTilePalettePage;if(!(!e||e<0||e>=n.tiles.length)){var a=n.tiles[e];if(a.isProjectTile){var s=this.getCustomTiles().map(function(e){var t=e[0];return e[1],t});if(!s)return;c=Math.max(Math.floor(s.findIndex(function(e){return e.id==a.id})/16),0),r(!1),o(c)}else{var l=this.categories.find(function(e){return-1!==e.tiles.findIndex(function(e){return e.qualifiedName==a.id})});if(!l||!l.tiles)return;var c=Math.max(Math.floor(l.tiles.findIndex(function(e){return e.qualifiedName==a.id})/16),0);r(!0),i(this.categories.indexOf(l)),o(c)}}},e.prototype.redrawCanvas=function(){var e=this.props,t=e.tileset,n=e.page,r=e.selected,i=4*n*4,o=t.tileWidth+1;this.canvas.width=(4*o+1)*f,this.canvas.height=(4*o+1)*f;for(var a=this.canvas.getContext("2d"),s=0;s<4;s++)for(var l=0;l<4;l++){var c=this.categoryTiles[i+4*s+l];c&&(E(c)||c.index!==r||(a.fillStyle="#ff0000",a.fillRect(l*o,s*o,o+1,o+1)),a.fillStyle="#333333",a.fillRect(l*o+1,s*o+1,o-1,o-1),this.drawBitmap(pxt.sprite.Bitmap.fromData(c.bitmap),1+l*o,1+s*o))}this.positionCreateTileButton()},e.prototype.drawBitmap=function(e,t,n,r,i,o){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===i&&(i=f),void 0===o&&(o=this.canvas);var a=this.props.colors,s=o.getContext("2d");s.imageSmoothingEnabled=!1;for(var l=0;l<e.width;l++)for(var c=0;c<e.height;c++){var u=e.get(l,c);u?(s.fillStyle=a[u],s.fillRect((l+t)*i,(c+n)*i,i,i)):r||s.clearRect((l+t)*i,(c+n)*i,i,i)}},e.prototype.handleCanvasClickCore=function(e,t,n){var r=this.canvas.getBoundingClientRect(),i=(e-r.left)/(r.width/4)|0,o=(t-r.top)/(r.height/4)|0,a=this.renderedTiles[4*o+i];if(a){var s=void 0,l=void 0;if(E(a)?(s=this.getTileIndex(a),l=a.qualifiedName):s=a.index,0<=s)n?this.props.dispatchChangeBackgroundColor(s):this.props.dispatchChangeSelectedColor(s);else{var c=this.props,u=c.selected,f=c.backgroundColor,p=c.tileset.tiles.length||1;this.props.dispatchCreateNewTile(null,n?u:p,n?p:f,l)}this.props.dispatchChangeDrawingMode(g.TileDrawingMode.Default)}},e.prototype.refreshGallery=function(e){var n=e.gallery,r=e.tileset;n&&u.forEach(function(t){t.tiles=n.filter(function(e){return-1!==e.tags.indexOf(t.id)&&e.tileWidth===r.tileWidth})})},e.prototype.positionCreateTileButton=function(){var e=this.refs["create-tile-ref"];if(e){var t=this.categoryTiles.length%4,n=Math.floor(this.categoryTiles.length/4)%4;e.style.position="absolute",e.style.left="calc("+t/4+" * (100% - 0.5rem) + 0.25rem)",e.style.top="calc("+n/4+" * (100% - 0.5rem) + 0.25rem)"}},e.prototype.getCustomTiles=function(){var o=this;return this.props.tileset.tiles.map(function(e,t){return[e,t]}).filter(function(e){return e[0].isProjectTile}).sort(function(e,t){var n=e[0],r=t[0],i="myTiles.transparency"+o.props.tileset.tileWidth;return n.id==i?-1:r.id==i?1:n.internalID-r.internalID})},e.prototype.getTileIndex=function(e){for(var t=this.props.tileset,n=0;n<t.tiles.length;n++)if(t.tiles[n].id===e.qualifiedName)return n;return-1},e}(h.Component);function E(e){return!!e.qualifiedName}var l={dispatchChangeSelectedColor:a.dispatchChangeSelectedColor,dispatchChangeBackgroundColor:a.dispatchChangeBackgroundColor,dispatchSwapBackgroundForeground:a.dispatchSwapBackgroundForeground,dispatchChangeTilePalettePage:a.dispatchChangeTilePalettePage,dispatchChangeTilePaletteCategory:a.dispatchChangeTilePaletteCategory,dispatchChangeDrawingMode:a.dispatchChangeDrawingMode,dispatchCreateNewTile:a.dispatchCreateNewTile,dispatchSetGalleryOpen:a.dispatchSetGalleryOpen,dispatchOpenTileEditor:a.dispatchOpenTileEditor,dispatchDeleteTile:a.dispatchDeleteTile,dispatchShowAlert:a.dispatchShowAlert,dispatchHideAlert:a.dispatchHideAlert};n.TilePalette=o.connect(function(e,t){var n=e.store.present,r=e.editor,i=n;return i?{selected:r.selectedColor,tileset:i.tileset,backgroundColor:r.backgroundColor,category:r.tilemapPalette.category,page:r.tilemapPalette.page,colors:i.colors,drawingMode:r.drawingMode,gallery:r.tileGallery,galleryOpen:r.tileGalleryOpen,referencedTiles:r.referencedTiles}:{}},l)(s)},{"../../../assets":2,"../Button":8,"../Dropdown":10,"../Pivot":13,"../TimelineFrame":16,"../actions/dispatch":19,"../store/imageReducer":23,react:228,"react-redux":207}],27:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,a,s=e("./store/imageReducer");(a=o=n.ToolCursor||(n.ToolCursor={})).None="none",a.Default="default",a.Pointer="pointer",a.Crosshair="crosshair",a.Grab="grab",a.Grabbing="grabbing",a.EyeDropper="var(--eyedropper)",n.tools=[{tool:s.ImageEditorTool.Paint,iconClass:"ms-Icon ms-Icon--Edit",title:lf("Paint Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Erase,iconClass:"ms-Icon ms-Icon--EraseTool",title:lf("Erase Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Rect,iconClass:"ms-Icon ms-Icon--RectangleShape",title:lf("Rectangle Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Fill,iconClass:"ms-Icon ms-Icon--BucketColor",title:lf("Fill Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Circle,iconClass:"ms-Icon ms-Icon--CircleRing",title:lf("Circle Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Line,iconClass:"ms-Icon ms-Icon--Line",title:lf("Line Tool"),hoverCursor:o.Crosshair},{tool:s.ImageEditorTool.Marquee,iconClass:"ms-Icon ms-Icon--SelectAll",title:lf("Marquee Tool"),hoverCursor:o.Crosshair,hoverLayerCursor:o.Grab,downLayerCursor:o.Grabbing},{tool:s.ImageEditorTool.Pan,iconClass:"ms-Icon ms-Icon--HandsFree",title:lf("Canvas Pan Tool"),hoverCursor:o.Grab,downCursor:o.Grabbing},{tool:s.ImageEditorTool.ColorSelect,hiddenTool:!0,iconClass:"ms-Icon ms-Icon--Edit",title:lf("Color Select Tool"),hoverCursor:o.EyeDropper}],n.getEdit=function(e,t,n,r){switch(e){case s.ImageEditorTool.Paint:return new f(t.width,t.height,n,r);case s.ImageEditorTool.Rect:return new d(t.width,t.height,n,r);case s.ImageEditorTool.Fill:return new m(t.width,t.height,n,r);case s.ImageEditorTool.Line:return new h(t.width,t.height,n,r);case s.ImageEditorTool.Marquee:return new v(t.width,t.height,n,r);case s.ImageEditorTool.Circle:return new g(t.width,t.height,n,r);case s.ImageEditorTool.Erase:return new f(t.width,t.height,0,r);case s.ImageEditorTool.ColorSelect:default:return}},n.getEditState=function(e,t,n){void 0===n&&(n=s.TileDrawingMode.Default);var r,i,o,a=new l(t?pxt.sprite.Tilemap.fromData(e.bitmap).copy():pxt.sprite.Bitmap.fromData(e.bitmap).copy());return e.overlayLayers&&(a.overlayLayers=e.overlayLayers.map(function(e){return pxt.sprite.Bitmap.fromData(e).copy()})),a.layerOffsetX=e.layerOffsetX,a.layerOffsetY=e.layerOffsetY,e.floating&&(e.floating.bitmap&&(i=t?pxt.sprite.Tilemap.fromData(e.floating.bitmap).copy():pxt.sprite.Bitmap.fromData(e.floating.bitmap).copy()),e.floating.overlayLayers&&(o=e.floating.overlayLayers.map(function(e){return pxt.sprite.Bitmap.fromData(e).copy()})),r={image:i,overlayLayers:o}),a.floating=r,a.setActiveLayer(n),a};var l=function(){function r(e){this.activeLayerIndex=-1,this.image=e,this.layerOffsetX=0,this.layerOffsetY=0}return Object.defineProperty(r.prototype,"width",{get:function(){return this.image.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.image.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activeLayer",{get:function(){return this.activeLayerIndex<0?this.image:this.overlayLayers[this.activeLayerIndex]},enumerable:!0,configurable:!0}),r.prototype.setActiveLayer=function(e){switch(e){case s.TileDrawingMode.Wall:this.activeLayerIndex=0;break;default:this.activeLayerIndex=-1}},r.prototype.copy=function(){var e=new r;if(e.image=this.image.copy(),e.overlayLayers=this.overlayLayers&&this.overlayLayers.map(function(e){return e.copy()}),this.floating){var t=void 0,n=void 0;this.floating.image&&(t=this.floating.image.copy()),this.floating.overlayLayers&&(n=this.floating.overlayLayers.map(function(e){return e.copy()})),e.floating={image:t,overlayLayers:n}}return e.layerOffsetX=this.layerOffsetX,e.layerOffsetY=this.layerOffsetY,e},r.prototype.equals=function(e){return!(!this.image.equals(e.image)||this.floating&&!e.floating||!this.floating&&e.floating)&&(!this.floating||!this.floating.image||this.floating.image.equals(e.floating.image)&&this.layerOffsetX===e.layerOffsetX&&this.layerOffsetY===e.layerOffsetY)},r.prototype.mergeFloatingLayer=function(){var n=this;this.floating&&(this.floating.image||this.floating.overlayLayers)&&(this.floating.image&&(this.floating.image.x0=this.layerOffsetX,this.floating.image.y0=this.layerOffsetY,this.image.apply(this.floating.image,!0),this.floating.image=void 0),this.floating.overlayLayers&&(this.floating.overlayLayers.forEach(function(e,t){e.x0=n.layerOffsetX,e.y0=n.layerOffsetY,n.overlayLayers[t].apply(e,!0)}),this.floating.overlayLayers=void 0))},r.prototype.copyToLayer=function(r,i,t,o,e){if(void 0===e&&(e=!1),0!==t&&0!==o){t<0&&(r+=t,t=-t),o<0&&(i+=o,o=-o);var n,a=this.image.copy(r,i,t,o);if(this.layerOffsetX=a.x0,this.layerOffsetY=a.y0,a.x0=void 0,a.y0=void 0,this.overlayLayers&&(n=this.overlayLayers.map(function(e){return e.copy(r,i,t,o)})),e)for(var s=function(n){for(var e=function(t){l.image.set(r+n,i+t,0),l.overlayLayers&&l.overlayLayers.forEach(function(e){return e.set(r+n,i+t,0)})},t=0;t<o;t++)e(t)},l=this,c=0;c<t;c++)s(c);this.floating={image:a,overlayLayers:n}}},r.prototype.inFloatingLayer=function(e,t){return!(!this.floating||!this.floating.image)&&(e-=this.layerOffsetX,t-=this.layerOffsetY,0<=e&&e<this.floating.image.width&&0<=t&&t<this.floating.image.height)},r.prototype.setFloatingLayer=function(e,t){var n,r,i,o;this.mergeFloatingLayer(),this.floating={image:e},this.layerOffsetX=null!=(r=null===(n=t)||void 0===n?void 0:n.layerOffsetX)?r:0,this.layerOffsetY=null!=(o=null===(i=t)||void 0===i?void 0:i.layerOffsetY)?o:0},r.prototype.toImageState=function(){return{bitmap:this.image.data(),layerOffsetX:this.layerOffsetX,layerOffsetY:this.layerOffsetY,floating:this.floating&&{bitmap:this.floating.image?this.floating.image.data():void 0,overlayLayers:this.floating.overlayLayers?this.floating.overlayLayers.map(function(e){return e.data()}):void 0},overlayLayers:this.overlayLayers?this.overlayLayers.map(function(e){return e.data()}):void 0}},r}();n.EditState=l;var c=function(){function e(e,t,n,r){this.canvasWidth=e,this.canvasHeight=t,this.color=n,this.toolWidth=r}return e.prototype.doEdit=function(e){this.isStarted&&this.doEditCore(e)},e.prototype.inBounds=function(e,t){return 0<=e&&e<this.canvasWidth&&0<=t&&t<this.canvasHeight},e.prototype.start=function(e,t,n){this.isStarted=!0,this.startCol=e,this.startRow=t},e.prototype.drawCursor=function(e,t,n){n(e,t)},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.update=function(e,t){this.endCol=e,this.endRow=t,this.isDragged||e==this.startCol&&t==this.startRow||(this.isDragged=!0)},t.prototype.topLeft=function(){return{x:Math.min(this.startCol,this.endCol),y:Math.min(this.startRow,this.endRow)}},t.prototype.bottomRight=function(){return{x:Math.max(this.startCol,this.endCol),y:Math.max(this.startRow,this.endRow)}},t}(n.Edit=c);n.SelectionEdit=u;var f=function(o){function e(e,t,n,r){var i=o.call(this,e,t,n,r)||this;return i.showPreview=!0,i.mask=new pxt.sprite.Bitmask(e,t),i}return i(e,o),e.prototype.update=function(e,t){this.interpolate(this.startCol,this.startRow,e,t),this.startCol=e,this.startRow=t},e.prototype.interpolate=function(e,t,n,r){var i=this,o=n-e,a=r-t,s=function(e,t){return i.mask.set(e,t)};if(0!==o)for(var l=0<o?1:-1,c=0<a?1:-1,u=Math.abs(a/o),f=0,p=t,d=e;0<l?d<=n:n<=d;d+=l)for(this.drawCore(d,p,s),f+=u;.5<=f;)(0<c?p<=r:r<=p)&&this.drawCore(d,p,s),p+=c,f-=1;else for(var h=0<=a?r:t,g=0<=a?t:r;g<=h;g++)this.drawCore(e,g,s)},e.prototype.doEditCore=function(e){e.mergeFloatingLayer();for(var t=0;t<e.width;t++)for(var n=0;n<e.height;n++)this.mask.get(t,n)&&e.activeLayer.set(t,n,this.color)},e.prototype.drawCursor=function(e,t,n){this.drawCore(e,t,n)},e.prototype.drawCore=function(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(var r=0;r<this.toolWidth;r++)for(var i=0;i<this.toolWidth;i++){var o=e+r,a=t+i;0<=o&&o<this.canvasWidth&&0<=a&&a<this.canvasHeight&&n(e+r,t+i)}},e}(c);n.PaintEdit=f;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showPreview=!0,e}return i(e,t),e.prototype.doEditCore=function(e){e.mergeFloatingLayer();for(var t=this.topLeft(),n=this.bottomRight(),r=t.x;r<=n.x;r++)for(var i=t.y;i<=n.y;i++)e.activeLayer.set(r,i,this.color)},e}(u);n.RectangleEdit=p;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showPreview=!0,e}return i(e,t),e.prototype.doEditCore=function(e){e.mergeFloatingLayer();var t=this.topLeft();t.x-=this.toolWidth>>1,t.y-=this.toolWidth>>1;var n=this.bottomRight();n.x+=this.toolWidth>>1,n.y+=this.toolWidth>>1;for(var r=0;r<this.toolWidth;r++)this.drawRectangle(e,{x:t.x+r,y:t.y+r},{x:n.x-r,y:n.y-r})},e.prototype.drawRectangle=function(e,t,n){if(!(t.x>n.x||t.y>n.y)){for(var r=t.x;r<=n.x;r++)e.activeLayer.set(r,t.y,this.color),e.activeLayer.set(r,n.y,this.color);for(var i=t.y;i<=n.y;i++)e.activeLayer.set(t.x,i,this.color),e.activeLayer.set(n.x,i,this.color)}},e.prototype.drawCursor=function(e,t,n){this.drawCore(e,t,n)},e.prototype.drawCore=function(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(var r=0;r<this.toolWidth;r++)for(var i=0;i<this.toolWidth;i++){var o=e+r,a=t+i;0<=o&&o<this.canvasWidth&&0<=a&&a<this.canvasHeight&&n(e+r,t+i)}},e}(u);n.OutlineEdit=d;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showPreview=!0,e}return i(e,t),e.prototype.doEditCore=function(e){e.mergeFloatingLayer(),this.bresenham(this.startCol,this.startRow,this.endCol,this.endRow,e)},e.prototype.bresenham=function(e,t,n,r,i){var o=this,a=n-e,s=r-t,l=function(e,t){return i.activeLayer.set(e,t,o.color)};if(0!==a)for(var c=0<a?1:-1,u=0<s?1:-1,f=Math.abs(s/a),p=0,d=t,h=e;0<c?h<=n:n<=h;h+=c)for(this.drawCore(h,d,l),p+=f;.5<=p;)(0<u?d<=r:r<=d)&&this.drawCore(h,d,l),d+=u,p-=1;else for(var g=0<=s?r:t,m=0<=s?t:r;m<=g;m++)this.drawCore(e,m,l)},e.prototype.drawCursor=function(e,t,n){this.drawCore(e,t,n)},e.prototype.drawCore=function(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(var r=0;r<this.toolWidth;r++)for(var i=0;i<this.toolWidth;i++)n(e+r,t+i)},e}(u);n.LineEdit=h;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showPreview=!0,e}return i(e,t),e.prototype.doEditCore=function(e){e.mergeFloatingLayer();var t=this.topLeft(),n=this.bottomRight(),r=n.x-t.x,i=n.y-t.y,o=Math.floor(Math.hypot(r,i)),a=this.startCol,s=this.startRow;this.midpoint(a,s,o,e)},e.prototype.midpoint=function(e,t,n,r){for(var i=n-1,o=0,a=1,s=1,l=a-2*n;o<=i;)r.activeLayer.set(e+i,t+o,this.color),r.activeLayer.set(e+i,t-o,this.color),r.activeLayer.set(e+o,t+i,this.color),r.activeLayer.set(e+o,t-i,this.color),r.activeLayer.set(e-o,t+i,this.color),r.activeLayer.set(e-o,t-i,this.color),r.activeLayer.set(e-i,t+o,this.color),r.activeLayer.set(e-i,t-o,this.color),l<=0&&(o++,l+=s,s+=2),0<l&&(i--,l+=(a+=2)-2*n)},e}(u);n.CircleEdit=g;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showPreview=!0,e}return i(e,t),e.prototype.start=function(e,t,n){this.isStarted=!0,this.col=e,this.row=t},e.prototype.update=function(e,t){this.col=e,this.row=t},e.prototype.doEditCore=function(n){var r=n.activeLayer!==n.image,e=function(e,t){return(r?n.activeLayer.get(e,t)<<8:0)+n.image.get(e,t)},t=e(this.col,this.row);if(t!==this.color){n.mergeFloatingLayer();var i=new pxt.sprite.Bitmask(n.width,n.height);i.set(this.col,this.row);for(var o=[{x:this.col,y:this.row}];o.length;){var a=o.pop();e(a.x,a.y)===t&&(n.activeLayer.set(a.x,a.y,this.color),s(a.x+1,a.y),s(a.x-1,a.y),s(a.x,a.y+1),s(a.x,a.y-1))}}function s(e,t){0<=e&&e<i.width&&0<=t&&t<i.height&&!i.get(e,t)&&(i.set(e,t),o.push({x:e,y:t}))}},e}(c);n.FillEdit=m;var v=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.isMove=!1,e.showPreview=!1,e}return i(e,n),e.prototype.start=function(e,t,n){this.isStarted=!0,this.startCol=e,this.startRow=t,n.floating&&n.floating.image&&n.inFloatingLayer(e,t)&&(this.isMove=!0,this.startOffsetX=n.layerOffsetX,this.startOffsetY=n.layerOffsetY)},e.prototype.inBounds=function(e,t){return this.isMove||n.prototype.inBounds.call(this,e,t)},e.prototype.doEditCore=function(e){var t=this.topLeft(),n=this.bottomRight();this.isDragged?this.isMove?(e.layerOffsetX=this.startOffsetX+this.endCol-this.startCol,e.layerOffsetY=this.startOffsetY+this.endRow-this.startRow):(e.mergeFloatingLayer(),e.copyToLayer(t.x,t.y,n.x-t.x+1,n.y-t.y+1,!0)):this.isMove||e.mergeFloatingLayer()},e}(u);n.MarqueeEdit=v},{"./store/imageReducer":23}],28:[function(e,t,n){"use strict";function p(){return"undefined"!=typeof window&&!!window.PointerEvent}function d(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}var r;Object.defineProperty(n,"__esModule",{value:!0}),n.DRAG_RADIUS=3,n.hasPointerEvents=p,n.isTouchEnabled=d,n.isBitmapSupported=function(){return!!window.createImageBitmap},(r=n.MapTools||(n.MapTools={}))[r.Pan=0]="Pan",r[r.Stamp=1]="Stamp",r[r.Object=2]="Object",r[r.Erase=3]="Erase";var i=function(){function e(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}return e.prototype.set=function(e,t){var n=e+this.width*t,r=n>>3,i=7&n;this.mask[r]|=1<<i},e.prototype.get=function(e,t){var n=e+this.width*t,r=n>>3,i=7&n;return this.mask[r]>>i&1},e}();function h(e){if(e.touches){var t=e;return t.touches.length?t.touches[0]:t.changedTouches[0]}return e}n.Bitmask=i,n.pointerEvents=p()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:d()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"},n.clientCoord=h,n.fireClickOnlyOnEnter=function(e){13===("number"==typeof e.which?e.which:e.keyCode)&&(e.preventDefault(),e.currentTarget.click())};var g=function(){function e(e,t,n){this.target=e,this.isRightClick=n,this.startX=t.clientX,this.startY=t.clientY,this.currentX=t.clientX,this.currentY=t.clientY}return e.prototype.update=function(e){this.currentX=e.clientX,this.currentY=e.clientY,!this.isDrag&&this.distance()>n.DRAG_RADIUS?(this.isDrag=!0,this.target.onDragStart(e,this.isRightClick)):this.isDrag&&this.target.onDragMove(e)},e.prototype.end=function(e){e&&this.update(e),e=e||{clientX:this.currentX,clientY:this.currentY},this.isDrag?this.target.onDragEnd(e):this.target.onClick(e,this.isRightClick)},e.prototype.distance=function(){return Math.sqrt(Math.pow(this.currentX-this.startX,2)+Math.pow(this.currentY-this.startY,2))},e}();function m(e,t){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return e.changedTouches[n]}function v(e){return 0<e.button}n.GestureState=g,n.bindGestureEvents=function(e,t){var n,r,i,o,a,s,l,c,u,f;p()?(u=t,(c=e).addEventListener("pointerup",function(e){f&&(f.end(h(e)),e.preventDefault()),f=void 0}),c.addEventListener("pointerdown",function(e){f&&f.end(),f=new g(u,h(e),v(e)),e.preventDefault()}),c.addEventListener("pointermove",function(e){f&&(f.update(h(e)),e.preventDefault())}),c.addEventListener("pointerleave",function(e){f&&(f.end(h(e)),e.preventDefault()),f=void 0})):d()?(a=t,(o=e).addEventListener("touchend",function(e){if(s&&l){var t=m(e,l);t&&(s.end(t),s=void 0,e.preventDefault())}}),o.addEventListener("touchstart",function(e){s&&s.end(),l=e.changedTouches[0].identifier,s=new g(a,e.changedTouches[0],v(e))}),o.addEventListener("touchmove",function(e){if(s&&l){var t=m(e,l);t&&(s.update(t),e.preventDefault())}}),o.addEventListener("touchcancel",function(e){if(s&&l){var t=m(e,l);t&&(s.end(t),s=void 0,e.preventDefault())}})):(r=t,(n=e).addEventListener("mouseup",function(e){i&&i.end(h(e)),i=void 0}),n.addEventListener("mousedown",function(e){i&&i.end(),i=new g(r,h(e),v(e))}),n.addEventListener("mousemove",function(e){i&&i.update(h(e))}),n.addEventListener("mouseleave",function(e){i&&i.end(h(e)),i=void 0}))},n.imageStateToBitmap=function(e){var t=pxt.sprite.Bitmap.fromData(e.bitmap);if(e.floating&&e.floating.bitmap){var n=pxt.sprite.Bitmap.fromData(e.floating.bitmap);n.x0=e.layerOffsetX||0,n.y0=e.layerOffsetY||0,t.apply(n,!0)}return t},n.imageStateToTilemap=function(e){var t=pxt.sprite.Tilemap.fromData(e.bitmap);if(e.floating&&e.floating.bitmap){var n=pxt.sprite.Tilemap.fromData(e.floating.bitmap);n.x0=e.layerOffsetX||0,n.y0=e.layerOffsetY||0,t.apply(n,!0)}return t},n.applyBitmapData=function(e,t,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),!e||!t)return e;var i=pxt.sprite.Bitmap.fromData(e),o=pxt.sprite.Bitmap.fromData(t);return o.x0=n,o.y0=r,i.apply(o,!0),i.data()},n.createTilemapPatchFromFloatingLayer=function(e,t){if(e.floating){for(var n=pxt.sprite.Tilemap.fromData(e.floating.image.data()),r=new pxt.sprite.Tilemap(n.width,n.height),i=e.floating.overlayLayers?e.floating.overlayLayers.map(function(e){return pxt.sprite.base64EncodeBitmap(e.data())}):[],o=[],a=0;a<n.width;a++)for(var s=0;s<n.height;s++){var l=t.tiles[n.get(a,s)],c=o.indexOf(l);-1===c?(r.set(a,s,o.length),o.push(l)):r.set(a,s,c)}return{map:pxt.sprite.hexEncodeTilemap(r),layers:i,tiles:o.map(function(e){return pxt.sprite.base64EncodeBitmap(e.bitmap)})}}}},{}],29:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("react"),s=e("./ImageEditor/ImageEditor"),l=e("./ImageEditor/store/imageReducer"),c=function(t){function e(e){var i=t.call(this,e)||this;return i.showEditor=function(){f("gallery-editor"),i.setState({currentView:"editor",tileGalleryVisible:!1})},i.showGallery=function(){f("gallery-builtin"),i.setState({currentView:"gallery",tileGalleryVisible:!1})},i.showMyAssets=function(){f("gallery-my-assets"),i.setState({currentView:"my-assets",tileGalleryVisible:!1})},i.toggleTileGallery=function(){i.state.tileGalleryVisible?i.setState({tileGalleryVisible:!1}):i.setState({tileGalleryVisible:!0,currentView:"editor"})},i.onGalleryItemSelect=function(e){if(i.ref){var t=pxt.sprite.getBitmap(i.blocksInfo,e.qName);if(!t){var n=e,r=pxt.react.getTilemapProject().lookupAsset(n.assetType,n.id);t=pxt.sprite.Bitmap.fromData(r.bitmap)}i.ref.setCurrentFrame(t)}f("gallery-selection"),i.setState({currentView:"editor",tileGalleryVisible:!1})},i.onDoneClick=function(){i.closeEditor&&i.closeEditor(),i.props.doneButtonCallback&&i.props.doneButtonCallback()},i.state={currentView:"editor",headerVisible:!0},l.setTelemetryFunction(f),i}return i(e,t),e.prototype.render=function(){var t=this,e=this.props.showTiles,n=this.state,r=n.currentView,i=n.headerVisible;this.blocksInfo&&!this.extensionGallery&&(this.extensionGallery=pxt.sprite.getGalleryItems(this.blocksInfo,"Image")),e&&!this.tileGallery&&(this.tileGallery=this.getTileGalleryItems()),"my-assets"!==r||this.projectGallery||(this.projectGallery=this.getProjectGalleryItems());var o="editor"===r?"left":"gallery"===r?"center":"right";return a.createElement("div",{className:"image-editor-wrapper"},i&&a.createElement("div",{className:"gallery-editor-header"},a.createElement("div",{className:"gallery-editor-toggle "+o+" "+(pxt.BrowserUtils.isEdge()?"edge":"")},a.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-left",onClick:this.showEditor,role:"button"},lf("Editor")),a.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-center",onClick:this.showGallery,role:"button"},lf("Gallery")),a.createElement("div",{className:"gallery-editor-toggle-label gallery-editor-toggle-right",onClick:this.showMyAssets,role:"button"},lf("My Assets")),a.createElement("div",{className:"gallery-editor-toggle-handle"})),e&&a.createElement("button",{className:"gallery-editor-show-tiles",onClick:this.toggleTileGallery},lf("Tile Gallery"))),a.createElement("div",{className:"image-editor-gallery-content"},a.createElement(s.ImageEditor,{ref:"image-editor",singleFrame:this.props.singleFrame,onDoneClicked:this.onDoneClick}),a.createElement(u,{items:"my-assets"===r?this.projectGallery.filter(function(e){return e.id!==t.editID}):this.extensionGallery,hidden:"editor"===r,filterString:this.state.galleryFilter,onItemSelected:this.onGalleryItemSelect}),e&&a.createElement(u,{items:this.tileGallery,hidden:"editor"!==r||!this.state.tileGalleryVisible,onItemSelected:this.onGalleryItemSelect})))},e.prototype.componentDidMount=function(){this.ref=this.refs["image-editor"],f("image-editor-shown")},e.prototype.componentWillUnmount=function(){f("image-editor-hidden"),this.tileGallery=void 0},e.prototype.init=function(e,t,n){if(this.closeEditor=t,this.options=n,this.props.singleFrame){var r=e;this.initSingleFrame(r,n)}else this.initAnimation(e,n);this.editID=e.id,n&&(this.blocksInfo=n.blocksInfo,n.filter&&this.setState({galleryFilter:n.filter}),null!=n.headerVisible&&this.setState({headerVisible:n.headerVisible}))},e.prototype.getValue=function(){return this.ref?this.ref.getAsset():null},e.prototype.getJres=function(){if(this.ref&&this.props.singleFrame){var e=this.ref.getCurrentFrame().data();return pxt.sprite.base64EncodeBitmap(e)}return""},e.prototype.getPersistentData=function(){return this.ref?this.ref.getPersistentData():null},e.prototype.restorePersistentData=function(e){this.ref&&(this.ref.restorePersistentData(e),this.options&&this.options.disableResize&&this.ref.disableResize())},e.prototype.onResize=function(){this.ref&&this.ref.onResize()},e.prototype.getTileGalleryItems=function(){if(!this.extensionGallery)return null;var e=pxt.sprite.filterItems(this.extensionGallery,["tile"]);return o(e)},e.prototype.getProjectGalleryItems=function(){if(!this.extensionGallery)return null;var e=pxt.react.getTilemapProject(),t=new pxt.ImageConverter,n=function(e,t){return e.internalID-t.internalID};return e.getAssets("image").sort(n).concat(e.getAssets("tile").sort(n)).map(function(e){return{qName:e.id,src:t.convert("data:image/x-mkcd-f,"+e.jresData),alt:e.meta.displayName||e.id,tags:[],assetType:e.type,id:e.id}})},e.prototype.initSingleFrame=function(e,t){this.ref.openAsset(e),t.disableResize&&this.ref.disableResize()},e.prototype.initAnimation=function(e,t){this.ref.openAsset(e),t.disableResize&&this.ref.disableResize()},e.prototype.loadJres=function(e){if(e)try{this.ref.setCurrentFrame(pxt.sprite.getBitmapFromJResURL(e))}catch(e){return}},e}(a.Component);n.ImageFieldEditor=c;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handlers=[],e}return i(e,t),e.prototype.render=function(){var n=this,e=this.props,t=e.items,r=e.hidden,i=e.filterString;return i&&(t=pxt.sprite.filterItems(t,i.split(" "))),a.createElement("div",{className:"image-editor-gallery "+(t&&!r?"visible":"")},t&&t.map(function(e,t){return a.createElement("button",{key:t,id:":"+t,role:"menuitem",className:"sprite-gallery-button sprite-editor-card",title:e.alt,"data-value":e.qName,onClick:n.clickHandler(t)},a.createElement("img",{src:e.src,"data-value":e.qName,alt:e.alt}))}))},e.prototype.clickHandler=function(o){var a=this;return this.handlers[o]||(this.handlers[o]=function(){var e=a.props,t=e.items,n=e.onItemSelected,r=e.filterString,i=e.hidden;r&&(t=pxt.sprite.filterItems(t,r.split(" "))),!i&&t&&t[o]&&n(t[o])}),this.handlers[o]},e}(a.Component);function f(e){pxt.tickEvent("image.editor",{action:e})}},{"./ImageEditor/ImageEditor":12,"./ImageEditor/store/imageReducer":23,react:228}],30:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("react"),a=e("./ImageEditor/ImageEditor"),s=e("./ImageEditor/store/imageReducer"),l=function(n){function e(e){var t=n.call(this,e)||this;return t.onDoneClick=function(){t.closeEditor&&t.closeEditor()},t.state={galleryVisible:!1},s.setTelemetryFunction(c),t}return i(e,n),e.prototype.render=function(){return o.createElement("div",{className:"image-editor-wrapper"},o.createElement("div",{className:"image-editor-gallery-content"},o.createElement(a.ImageEditor,{ref:"image-editor",singleFrame:!0,onDoneClicked:this.onDoneClick})))},e.prototype.componentDidMount=function(){this.ref=this.refs["image-editor"],c("image-editor-shown")},e.prototype.componentWillUnmount=function(){c("image-editor-hidden")},e.prototype.init=function(e,t,n){this.closeEditor=t,this.initTilemap(e,n)},e.prototype.getValue=function(){return this.ref?this.ref.getTilemap():null},e.prototype.getPersistentData=function(){return this.ref?this.ref.getPersistentData():null},e.prototype.restorePersistentData=function(e){this.ref&&this.ref.restorePersistentData(e)},e.prototype.onResize=function(){this.ref&&this.ref.onResize()},e.prototype.shouldPreventHide=function(){var e;return!(null===(e=this.ref)||void 0===e||!e.state.editingTile||(this.ref.closeNestedEditor(),0))},e.prototype.initTilemap=function(e,t){var n,r=this;t&&(this.blocksInfo=t.blocksInfo,n=pxt.sprite.filterItems(pxt.sprite.getGalleryItems(this.blocksInfo,"Image"),["tile"]).map(function(e){return{bitmap:pxt.sprite.getBitmap(r.blocksInfo,e.qName).data(),tags:e.tags,qualifiedName:e.qName,tileWidth:16}})),this.ref.openAsset(e,n)},e}(o.Component);function c(e){pxt.tickEvent("image.editor",{action:e})}n.TilemapFieldEditor=l},{"./ImageEditor/ImageEditor":12,"./ImageEditor/store/imageReducer":23,react:228}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("react"),o=e("react-dom"),a=e("./coretsx"),s=pxt.Cloud,l=!1,c=[],u={};function f(e){if(pxt.debug("hideloading: "+e),pxt.perf.recordMilestone("loading done #"+e),null!=u[e]){var t=c.indexOf(e);-1<t&&c.splice(t,1),delete u[e]}else pxt.debug("Loading not in queue, disregard: "+e);0<c.length?d():l&&r&&r.hide()}function p(e,t){pxt.debug("showloading: "+e),u[e]||(pxt.perf.recordMilestone("loading started #"+e),function(){if(!l){var e=document.getElementById("content").appendChild(document.createElement("div"));r=o.render(i.createElement(a.LoadingDimmer,{}),e),l=!0}}(),r.show(lf("Please wait")),c.push(e),u[e]=t,d())}function d(){if(c.length){var e=c[c.length-1],t=u[e];r.show(t)}}n.isLoading=function(){return r&&r.isVisible()},n.hideLoading=f,n.killLoadingQueue=function(){c=[],u={},l&&r&&r.hide()},n.showLoading=p;var h={};function g(e){clearTimeout(h[e]),f(e)}function m(e,t){a.pushNotificationMessage({kind:e,text:t,hc:n.highContrast})}function v(e){pxt.log("warning: "+e),m("warn",e)}function y(e){return e.buttons||(e.buttons=[]),e.type||(e.type="dialog"),e.hasCloseIcon&&(e.hideCancel=!0),e.hideCancel||(e.buttons||(e.buttons=[]),e.buttons.push({label:e.disagreeLbl||lf("Cancel"),className:e.disagreeClass||"cancel",icon:e.disagreeIcon||"cancel"})),e.helpUrl&&e.buttons.unshift({className:"circular help",title:lf("Help"),icon:"help",url:e.helpUrl}),a.renderConfirmDialogAsync(e)}function b(e){e.type="confirm",e.buttons||(e.buttons=[]);var t=0;return e.hideAgree||e.buttons.push({label:e.agreeLbl||lf("Go ahead!"),className:e.agreeClass,icon:e.agreeIcon||"checkmark",approveButton:!0,onclick:function(){t=1}}),e.deleteLbl&&e.buttons.push({label:e.deleteLbl,className:"delete red",icon:"trash",onclick:function(){t=2}}),y(e).then(function(){return t})}n.showLoadingAsync=function(e,t,n,r){return void 0===r&&(r=700),clearTimeout(h[e]),h[e]=setTimeout(function(){p(e,t)},r),n.finally(function(){g(e)})},n.cancelAsyncLoading=g,n.errorNotification=function(e){pxt.tickEvent("notification.error",{message:e}),m("err",e)},n.warningNotification=v,n.infoNotification=function(e){pxt.debug(e),m("info",e)},n.dialogAsync=y,n.hideDialog=function(){a.hideDialog()},n.forceUpdate=function(){a.forceUpdate()},n.confirmAsync=b,n.confirmDelete=function(e,t,n){b({header:n?lf("Would you like to delete {0} projects?",e):lf("Would you like to delete '{0}'?",e),body:lf("It will be deleted for good. No undo."),agreeLbl:lf("Delete"),agreeClass:"red",agreeIcon:"trash"}).then(function(e){e&&t().done()}).done()},n.promptAsync=function(e){e.type="prompt",e.buttons||(e.buttons=[]);var t=e.initialValue||"",n=!1;return e.onInputChanged=function(e){t=e},e.hideAgree||e.buttons.push({label:e.agreeLbl||lf("Go ahead!"),className:e.agreeClass,icon:e.agreeIcon||"checkmark",approveButton:!0,onclick:function(){n=!0}}),y(e).then(function(){return n?t:null})},n.TAB_KEY=9,n.ESC_KEY=27,n.ENTER_KEY=13,n.SPACE_KEY=32,n.setHighContrast=function(e){n.highContrast=e},n.resetFocus=function(){var e=document.getElementById("content");e.tabIndex=0,e.focus(),e.blur(),e.tabIndex=-1},n.keyCodeFromEvent=function(e){return"number"==typeof e.which?e.which:e.keyCode},n.navigateInWindow=function(e){window.location.href=e},n.findChild=function(e,t){var n=o.findDOMNode(e);return t?pxt.Util.toArray(n.querySelectorAll(t)):[n]},n.parseQueryString=function(e){var r={};return e.replace(/\+/g," ").replace(/([^#?&=]+)=([^#?&=]*)/g,function(e,t,n){return r[decodeURIComponent(t)]=decodeURIComponent(n),""}),r},n.stringifyQueryString=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];0<=e.indexOf("?")?e+="&":e+="?",e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i])}return e},n.handleNetworkError=function(e,t){var n=parseInt(e.statusCode);if(e.isOffline||0===n)v(lf("Network request failed; you appear to be offline"));else if(!isNaN(n)&&200!==n){if(t&&-1!==t.indexOf(n))return e;v(lf("Network request failed"))}throw e},n.apiAsync=function(t,e){return(e?s.privatePostAsync(t,e):s.privateGetAsync(t)).then(function(e){return console.log("*"),console.log("*******",t,"---\x3e"),console.log("*"),console.log(e),console.log("*"),e},function(e){console.log(e.message)})}},{"./coretsx":32,react:228,"react-dom":184}],32:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,l=e("react"),a=e("react-dom"),c=e("./sui"),s=e("./core"),u=function(n){function e(e){var t=n.call(this,e)||this;return t.state={inputValue:e.initialValue,inputError:void 0},t.hide=t.hide.bind(t),t.modalDidOpen=t.modalDidOpen.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t}return i(e,n),e.prototype.hide=function(){this.close()},e.prototype.close=function(e){this.setState({visible:!1}),this.resolve(e)},e.prototype.componentDidMount=function(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})},e.prototype.modalDidOpen=function(e){var t=this.props,n=this.refs.promptInput;if(n){n.setSelectionRange(0,9999);var r=this;n.onkeydown=function(e){s.keyCodeFromEvent(e)===s.ENTER_KEY&&r.okButton&&n.value&&(r.okButton.onclick(),e.preventDefault())}}t.onLoaded&&t.onLoaded(e)},e.prototype.handleInputChange=function(e){var t,n=this.props;n.onInputChanged&&n.onInputChanged(e.target.value),n.onInputValidation&&(t=n.onInputValidation(e.target.value)),this.setState({inputValue:e.target.value,inputError:t})},e.prototype.render=function(){var n=this,e=this.props,t=this.state,r=t.inputValue,i=t.inputError,o=void 0===e.size?"small":e.size,a=e.buttons?e.buttons.filter(function(e){return!!e}):[];a.forEach(function(e){var t=e.onclick;e.onclick=function(){n.close(t?t():0)},e.className||(e.className="approve positive"),e.approveButton&&(n.okButton=e)}),"prompt"==e.type&&this.okButton&&(this.okButton.disabled=!r||!!i);var s=c.cx(["coredialog",e.className]);return l.createElement(c.Modal,{isOpen:!0,ref:"modal",className:s,onClose:this.hide,size:o,defaultOpen:!0,buttons:a,dimmer:!0,closeIcon:e.hasCloseIcon,header:e.header,headerIcon:e.headerIcon,closeOnDimmerClick:!e.hideCancel,closeOnDocumentClick:!e.hideCancel,closeOnEscape:!e.hideCancel,modalDidOpen:this.modalDidOpen},"prompt"==e.type&&l.createElement("div",{className:"ui"},l.createElement("div",{className:"ui fluid icon input"},l.createElement("input",{autoFocus:!0,className:"ui input "+(i?"error":""),type:"text",ref:"promptInput",onChange:this.handleInputChange,value:r,placeholder:e.placeholder,"aria-label":e.placeholder})),!!i&&l.createElement("div",{className:"ui error message"},i)),e.jsx,!!e.jsxd&&e.jsxd(),!!e.body&&l.createElement("p",null,e.body),!!e.copyable&&l.createElement(c.Input,{copy:!0,readOnly:!0,value:e.copyable,selectOnClick:!0,autoComplete:!1}))},e}(l.Component);n.CoreDialog=u,n.dialogIsShowing=function(){return!!o},n.forceUpdate=function(){o&&o.forceUpdate()},n.renderConfirmDialogAsync=function(n){return Promise.resolve().delay(10).then(function(){var e=document.body.appendChild(document.createElement("div")),t=a.render(l.createElement(u,n),e);return(o=t).promise.finally(function(){return a.unmountComponentAtNode(e),void setTimeout(function(){e.parentElement.removeChild(e),t===o&&(o=void 0)})})})},n.hideDialog=function(){o&&(o.hide(),o=void 0)};var f=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!0},t}return i(e,n),e.prototype.hide=function(){this.setState({visible:!1,content:void 0})},e.prototype.show=function(e){this.setState({visible:!0,content:e})},e.prototype.isVisible=function(){return this.state.visible},e.prototype.render=function(){var e=this.state,t=e.visible,n=e.content;return t?l.createElement(c.Dimmer,{isOpen:!0,active:t,closable:!1},l.createElement(c.Loader,{className:"large main msg no-select","aria-live":"assertive"},n)):l.createElement("div",null)},e}(l.Component);n.LoadingDimmer=f;var p=function(n){function e(e){var t=n.call(this,e)||this;return t.state={notifications:{}},t}return i(e,n),e.prototype.push=function(t){var n=this,r=this.state.notifications,e=ts.pxtc.Util.guidGen();Object.keys(r).filter(function(e){return r[e].kind==t.kind}).forEach(function(e){return n.remove(e)}),r[e]=t;var i=this;setTimeout(function(){i.remove(e)},3e3),this.setState({notifications:r})},e.prototype.remove=function(e){var t=this.state.notifications;t[e]&&(delete t[e],this.setState({notifications:t}))},e.prototype.render=function(){var t=this.state.notifications;return l.createElement("div",{id:"msg","aria-live":"polite"},Object.keys(t).map(function(e){return function(e,t){var n=t.kind,r=t.text,i=t.hc,o="ignored info message";switch(n){case"err":o="red inverted segment";break;case"warn":o="orange inverted segment";break;case"info":o="teal inverted segment";break;case"compile":o="ignored info message"}return l.createElement("div",{key:""+e,id:n+"msg",className:"ui "+i+" "+o},r)}(e,t[e])}))},e}(l.Component);n.NotificationMessages=p;var d,h=!1;n.pushNotificationMessage=function(e){if(h)d&&d.push(e);else{h=!0;var t=document.body.appendChild(document.createElement("div"));(d=a.render(l.createElement(p,e),t)).push(e)}}},{"./core":31,"./sui":44,react:228,"react-dom":184}],33:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s,o,a=e("react"),l=e("./core"),c=pxt.Cloud,u=pxt.Util;(o=s=n.FetchStatus||(n.FetchStatus={}))[o.Pending=0]="Pending",o[o.Complete=1]="Complete",o[o.Error=2]="Error",o[o.Offline=3]="Offline";var f={};w("cloud",{getAsync:function(e){return c.privateGetAsync(E(e)).catch(l.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!c.isOnline()}}),w("cloud-search",{getAsync:function(e){return c.privateGetAsync(E(e)).catch(function(e){return l.handleNetworkError(e,[404]),{statusCode:404,headers:{},json:{}}})},expirationTime:function(e){return 6e4},isOffline:function(){return!c.isOnline()}}),w("gallery",{getAsync:function(e){return pxt.gallery.loadGalleryAsync(E(decodeURIComponent(e))).catch(function(e){return Promise.resolve(e)})},expirationTime:function(e){return 36e5}}),w("gh-search",{getAsync:function(t){return pxt.targetConfigAsync().then(function(e){return pxt.github.searchAsync(E(t),e?e.packages:void 0)}).catch(l.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!c.isOnline()}}),w("gh-pkgcfg",{getAsync:function(e){return pxt.github.pkgConfigAsync(E(e)).catch(l.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!c.isOnline()}}),w("gh-commits",{getAsync:function(e){var t=E(e).split("#",2),n=t[0],r=t[1];return pxt.github.getCommitsAsync(n,r).catch(function(e){return l.handleNetworkError(e),[]})},expirationTime:function(e){return 6e4},isOffline:function(){return!c.isOnline()}});var p=void 0;w("target-config",{getAsync:function(e){p||(p=pxt.targetConfigAsync().then(function(e){return e&&(pxt.storage.setLocal("targetconfig",JSON.stringify(e)),k("target-config"),k("gh-search"),k("gh-pkgcfg")),e}).catch(l.handleNetworkError));var t=JSON.parse(pxt.storage.getLocal("targetconfig")||"null");return t?Promise.resolve(t):p},expirationTime:function(e){return 864e5},isOffline:function(){return!c.isOnline()}});var d={};function h(n){var e=n.subscriptions;0!=e.length&&(n.subscriptions=[],e.forEach(function(e){var t=e.components.indexOf(n);0<=t&&e.components.splice(t,1)}))}function g(e){return e.api.expirationTime?null==e.data||Date.now()-e.lastRefresh>e.api.expirationTime(e.path):!e.lastRefresh}function m(e){return!(!e.data||e.data instanceof Error)&&/^cloud:(me\/settings|ptr-pkg-)/.test(e.path)}function v(){var e=u.values(d).filter(function(e){return m(e)}).map(function(e){return{path:e.path,data:e.data}});pxt.storage.setLocal("apiCache2",JSON.stringify(e))}function y(t){if(!(t.queued||t.api.isOffline&&t.api.isOffline())){t.queued=!0;var e=function(e){t.data=e,t.lastRefresh=pxt.Util.now(),t.queued=!1,function(e){m(e)&&v();var t=e.callbackOnce;0<t.length&&(e.callbackOnce=[],u.nextTick(function(){return t.forEach(function(e){return e()})})),0<e.components.length&&e.components.forEach(function(e){return u.nextTick(function(){return e.forceUpdate()})})}(t)};t.api.isSync?e(t.api.getSync(t.path)):t.api.getAsync(t.path).done(e)}}function b(e){return d.hasOwnProperty(e)||(d[e]={path:e,data:null,lastRefresh:0,queued:!1,callbackOnce:[],components:[],api:(t=e,n=/^([\w\-]+):/.exec(t),n&&f[n[1]]||u.oops("bad data protocol: "+t),f[n[1]])}),d[e];var t,n}function _(e,t){var n,r,i;n=e,r=b(t),(i=r.components).indexOf(n)<0&&(i.push(n),n.subscriptions.push(r));var o=b(t);if(o.api.isSync)return{data:o.api.getSync(o.path),status:s.Complete};var a={data:o.data,status:s.Complete};return(g(o)||o.data instanceof Error)&&(a.status=o.data instanceof Error?s.Error:s.Pending,o.api.isOffline&&o.api.isOffline()?a.status=s.Offline:y(o)),a}function w(e,t){u.assert(!f[e]),u.assert(!!t.getSync||!!t.getAsync),u.assert(!!t.getSync!=!!t.getAsync),t.isSync=!!t.getSync,f[e]=t}function E(e){var t=/^([\w\-]+):(.*)/.exec(e);return t?t[2]:(u.oops("protocol missing in: "+e),e)}function k(n){n=n.replace(/:\*$/,":"),u.values(d).forEach(function(e){var t;t=n,e.path.slice(0,t.length)==t&&((e.lastRefresh=0)<e.components.length&&y(b(e.path)),e.api.onInvalidated&&e.api.onInvalidated())})}n.clearCache=function(){d={},v()},n.mountVirtualApi=w,n.stripProtocol=E,n.invalidate=k,n.invalidateHeader=function(e,t){t&&k(e+":"+t.id)},n.getAsync=function(e){var n=b(e);return n.api.isSync?Promise.resolve(n.api.getSync(n.path)):c.isOnline()&&g(n)?new Promise(function(e,t){n.callbackOnce.push(function(){e(n.data)}),y(n)}):Promise.resolve(n.data)};var x=function(n){function e(e){var t=n.call(this,e)||this;return t.subscriptions=[],t.renderCoreOk=!1,t.state={},t}return i(e,n),e.prototype.getData=function(e){return this.getDataWithStatus(e).data},e.prototype.getDataWithStatus=function(e){return this.renderCoreOk||u.oops("Override renderCore() not render()"),_(this,e)},e.prototype.hasCloud=function(){return!!this.getData("sync:hascloud")},e.prototype.hasSync=function(){return!!this.getData("sync:hassync")},e.prototype.getUser=function(){return this.getData("sync:user")},e.prototype.componentWillUnmount=function(){h(this)},e.prototype.child=function(e){return l.findChild(this,e)},e.prototype.renderCore=function(){return null},e.prototype.render=function(){return h(this),this.renderCoreOk=!0,this.renderCore()},e.prototype.setStateAsync=function(n){var r=this;return new Promise(function(e,t){r.setState(n,function(){e()})})},e}(a.Component);n.Component=x;var S=function(n){function e(e){var t=n.call(this,e)||this;return t.renderCoreOk=!1,t.state={},t}return i(e,n),e.prototype.child=function(e){return l.findChild(this,e)},e.prototype.renderCore=function(){return null},e.prototype.render=function(){return this.renderCoreOk=!0,this.renderCore()},e}(a.PureComponent);n.PureComponent=S,JSON.parse(pxt.storage.getLocal("apiCache2")||"[]").forEach(function(e){b(e.path).data=e.data})},{"./core":31,react:228}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("bluebird");window.Promise=r;var i=e("pouchdb").plugin(e("pouchdb-adapter-memory"));r.config({warnings:{wForgottenReturn:!1}});var o=void 0;function a(){return o||(o=r.resolve().then(function(){var e=new i("pxt-"+pxt.storage.storageId(),{revs_limit:2});return pxt.log("PouchDB adapter: "+e.adapter),e}))}n.getDbAsync=a,n.destroyAsync=function(){return o?o.then(function(e){e.destroy(),o=void 0}):r.resolve()};var s=function(){function e(e){this.name=e}return e.prototype.getAsync=function(t){var n=this;return a().then(function(e){return e.get(n.name+"--"+t)}).then(function(e){return e.id=t,e})},e.prototype.getAllAsync=function(){var t=this;return a().then(function(e){return e.allDocs({include_docs:!0,startkey:t.name+"--",endkey:t.name+"--￿"})}).then(function(e){return e.rows.map(function(e){return e.doc})})},e.prototype.deleteAsync=function(t){return a().then(function(e){return e.remove(t)})},e.prototype.forceSetAsync=function(t){var n=this;return this.getAsync(t.id).then(function(e){return t._rev=e._rev,n.setAsync(t)},function(e){return n.setAsync(t)})},e.prototype.setAsync=function(t){var n=this;return this.setAsyncNoRetry(t).then(function(e){return pxt.BrowserUtils.scheduleStorageCleanup(),e}).catch(function(e){if(409!=e.status)return pxt.reportException(e),pxt.log("table: set failed, cleaning translation db"),pxt.BrowserUtils.clearTranslationDbAsync().then(function(){return pxt.BrowserUtils.clearTutorialInfoDbAsync()}).then(function(){return n.setAsyncNoRetry(t)}).catch(function(e){throw pxt.log("table: we are out of space..."),e});pxt.debug("table: set conflict (409)")})},e.prototype.setAsyncNoRetry=function(t){return t.id&&!t._id&&(t._id=this.name+"--"+t.id),a().then(function(e){return e.put(t)}).then(function(e){return e.rev})},e}();n.Table=s;var l=function(){function e(){this.mem=new pxt.github.MemoryGithubDb,this.table=new s("github")}return e.prototype.loadConfigAsync=function(t,n){var r=this;if("master"==n)return this.mem.loadConfigAsync(t,n);var i="config-"+t+"-"+n;return this.table.getAsync(i).then(function(e){return pxt.debug("github offline cache hit "+i),e.config},function(e){return pxt.debug("github offline cache miss "+i),r.mem.loadConfigAsync(t,n).then(function(t){return r.table.forceSetAsync({id:i,config:t}).then(function(){return t},function(e){return t})})})},e.prototype.loadPackageAsync=function(t,n){var r=this;if("master"==(n=n||"master"))return this.mem.loadPackageAsync(t,n);var i="pkg-"+t+"-"+n;return this.table.getAsync(i).then(function(e){return pxt.debug("github offline cache hit "+i),e.package},function(e){return pxt.debug("github offline cache miss "+i),r.mem.loadPackageAsync(t,n).then(function(t){return r.table.forceSetAsync({id:i,package:t}).then(function(){return t},function(e){return t})})})},e}();pxt.github.db=new l},{bluebird:60,pouchdb:171,"pouchdb-adapter-memory":157}],35:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var g=e("react"),l=e("./sui"),m=e("./core"),c=e("./coretsx"),o=e("./cloudsync"),a=pxt.Cloud,s=pxt.Util;function v(e,t,n){return g.createElement("p",null,lf("{0} version:",e),"  ",g.createElement("a",{href:encodeURI(n),title:""+lf("{0} version: {1}",e,t),target:"_blank",rel:"noopener noreferrer"},t))}n.showAboutDialogAsync=function(e){var c=pxt.appTarget.compileService,u=pxt.appTarget.appTheme.githubUrl,f=pxt.appTarget.appTheme,p=pxt.appTarget.versions,d=c&&c.githubCorePackage&&c.gittag&&c.serviceId,h=[];f.experiments&&h.push({label:lf("Experiments"),className:"secondary",onclick:function(){m.hideDialog(),pxt.tickEvent("about.experiments",void 0,{interactiveConsent:!0}),e.showExperimentsDialog()}}),pxt.targetConfigAsync().then(function(e){var t,n,r,i,o,a,s=pxt.BrowserUtils.isPxtElectron(),l=null===(n=null===(t=e)||void 0===t?void 0:t.electronManifest)||void 0===n?void 0:n.latest;return m.confirmAsync({header:lf("About"),hasCloseIcon:!0,agreeLbl:lf("Ok"),agreeClass:"positive",buttons:h,jsx:g.createElement("div",null,s?pxt.Cloud.isOnline()&&l?pxt.semver.strcmp(pxt.appTarget.versions.target,l)<0?g.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/offline-app"},lf("An update {0} for {1} is available",l,pxt.appTarget.title)):g.createElement("p",null,lf("{0} is up to date",pxt.appTarget.title)):g.createElement("p",null,lf("Please connect to internet to check for updates")):void 0,u&&p?v(pxt.appTarget.name,p.target,u+"/releases/tag/v"+p.target):void 0,p?v("Microsoft MakeCode",p.pxt,"https://github.com/Microsoft/pxt/releases/tag/v"+p.pxt):void 0,d?(r=c,"object"==typeof r.codalTarget&&"string"==typeof r.codalTarget.url?(i=r.codalTarget.branch?pxt.BrowserUtils.joinURLs(r.codalTarget.url,"releases/tag",r.codalTarget.branch):r.codalTarget.url,o=r.codalTarget.branch||"master",a=r.codalTarget.name||r.serviceId):(i="https://github.com/"+r.githubCorePackage+"/releases/tag/"+r.gittag,o=r.gittag,a=r.serviceId),v(lf("{0} runtime",a),o,i)):void 0,g.createElement("p",null,g.createElement("br",null)),g.createElement("p",null,f.termsOfUseUrl?g.createElement("a",{target:"_blank",className:"item",href:f.termsOfUseUrl,rel:"noopener noreferrer"},lf("Terms of Use")):void 0,"    ",f.privacyUrl?g.createElement("a",{target:"_blank",className:"item",href:f.privacyUrl,rel:"noopener noreferrer"},lf("Privacy")):void 0),f.copyrightText?g.createElement("p",null," ",f.copyrightText," "):void 0)})}).done()},n.showPackageErrorDialogAsync=function(e,t,n){var r=!1,i=new s.CancellationToken;return pxt.tickEvent("update.extensionErrorsShown"),m.dialogAsync({header:lf("Extension Errors"),hasCloseIcon:!0,jsx:g.createElement("div",{className:"wizard-wrapper"},g.createElement(u,{openLegacyEditor:n,affectedPackages:e,updatePackages:t,onProjectOpen:function(){return r=!0},token:i}))}).then(function(){return r?Promise.resolve():(m.showLoading("package-update-cancel",lf("Stopping update...")),i.cancelAsync())}).then(function(){return m.hideLoading("package-update-cancel"),r})};var u=function(n){function e(e){var t=n.call(this,e)||this;return t.state={updating:!1,showProgressBar:!1,updateComplete:!1,packagesUpdated:0},t.startUpdate=t.startUpdate.bind(t),t.openProject=t.openProject.bind(t),t.openLegacyEditor=t.openLegacyEditor.bind(t),t}return i(e,n),e.prototype.startUpdate=function(){var t=this;if(!this.state.updating){pxt.tickEvent("update.startExtensionUpdate");var n=Date.now();this.setState({updating:!0}),setTimeout(function(){t.props.token.isCancelled()||t.state.updating&&1<t.props.affectedPackages.length&&t.setState({showProgressBar:!0})},3e3);var e=this.props.affectedPackages;this.props.token.onProgress(function(e){t.setState({packagesUpdated:e})}),this.props.updatePackages(e,this.props.token).then(function(e){t.props.token.isCancelled()||(pxt.tickEvent("update.endExtensionUpdate",{success:""+e,duration:Date.now()-n}),e?(t.setState({updating:!1,updateComplete:!0}),setTimeout(function(){t.props.token.isCancelled()||t.openProject(!0)},1500)):t.setState({updateError:!0,updating:!1}))})}},e.prototype.openProject=function(e){void 0===e&&(e=!1),e||pxt.tickEvent("update.ignoredExtensionErrors"),this.props.onProjectOpen(),c.hideDialog()},e.prototype.openLegacyEditor=function(){this.props.onProjectOpen(),this.props.openLegacyEditor()},e.prototype.buildActionList=function(){var e=[];return this.state.updateError||e.push({text:lf("Try to fix"),title:lf("Update all extensions in the project to their latest versions"),callback:this.startUpdate}),e.push({text:lf("Ignore errors and open"),title:lf("Ignore errors and open"),callback:this.openProject}),this.props.openLegacyEditor&&e.push({text:lf("Go to the old editor"),title:lf("Open this project in the editor where it was created"),callback:this.openLegacyEditor}),e},e.prototype.render=function(){var e=this.props.affectedPackages,t=this.state,n=t.updating,r=t.updateComplete,i=t.packagesUpdated,o=t.updateError,a=t.showProgressBar;if(n){var s=i===e.length?lf("Finishing up..."):lf("Updating extension {0} of {1}...",i+1,e.length);return g.createElement("div",null,a?g.createElement(f,{percentage:i/e.length*100,label:s}):g.createElement("div",{className:"ui centered inline inverted text loader"},s))}if(r)return g.createElement("div",null,g.createElement("h2",{className:"ui center aligned icon header"},g.createElement("i",{className:"green check circle outline icon"}),lf("Update complete")));var l=o?lf("Looks like updating didn't fix the issue. How would you like to proceed?"):lf("Looks like there are some errors in the extensions added to this project. How would you like to proceed?");return g.createElement("div",null,g.createElement("p",null,l),g.createElement(p,{actions:this.buildActionList()}))},e}(g.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.percentage,n=e.label,r=e.cornerRadius;return r=null==r?3:Math.max(r,0),t=Math.max(Math.min(t,100),2),g.createElement("div",null,g.createElement("div",{className:"progress-bar-container"},g.createElement("svg",{className:"progress-bar",width:"100%",height:"100%"},g.createElement("rect",{className:"progress-bar-bg",width:"100%",height:"100%",rx:r,ry:r}),g.createElement("rect",{className:"progress-bar-content",width:t.toString()+"%",height:"100%",rx:r,ry:r}))),n?g.createElement("p",{className:"progress-bar-label"},n):void 0)},t}(g.Component),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return g.createElement("div",{className:"ui relaxed list",role:"menu"},this.props.actions.map(function(e,t){var n=e.text,r=e.title,i=e.callback;return g.createElement("div",{className:"item wizard-action","aria-label":r,title:r,onClick:i,role:"menuitem",key:t},g.createElement("span",{className:"left floated"},g.createElement("i",{className:"medium arrow right icon"})),g.createElement(l.Link,null,n))}))},t}(l.StatelessUIElement);function d(e){return 401==e.statusCode?(m.errorNotification(lf("GitHub didn't accept token")),!0):404==e.statusCode&&(m.errorNotification(lf("Token has neither '{0}' nor '{1}' scope","repo","public_repo")),!0)}n.showPRDialogAsync=function t(n,r){return m.confirmAsync({header:lf("Commit conflict in {0}",n),agreeLbl:lf("Resolve conflict"),disagreeLbl:lf("I'm done!"),body:lf("The latest online version of {0} contains edits conflicting with yours. We have created a pull request (PR) that you can use to resolve the conflicts. Once you're done, sync to get all merged changes. In the meantime we have taken you to the latest online version of {0}.",n)}).then(function(e){return e?(pxt.tickEvent("app.commit.pr"),window.open(r,"_blank"),t(n,r)):Promise.resolve()})},n.showImportUrlDialogAsync=function(){var r,e=pxt.appTarget.appTheme.shareUrl||"https://makecode.com/";return m.confirmAsync({header:lf("Open project URL"),hasCloseIcon:!0,onLoaded:function(n){(r=n.querySelector("input")).onkeydown=function(e){var t;"Enter"===e.key&&(null===(t=n.querySelector(".button.approve"))||void 0===t||t.click())}},jsx:g.createElement("div",{className:"ui form"},g.createElement("div",{className:"ui icon violet message"},g.createElement("i",{className:"user icon","aria-hidden":!0}),g.createElement("div",{className:"content"},g.createElement("h3",{className:"header"},lf("User-provided content")),g.createElement("p",null,lf("The content below is provided by a user, and is not endorsed by Microsoft."),g.createElement("br",null),lf("If you think it's not appropriate, please report abuse through Settings -> Report Abuse.")))),g.createElement("div",{className:"ui field"},g.createElement("label",{id:"selectUrlToOpenLabel"},lf("Copy the URL of the project.")),g.createElement("input",{type:"url",tabIndex:0,autoFocus:!0,"aria-labelledby":"selectUrlToOpenLabel",placeholder:lf("{0} or {1}...",e,"https://github.com/..."),className:"ui blue fluid"})))}).then(function(e){if(e){pxt.tickEvent("app.open.url");var t=r.value,n=pxt.github.normalizeRepoId(t);return n||(n=pxt.Cloud.parseScriptId(t)),n?Promise.resolve(n):Promise.reject(new Error(lf("Sorry, the project url looks invalid.")))}return Promise.resolve(void 0)})},n.showGithubTokenError=d,n.showCreateGithubRepoDialogAsync=function(e){pxt.tickEvent("github.create.dialog"),e&&(e=(e=e.toLocaleLowerCase().replace(/\s+/g,"-")).replace(/[^\w\-]/g,""));var t=e||"",n="",r=!0;function i(){return t=="pxt-"+lf("Untitled").toLocaleLowerCase()||"pxt-untitled"==t?lf("Please pick a different name."):/^[\w\-]{1,64}$/.test(t)?void 0:lf("Repository names must be less than 64 characters and cannot include spaces or special characters.")}function o(e){e=e.trim(),t!=e&&(t=e,c.forceUpdate())}function a(e){n!=e&&(n=e,c.forceUpdate())}function s(e){var t=0==e.currentTarget.selectedIndex;r!=t&&(r=t,c.forceUpdate())}return m.confirmAsync({hasCloseIcon:!0,header:lf("Create GitHub repository"),jsxd:function(){var e=i();return g.createElement("div",{className:"ui form"},g.createElement("p",null,lf("Host your code on GitHub and work together with friends."),l.helpIconLink("/github",lf("Learn more about GitHub"))),g.createElement("div",{className:"ui field"},g.createElement(l.Input,{type:"url",autoFocus:!0,value:t,onChange:o,label:lf("Repository name"),placeholder:"pxt-my-gadget...",class:"fluid",error:e})),g.createElement("div",{className:"ui field"},g.createElement(l.Input,{type:"text",value:n,onChange:a,label:lf("Repository description"),placeholder:lf("MakeCode extension for my gadget"),class:"fluid"})),g.createElement("div",{className:"ui field"},g.createElement("select",{className:"ui dropdown",onChange:s},g.createElement("option",{"aria-selected":r,value:"true"},lf("Public repository, anyone can look at your code.")),g.createElement("option",{"aria-selected":!r,value:"false"},lf("Private repository, your code is only visible to you.")))))}}).then(function(e){if(e){if(!i())return n=n||lf("A MakeCode project"),m.showLoading("creategithub",lf("creating {0} repository...",t)),pxt.github.createRepoAsync(t,n.trim(),!r).finally(function(){return m.hideLoading("creategithub")}).then(function(e){return pxt.tickEvent("github.create.ok"),pxt.github.normalizeRepoId("https://github.com/"+e.fullName)},function(e){return d(e)||(422==e.statusCode?m.errorNotification(lf("Repository '{0}' already exists.",t)):m.errorNotification(e.message),pxt.tickEvent("github.create.error",{statusCode:e.statusCode})),""});m.errorNotification(lf("Invalid repository name.")),pxt.tickEvent("github.create.invalidname")}else pxt.tickEvent("github.create.cancel");return""})},n.showImportGithubDialogAsync=function(){var n="",r=function(){n="NEW",m.hideDialog()};return m.showLoading("githublist",lf("searching GitHub repositories...")),o.githubProvider(!0).routedLoginAsync("import").then(function(e){return e&&e.accessToken&&pxt.github.listUserReposAsync()}).finally(function(){return m.hideLoading("githublist")}).then(function(e){if(!e)return Promise.resolve(-1);var t=e.map(function(e){return{name:e.fullName,description:e.description,updatedAt:e.updatedAt,onClick:function(){n=pxt.github.normalizeRepoId("https://github.com/"+e.fullName),m.hideDialog()}}});return m.confirmAsync({header:lf("Clone or create your own GitHub repo"),hideAgree:!0,hasCloseIcon:!0,jsx:g.createElement("div",{className:"ui form"},g.createElement("div",{className:"ui relaxed divided list",role:"menu"},g.createElement("div",{key:"create new",className:"item"},g.createElement("i",{className:"large plus circle middle aligned icon"}),g.createElement("div",{className:"content"},g.createElement("a",{onClick:r,role:"menuitem",className:"header",title:lf("Create new GitHub repository")},g.createElement("b",null,lf("Create new..."))),g.createElement("div",{className:"description"},lf("Create a new GitHub repo in your account.")))),t.map(function(e){return g.createElement("div",{key:e.name,className:"item"},g.createElement("i",{className:"large github middle aligned icon"}),g.createElement("div",{className:"content"},g.createElement("a",{onClick:e.onClick,role:"menuitem",className:"header"},e.name),g.createElement("div",{className:"description"},pxt.Util.timeSince(e.updatedAt),". ",e.description)))})),g.createElement("div",{className:"ui icon green message"},g.createElement("i",{className:"info circle icon"}),g.createElement("div",{className:"content"},g.createElement("h3",{className:"header"},lf("Not finding what you're looking for?")),g.createElement("p",null,lf("Use the 'Import URL' option in the previous dialog to import repo by exact URL.")))))})}).then(function(){return n})},n.showImportFileDialogAsync=function(e){var t,n=[pxt.appTarget.compile.saveAsPNG?".png":".mkcd"];return pxt.appTarget.compile.hasHex&&n.push(".hex"),pxt.appTarget.compile.useUF2&&n.push(".uf2"),m.confirmAsync({header:lf("Open {0} file",n.join(lf(" or "))),hasCloseIcon:!0,onLoaded:function(e){t=e.querySelectorAll("input")[0]},jsx:g.createElement("div",{className:"ui form"},g.createElement("div",{className:"ui field"},g.createElement("label",{id:"selectFileToOpenLabel"},lf("Select a {0} file to open.",n.join(lf(" or ")))),g.createElement("input",{type:"file",tabIndex:0,autoFocus:!0,"aria-labelledby":"selectFileToOpenLabel",className:"ui blue fluid"})),g.createElement("div",{className:"ui secondary segment"},lf("You can import files by dragging and dropping them anywhere in the editor!")))}).then(function(e){if(e)return t.files[0]})},n.showReportAbuseAsync=function(t){var n,r;if(pxt.github.parseRepoId(t))return pxt.tickEvent("reportabuse.github"),void window.open("https://github.com/contact/report-content","_blank");var i=pxt.appTarget.appTheme.shareUrl||"https://makecode.com/";m.confirmAsync({header:lf("Report Abuse"),hasCloseIcon:!0,onLoaded:function(e){n=e.querySelectorAll("input")[0],r=e.querySelectorAll("textarea")[0],t&&(n.value=i+t)},agreeLbl:lf("Submit"),jsx:g.createElement("div",{className:"ui form"},g.createElement("div",{className:"ui field"},g.createElement("label",{id:"abuseUrlLabel"},lf("What is the URL of the offensive project?")),g.createElement("input",{type:"url","aria-labelledby":"abuseUrlLabel",tabIndex:0,autoFocus:!0,placeholder:"Enter project URL here..."})),g.createElement("div",{className:"ui field"},g.createElement("label",{id:"abuseDescriptionLabel"},lf("Why do you find it offensive?")),g.createElement("textarea",{"aria-labelledby":"abuseDescriptionLabel"})))}).done(function(e){if(e){pxt.tickEvent("app.reportabuse.send");var t=pxt.Cloud.parseScriptId(n.value);t?(m.infoNotification(lf("Sending abuse report...")),a.privatePostAsync(t+"/abusereports",{text:r.value}).then(function(e){m.infoNotification(lf("Report sent. Thank you!"))}).catch(function(e){404==e.statusCode?m.warningNotification(lf("Oops, we could not find this script.")):m.handleNetworkError(e)})):m.errorNotification(lf("Sorry, the project url looks invalid."))}})},n.showResetDialogAsync=function(){return m.confirmAsync({header:lf("Reset"),body:lf("You are about to clear all projects. Are you sure? This operation cannot be undone."),agreeLbl:lf("Reset"),agreeClass:"red",agreeIcon:"sign out",disagreeLbl:lf("Cancel")})},n.promptTranslateBlock=function(e,t){m.confirmAsync({header:lf("Translate this block"),hideAgree:!0,hasCloseIcon:!0,helpUrl:"/translate",jsx:g.createElement("div",null,g.createElement("div",null,lf("Update the block translation below."),lf("Do not translate variable names (%name, $name)."),lf("Once validated in Crowdin, translations may take 24h to be active.")),t.map(function(e){return g.createElement("div",{key:"ictr"+e,className:"ui basic segment"},e)}))}).done()}},{"./cloudsync":4,"./core":31,"./coretsx":32,"./sui":44,react:228}],36:[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./core"),u=pxt.Util,o=pxt.Cloud,f=function(e,t){return u.requestAsync({url:"/api/"+e,headers:{Authorization:o.localToken},method:t?"POST":"GET",data:t||void 0}).then(function(e){return e.json}).catch(i.handleNetworkError)};function l(e,t,n){var r={files:[],config:null,header:e,path:e.path,isDeleted:e.isDeleted};if(n){t||(t={});for(var i=0,o=Object.keys(n);i<o.length;i++)n[l=o[i]]!==t[l]&&r.files.push({name:l,mtime:null,content:n[l],prevContent:t[l]});for(var a=0,s=Object.keys(t);a<s.length;a++){var l;void 0===n[l=s[a]]&&r.files.push({name:l,mtime:null,content:null,prevContent:t[l]})}}var c=u.flatClone(n||{});return f("pkg/"+e.path,r).then(function(e){return c})}n.setApiAsync=function(e){f=e},n.provider={getAsync:function(o){return f("pkg/"+o.path).then(function(e){for(var t={header:o,text:{},version:null},n=0,r=e.files;n<r.length;n++){var i=r[n];t.text[i.name]=i.content,o.modificationTime=Math.max(o.modificationTime,i.mtime/1e3|0)}return o.recentUse=Math.max(o.recentUse,o.modificationTime),t.version=u.flatClone(t.text),t})},setAsync:l,listAsync:function(){return r(this,void 0,void 0,function(){var t,n,r,i,o,a;return s(this,function(e){switch(e.label){case 0:return[4,f("list")];case 1:t=e.sent(),n=0,r=t.pkgs,e.label=2;case 2:return n<r.length?(i=r[n]).header?[3,4]:((o=i.files.map(function(e){return e.mtime})).sort(function(e,t){return t-e}),a=Math.round(o[0]/1e3)||u.nowSeconds(),i.header=pxt.workspace.freshHeader(i.config.name,a),i.config.preferredEditor&&(i.header.editor=i.config.preferredEditor),i.header.path=i.path,[4,l(i.header,null)]):[3,6];case 3:return e.sent(),[3,5];case 4:i.header.path=i.path,e.label=5;case 5:return n++,[3,2];case 6:return[2,t.pkgs.map(function(e){return e.header})]}})})},resetAsync:function(){return pxt.BrowserUtils.isPxtElectron()?f("resetworkspace",{}).then(function(){}):Promise.resolve()},deleteAsync:function(e,t){return e.isDeleted=!0,l(e,t,{})},saveScreenshotAsync:function(e,t,n){return f("screenshot/"+e.path,{screenshot:t,icon:n})},saveAssetAsync:function(e,t,n){return f("pkgasset/"+e,{encoding:"base64",name:t,data:btoa(ts.pxtc.Util.uint8ArrayToString(n))}).then(function(e){})},listAssetsAsync:function(e){return f("pkgasset/"+e).then(function(e){return e.files})}}},{"./core":31}],37:[function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},a=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(i,"__esModule",{value:!0});var c=e("react"),u=e("./sui"),f=e("./core"),s=e("./cloudsync"),l=e("./dialogs"),p=e("./workspace");i.PROVIDER_NAME="github";var d=function(r){function e(){var n=r.call(this,i.PROVIDER_NAME,lf("GitHub"),"icon github","https://api.github.com")||this;return pxt.github.handleGithubNetworkError=function(e,t){return 401==t.statusCode&&pxt.github.token?(pxt.log("github: invalid token"),n.clearToken(),"GET"==e.method):(403==t.statusCode?pxt.log("github: unauthorized access"):404==t.statusCode&&(t.needsWritePermission=!0),!1)},n}return n(e,r),e.prototype.clearToken=function(){pxt.github.token=void 0,r.prototype.logout.call(this)},e.prototype.logout=function(){pxt.github.token=void 0,r.prototype.logout.call(this),window.location.href="https://github.com/logout"},e.prototype.hasSync=function(){return!1},e.prototype.hasToken=function(){return this.loginCheck(),!!this.token()},e.prototype.loginCheck=function(){r.prototype.loginCheck.call(this);var e=this.token();pxt.github.token=e},e.prototype.loginAsync=function(e,t){return this.routedLoginAsync(void 0)},e.prototype.routedLoginAsync=function(e){var t=this;this.loginCheck();var n=Promise.resolve();return this.token()||(n=n.then(function(){return t.showLoginAsync(e)})),n.then(function(){return{accessToken:t.token()}})},e.prototype.showLoginAsync=function(i){var o=this;pxt.tickEvent("github.login.dialog");var a,s=!(pxt.appTarget&&!pxt.BrowserUtils.isPxtElectron()&&pxt.appTarget.cloud&&pxt.appTarget.cloud.cloudProviders&&pxt.appTarget.cloud.cloudProviders[this.name]),l=!1,e=function(e){l=e,f.forceUpdate()};return f.confirmAsync({header:lf("Sign in with GitHub"),hasCloseIcon:!0,helpUrl:"/github",agreeLbl:lf("Sign in"),onLoaded:function(e){a=e},jsxd:function(){return c.createElement("div",{className:"ui form"},c.createElement("p",null,lf("You need to sign in with GitHub to use this feature.")),c.createElement("p",null,lf("You can host your code on GitHub and collaborate with friends on projects.")),c.createElement("div",null,c.createElement(u.PlainCheckbox,{label:lf("Remember me"),onChange:e})),!s&&c.createElement("p",{className:"ui small"},lf("Looking to use a Developer token instead?"),c.createElement(u.Link,{className:"link",text:lf("Use Developer token"),onClick:t})),s&&c.createElement("ol",null,c.createElement("li",null,lf("Navigate to: "),c.createElement("a",{href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noopener noreferrer"},lf("GitHub token generation page"))),c.createElement("li",null,lf("Put something like 'MakeCode {0}' in description",pxt.appTarget.name)),c.createElement("li",null,lf("Select either '{0}' or '{1}' scope, depending which repos you want to edit from here","repo","public_repo")),c.createElement("li",null,lf("Click generate token, copy it, and paste it below."))),s&&c.createElement("div",{className:"ui field"},c.createElement("label",{id:"selectUrlToOpenLabel"},lf("Paste GitHub token here:")),c.createElement("input",{id:"githubTokenInput",type:"url",tabIndex:0,autoFocus:!0,"aria-labelledby":"selectUrlToOpenLabel",placeholder:"0123abcd...",className:"ui blue fluid"})))}}).then(function(e){var t,n;if(e){if(s){var r=null===(n=null===(t=a.querySelector("#githubTokenInput"))||void 0===t?void 0:t.value)||void 0===n?void 0:n.trim();return o.saveAndValidateTokenAsync(r,l)}return o.oauthRedirectAsync(l,i)}return pxt.tickEvent("github.login.cancel"),Promise.resolve()});function t(){s=!0,f.forceUpdate()}},e.prototype.authorizeAppAsync=function(e,t){return this.oauthRedirectAsync(e,t||window.location.hash,!0)},e.prototype.oauthRedirectAsync=function(e,t,n){f.showLoading("ghlogin",lf("Signing you into GitHub...")),t=(t||"").replace(/^#/,"");var r=s.setOauth(this.name,e,t?"#github:"+t:void 0),i=window.location.href.replace(/#.*/,""),o=pxt.Cloud.getServiceUrl()+"/oauth/login?state="+r+(n?"&prompt=consent":"")+"&response_type=token&client_id=gh-token&redirect_uri="+encodeURIComponent(i);return window.location.href=o,Promise.delay(1e3)},e.prototype.getUserInfoAsync=function(){return this.token()?pxt.github.authenticatedUserAsync().then(function(e){if(e)return{id:e.login,userName:e.login,name:e.name,photo:e.avatar_url,profile:"https://github.com/"+e.login};pxt.log("unknown github user")}):Promise.resolve(void 0)},e.prototype.setNewToken=function(e,t){r.prototype.setNewToken.call(this,e,t),pxt.github.token=e},e.prototype.saveAndValidateTokenAsync=function(t,n){var r=this;return f.showLoading("githubtokensave",lf("validating GitHub token...")),Promise.resolve().then(function(){return 40==t.length&&/^[a-f0-9]+$/.test(t)?(pxt.github.token=t,pxt.github.createRepoAsync(void 0,"").then(function(e){pxt.reportError("github","Succeeded creating undefined repo!"),f.infoNotification(lf("Something went wrong with validation; token stored")),r.setNewToken(t,n),pxt.tickEvent("github.token.wrong")},function(e){pxt.github.token="",l.showGithubTokenError(e)||(422==e.statusCode?f.infoNotification(lf("Token validated and stored")):f.infoNotification(lf("Token stored but not validated")),r.setNewToken(t,n),pxt.tickEvent("github.token.ok"))}).then(function(){return s.syncAsync()})):(pxt.tickEvent("github.token.invalid"),f.errorNotification(lf("Invalid token format")),Promise.resolve())}).finally(function(){return f.hideLoading("githubtokensave")})},e.prototype.createRepositoryAsync=function(r,i){return o(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:return pxt.tickEvent("github.filelist.create.start"),[4,this.routedLoginAsync("create-repository:"+i.id)];case 1:return e.sent(),this.token()?[4,l.showCreateGithubRepoDialogAsync(r)]:(pxt.tickEvent("github.filelist.create.notoken"),[2,!1]);case 2:if(!(t=e.sent()))return[2,!1];pxt.tickEvent("github.filelist.create.export"),n=pxt.github.parseRepoId(t),f.showLoading("creategithub",lf("preparing {0} repository...",n.project||n.fullName)),e.label=3;case 3:return e.trys.push([3,,5,6]),[4,p.exportToGithubAsync(i,t)];case 4:return e.sent(),[2,!0];case 5:return f.hideLoading("creategithub"),[7];case 6:return[2]}})})},e}(s.ProviderBase);i.GithubProvider=d},{"./cloudsync":4,"./core":31,"./dialogs":35,"./sui":44,"./workspace":45,react:228}],38:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./core"),l=e("./cloudsync"),c=pxt.U,u=function(t){function e(){var e=t.call(this,"googledrive",lf("Google Drive"),"xicon googledrive","https://www.googleapis.com")||this;return e.entryCache={},e}return i(e,t),e.prototype.login=function(){var e=this.loginInner();e.scope="https://www.googleapis.com/auth/drive.appfolder https://www.googleapis.com/auth/userinfo.profile";var t=o.stringifyQueryString("https://accounts.google.com/o/oauth2/v2/auth",e);if(e.redirect)window.location.href=t;else{var n=this;n.oauthWindow_=pxt.BrowserUtils.popupWindow(t,lf("Login with Google"),483,600),n.oauthInterval_=window.setInterval(function(){n.oauthWindow_.closed&&(window.clearInterval(n.oauthInterval_),pxt.BrowserUtils.changeHash("",!0),window.location.reload())},1e3)}},e.prototype.getUserInfoAsync=function(){var t=this;return this.getJsonAsync("/oauth2/v1/userinfo").then(function(e){return{name:e.name||lf("{0} User",t.friendlyName),id:e.id,photo:e.picture}})},e.prototype.listAsync=function(){var o=this;return this.getJsonAsync("/drive/v3/files?pageSize=1000&fields=files(id,name,version,modifiedTime)&spaces=appDataFolder").then(function(e){for(var t=[],n=0,r=e.files||[];n<r.length;n++){var i=r[n];o.entryCache[i.id]=i,t.push({id:i.id,name:i.name,version:i.version,updatedAt:o.parseTime(i.modifiedTime)})}return t})},e.prototype.downloadAsync=function(r){return a(this,void 0,void 0,function(){var t,n;return s(this,function(e){switch(e.label){case 0:return t=this.entryCache[r],[4,this.reqAsync({url:"/drive/v3/files/"+t.id+"?alt=media"})];case 1:return n=e.sent(),[2,{id:t.id,version:t.version,name:t.name,updatedAt:this.parseTime(t.modifiedTime),content:JSON.parse(n.text)}]}})})},e.prototype.uploadAsync=function(i,e,o){return a(this,void 0,void 0,function(){var t,n,r;return s(this,function(e){switch(e.label){case 0:return i?[3,2]:[4,this.reqAsync({url:"/drive/v3/files",method:"POST",data:{name:pxtc.U.guidGen(),mimeType:"application/json",parents:["appDataFolder"]}})];case 1:300<=(t=e.sent()).statusCode&&this.syncError(lf("Can't create file in {0}",this.friendlyName)),i=t.json.id,e.label=2;case 2:return[4,this.reqAsync({url:"/upload/drive/v3/files/"+i+"?uploadType=media&fields=id,name,version,modifiedTime",method:"PATCH",data:JSON.stringify(o,null,1)})];case 3:return 300<=(n=e.sent()).statusCode&&this.syncError(lf("Can't upload file to {0}",this.friendlyName)),r=n.json,[2,{id:(this.entryCache[r.id]=r).id,version:r.version,updatedAt:c.nowSeconds(),name:r.name}]}})})},e.prototype.updateAsync=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(e){return[2]})})},e.prototype.deleteAsync=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.reqAsync({url:"/drive/v3/files/"+t,method:"DELETE"})];case 1:return 204!=e.sent().statusCode&&this.syncError(lf("Can't delete {0} file",this.friendlyName)),[2]}})})},e}(l.ProviderBase);n.Provider=u},{"./cloudsync":4,"./core":31}],39:[function(e,t,n){"use strict";var l=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},c=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./browserworkspace"),u="texts",f="headers",o="id";function p(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return r?[4,r]:[3,2];case 1:return[2,e.sent()];case 2:return[2,r=function(){return l(this,void 0,void 0,function(){var t,n,r=this;return c(this,function(e){switch(e.label){case 0:t=new pxt.BrowserUtils.IDBWrapper("__pxt_idb_workspace",1,function(e,t){var n=t.result;n.createObjectStore(u,{keyPath:o}),n.createObjectStore(f,{keyPath:o})},function(){return l(r,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,pxt.BrowserUtils.clearTranslationDbAsync()];case 1:return e.sent(),[4,pxt.BrowserUtils.clearTutorialInfoDbAsync()];case 2:return e.sent(),[2]}})})}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.openAsync()];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),pxt.reportException(n),[2,Promise.reject(n)];case 4:return[2,t]}})})}()]}})})}function a(o,a,s){return l(this,void 0,void 0,function(){function t(n,r,i,o){return l(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t={id:r.id,files:o,_rev:i},o?[4,n.setAsync(u,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,n.setAsync(f,r)];case 3:return e.sent(),[2]}})})}var n,r,i;return c(this,function(e){switch(e.label){case 0:return[4,p()];case 1:n=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,11]),[4,t(n,o,a,s)];case 3:return e.sent(),[3,11];case 4:return 409==(r=e.sent()).status?(pxt.debug("idb: set conflict (409)"),[2]):(pxt.reportException(r),pxt.log("idb: set failed, cleaning cache dbs"),[4,pxt.BrowserUtils.clearTranslationDbAsync()]);case 5:return e.sent(),[4,pxt.BrowserUtils.clearTutorialInfoDbAsync()];case 6:e.sent(),e.label=7;case 7:return e.trys.push([7,9,,10]),[4,t(n,o,a,s)];case 8:return e.sent(),[3,10];case 9:throw i=e.sent(),pxt.reportException(i,{ws:"idb"}),pxt.log("idb: we are out of space..."),i;case 10:return[3,11];case 11:return[2]}})})}n.provider={getAsync:function(n){return l(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().getAsync(u,n.id)];case 2:return t=e.sent(),[2,{header:n,text:t.files,version:t._rev}]}})})},setAsync:a,deleteAsync:function(n,e){return l(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,(t=e.sent()).deleteAsync(u,n.id)];case 2:return e.sent(),[4,t.deleteAsync(f,n.id)];case 3:return e.sent(),[2]}})})},listAsync:function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,function(){return l(this,void 0,void 0,function(){var t,n,r=this;return c(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().getAllAsync(f)];case 2:return e.sent().length?[2]:(t=function(n){return l(r,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,i.provider.getAsync(n)];case 1:return delete(t=e.sent())._id,delete t._rev,[4,a(n,void 0,t.text)];case 2:return e.sent(),[2]}})})},[4,i.provider.listAsync()]);case 3:return n=e.sent(),[4,Promise.all(n.map(function(e){return t(e)}))];case 4:return e.sent(),[2]}})})}()];case 1:return e.sent(),[4,p()];case 2:return[2,e.sent().getAllAsync(f)]}})})},resetAsync:function(){return l(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,(t=e.sent()).deleteAllAsync(u)];case 2:return e.sent(),[4,t.deleteAllAsync(f)];case 3:return e.sent(),[2]}})})}}},{"./browserworkspace":3}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./memoryworkspace");n.provider={getAsync:function(e){return i.provider.getAsync(e)},setAsync:function(t,e,n){return i.provider.setAsync(t,e,n).then(function(){var e=n||i.projects[t.id]&&i.projects[t.id].text;return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacesave",project:{header:t,text:e},response:!1})}).then(function(){})},listAsync:function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacesync",response:!0}).then(function(e){return(e.projects||[]).forEach(i.merge),r=e.editor,pxt.tickEvent("pxt.controller",{controllerId:e.controllerId}),i.provider.listAsync()})},resetAsync:function(){return i.provider.resetAsync().then(function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacereset",response:!0})}).then(function(){})},loadedAsync:function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspaceloaded",response:!0}).then(function(){})},getSyncState:function(){return r},fireEvent:function(e){pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspaceevent",response:!1,event:e})}}},{"./memoryworkspace":41}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=pxt.Util;r.projects={},r.merge=function(e){var t=e.header;t||(e.header=t=pxt.workspace.freshHeader(lf("Untitled"),n.nowSeconds()),e.text&&e.text["main.blocks"]&&(e.header.editor=pxt.BLOCKS_PROJECT_NAME)),r.projects[e.header.id]=e},r.provider={getAsync:function(e){var t=r.projects[e.id];return Promise.resolve({header:e,text:t?t.text:{},version:null})},setAsync:function(e,t,n){return n&&(r.projects[e.id]={header:e,text:n}),Promise.resolve()},deleteAsync:function(e,t){return delete r.projects[e.id],Promise.resolve()},listAsync:function(){return Promise.resolve(n.values(r.projects).map(function(e){return e.header}))},resetAsync:function(){return r.projects={},Promise.resolve()}}},{}],42:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},u=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var f=e("./core"),p=e("./cloudsync"),d="/me/drive/special/approot",h=pxt.U,o=function(t){function l(){var e=t.call(this,"onedrive",lf("Microsoft OneDrive"),"xicon onedrive","https://graph.microsoft.com/v1.0")||this;return e.entryCache={},e.loadFrameTimeout=6e3,window.activeRenewals={},window.callBackMappedToRenewStates={},e}return i(l,t),l.prototype.loginAsync=function(o,a){var s=this;return new Promise(function(e,t){var n=s.loginInner();if(n.scope=l.ONEDRIVE_SCOPE,a){n.prompt="none";var r=pxt.storage.getLocal("cloudUser");r&&(n.login_hint=JSON.parse(r).loginHint)}var i=f.stringifyQueryString("https://login.microsoftonline.com/common/oauth2/v2.0/authorize",n);a?s.silentLoginHelper(i,e,t):pxt.BrowserUtils.isIFrame()||pxt.BrowserUtils.isIE()||n.redirect||o?window.location.href=i:s.popupLoginHelper(i,e,t)}).then(function(e){return s.setNewToken(e.accessToken,!1,e.expiresIn),e}).finally(function(){s.loginCompleteInner()})},l.prototype.silentLoginHelper=function(e,c,t){var n=this,r=this.addAdalFrame("onedriveLogin"),i=function(){r&&r.parentNode&&r.parentNode.removeChild(r),n.loginAsync().then(function(e){return c(e)}).catch(function(e){return t(e)})},u=function(e){pxt.debug("Error silently logging in: "+e),i()};r||i(),r.src=e,r.addEventListener("load",function(e){!function(e){var t="";try{t=e.currentTarget.contentWindow.location.hash}catch(r){return u(r)}var n=f.parseQueryString(t),r=n.error;if(r){var i=n.error_description;u(i?decodeURIComponent(i):r)}else{var o=n.access_token,a=n.expires_in;if(o){var s=pxt.storage.getLocal(p.OAUTH_STATE);if(s)if(s==n.state){pxt.storage.removeLocal(p.OAUTH_STATE),pxt.storage.setLocal(p.OAUTH_HASH,t);var l=e.currentTarget;l.parentNode.removeChild(l),c({accessToken:o,expiresIn:a})}else u("OAuth state mismatch");else u("OAuth not started")}else u("access_token not in #")}}(e)})},l.prototype.popupLoginHelper=function(e,i,o){var a=pxt.BrowserUtils.popupWindow(e,lf("Login with Microsoft"),483,600);if(a)var s=window.setInterval(function(){var e,t,n,r;a.closed&&(window.clearInterval(s),t=(e=f.parseQueryString(pxt.storage.getLocal(p.OAUTH_HASH)||"")).state===pxt.storage.getLocal(p.OAUTH_REMEMBER_STATE),n=e.access_token,r=parseInt(e.expires_in),n&&r?i({accessToken:n,rememberMe:t,expiresIn:r}):o(new Error("Failed to login, most likely the user closed the popup")))},1e3);else this.loginAsync(!0).then(function(e){return i(e)}).catch(function(e){return o(e)})},l.prototype.login=function(e){var t=this,n=this.loginInner();n.scope="Files.ReadWrite User.Read",e&&(n.prompt="none");var r=f.stringifyQueryString("https://login.microsoftonline.com/common/oauth2/v2.0/authorize",n),i=!1;if(e){var o=this.addAdalFrame("onedriveLogin"),a=function(){o&&o.parentNode&&o.parentNode.removeChild(o),t.login()};o||a(),o.src="about:blank",o.addEventListener("load",function(e){!function(e){var t="";try{t=e.currentTarget.contentWindow.location.hash}catch(e){return a()}var n=f.parseQueryString(t),r=n.access_token;if(n.expires_in,!r)return pxt.debug("access_token not in #"),a();var i=pxt.storage.getLocal(p.OAUTH_STATE);if(!i)return pxt.debug("OAuth not started"),a();if(i!=n.state)return pxt.debug("OAuth state mismatch"),a();pxt.storage.removeLocal(p.OAUTH_STATE),pxt.storage.setLocal(p.OAUTH_HASH,t);var o=e.currentTarget;o.parentNode.removeChild(o)}(e)}),o&&(i=!0)}if(!(pxt.BrowserUtils.isIFrame()||pxt.BrowserUtils.isIE()||n.redirect||e)){var s=this;s.oauthWindow_=pxt.BrowserUtils.popupWindow(r,lf("Login with Microsoft"),483,600),s.oauthInterval_=window.setInterval(function(){s.oauthWindow_.closed&&(window.clearInterval(s.oauthInterval_),pxt.BrowserUtils.changeHash("",!0),window.location.reload())},1e3),i=!!s.oauthWindow_}i||(window.location.href=r)},l.prototype.registerCallback=function(o,a,e,t){window.activeRenewals[a]=o,window.callBacksMappedToRenewStates[o]||(window.callBacksMappedToRenewStates[o]=[]),window.callBacksMappedToRenewStates[o].push({resolve:e,reject:t}),window.callBackMappedToRenewStates[o]||(window.callBackMappedToRenewStates[o]=function(e,t,n,r){window.activeRenewals[a]=null;for(var i=0;i<window.callBacksMappedToRenewStates[o].length;++i)try{e||n?window.callBacksMappedToRenewStates[o][i].reject(e+"|"+n):t&&window.callBacksMappedToRenewStates[o][i].resolve(t)}catch(e){}window.callBacksMappedToRenewStates[o]=null,window.callBackMappedToRenewStates[o]=null})},l.prototype.loadIframeTimeout=function(e,t,n){var r=this,i=window.activeRenewals[n];pxt.debug("Set loading state to pending for: "+n+":"+i),pxt.storage.setLocal("renewStatus"+i,"In Progress"),this.loadFrame(e,t),setTimeout(function(){"In Progress"===pxt.storage.getLocal("renewStatus"+i)&&(pxt.debug("Loading frame has timed out after: "+r.loadFrameTimeout/1e3+" seconds for scope "+n+":"+i),i&&window.callBackMappedToRenewStates[i]&&window.callBackMappedToRenewStates[i]("Token renewal operation failed due to timeout",null,"Token Renewal Failed","access_token"),pxt.storage.setLocal("renewStatus"+i,"Canceled"))},this.loadFrameTimeout)},l.prototype.loadFrame=function(t,e){var n=this;pxt.debug("LoadFrame: "+e);var r=e;setTimeout(function(){var e=n.addAdalFrame(r);""!==e.src&&"about:blank"!==e.src||(e.src=t)},500)},l.prototype.addAdalFrame=function(e){if(void 0===e)return null;var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend",'<iframe name="'+e+'" id="'+e+'" style="display:none"></iframe>');window.frames&&window.frames[e]&&(t=window.frames[e])}return t},l.prototype.getUserInfoAsync=function(){var t=this;return this.getJsonAsync("/me").then(function(e){return{name:e.displayName||lf("{0} User",t.friendlyName),loginHint:e.userPrincipalName,id:e.id}})},l.prototype.listAsync=function(){var a=this;return this.getJsonAsync(d+"/children?select=@microsoft.graph.downloadUrl,lastModifiedDateTime,cTag,id,name").then(function(e){for(var t=a.fileSuffix(),n=[],r=0,i=e.value||[];r<i.length;r++){var o=i[r];h.endsWith(o.name.toLowerCase(),t)&&(a.entryCache[o.id]=o,n.push({id:o.id,name:o.name,version:o.cTag,updatedAt:a.parseTime(o.lastModifiedDateTime)}))}return console.log("resp",e),n})},l.prototype.downloadAsync=function(o){return c(this,void 0,void 0,function(){var t,n,r,i;return u(this,function(e){switch(e.label){case 0:return t=this.entryCache[o],n=!1,t&&t["@microsoft.graph.downloadUrl"]?[3,2]:[4,this.getJsonAsync("/me/drive/items/"+o)];case 1:t=e.sent(),this.entryCache[o]=t,n=!0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,h.requestAsync({url:t["@microsoft.graph.downloadUrl"]})];case 3:return r=e.sent(),[2,{id:o,version:t.cTag,name:t.name||"?",updatedAt:this.parseTime(r.headers["last-modified"]),content:JSON.parse(r.text)}];case 4:if(i=e.sent(),!n)return delete t["@microsoft.graph.downloadUrl"],[2,this.downloadAsync(o)];throw i;case 5:return[2]}})})},l.prototype.uploadAsync=function(o,a,s){return c(this,void 0,void 0,function(){var t,n,r,i;return u(this,function(e){switch(e.label){case 0:return console.log("1drive uploadAsync",o,a),(t=this.entryCache[o||"???"])&&delete t["@microsoft.graph.downloadUrl"],n="/me/drive/items/"+o+"/content",o||(r=JSON.parse(s[pxt.CONFIG_NAME]),n=d+":/"+encodeURIComponent(this.createFileNameWithSuffix(r.name))+":/content?@microsoft.graph.conflictBehavior=rename"),[4,this.reqAsync({url:n,method:"PUT",data:JSON.stringify(s,null,1),headers:a?{"if-match":a}:{}})];case 1:return 412==(i=e.sent()).statusCode?[2,void 0]:(300<=i.statusCode&&this.syncError(lf("Can't upload file to {0}",this.friendlyName)),t=i.json,[2,{id:(this.entryCache[t.id]=t).id,version:t.cTag,updatedAt:h.nowSeconds(),name:t.name}])}})})},l.prototype.updateAsync=function(n,r){return c(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return t={name:this.createFileNameWithSuffix(r)},[4,this.reqAsync({url:"/me/drive/items/"+n,method:"PATCH",data:JSON.stringify(t),headers:{"Content-type":"application/json"}})];case 1:return 400<=e.sent().statusCode&&this.syncError(lf("Can't rename {0} file",this.friendlyName)),[2]}})})},l.prototype.deleteAsync=function(t){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this.reqAsync({url:"/me/drive/items/"+t,method:"DELETE"})];case 1:return 204!=e.sent().statusCode&&this.syncError(lf("Can't delete {0} file",this.friendlyName)),delete this.entryCache[t],[2]}})})},l.ONEDRIVE_SCOPE="Files.ReadWrite User.Read",l}(p.ProviderBase);n.Provider=o},{"./cloudsync":4,"./core":31}],43:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var s=e("./workspace"),a=e("./data"),i=e("./core"),n=e("./db"),c=e("./compiler"),v=pxt.Util,r=new n.Table("hostcache"),o={ts:10,blocks:20,jres:25,json:30,md:40};l.setupAppTarget=function(e){pxt.setAppTarget(e)};var y=function(){function e(e,t,n){this.epkg=e,this.name=t,this.content=n,this.inSyncWithEditor=!0,this.inSyncWithDisk=!0}return e.prototype.isReadonly=function(){return!this.epkg.header||this.isAutoGenerated()},e.prototype.getName=function(){return this.epkg.getPkgId()+"/"+this.name},e.prototype.getTextFileName=function(){return this.epkg.isTopLevel()?this.name:"pxt_modules/"+this.epkg.getPkgId()+"/"+this.name},e.prototype.getFileNameWithExtension=function(e){var t=this.getTextFileName();return t.substring(0,t.length-this.getExtension().length)+e},e.prototype.getExtension=function(){return m(this.name)},e.prototype.getVirtualFileName=function(e){var t=this.name.replace(/.*\./,""),n=t?this.name.slice(0,-t.length-1):this.name;if(/^blocks|py|ts$/.test(t))switch(e){case pxt.BLOCKS_PROJECT_NAME:return n+".blocks";case pxt.JAVASCRIPT_PROJECT_NAME:return n+".ts";case pxt.PYTHON_PROJECT_NAME:return n+".py";default:return void pxt.U.oops()}},e.prototype.weight=function(){return/^main\./.test(this.name)?5:/^_locales\//.test(this.name)?500:o.hasOwnProperty(this.getExtension())?o[this.getExtension()]:60},e.prototype.markDirty=function(){this.inSyncWithEditor=!1,this.updateStatus()},e.prototype.updateStatus=function(){a.invalidate("open-meta:"+this.getName())},e.prototype.setBaseGitContent=function(e){e!=this.baseGitContent&&(this.baseGitContent=e,this.updateStatus())},e.prototype.setContentAsync=function(e,t){var n=this;if(v.assert(void 0!==e),this.inSyncWithEditor=!0,e!=this.content){var r=this.content;return this.inSyncWithDisk=!1,this.content=e,this.updateStatus(),this.epkg.saveFilesAsync().then(function(){n.content==e&&(n.inSyncWithDisk=!0,n.updateStatus()),t&&n.forceChangeCallback&&n.forceChangeCallback(r,e),n.name==pxt.github.GIT_JSON&&n.epkg.updateGitJsonCache()})}return this.updateStatus(),Promise.resolve()},e.prototype.setForceChangeCallback=function(e){this.forceChangeCallback=e},e.prototype.publishedContent=function(){var e=this.content;return this.name==pxt.CONFIG_NAME&&(e=s.prepareConfigForGithub(e)),e},e.prototype.isAutoGenerated=function(){return"this"===this.epkg.getPkgId()&&(this.name===pxt.TILEMAP_CODE||this.name===pxt.TILEMAP_JRES||this.name===pxt.IMAGES_CODE||this.name===pxt.IMAGES_JRES||this.name===pxt.TUTORIAL_INFO_FILE||this.name==pxt.ASSETS_FILE)},e}();l.File=y;var u=function(){function e(e,t){this.ksPkg=e,this.topPkg=t,this.files={},this.onupdate=function(){},this.saveScheduled=!1,this.savingNow=0,this.simStateSaveScheduled=!1,this.transpileCache=[],e&&"workspace"==e.verProtocol()&&(this.header=s.getHeader(e.verArgument()))}return e.prototype.getSimState=function(){if(!this.simState){this.files[pxt.SIMSTATE_JSON]||this.setFile(pxt.SIMSTATE_JSON,"{}");var e=this.files[pxt.SIMSTATE_JSON];try{this.simState=JSON.parse(e.content)}catch(e){this.simState={}}}return this.simState},e.prototype.setSimState=function(e,t){var n=this,r=this.getSimState();r[e]!=t&&(null==t?delete r[e]:r[e]=t,this.simStateSaveScheduled||(this.simStateSaveScheduled=!0,setTimeout(function(){if(n.simStateSaveScheduled=!1,n.simState){var e=n.files[pxt.SIMSTATE_JSON];e&&e.setContentAsync(JSON.stringify(n.simState)).done()}},2e3)))},e.prototype.getTopHeader=function(){return this.topPkg.header},e.prototype.getLanguageRestrictions=function(){var e=this.topPkg.ksPkg,t=e&&e.config;return t&&t.languageRestriction},e.prototype.getGeneratedFiles=function(t){if(-1<t.name.indexOf(".g.")){var n=t.name.substring(0,t.name.indexOf(".g.")+".g.".length);return v.values(this.files).filter(function(e){return e!==t&&pxt.U.startsWith(e.name,n)})}return[]},e.prototype.afterMainLoadAsync=function(){return this.assetsPkg?this.assetsPkg.loadAssetsAsync():Promise.resolve()},e.prototype.saveAssetAsync=function(e,t){var n=this;return s.saveAssetAsync(this.header.id,e,t).then(function(){return n.assetsPkg.loadAssetsAsync()})},e.prototype.loadAssetsAsync=function(){var m=this;return"assets"!=this.id?Promise.resolve():s.listAssetsAsync(this.topPkg.header.id).then(function(r){for(var e=v.flatClone(m.files),t=0,n=r;t<n.length;t++){var i=n[t],o=i.name,a=v.lookup(m.files,o);a?delete e[o]:(a=new y(m,o,"File size: "+i.size+"; URL: "+i.url),m.files[o]=a)}for(var s=0,l=Object.keys(e);s<l.length;s++){var c=l[s];delete m.files[c]}for(var u="",f=function(t){var e=r.filter(function(e){return e.name==t.name})[0],n=t.name.replace(/\..*/,"").replace(/[^a-zA-Z0-9_]/g,"_");u+="    export const "+n+' = "'+e.url+'";\n'},p=0,d=m.sortedFiles();p<d.length;p++)f(d[p]);var h=m.topPkg.lookupFile("assets.ts");if(h||u){u="namespace assets {\n"+u+"}\n";var g=m.topPkg.ksPkg.config;if(g.files.indexOf("assets.ts")<0&&(g.files.push("assets.ts"),m.topPkg.ksPkg.saveConfig()),h)return h.setContentAsync(u);m.topPkg.setFile("assets.ts",u)}return Promise.resolve()})},e.prototype.makeTopLevel=function(){(this.topPkg=this).outputPkg=new e(null,this),this.outputPkg.id="built",pxt.appTarget.runtime&&pxt.appTarget.runtime.assetExtensions&&(this.assetsPkg=new e(null,this),this.assetsPkg.id="assets")},e.prototype.updateConfigAsync=function(e){var t=this,n=this.files[pxt.CONFIG_NAME];if(n)try{var r=JSON.parse(n.content);return e(r),n.setContentAsync(pxt.Package.stringifyConfig(r)).then(function(){return t.ksPkg.loadConfig()})}catch(e){}return null},e.prototype.updateDepAsync=function(e){var t=this,n=this.ksPkg.resolveDep(e);if(!n||"github"!=n.verProtocol())return Promise.resolve();var r=pxt.github.parseRepoId(n.verArgument());return r?pxt.targetConfigAsync().then(function(e){return pxt.github.latestVersionAsync(r.fullName,e.packages)}).then(function(e){r.tag=e}).then(function(){return pxt.github.pkgConfigAsync(r.fullName,r.tag)}).catch(i.handleNetworkError).then(function(e){return t.addDepAsync(e.name,pxt.github.stringifyRepo(r))}):Promise.resolve()},e.prototype.removeDepAsync=function(t){var e=this;return this.updateConfigAsync(function(e){return delete e.dependencies[t]}).then(function(){return e.saveFilesAsync(!0)})},e.prototype.addDepAsync=function(t,n){var e=this;return this.updateConfigAsync(function(e){return e.dependencies[t]=n}).then(function(){return e.saveFilesAsync(!0)})},e.prototype.getKsPkg=function(){return this.ksPkg},e.prototype.getPkgId=function(){return this.ksPkg?this.ksPkg.id:this.id},e.prototype.isTopLevel=function(){return this.ksPkg&&0==this.ksPkg.level},e.prototype.setFile=function(e,t,n){var r=new y(this,e,t);return n&&(r.virtual=!0),this.files[e]=r,a.invalidate("open-meta:"),r},e.prototype.removeFileAsync=function(t){return delete this.files[t],a.invalidate("open-meta:"),this.updateConfigAsync(function(e){e.files=e.files.filter(function(e){return e!=t}),e.testFiles&&(e.testFiles=e.testFiles.filter(function(e){return e!=t}))})},e.prototype.setContentAsync=function(t,e){var n=this,r=this.files[t],i=Promise.resolve();return r||(r=this.setFile(t,e),(i=i.then(function(){return n.updateConfigAsync(function(e){return e.files.indexOf(t)<0?e.files.push(t):0})})).then(function(){return n.savePkgAsync()})),i.then(function(){return r.setContentAsync(e)})},e.prototype.updateGitJsonCache=function(){var e=this.files[pxt.github.GIT_JSON];if(e){var t=JSON.parse(e.content);if(t.commit)for(var n=0,r=t.commit.tree.tree;n<r.length;n++){var i=r[n],o=this.files[i.path];o&&null!=i.blobContent&&o.setBaseGitContent(i.blobContent)}}},e.prototype.setFiles=function(e){var n=this;this.files=v.mapMap(e,function(e,t){return new y(n,e,t)}),a.invalidate("open-meta:"),this.updateGitJsonCache()},e.prototype.updateStatus=function(){a.invalidate("pkg-status:"+this.header.id)},e.prototype.savePkgAsync=function(){var e=this;return this.header.blobCurrent?Promise.resolve():(this.savingNow++,this.updateStatus(),s.saveToCloudAsync(this.header).then(function(){e.savingNow--,e.updateStatus(),e.header.blobCurrent||e.scheduleSave()}))},e.prototype.scheduleSave=function(){var e=this;this.saveScheduled||(this.saveScheduled=!0,setTimeout(function(){e.saveScheduled=!1,e.savePkgAsync().done()},5e3))},e.prototype.getAllFiles=function(){var e=v.mapMap(this.files,function(e,t){return t.content});return delete e[pxt.SERIAL_EDITOR_FILE],e},e.prototype.saveFilesAsync=function(e){var t=this;if(!this.header)return Promise.resolve();var n=this.files[pxt.CONFIG_NAME];if(n)try{var r=JSON.parse(n.content);this.header.name=r.name}catch(e){}return s.saveAsync(this.header,this.getAllFiles()).then(function(){return e?t.savePkgAsync():t.scheduleSave()})},e.prototype.sortedFiles=function(){var e=v.values(this.files);return pxt.options.debug||(e=e.filter(function(e){return e.name!=pxt.github.GIT_JSON&&e.name!=pxt.SIMSTATE_JSON&&e.name!=pxt.SERIAL_EDITOR_FILE})),e.sort(function(e,t){return e.weight()-t.weight()||v.strcmp(e.name,t.name)}),e},e.prototype.forEachFile=function(t){this.pkgAndDeps().forEach(function(e){v.values(e.files).forEach(t)})},e.prototype.getMainFile=function(){return this.sortedFiles()[0]},e.prototype.pkgAndDeps=function(){if(this.topPkg!=this)return this.topPkg.pkgAndDeps();for(var e=this.ksPkg.deps,t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];/---/.test(i)||e[i].cppOnly||t.push(d(e[i]))}return this.assetsPkg&&t.push(this.assetsPkg),t.push(this.outputPkg),t},e.prototype.filterFiles=function(t){return v.concat(this.pkgAndDeps().map(function(e){return v.values(e.files).filter(t)}))},e.prototype.lookupFile=function(t){return 0===t.indexOf("pxt_modules/")&&(t=t.slice(12)),this.filterFiles(function(e){return e.getName()==t})[0]},e.prototype.buildAssetsAsync=function(){var e,t=this;return(null===(e=this.tilemapProject)||void 0===e?void 0:e.needsRebuild)?(this.tilemapProject.needsRebuild=!1,this.buildTilemapsAsync().then(function(){return t.buildImagesAsync()})):Promise.resolve()},e.prototype.buildTilemapsAsync=function(){var e,t,n=this,r=this.lookupFile("this/"+pxt.TILEMAP_CODE),i=this.lookupFile("this/"+pxt.TILEMAP_JRES),o=this.tilemapProject.getProjectTilesetJRes();if(!r&&1===Object.keys(o).length)return Promise.resolve();var a=pxt.emitTilemapsFromJRes(o),s=JSON.stringify(o,null,4);return(null===(e=r)||void 0===e?void 0:e.content)===a&&(null===(t=i)||void 0===t?void 0:t.content)===s?Promise.resolve():this.setContentAsync(pxt.TILEMAP_JRES,s).then(function(){return n.setContentAsync(pxt.TILEMAP_CODE,a)}).then(function(){l.mainPkg.updateJRes(),c.refreshLanguageServiceApisInfo()})},e.prototype.buildImagesAsync=function(){var e,t,n=this,r=this.lookupFile("this/"+pxt.IMAGES_CODE),i=this.lookupFile("this/"+pxt.IMAGES_JRES),o=this.tilemapProject.getProjectAssetsJRes();if(!r&&1===Object.keys(o).length)return Promise.resolve();var a=pxt.emitProjectImages(o),s=JSON.stringify(o,null,4);return(null===(e=r)||void 0===e?void 0:e.content)===a&&(null===(t=i)||void 0===t?void 0:t.content)===s?Promise.resolve():this.setContentAsync(pxt.IMAGES_JRES,s).then(function(){return n.setContentAsync(pxt.IMAGES_CODE,a)}).then(function(){l.mainPkg.updateJRes(),c.refreshLanguageServiceApisInfo()})},e.prototype.cacheTranspile=function(e,t,n,r){this.transpileCache.push({fromLanguage:e,fromText:t,toLanguage:n,toText:r}),10<this.transpileCache.length&&this.transpileCache.shift()},e.prototype.getCachedTranspile=function(e,t,n){for(var r=0,i=this.transpileCache;r<i.length;r++){var o=i[r];if(o.toLanguage===e&&o.fromLanguage===n&&f(e,o.toText,t))return o.fromText;if(o.fromLanguage===e&&o.toLanguage===n&&f(e,o.fromText,t))return o.toText}return null},e.prototype.invalidateCachedTranspile=function(e,t,n){for(var r=0;r<this.transpileCache.length;r++){var i=this.transpileCache[r],o=i.toLanguage===e&&i.fromLanguage===n&&f(e,i.toText,t),a=i.fromLanguage===e&&i.toLanguage===n&&f(e,i.fromText,t);if(o||a)return void this.transpileCache.splice(r,1)}},e}();function f(e,t,n){return t===n}l.EditorPackage=u;var p=new(function(){function e(){}return e.prototype.readFile=function(e,t){var n=d(e).files[t];return n?n.content:null},e.prototype.writeFile=function(e,t,n,r){if(t!=pxt.CONFIG_NAME&&!r)throw v.oops("trying to write "+e+" / "+t);d(e).files[t].setContentAsync(n,r).done()},e.prototype.getHexInfoAsync=function(e){return pxt.hexloader.getHexInfoAsync(this,e).catch(i.handleNetworkError)},e.prototype.cacheStoreAsync=function(t,e){return r.forceSetAsync({id:t,val:e}).then(function(){},function(e){pxt.tickEvent("cache.store.failed",{error:e.name}),pxt.log("cache store failed for "+t+": "+e.name)})},e.prototype.cacheGetAsync=function(e){return r.getAsync(e).then(function(e){return e.val},function(e){return null})},e.prototype.downloadPackageAsync=function(n){var e=n.verProtocol(),r=d(n),t=function(t){return s.getTextAsync(t).then(function(e){return r.isTopLevel()||e?e?r.isTopLevel()&&r.header?s.recomputeHeaderFlagsAsync(r.header,e).then(function(){return r.setFiles(e)}):(r.setFiles(e),Promise.resolve()):Promise.reject(new Error("Cannot find text for package '"+t+"' in the workspace.")):(n.configureAsInvalidPackage("cannot find '"+t+"' in the workspace."),Promise.resolve())})};if("pub"==e)return s.getPublishedScriptAsync(n.verArgument()).then(function(e){return r.setFiles(e)});if("github"==e)return s.getPublishedScriptAsync(n.version()).then(function(e){return r.setFiles(e)});if("workspace"==e)return t(n.verArgument());if("file"==e){var i=n.verArgument();return"."==i[0]&&(i=(n.parent.verArgument()+"/"+i).replace(/\/+/g,"/").replace(/[^\/]+\/\.\.\//g,"").replace(/\/\.\//g,"/")),t(i)}if("embed"==e)return r.setFiles(pxt.getEmbeddedScript(n.verArgument())),Promise.resolve();if("pkg"==e){var o=l.mainPkg.readFile(n.verArgument().replace(/^\.\//,"")),a=ts.pxtc.Util.jsonTryParse(o);return a?r.setFiles(a):pxt.log("failed to resolve "+n.version()),Promise.resolve()}return"invalid"==e?(pxt.log("skipping invalid pkg "+n.id),Promise.resolve()):Promise.reject("Cannot download "+n.version()+"; unknown protocol")},e}());function d(e){var t=e._editorPkg;if(t)return t;var n=null;e!=l.mainPkg&&(n=d(l.mainPkg));var r=new u(e,n);return e==l.mainPkg&&r.makeTopLevel(),e._editorPkg=r}function h(){return d(l.mainPkg)}function g(){return d(l.mainPkg).pkgAndDeps()}function m(e){var t=/\.([^\.]+)$/.exec(e);return t?t[1]:""}l.mainPkg=new pxt.MainPackage(p),l.getEditorPkg=d,l.mainEditorPkg=h,l.genFileName=function(e){var t=h().header.name.replace(/[()\\\/.,?*^:<>!;'#$%^&|"@+=«»°{}\[\]¾½¼³²¦¬¤¢£~­¯¸`±\x00-\x1F]/g,"");if(t=t.trim().replace(/\s+/g,"-"),pxt.appTarget.appTheme&&pxt.appTarget.appTheme.fileNameExclusiveFilter){var n=new RegExp(pxt.appTarget.appTheme.fileNameExclusiveFilter,"g");t=t.replace(n,"")}return t||(t="Untitled"),(pxt.appTarget.nickname||pxt.appTarget.id)+"-"+t+e},l.allEditorPkgs=g,l.notifySyncDone=function(t){0<v.values(l.mainPkg.deps).filter(function(e){return"workspace"==e.verProtocol()&&t.hasOwnProperty(e.verArgument())}).length&&d(l.mainPkg).onupdate()},l.loadPkgAsync=function(e,t){return l.mainPkg=new pxt.MainPackage(p),l.mainPkg._verspec="workspace:"+e,p.downloadPackageAsync(l.mainPkg).catch(i.handleNetworkError).then(function(){return ts.pxtc.Util.jsonTryParse(p.readFile(l.mainPkg,pxt.CONFIG_NAME))}).then(function(e){return e?l.mainPkg.installAllAsync(t).then(function(){return h().afterMainLoadAsync()}):(l.mainPkg.configureAsInvalidPackage(lf("invalid pxt.json file")),h().afterMainLoadAsync())})},a.mountVirtualApi("open-meta",{getSync:function(e){e=a.stripProtocol(e);var t=h(),n=t.lookupFile(e);if(!n)return{};var r=!(!t.header||!t.header.githubId||n.epkg!=t),i={isReadonly:n.isReadonly(),isSaved:n.inSyncWithEditor&&n.inSyncWithDisk,numErrors:n.numDiagnosticsOverride,isGitModified:r&&n.baseGitContent!=n.publishedContent()};return null==i.numErrors&&(i.numErrors=n.diagnostics?n.diagnostics.length:0,i.diagnostics=n.diagnostics),i}}),a.mountVirtualApi("open-pkg-meta",{getSync:function(t){t=a.stripProtocol(t);var e=g().filter(function(e){return e.getPkgId()==t})[0];if(!e||"built"==e.getPkgId())return{};var n=e.sortedFiles(),r=n.reduce(function(e,t){return e+(t.numDiagnosticsOverride||(t.diagnostics?t.diagnostics.length:0)||0)},0),i=e.getKsPkg();i&&i.invalid()&&r++;var o={numErrors:r};return r&&(o.diagnostics=[],n.filter(function(e){return!!e.diagnostics}).forEach(function(e){return o.diagnostics.concat(e.diagnostics)})),o}}),a.mountVirtualApi("pkg-git-status",{getSync:function(t){t=a.stripProtocol(t);var e=g().find(function(e){return e.header&&e.header.id==t}),n={};if(e&&(n.id="this"==e.getPkgId()&&e.header&&e.header.githubId,n.id)){var r=e.sortedFiles();n.modified=!!r.find(function(e){return e.baseGitContent!=e.publishedContent()})}return n}}),l.invalidatePullStatus=function(e){a.invalidateHeader("pkg-git-pull-status",e)},a.mountVirtualApi("pkg-git-pull-status",{getAsync:function(t){t=a.stripProtocol(t);var e=g().find(function(e){return e.header&&e.header.id==t});return"this"==e.getPkgId()&&e.header&&e.header.githubId?s.pullAsync(e.header,!0).catch(function(e){return s.PullStatus.NoSourceControl}):Promise.resolve(s.PullStatus.NoSourceControl)},expirationTime:function(e){return 36e5}}),l.invalidatePullRequestStatus=function(e){a.invalidateHeader("pkg-git-pr",e)},a.mountVirtualApi("pkg-git-pr",{getAsync:function(t){var n={number:-1};t=a.stripProtocol(t);var e=g().find(function(e){return e.header&&e.header.id==t}),r=e.header,i="this"==e.getPkgId()&&r&&r.githubId;if(!i)return Promise.resolve(n);var o=pxt.github.parseRepoId(i);return o&&o.tag&&"master"!=o.tag?pxt.github.findPRNumberforBranchAsync(o.fullName,o.tag).catch(function(e){return n}):Promise.resolve(n)},expirationTime:function(e){return 36e5}}),l.invalidatePagesStatus=function(e){a.invalidateHeader("pkg-git-pages",e)},a.mountVirtualApi("pkg-git-pages",{getAsync:function(t){t=a.stripProtocol(t);var e=g().find(function(e){return e.header&&e.header.id==t}),n=e.header,r="this"==e.getPkgId()&&n&&n.githubId;if(!r)return Promise.resolve(void 0);var i=pxt.github.parseRepoId(r);return i?pxt.github.getPagesStatusAsync(i.fullName).catch(function(e){}):Promise.resolve(void 0)},expirationTime:function(e){return 36e5}}),a.mountVirtualApi("pkg-status",{getSync:function(t){t=a.stripProtocol(t);var e=g().find(function(e){return e.header&&e.header.id==t});return e&&e.savingNow?"saving":""}}),l.getExtensionOfFileName=m},{"./compiler":5,"./core":31,"./data":33,"./db":34,"./workspace":45}],44:[function(e,t,L){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),R=this&&this.__assign||function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(L,"__esModule",{value:!0});var j=e("react"),o=e("react-dom"),M=e("react-modal"),a=e("react-tooltip"),n=e("./data"),B=e("./core");function F(e){return e.filter(function(e){return!!e&&""!=e.trim()}).join(" ")}function s(e,t,n){return void 0===n&&(n=!1),e+" "+(n?"":t.icon&&t.text?"icon icon-and-text":t.icon?"icon":"")+" "+(t.inverted?"inverted":"")+" "+(t.className||"")}function y(e){var t=[e.icon?j.createElement(L.Icon,{key:"iconkey",icon:e.icon+(e.text?" icon-and-text ":"")+(e.iconClass?" "+e.iconClass:"")}):null,e.text?j.createElement("span",{key:"textkey",className:"ui text"+(e.textClass?" "+e.textClass:"")},e.text):null];return e.icon&&e.rightIcon&&(t=t.reverse()),t}function q(e){var t=B.keyCodeFromEvent(e);t!==B.ENTER_KEY&&t!==B.SPACE_KEY||(e.preventDefault(),e.currentTarget.click())}L.appElement=document.getElementById("content"),L.cx=F,L.fireClickOnEnter=q;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.Component);L.UIElement=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.PureComponent);L.StatelessUIElement=c;var u=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.navigateToNextElement=function(e,t,n){var r=a.refs.dropdown,i=B.keyCodeFromEvent(e),o=e.currentTarget;40===i?(e.preventDefault(),e.stopPropagation(),n&&a.focus(n)):38===i?(e.preventDefault(),e.stopPropagation(),t?a.focus(t):(r.focus(),a.setState({open:!1}))):i!==B.SPACE_KEY&&i!==B.ENTER_KEY||(e.preventDefault(),e.stopPropagation(),o.click())},a.closeOnEscape=function(e){B.keyCodeFromEvent(e)===B.ESC_KEY&&(e.preventDefault(),a.refs.dropdown.focus(),a.isMouseDown=!0,a.hide())},a.handleClick=function(e){a.toggle(),e.stopPropagation()},a.handleClose=function(){a.isMouseDown=!1;var e=document.activeElement===a.refs.dropdown;a.setState({focus:e})},a.handleMouseDown=function(e){a.isMouseDown=!0,document.addEventListener(pxsim.pointerEvents.up,a.handleDocumentMouseUp)},a.handleDocumentMouseUp=function(e){a.isMouseDown=!1,document.removeEventListener(pxsim.pointerEvents.up,a.handleDocumentMouseUp)},a.handleFocus=function(e){a.state.focus||a.setState({focus:!0})},a.handleBlur=function(e){a.isMouseDown||setTimeout(function(){var e=a.isChildFocused();a.setState({focus:e})},1)},a.handleKeyDown=function(e){var t=B.keyCodeFromEvent(e);40===t?(e.preventDefault(),a.focusFirst=!0,a.show()):t!==B.SPACE_KEY&&t!==B.ENTER_KEY||(e.preventDefault(),a.toggle())},a}return i(t,e),t.prototype.show=function(){this.setState({open:!0,focus:!0})},t.prototype.hide=function(){this.setState({open:!1})},t.prototype.toggle=function(){this.state.open?this.hide():this.show()},t.prototype.focus=function(e){this.setActive(e),e.focus()},t.prototype.blur=function(e){this.isActive(e)&&pxt.BrowserUtils.removeClass(e,"active")},t.prototype.setActive=function(e){this.isActive(e)||pxt.BrowserUtils.addClass(e,"active")},t.prototype.isActive=function(e){return e&&pxt.BrowserUtils.containsClass(e,"active")},t.prototype.getChildren=function(){for(var e=this.refs.menu,t=[],n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];pxt.BrowserUtils.containsClass(r,"divider")||pxt.BrowserUtils.containsClass(r,"mobile")&&!pxt.BrowserUtils.isMobile()||t.push(r)}return t},t.prototype.isChildFocused=function(){for(var e=this.getChildren(),t=0;t<e.length;t++)if(document.activeElement===e[t])return!0;return!1},t.prototype.componentDidMount=function(){for(var i=this,o=this.getChildren(),e=function(e){var t=0<e?o[e-1]:void 0,n=o[e],r=e<o.length?o[e+1]:void 0;n.addEventListener("keydown",function(e){i.navigateToNextElement(e,t,r)}),n.addEventListener("focus",function(e){i.setActive(n)}),n.addEventListener("blur",function(e){i.blur(n)}),e==o.length-1&&n.addEventListener("keydown",function(e){var t=B.keyCodeFromEvent(e);e.shiftKey||t!==B.TAB_KEY||i.hide()})},t=0;t<o.length;t++)e(t)},t.prototype.componentDidUpdate=function(e,t){for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].tabIndex=this.state.open?0:-1;if(t.open!=this.state.open&&this.state.open){var i=this.refs.dropdown,o=this.refs.menu;i.offsetLeft+o.offsetWidth>window.innerWidth&&pxt.BrowserUtils.addClass(o,"left")}!t.focus&&this.state.focus||t.focus&&!this.state.focus&&(this.isMouseDown||this.hide()),!t.open&&this.state.open?document.addEventListener("keydown",this.closeOnEscape):t.open&&!this.state.open&&(document.removeEventListener("keydown",this.closeOnEscape),this.handleClose()),this.focusFirst&&0<n.length&&(this.focus(n[0]),this.focusFirst=!1)},t.prototype.renderCore=function(){var e=this.props,t=e.disabled,n=e.title,r=e.role,i=e.icon,o=e.className,a=e.avatarImage,s=e.avatarInitials,l=e.children,c=e.displayAbove,u=e.displayRight,f=e.dataTooltip,p=this.state.open,d={role:r||"combobox","aria-disabled":t,"aria-haspopup":!!t,"aria-expanded":p},h={role:"menu","aria-label":lf("Dropdown menu {0}",n),"aria-hidden":!!p},g=F(["ui",p?"active visible":"","dropdown",i?"icon":"",o||"",c?"menuAbove":"",u?"menuRight":""]),m=F(["menu",p?"visible transition":""]),v=a||s?j.createElement("div",{className:"avatar"},a?j.createElement("img",{className:"ui circular image",src:a,alt:n}):j.createElement("div",{className:"initials"},s)):void 0;return j.createElement("div",R({role:"listbox",ref:"dropdown",title:n},d,{id:this.props.id,className:g,"data-tooltip":f,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:0}),v||y(this.props),j.createElement("div",R({ref:"menu"},h,{className:m,role:"menu"}),l))},t}(l);L.DropdownMenu=u;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hide=function(){t.setState({expanded:!1});var e=t.props.onHide;e&&e()},t.show=function(){t.setState({expanded:!0});var e=t.props.onShow;e&&e()},t.toggleExpanded=function(){t.state.expanded?t.hide():t.show()},t}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.children,r=this.state.expanded;return j.createElement("div",{className:"expandable-menu"},j.createElement(G,{className:"no-select menu-header",icon:"no-select chevron "+(r?"down":"right"),text:t,ariaExpanded:r,onClick:this.toggleExpanded}),r&&j.createElement("div",{className:"expanded-items"},n))},t}(l);L.ExpandableMenu=f;var p=function(r){function e(e){var n=r.call(this,e)||this;n.handleOnChange=function(e){var t=n.props.onChange;n.setState({selected:e.target.value}),t&&t(e.target.value)};var t=e.options;return n.state={selected:t[0]&&t[0].value+""},n}return i(e,r),e.prototype.render=function(){var e=this.props,t=e.options,n=e.label,r=this.state.selected;return j.createElement("div",null,n&&n+" ",j.createElement("select",{value:r,className:"ui dropdown",onChange:this.handleOnChange},t.map(function(e){return e&&j.createElement("option",{"aria-selected":r===e.value,value:e.value,key:e.value},e.display||e.value)})))},e}(l);L.Select=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){var e=this.props,t=e.text,n=e.title,r=e.ariaLabel;return j.createElement("div",{className:s("ui item link",this.props,!0)+" "+(this.props.active?"active":""),role:this.props.role,"aria-label":r||n||t,title:n||t,tabIndex:this.props.tabIndex||0,key:this.props.value,"data-value":this.props.value,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||q},y(this.props),this.props.children)},t}(n.Component);L.Item=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){return j.createElement("div",{className:s("ui item link",this.props,!0)+" "+(this.props.active?"active":""),role:this.props.role,title:this.props.title||this.props.text,tabIndex:this.props.tabIndex||0,key:this.props.value,"data-value":this.props.value,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||q},j.createElement("div",{className:s("ui button",this.props)},y(this.props),this.props.children))},t}(l);L.ButtonMenuItem=h;var U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){var e=this.props,t=(e.labelPosition,e.color),n=e.size,r=e.disabled,i=e.loading,o=F([t,n,r||i?"disabled":"",i?"loading":"",s("ui button",this.props)]),a=j.createElement("button",{className:o,id:this.props.id,role:this.props.role,title:this.props.title,tabIndex:this.props.tabIndex||0,"aria-label":this.props.ariaLabel,"aria-expanded":this.props.ariaExpanded,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,autoFocus:this.props.autoFocus},y(this.props),this.props.children);return this.props.tooltipId&&!pxt.BrowserUtils.isIOS()?j.createElement(x,{id:this.props.tooltipId,content:this.props.tooltip||this.props.title,place:this.props.tooltipPlace,delayShow:this.props.tooltipDelayShow},a):a},t}(c);L.Button=U;var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){var e=this.props.onClick;return j.createElement("div",{role:"button",className:"closeIcon",tabIndex:0,onClick:e,onKeyDown:q,"aria-label":lf("Close")},j.createElement(L.Icon,{icon:"close remove circle"}))},t}(c);L.CloseButton=H;var G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){return j.createElement("a",{className:s("ui",this.props)+(this.props.loading?" loading":"")+(this.props.disabled?" disabled":""),id:this.props.id,href:this.props.href,target:this.props.target,rel:this.props.rel||(this.props.target?"noopener noreferrer":""),download:this.props.download,ref:this.props.refCallback,role:this.props.role,title:this.props.title,tabIndex:this.props.tabIndex||0,"aria-label":this.props.ariaLabel,"aria-expanded":this.props.ariaExpanded,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||q},y(this.props),this.props.children)},t}(c);L.Link=G,L.helpIconLink=function(e,t){return j.createElement(G,{className:"help-link",href:e,icon:"help circle",target:"_blank",role:"button",title:t})};var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderCore=function(){return j.createElement("div",{className:"field"},this.props.label?j.createElement("label",{htmlFor:this.props.ariaLabel?void 0:this.props.htmlFor},this.props.label):null,this.props.ariaLabel&&this.props.htmlFor?j.createElement("label",{htmlFor:this.props.htmlFor,className:"accessible-hidden"},this.props.ariaLabel):"",this.props.children)},t}(n.Component);L.Field=m;var g=function(n){function e(e){var t=n.call(this,e)||this;return t.state={value:e.value},t.copy=t.copy.bind(t),t.handleClick=t.handleClick.bind(t),t.handleChange=t.handleChange.bind(t),t.handleEnterPressed=t.handleEnterPressed.bind(t),t}return i(e,n),e.prototype.componentDidMount=function(){var e=this.props,t=e.selectOnMount,n=e.autoFocus;t&&n&&this.refs.inputField.select()},e.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({value:e.value})},e.prototype.clearValue=function(){this.setState({value:void 0})},e.prototype.copy=function(){this.setState({copied:!1});var e,t=this.props,n=o.findDOMNode(this);t.lines&&1!=t.lines?(e=n.getElementsByTagName("textarea")[0]).focus():(e=n.getElementsByTagName("input")[0]).focus(),e.setSelectionRange(0,9999);try{var r=document.execCommand("copy");pxt.debug("copy: "+r),this.setState({copied:!!r})}catch(e){this.setState({copied:!1})}},e.prototype.handleClick=function(e){this.props.selectOnClick&&e.target.setSelectionRange(0,9999)},e.prototype.handleChange=function(e){var t=e.target.value;this.props.readOnly||this.state&&this.state.value===t||this.setState({value:t,copied:!1}),this.props.onChange&&this.props.onChange(t)},e.prototype.handleEnterPressed=function(e){if(B.keyCodeFromEvent(e)===B.ENTER_KEY){var t=this.props.onEnter;t&&(e.preventDefault(),t())}},e.prototype.renderCore=function(){var e=this.props,t=e.copy,n=e.error,r=e.ariaLabel,i=e.id,o=e.label,a=e.inputLabel,s=e.lines,l=e.autoFocus,c=e.placeholder,u=e.readOnly,f=e.autoComplete,p=this.state,d=p.value,h=p.copied,g=t&&document.queryCommandSupported("copy")?j.createElement(U,{className:"ui right labeled "+(h?"green":"primary")+" icon button",text:h?lf("Copied!"):lf("Copy"),icon:"copy",onClick:this.copy}):null;return j.createElement(m,{ariaLabel:r,htmlFor:i,label:o},j.createElement("div",{className:"ui input"+(e.inputLabel?" labelled":"")+(t?" action fluid":"")+(e.disabled?" disabled":"")},a?j.createElement("div",{className:"ui label"},a):"",s&&1!=s?j.createElement("textarea",{id:i,className:"ui input "+(e.class||"")+(a?" labelled":""),rows:s,placeholder:c,value:d||"",readOnly:!!u,onClick:this.handleClick,onChange:this.handleChange,onKeyDown:this.handleEnterPressed}):j.createElement("input",{ref:"inputField",autoFocus:l,id:i,className:e.class||"",type:e.type||"text",placeholder:c,value:d||"",readOnly:!!u,onClick:this.handleClick,onChange:this.handleChange,onKeyDown:this.handleEnterPressed,autoComplete:f?"":"off",autoCorrect:f?"":"off",autoCapitalize:f?"":"off",spellCheck:f}),g),n?j.createElement("div",{className:"ui yellow message"},n):void 0)},e}(n.Component);L.Input=g;var v=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleChange=t.handleChange.bind(t),t}return i(e,n),e.prototype.handleChange=function(e){this.props.onChange(e.currentTarget.checked)},e.prototype.renderCore=function(){var e=this.props;return j.createElement(m,{label:e.label},j.createElement("div",{className:"ui toggle checkbox"},j.createElement("input",{type:"checkbox",checked:e.checked,"aria-checked":e.checked,"aria-label":e.label||e.inputLabel,onChange:this.handleChange}),e.inputLabel?j.createElement("label",null,e.inputLabel):void 0))},e}(n.Component);L.Checkbox=v,L.Icon=function(e){var t=e.icon,n=e.className,r=e.onClick,i=e.onKeyDown,o=e.children,a=D(e,["icon","className","onClick","onKeyDown","children"]);return j.createElement("i",R({className:"icon "+t+" "+(n||""),onClick:r,onKeyDown:i||q,"aria-hidden":!0,role:"presentation"},a),o)};var b=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClick=function(e){var t=n.props.onClick;t&&t(e,n.props)},n}return i(e,t),e.prototype.renderCore=function(){var e=this.props,t=e.active,n=e.children,r=e.className,i=e.color,o=e.content,a=e.fitted,s=e.header,l=e.icon,c=e.link,u=e.name,f=e.onClick,p=e.position,d=e.ariaControls,h=e.id,g=e.tabIndex,m=F([i,p,t?"active":"",!0===l||l&&!u&&!o?"icon":"",s?"header":"",c||f?"link":"",a?1==a?""+a:"fitted "+a:"","item",r]);return n?j.createElement("div",{role:"menuitem",className:m,onClick:this.handleClick},n):j.createElement("div",{id:h,tabIndex:null!=g?g:-1,className:m,onClick:this.handleClick,onKeyDown:q,role:"tab","aria-controls":d,"aria-selected":t,"aria-label":""+(o||u)},l?j.createElement(L.Icon,{icon:l}):void 0,o||u)},e}(n.Component);L.MenuItem=b;var _=function(t){function e(e){var l=t.call(this,e)||this;return l.handleKeyboardNavigation=function(e){var t=B.keyCodeFromEvent(e),n=37===t||38===t,r=39===t||40===t;if(n||r){for(var i,o=l.child(".item"),a=-1,s=0;-1===a&&s<o.length;)pxt.BrowserUtils.containsClass(o[s],"active")&&(a=s),s++;-1!==a&&(n&&!pxt.Util.isUserLanguageRtl()||r&&pxt.Util.isUserLanguageRtl()?i=0===a?o[o.length-1]:o[a-1]:(r&&!pxt.Util.isUserLanguageRtl()||n&&pxt.Util.isUserLanguageRtl())&&(i=a===o.length-1?o[0]:o[a+1]),void 0!==i&&(i.click(),i.focus()))}},l}return i(e,t),e.prototype.componentDidMount=function(){var n=this;this.child(".item").forEach(function(e,t){e.onkeydown=n.handleKeyboardNavigation})},e.prototype.renderCore=function(){var e=this.props,t=e.attached,n=e.borderless,r=e.children,i=e.className,o=e.color,a=e.compact,s=e.fixed,l=e.floated,c=e.fluid,u=e.icon,f=e.inverted,p=e.pagination,d=e.pointing,h=e.secondary,g=e.size,m=e.stackable,v=e.tabular,y=F(["ui",o,g,n?"borderless":"",a?"compact":"",c?"fluid":"",f?"inverted":"",p?"pagination":"",d?"pointing":"",h?"secondary":"",m?"stackable":"",e.text?"text":"",e.vertical?"vertical":"",t?1==t?"attached":t+" attached ":"",l?1==l?"floated":l+" floated":"",u?1==u?"icon":u+" icon":"",v?1==v?"tabular":v+" tabular":"",s?"tabular "+v:"",i,"menu"]);return j.createElement("div",{className:y,role:"tablist"},r)},e}(n.Component);L.Menu=_;var w=function(t){function e(e){var s=t.call(this,e)||this;return s.setPositionAndClassNames=function(){var e,t=s.props.dimmer;t&&(e="dimmable dimmed","blurring"===t&&(e+=" blurring"));var n={},r=s.getRef();if(r){var i=r.getBoundingClientRect().height,o=-Math.round(i/2),a=i>=window.innerHeight;s.state.marginTop!==o&&(n.marginTop=o),s.state.scrolling!==a&&(n.scrolling=a),a&&(e+=" scrolling")}s.state.mountClasses!==e&&(n.mountClasses=e),0<Object.keys(n).length&&(s.setState(n),s.props.onPositionChanged&&s.props.onPositionChanged(s.props)),s.animationRequestId=requestAnimationFrame(s.setPositionAndClassNames)},s.id=ts.pxtc.Util.guidGen(),s.state={},s.onRequestClose=s.onRequestClose.bind(s),s.afterOpen=s.afterOpen.bind(s),s}return i(e,t),e.prototype.afterOpen=function(){var e=this.props.modalDidOpen;this.setState({scrolling:!1}),this.setPositionAndClassNames(),e&&e(this.getRef())},e.prototype.onClose=function(){cancelAnimationFrame(this.animationRequestId)},e.prototype.getRef=function(){var e=this.refs.modal;return e&&e.node&&e.node.firstChild&&e.node.firstChild.firstChild},e.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.animationRequestId)},e.prototype.onRequestClose=function(){var e=this.props.onClose;this.onClose(),e()},e.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.size,r=e.longer,i=e.basic,o=e.className,a=e.onClose,s=e.closeIcon,l=e.children,c=(e.onKeyDown,e.header),u=e.headerIcon,f=e.headerClass,p=e.headerActions,d=e.helpUrl,h=e.description,g=e.closeOnDimmerClick,m=e.closeOnDocumentClick,v=e.closeOnEscape,y=e.shouldCloseOnEsc,b=e.shouldCloseOnOverlayClick,_=e.shouldFocusAfterRender,w=e.overlayClassName,E=D(e,["isOpen","size","longer","basic","className","onClose","closeIcon","children","onKeyDown","header","headerIcon","headerClass","headerActions","helpUrl","description","closeOnDimmerClick","closeOnDocumentClick","closeOnEscape","shouldCloseOnEsc","shouldCloseOnOverlayClick","shouldFocusAfterRender","overlayClassName"]),k=this.state,x=k.marginTop,S=k.scrolling,C=k.mountClasses,T="fullscreen"==n,A=T&&!!s,O=F(["ui",n,r?"longer":"",i?"basic":"",S?"scrolling":"",s?"closable":"","modal transition visible active",o]),P=F([B.highContrast?"hc":"",C]),N={labelledby:c?this.id+"title":void 0,describedby:!T&&h?this.id+"description":this.id+"desc"},I={content:{marginTop:x}};return j.createElement(M,R({isOpen:t,ref:"modal",appElement:L.appElement,onRequestClose:this.onRequestClose,onAfterOpen:this.afterOpen,shouldReturnFocusAfterClose:!0,shouldFocusAfterRender:_,shouldCloseOnEsc:y||v,shouldCloseOnOverlayClick:b||m||g,portalClassName:P,overlayClassName:"ui page modals dimmer transition "+w+" "+(t?"visible active":""),className:O,style:I,role:"dialog",aria:N},E),c||A||d?j.createElement("div",{id:this.id+"title",className:"header "+(f||"")},u&&j.createElement(L.Icon,{icon:u}),j.createElement("span",{className:"header-title",style:{margin:"0 "+(d?"-20rem":"0")+" 0 "+(A?"-20rem":"0")}},c),A?j.createElement("div",{className:"header-close"},j.createElement(U,{className:"back-button large",title:lf("Go back"),onClick:a,tabIndex:0,onKeyDown:q},j.createElement(L.Icon,{icon:"arrow left"}),j.createElement("span",{className:"ui text landscape only"},lf("Go back")))):void 0,d?j.createElement("div",{className:"header-help"},j.createElement("a",{className:"ui icon help-button",href:d,target:"_docs",role:"button","aria-label":lf("Help on {0} dialog",c)},j.createElement(L.Icon,{icon:"help"}))):void 0):void 0,T&&p?j.createElement("div",{className:"header-actions"},p):void 0,!T&&h?j.createElement("label",{id:this.id+"description",className:"accessible-hidden"},h):void 0,j.createElement("div",{id:this.id+"desc",className:(r?"scrolling":"")+" "+(p?"has-actions":"")+" content"},l),!T&&this.props.buttons&&0<this.props.buttons.length?j.createElement("div",{className:"actions"},this.props.buttons.map(function(e){return e.url?j.createElement(G,{key:"action_"+e.label,icon:e.icon,text:e.label,title:e.title||e.label,className:"ui button approve "+(e.icon?"icon right":"")+" "+(e.label?"labeled":"")+" "+(e.className||"")+" "+(e.loading?"loading disabled":"")+" "+(e.disabled?"disabled":""),href:e.url,target:e.fileName?void 0:"_blank",download:e.fileName?pxt.Util.htmlEscape(e.fileName):void 0}):j.createElement(z,R({key:"action_"+e.label},e,{labelPosition:e.labelPosition}))})):void 0,!T&&s&&j.createElement(H,{onClick:a}))},e}(j.Component);L.Modal=w;var z=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleClick=t.handleClick.bind(t),t}return i(e,n),e.prototype.handleClick=function(){!this.props.disabled&&this.props.onclick&&this.props.onclick()},e.prototype.renderCore=function(){var e=this.props;return j.createElement(U,{icon:e.icon,text:e.label,labelPosition:e.labelPosition,className:"approve "+(e.icon?"icon "+(e.labelPosition?e.labelPosition:"right")+" labeled":"")+" "+(e.className||"")+" "+(e.loading?"loading disabled":"")+" "+(e.disabled?"disabled":""),onClick:this.handleClick,onKeyDown:q})},e}(n.PureComponent),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.inverted,r=e.page,i=e.simple,o=e.closable,a=e.onClose,s=e.active,l=e.children,c=D(e,["disabled","inverted","page","simple","closable","onClose","active","children"]),u=F(["ui dimmer",s?"active transition visible":"",t?"disabled":"",n?"inverted":"",r?"page":"",i?"simple":""]);return j.createElement(M,R({appElement:L.appElement,style:{content:{background:"none",border:"0"}},shouldCloseOnOverlayClick:o,onRequestClose:a,overlayClassName:u,role:"dialog"},c),l)},t}(l);L.Dimmer=E;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.children,r=e.disabled,i=e.inverted,o=F(["ui loader",e.size,t?"active":"",r?"disabled":"",i?"inverted":"",n?"text":"",e.className]);return j.createElement("div",{className:o},n)},t}(l);L.Loader=k;var x=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t}return i(e,n),e.prototype.render=function(){var e=this.props,t=e.id,n=e.content,r=e.className,i=D(e,["id","content","className"]);return j.createElement("div",null,j.createElement("div",{"data-tip":"tooltip","data-for":t},this.props.children),j.createElement(a,R({id:t,className:"pxt-tooltip "+(r||""),effect:"solid"},i),n))},e}(j.Component);L.Tooltip=x;var S=function(n){function e(e){var t=n.call(this,e)||this;return t.radius=100/(2*Math.PI),t.view=2*t.radius+t.props.stroke,t}return i(e,n),e.prototype.getPathStyle=function(){return{strokeWidth:this.props.stroke}},e.prototype.render=function(){var e=this.props,t=this.radius;return j.createElement("div",{className:"progresscircle"},j.createElement("svg",{viewBox:"0 0 "+this.view+" "+this.view,"aria-labelledby":"circletitle",role:"img"},j.createElement("title",{id:"circletitle"},"Currently on step ",e.progress," of ",e.steps),j.createElement("path",{style:this.getPathStyle(),strokeDasharray:Math.round(100*e.progress/e.steps)+", 100",d:"M"+this.view/2+" "+e.stroke/2+" a "+t+" "+t+" 0 0 1 0 "+2*t+" a "+t+" "+t+" 0 0 1 0 -"+2*t})))},e}(j.Component);L.ProgressCircle=S;var C=function(n){function e(e){var t=n.call(this,e)||this;return t.state={isChecked:!1},t.setCheckedBit=t.setCheckedBit.bind(t),t}return i(e,n),e.prototype.setCheckedBit=function(){var e=!this.state.isChecked;this.props.onChange(e),this.setState({isChecked:e})},e.prototype.renderCore=function(){return j.createElement(v,{inputLabel:this.props.label,checked:this.state.isChecked,onChange:this.setCheckedBit})},e}(n.Component);L.PlainCheckbox=C},{"./core":31,"./data":33,react:228,"react-dom":184,"react-modal":197,"react-tooltip":221}],45:[function(e,t,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},P=this&&this.__awaiter||function(e,a,s,l){return new(s||(s=Promise))(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((l=l.apply(e,a||[])).next())})},N=this&&this.__generator||function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var l,r,i=e("./db"),c=e("./core"),I=e("./data"),o=e("./browserworkspace"),a=e("./fileworkspace"),u=e("./memoryworkspace"),f=e("./iframeworkspace"),L=e("./cloudsync"),p=e("./idbworkspace"),R=e("./compiler"),D=pxt.Util,d=pxt.Cloud,h=e("crypto-js/sha1"),g=[],m=new D.PromiseQueue;function v(t){return g.find(function(e){return e.header.id==t||e.header.path==t})}function j(e,t){if(void 0===t&&(t="utf-8"),"base64"==t){var n=atob(e);return h("blob "+n.length+"\0"+n)+""}return h("blob "+D.toUTF8(e).length+"\0"+e)+""}function y(n){return P(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return pxt.log("workspace: error, switching from "+r+" to memory workspace"),t=pxt.appTarget.appTheme.disableMemoryWorkspaceWarning||l===u.provider||pxt.shell.isSandboxMode()||pxt.shell.isReadOnly()||pxt.BrowserUtils.isIFrame(),pxt.tickEvent("workspace.syncerror",{ws:r,reason:n,expected:t?1:0}),t?[3,2]:[4,c.confirmAsync({header:lf("Warning! Project Auto-Save Disabled"),body:lf("We are unable to save your projects at this time. You can still manually save your project via direct download, or sharing your project."),agreeLbl:lf("Continue"),headerIcon:"warning",agreeClass:"cancel",agreeIcon:"cancel",helpUrl:"/browsers/no-auto-save",className:"auto-save-disabled-warning",hasCloseIcon:!0})];case 1:e.sent(),e.label=2;case 2:return l=u.provider,[2]}})})}function b(t){void 0===t&&(t=!1),k().done();var e=g.map(function(e){return e.header}).filter(function(e){return(t||!e.isDeleted)&&!e.isBackup});return e.sort(function(e,t){return t.recentUse-e.recentUse}),e}function _(e){k().done();var t=v(e);return t&&!t.header.isDeleted?t.header:null}n.gitsha=j,n.copyProjectToLegacyEditor=function(e,t){return ue()?o.copyProjectToLegacyEditor(e,t):Promise.reject("Copy operation only works in browser workspace")},n.setupWorkspace=function(e){switch(D.assert(!l,"workspace set twice"),pxt.log("workspace: "+e),r=e){case"fs":case"file":l=a.provider;break;case"mem":case"memory":l=u.provider;break;case"iframe":l=f.provider;break;case"uwp":a.setApiAsync(pxt.winrt.workspace.fileApiAsync),l=pxt.winrt.workspace.getProvider(a.provider);break;case"idb":l=p.provider;break;case"cloud":case"browser":default:l=o.provider}},n.getHeaders=b,n.makeBackupAsync=function(e,t){var n=D.flatClone(e);return n.id=D.guidGen(),delete n._rev,delete n._id,n.isBackup=!0,q(n,t).then(function(){return e.backupRef=n.id,B(n)}).then(function(){return n})},n.restoreFromBackupAsync=function(t){if(!t.backupRef||t.isDeleted)return Promise.resolve();var n=t.backupRef;return M(n).then(function(e){return delete t.backupRef,B(t,e)}).then(function(){var e=_(n);return e.isDeleted=!0,B(e)}).catch(function(){return delete t.backupRef,B(t)})},n.getHeader=_;var w="";function E(){return pxt.storage.getLocal("workspacesessionid")!=w}function k(){return E()?ce().then(function(){}):Promise.resolve()}function x(){w=g.length+" "+g.map(function(e){return e.header.modificationTime}).reduce(function(e,t){return Math.max(e,t)},0).toString(),E()&&(pxt.storage.setLocal("workspacesessionid",w),pxt.debug("workspace: refreshed headers session to "+w),I.invalidate("header:*"),I.invalidate("text:*"))}n.isHeadersSessionOutdated=E;var S=pxt.Util.guidGen();function C(e){e&&pxt.storage.removeLocal("workspaceheadersessionid:"+e.id)}function T(e){if(!e)return!1;var t=pxt.storage.getLocal("workspaceheadersessionid:"+e.id);return t&&t!=S}function A(e){T(e)&&(pxt.tickEvent("workspace.conflict.header"),c.errorNotification(lf("This project is already opened elsewhere.")),pxt.Util.assert(!1,"trying to access outdated session"))}function M(e){return k().then(function(){var t=v(e);return t?t.text?Promise.resolve(t.text):m.enqueue(e,function(){return l.getAsync(t.header).then(function(e){return t.text||(t.text=G(e.text)),t.version=e.version,t.text})}):Promise.resolve(null)})}function O(t){return void 0!==t.version?Promise.resolve():l.getAsync(t.header).then(function(e){t.version=e.version})}function B(e,t,n){return C(e),F(e,t,n)}function F(i,o,a){var e=this;if(pxt.debug("workspace: save "+i.id),i.isDeleted&&C(i),A(i),D.assert(i.target==pxt.appTarget.id),i.temporary)return Promise.resolve();var s=v(i.id);if(a||(i.recentUse=D.nowSeconds()),(o||i.isDeleted)&&(o&&(s.text=o),a||(i.pubCurrent=!1,i.blobCurrent=!1,i.modificationTime=D.nowSeconds(),i.targetVersion=i.targetVersion||"0.0.0"),i.saveId=null),i.isDeleted&&"DELETED"==i.blobVersion){var t=g.indexOf(s);return D.assert(0<=t),g.splice(t,1),m.enqueue(i.id,function(){return O(s).then(function(){return l.deleteAsync?l.deleteAsync(i,s.version):l.setAsync(i,s.version,{})})}).finally(function(){return x()})}if(o&&pxt.appTarget.simulator&&pxt.appTarget.simulator.dynamicBoardDefinition){var n=pxt.Package.parseAndValidConfig(o[pxt.CONFIG_NAME]);n&&n.dependencies&&(i.board=Object.keys(n.dependencies).filter(function(e){return!!pxt.bundledSvg(e)})[0])}return m.enqueue(i.id,function(){return P(e,void 0,void 0,function(){var t,n,r;return N(this,function(e){switch(e.label){case 0:return[4,O(s)];case 1:e.sent(),n=o?s.text:null,e.label=2;case 2:return e.trys.push([2,4,,7]),[4,l.setAsync(i,s.version,n)];case 3:return t=e.sent(),[3,7];case 4:return r=e.sent(),[4,y("write failed")];case 5:return e.sent(),[4,l.setAsync(i,r.version,n)];case 6:return t=e.sent(),[3,7];case 7:return o&&(s.version=t),(o&&!a||i.isDeleted)&&(i.pubCurrent=!1,i.blobCurrent=!1,i.saveId=null,I.invalidate("text:"+i.id),I.invalidate("pkg-git-status:"+i.id)),x(),[2]}})})})}function q(e,t,n){void 0===n&&(n=!1),e.path=function(e){var t=e.name.replace(/[^a-zA-Z0-9]+/g," ").trim().replace(/ /g,"-");if(t||(t="Untitled"),v(t)){for(var n=2;v(t+"-"+n);)n++;t+="-"+n}return t}(e);var r={header:e,text:t,version:null};return g.push(r),B(e,t,n)}function U(e,t){D.assert(e.target==pxt.appTarget.id);var n=e;n.id=ts.pxtc.Util.guidGen(),n.recentUse=D.nowSeconds(),n.modificationTime=n.recentUse;var r=pxt.Package.parseAndValidConfig(t[pxt.CONFIG_NAME]);return r&&r.preferredEditor&&(n.editor=r.preferredEditor,pxt.shell.setEditorLanguagePref(r.preferredEditor)),pxt.github.cacheProjectDependenciesAsync(r).then(function(){return q(n,t)}).then(function(){return n})}function H(e){for(var t=-1<e.name.indexOf("#")?e.name.substring(0,e.name.lastIndexOf("#")).trim():e.name,n=D.toDictionary(g.filter(function(e){return!e.header.isDeleted}),function(e){return e.header.name}),r=2;n.hasOwnProperty(t+" #"+r);)r++;return t+" #"+r}function G(t){return t&&["kind.json","yelm.json"].forEach(function(e){!t[pxt.CONFIG_NAME]&&t[e]&&(t[pxt.CONFIG_NAME]=t[e],delete t[e])}),t}n.acquireHeaderSession=function(e){e&&pxt.storage.setLocal("workspaceheadersessionid:"+e.id,S)},n.isHeaderSessionOutdated=T,n.initAsync=function(){return l||(l=o.provider),ce().then(function(e){return(t=g.map(function(e){return e.header}),n={},t.filter(function(e){return e.backupRef}).forEach(function(e){return n[e.backupRef]=!0}),Promise.all(t.filter(function(e){return e.isBackup&&!n[e.id]}).map(function(e){return e.isDeleted=!0,B(e)}))).then(function(){return e});var t,n}).then(function(e){return pxt.perf.recordMilestone("workspace init finished"),e})},n.getTextAsync=M,n.anonymousPublishAsync=function(t,e,n,r){A(t);var i,o,a={};if(t.saveId=a,r){var s=/^data:(image\/(png|gif));base64,([a-zA-Z0-9+\/]+=*)$/.exec(r);s&&(i=s[3],o=s[1])}var l=JSON.stringify(e,null,2)+"\n",c={name:t.name,target:t.target,targetVersion:t.targetVersion,description:n.description||lf("Made with ❤️ in {0}.",pxt.appTarget.title||pxt.appTarget.name),editor:t.editor,text:e,meta:{versions:pxt.appTarget.versions,blocksHeight:n.blocksHeight,blocksWidth:n.blocksWidth},thumbnailBuffer:i,thumbnailMimeType:o};return pxt.debug("publishing script; "+l.length+" bytes"),d.privatePostAsync("scripts",c,!0).then(function(e){return e.shortid&&(e.id=e.shortid),t.pubId=e.shortid,t.pubCurrent=t.saveId===a,t.meta=e.meta,pxt.debug("published; id /"+t.pubId),F(t).then(function(){return e})})},n.forceSaveAsync=B,n.saveAsync=F,n.importAsync=q,n.installAsync=U,n.renameAsync=function(e,t){return A(e),L.renameAsync(e,t)},n.duplicateAsync=function(e,t,n){n||(n=H(e));var r=v(e.id);D.assert(r.header===e);var i=D.flatClone(e);r.header=i;var o=D.flatClone(t);e.id=D.guidGen(),e.name=n;var a=JSON.parse(t[pxt.CONFIG_NAME]);return a.name=e.name,o[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(a),delete e._rev,delete e._id,delete e.githubCurrent,delete e.githubId,delete e.githubTag,q(e,o).then(function(){return e})},n.createDuplicateName=H,n.saveScreenshotAsync=function(e,t,n){return A(e),l.saveScreenshotAsync?l.saveScreenshotAsync(e,t,n):Promise.resolve()},n.fixupFileNames=G;var z,W,V=new D.PromiseQueue,K=new i.Table("script");function $(i){return P(this,void 0,void 0,function(){var n,r,t=this;return N(this,function(e){switch(e.label){case 0:return pxt.github.isGithubId(i)&&(i=pxt.github.normalizeRepoId(i)),[4,pxt.packagesConfigAsync()];case 1:return n=e.sent(),r=encodeURIComponent(pxt.github.upgradedPackageId(n,i)),[4,V.enqueue(r,function(){return P(t,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,8]),[4,K.getAsync(r)];case 1:return t=e.sent().files,[3,8];case 2:return e.sent(),pxt.github.isGithubId(i)?[4,pxt.github.downloadPackageAsync(i,n)]:[3,4];case 3:return t=e.sent().files,[3,6];case 4:return[4,d.downloadScriptFilesAsync(i).catch(c.handleNetworkError)];case 5:t=e.sent(),e.label=6;case 6:return[4,K.setAsync({id:r,files:t})];case 7:return e.sent(),[3,8];case 8:return[2,G(t)]}})})})];case 2:return[2,e.sent()]}})})}n.getPublishedScriptAsync=$,(W=z=n.PullStatus||(n.PullStatus={}))[W.NoSourceControl=0]="NoSourceControl",W[W.UpToDate=1]="UpToDate",W[W.GotChanges=2]="GotChanges",W[W.NeedsCommit=3]="NeedsCommit",W[W.BranchNotFound=4]="BranchNotFound";var Y=pxt.github.GIT_JSON;function J(c,u){return void 0===u&&(u=!1),P(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l;return N(this,function(e){switch(e.label){case 0:return[4,M(c.id)];case 1:return t=e.sent(),[4,ae(c,t)];case 2:return e.sent(),(n=t[Y])?(r=JSON.parse(n),i=pxt.github.parseRepoId(r.repo),o=i.tag,[4,pxt.github.getRefAsync(i.fullName,o)]):[2,z.NoSourceControl];case 3:return(a=e.sent())?[3,5]:[4,pxt.github.listRefsAsync(i.fullName,"heads")];case 4:return(s=e.sent())&&s.length?[2,z.BranchNotFound]:[2,z.NoSourceControl];case 5:if(a==r.commit.sha)return[2,z.UpToDate];e.label=6;case 6:if(u)return[2,z.GotChanges];e.label=7;case 7:return e.trys.push([7,9,,10]),[4,oe(c,{repo:r.repo,sha:a,files:t,tryDiff3:!0})];case 8:return e.sent(),[2,z.GotChanges];case 9:if((l=e.sent()).isMergeError)return[2,z.NeedsCommit];throw l;case 10:return[2]}})})}function X(e){var t=pxt.semver.parse(e.version,"0.0.0");return t.patch++,pxt.semver.stringify(t)}n.hasPullAsync=function(t){return P(this,void 0,void 0,function(){return N(this,function(e){switch(e.label){case 0:return[4,J(t,!0)];case 1:return[2,e.sent()==z.GotChanges]}})})},n.pullAsync=J,n.revertAllAsync=function(p){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,c,u,f;return N(this,function(e){switch(e.label){case 0:return[4,M(p.id)];case 1:if(t=e.sent(),!(n=t[Y]))return[2,z.NoSourceControl];if(r=JSON.parse(n),i=r.commit,o=pxt.github.lookupFile(i,pxt.CONFIG_NAME),!(a=pxt.Package.parseAndValidConfig(o&&o.blobContent)))return[2,z.NoSourceControl];for((s={})[Y]=n,s[pxt.CONFIG_NAME]=o.blobContent,l=0,c=a.files.concat(a.testFiles);l<c.length;l++){if(u=c[l],!(f=pxt.github.lookupFile(i,u))||void 0===f.blobContent)return pxt.log("cannot revert "+u+", corrupted based commit"),[2,z.NoSourceControl];s[u]=f.blobContent}return[4,B(p,s)];case 2:return e.sent(),[2,z.UpToDate]}})})},n.hasMergeConflictMarkersAsync=function(n){return P(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return[4,M(n.id)];case 1:return t=e.sent(),[2,!!Object.keys(t).find(function(e){return pxt.diff.hasMergeConflictMarker(t[e])})]}})})},n.prAsync=function(o,a,s){return P(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(e){switch(e.label){case 0:return t=pxt.github.parseRepoId(o.githubId),[4,pxt.github.getNewBranchNameAsync(t.fullName,"merge-")];case 1:return n=e.sent(),[4,pxt.github.createNewBranchAsync(t.fullName,n,a)];case 2:return e.sent(),[4,pxt.github.createPRFromBranchAsync(t.fullName,t.tag,n,s)];case 3:return r=e.sent(),[4,pxt.github.getRefAsync(t.fullName,t.tag)];case 4:return i=e.sent(),[4,oe(o,{repo:o.githubId,sha:i,files:{}})];case 5:return e.sent(),[2,r]}})})},n.bumpedVersion=X,n.bumpAsync=function(r,i){return void 0===i&&(i=""),P(this,void 0,void 0,function(){var t,n;return N(this,function(e){switch(e.label){case 0:return A(r),[4,M(r.id)];case 1:return t=e.sent(),(n=pxt.Package.parseAndValidConfig(t[pxt.CONFIG_NAME])).version=i||X(n),t[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(n),[4,F(r,t)];case 2:return e.sent(),[4,re(r,{message:n.version,createRelease:"v"+n.version,binaryJs:!0})];case 3:return[2,e.sent()]}})})};var Q,Z=".github/makecode/blocks.png",ee=".github/makecode/blocksdiff.png",te="assets/js/binary.js",ne="assets/version.txt";function re(A,O){return void 0===O&&(O={}),P(this,void 0,void 0,function(){function t(s,l){return P(this,void 0,void 0,function(){var n,r,i,o,a;return N(this,function(e){switch(e.label){case 0:if(n={content:l,encoding:"utf-8"},s==pxt.CONFIG_NAME&&(n.content=se(n.content,!!O.createRelease)),(r=/^data:([^;]+);base64,/.exec(l))&&(n.encoding="base64",n.content=l.substr(r[0].length)),i=j(n.content,n.encoding),(o=pxt.github.lookupFile(c.commit,s))&&o.sha==i)return[3,2];if("utf-8"==n.encoding&&pxt.diff.hasMergeConflictMarker(n.content))throw(t=new Error("Merge conflict marker error")).isMergeConflictMarkerError=!0,t;return[4,pxt.github.createObjectAsync(u.fullName,"blob",n)];case 1:a=e.sent(),"utf-8"==n.encoding&&D.assert(a==i,"sha not matching "+a+" != "+i),f.tree.push({path:s,mode:"100644",type:"blob",sha:a,url:void 0}),e.label=2;case 2:return[2,a]}var t})})}var n,r,c,u,i,f,o,a,s,l,p,d,h,g,m,v,y,b,_,w,E,k,x,S,C,T;return N(this,function(e){switch(e.label){case 0:return[4,L.ensureGitHubTokenAsync()];case 1:return e.sent(),[4,M(A.id)];case 2:n=e.sent(),(r=n[Y])||D.userError(lf("Not a git extension.")),c=JSON.parse(r),u=pxt.github.parseRepoId(c.repo),i=pxt.Package.parseAndValidConfig(n[pxt.CONFIG_NAME]),f={base_tree:c.commit.tree.sha,tree:[]},o=O.filenamesToCommit||pxt.allPkgFiles(i),a=[Y,pxt.SIMSTATE_JSON,pxt.SERIAL_EDITOR_FILE],s=0,l=o.filter(function(e){return a.indexOf(e)<0}),e.label=3;case 3:return s<l.length?(p=l[s],d=n[p],[4,t(p,d)]):[3,6];case 4:e.sent(),e.label=5;case 5:return s++,[3,3];case 6:return 0==f.tree.length&&D.userError(lf("Nothing to commit!")),O&&f.tree.find(function(e){return"main.blocks"==e.path})?O.blocksScreenshotAsync?[4,O.blocksScreenshotAsync()]:[3,9]:[3,12];case 7:return(g=e.sent())?[4,t(Z,g)]:[3,9];case 8:e.sent(),e.label=9;case 9:return O.blocksDiffScreenshotAsync?[4,O.blocksDiffScreenshotAsync()]:[3,12];case 10:return(g=e.sent())?[4,t(ee,g)]:[3,12];case 11:h=e.sent(),e.label=12;case 12:return!pxt.appTarget.appTheme.githubCompiledJs||!O.binaryJs||u.tag&&"master"!=u.tag?[3,19]:(m=i.version||"0.0.0",v={jsMetaVersion:m},[4,R.compileAsync(v)]);case 13:return(y=e.sent())&&y.success&&y.outfiles[pxtc.BINARY_JS]?[4,t(te,y.outfiles[pxtc.BINARY_JS])]:[3,19];case 14:return e.sent(),[4,t(ne,m)];case 15:if(e.sent(),i.disableTargetTemplateFiles)return[3,19];if(!(b=pxt.template.targetTemplateFiles()))return[3,19];_=0,w=Object.keys(b),e.label=16;case 16:return _<w.length?[4,t(E=w[_],b[E])]:[3,19];case 17:e.sent(),e.label=18;case 18:return _++,[3,16];case 19:return[4,pxt.github.createObjectAsync(u.fullName,"tree",f)];case 20:return k=e.sent(),x={message:O.message||lf("Update {0}",f.tree.map(function(e){return e.path}).filter(function(e){return!/\.github\/makecode\//.test(e)}).join(", ")),parents:[c.commit.sha],tree:k},c.mergeSha&&x.parents.push(c.mergeSha),[4,pxt.github.createObjectAsync(u.fullName,"commit",x)];case 21:return S=e.sent(),[4,pxt.github.fastForwardAsync(u.fullName,u.tag,S)];case 22:return C=e.sent(),T=S,C?[3,24]:[4,pxt.github.mergeAsync(u.fullName,u.tag,S)];case 23:T=e.sent(),e.label=24;case 24:return null!=T?[3,25]:[2,S];case 25:return I.invalidate("gh-commits:*"),h?[4,pxt.github.postCommitComment(u.fullName,S,"!["+lf("Difference between blocks")+"](https://raw.githubusercontent.com/"+u.fullName+"/"+S+"/"+ee+")")]:[3,27];case 26:e.sent(),e.label=27;case 27:return[4,oe(A,{repo:c.repo,sha:T,files:n,saveTag:O.createRelease})];case 28:return e.sent(),O.createRelease?[4,pxt.github.createReleaseAsync(u.fullName,O.createRelease,T)]:[3,32];case 29:return e.sent(),[4,pxt.github.enablePagesAsync(u.fullName)];case 30:return e.sent(),[4,pxt.github.listRefsAsync(u.fullName,"tags",!0,!0)];case 31:e.sent(),e.label=32;case 32:return[2,""];case 33:return[2]}})})}function ie(){var e=new Error("Merge error");return e.isMergeError=!0,e}function oe(x,S){var C;return P(this,void 0,void 0,function(){var t,s,l,c,u,f,p,d,h,g,n,r,i,o,a,m,v,y,b,_,w,E,k=this;return N(this,function(e){switch(e.label){case 0:return t=S.repo,s=S.sha,l=S.files,c=S.justJSON,u=pxt.github.parseRepoId(t),[4,pxt.github.getCommitAsync(u.fullName,s)];case 1:return f=e.sent(),(p=JSON.parse(l[Y]||"{}")).commit||(p={repo:t,commit:null}),h=0,g=!(d={}),n=function(a){return P(k,void 0,void 0,function(){var t,n,r,i,o;return N(this,function(e){switch(e.label){case 0:return d[a]=!0,t=pxt.github.lookupFile(f,a),n=pxt.github.lookupFile(p.commit,a),r=null!=l[a]&&(!n||n.blobContent!=l[a]),t?null!=(i=n?n.blobContent:l[a])&&j(i)==t.sha?(t.blobContent=i,S.tryDiff3||S.justJSON||(l[a]=i),[2,i]):[4,pxt.github.downloadTextAsync(u.fullName,s,a)]:S.tryDiff3&&r?[2,l[a]]:(c||(l[a]=""),[2,""]);case 1:if(i=e.sent(),j(t.blobContent=i)!=t.sha&&D.userError(lf("Corrupt SHA1 on download of '{0}'.",a)),S.tryDiff3&&r)if(a==pxt.CONFIG_NAME){if(!(i=pxt.diff.mergeDiff3Config(l[a],n.blobContent,t.blobContent)))throw ie()}else if(/\.blocks$/.test(a))o=pxt.blocks.mergeXml(l[a],n.blobContent,t.blobContent),g=g||!o,i=o||"";else if(a==te||a==ne||a==pxt.TUTORIAL_INFO_FILE||a==pxt.ASSETS_FILE)i=l[a];else{if(!(o=pxt.diff.diff3(l[a],n.blobContent,t.blobContent,lf("local changes"),lf("remote changes (pulled from Github)"))))throw ie();if(h+=o.numConflicts,o.numConflicts&&!/\.ts$/.test(a))throw ie();i=o.merged}return c||(l[a]=i),[2,i]}})})},r=pxt.Package.parseAndValidConfig(l[pxt.CONFIG_NAME]),[4,n(pxt.CONFIG_NAME)];case 2:i=e.sent(),(o=pxt.Package.parseAndValidConfig(i))||(x&&D.userError(lf("Invalid pxt.json file.")),pxt.debug("github: reconstructing pxt.json"),o=pxt.diff.reconstructConfig(l,f,pxt.appTarget.blocksprj||pxt.appTarget.tsprj),l[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(o)),r&&(a=0,Object.keys(o.dependencies).filter(function(e){return/^github:/.test(o.dependencies[e])&&r.dependencies[e]}).forEach(function(e){if(pxt.github.parseRepoId(o.dependencies[e])){var t=r.dependencies[e];o.dependencies[e]=t,a++}}),a&&(l[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(o))),m=0,v=pxt.allPkgFiles(o).slice(1),e.label=3;case 3:return m<v.length?(y=v[m],[4,n(y)]):[3,6];case 4:e.sent(),e.label=5;case 5:return m++,[3,3];case 6:if(o.name||(o.name=(u.project||u.fullName).replace(/[^\w\-]/g,""),c||(l[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(o))),!c){if(g&&h)throw ie();for(b=0,_=Object.keys(l);b<_.length;b++)"."==(w=_[b])[0]||d[w]||delete l[w]}return f.tag=S.saveTag,p.mergeSha=void 0,p.commit=f,l[Y]=JSON.stringify(p,null,4),E=(null===(C=o.targetVersions)||void 0===C?void 0:C.targetId)===pxt.appTarget.id&&o.targetVersions.target?o.targetVersions.target:pxt.appTarget.versions.target,x?[3,8]:[4,U({name:o.name,githubId:t,pubId:"",pubCurrent:!1,meta:{},editor:pxt.BLOCKS_PROJECT_NAME,target:pxt.appTarget.id,targetVersion:E},l)];case 7:return x=e.sent(),[3,10];case 8:return x.name=o.name,[4,B(x,l)];case 9:e.sent(),e.label=10;case 10:return[2,x]}})})}function ae(d,h){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,c,u,f,p;return N(this,function(e){switch(e.label){case 0:if(A(d),d.githubCurrent=!1,t=JSON.parse(h[Y]||"{}"),d.githubId=t&&t.repo,d.githubTag=t&&t.commit&&t.commit.tag,!d.githubId)return[2];if(!t.commit||!t.commit.tree)return[2];for(r=!(n=!0),i=0,o=Object.keys(h);i<o.length;i++)(a=o[i])!=Y&&a!=pxt.SIMSTATE_JSON&&a!=pxt.SERIAL_EDITOR_FILE&&((s=pxt.github.lookupFile(t.commit,a))&&"blob"==s.type?(null==s.blobContent&&(r=!0),l=h[a],a==pxt.CONFIG_NAME&&(l=se(l)),l&&s.sha!=j(l)&&(n=!1)):n=!1);return d.githubCurrent=n,r?[4,oe(d,{repo:t.repo,sha:t.commit.sha,files:h,justJSON:!0})]:[3,2];case 1:e.sent(),e.label=2;case 2:return null!=t.isFork?[3,5]:(c=pxt.github.parseRepoId(t.repo),[4,pxt.github.repoAsync(c.fullName,null)]);case 3:return(u=e.sent())?(t.isFork=!!u.fork,h[Y]=JSON.stringify(t,null,4),[4,F(d,h)]):[3,5];case 4:e.sent(),e.label=5;case 5:return(f=pxt.github.parseRepoId(d.githubId)).project&&/^pxt-/.test(f.project)?(p=f.project.replace(/^pxt-/,"").replace(/-+/g," "))==d.name?[3,7]:(pxt.Package.parseAndValidConfig(h[pxt.CONFIG_NAME]).name=p,d.name=p,[4,F(d,h)]):[3,7];case 6:e.sent(),e.label=7;case 7:return[2]}})})}function se(e,o){var a=pxt.Package.parseAndValidConfig(e);if(!a)return e;delete a.installedVersion,delete a.additionalFilePath,delete a.additionalFilePaths;var t=a.supportedTargets||[];t.indexOf(pxt.appTarget.id)<0&&(t.push(pxt.appTarget.id),t.sort(),a.supportedTargets=t),a.targetVersions=s(s({},a.targetVersions),{target:pxt.appTarget.versions.target,targetId:pxt.appTarget.id});for(var n=0,r=Object.keys(a.dependencies).filter(function(e){return/^(file|workspace):/.test(a.dependencies[e])});n<r.length;n++)i(r[n]);return pxt.Package.stringifyConfig(a);function i(e){var t=a.dependencies[e],n=_(t.substring(t.indexOf(":")+1));if(n)if(n.githubId){var r=pxt.github.parseRepoId(n.githubId);o&&!/^v\d+/.test(n.githubTag)&&D.userError(lf("You need to create a release for dependency {0}.",e));var i=n.githubTag||r.tag;a.dependencies[e]="github:"+r.fullName+"#"+i}else o&&D.userError(lf("Dependency {0} is a local project.",e))}}function le(d,h,g,m){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,c,u,f,p;return N(this,function(e){switch(e.label){case 0:return[4,L.ensureGitHubTokenAsync()];case 1:return e.sent(),t=pxt.github.parseRepoId(h),n=t.fullName.replace(/.*\//,""),[4,M(d.id)];case 2:return r=e.sent(),i=pxt.template.packageFiles(n),pxt.template.packageFilesFixup(i,{repo:t.fullName,repoowner:t.owner,reponame:t.project,repotag:t.tag}),g?D.jsonMergeFrom(r,i):(pxt.Package.parseAndValidConfig(r[pxt.CONFIG_NAME])||delete r[pxt.CONFIG_NAME],o=i[pxt.README_FILE],a=r[pxt.README_FILE],(o||a)&&(o=[a,o].filter(function(e){return!!e}).join("\n\n")),D.jsonMergeFrom(i,r),r=i,o&&(r[pxt.README_FILE]=o)),s=pxt.Package.parseAndValidConfig(r[pxt.CONFIG_NAME]),(l=s.files).filter(function(e){return/\.ts$/.test(e)}).length||Object.keys(r).filter(function(e){return/\.(blocks|ts|py|asm|md|json)$/.test(e)}).filter(function(e){return e!=pxt.CONFIG_NAME}).forEach(function(e){return l.push(e)}),c=s.testFiles||(s.testFiles=[]),r["test.ts"]&&c.indexOf("test.ts")<0&&c.push("test.ts"),r[pxt.CONFIG_NAME]=pxt.Package.stringifyConfig(s),[4,B(d,r)];case 3:return e.sent(),[4,re(d,{message:lf("Initial files for MakeCode project"),filenamesToCommit:Object.keys(r),binaryJs:m})];case 4:return e.sent(),[4,M(d.id)];case 5:return r=e.sent(),u=pxt.allPkgFiles(pxt.Package.parseAndValidConfig(r[pxt.CONFIG_NAME])),f=[Y,pxt.SIMSTATE_JSON,pxt.SERIAL_EDITOR_FILE,pxt.CONFIG_NAME],Object.keys(r).filter(function(e){return f.indexOf(e)<0&&u.indexOf(e)<0}).forEach(function(e){return delete r[e]}),[4,F(d,r)];case 6:e.sent(),e.label=7;case 7:return e.trys.push([7,9,,10]),[4,pxt.github.enablePagesAsync(t.fullName)];case 8:return e.sent(),[3,10];case 9:return p=e.sent(),pxt.reportException(p),[3,10];case 10:return[2,d]}})})}function ce(){return pxt.debug("workspace: sync"),Q||(Q=l.listAsync().catch(function(e){return y("sync failed").then(function(){return l.listAsync()})}).then(function(e){var n=D.toDictionary(g||[],function(e){return e.header.id});g=e.map(function(e){var t=n[e.id];return t?JSON.stringify(t.header)!==JSON.stringify(e)&&(D.jsonCopyFrom(t.header,e),t.text=void 0,t.version=void 0,I.invalidateHeader("header",e),I.invalidateHeader("text",e),I.invalidateHeader("pkg-git-status",e),I.invalidate("gh-commits:*")):t={header:e,text:void 0,version:void 0},t}),L.syncAsync().done()}).then(function(){return x(),l.getSyncState?l.getSyncState():null}).finally(function(){Q=void 0}))}function ue(){return l===o.provider}n.commitAsync=re,n.restoreCommitAsync=function(l,c){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return N(this,function(e){switch(e.label){case 0:return[4,L.ensureGitHubTokenAsync()];case 1:return e.sent(),[4,M(l.id)];case 2:return t=e.sent(),n=t[Y],r=JSON.parse(n),i=pxt.github.parseRepoId(r.repo),o=new Date(Date.parse(c.committer.date)),a={message:lf("Restore '{0} {1}'",o.toLocaleString(),c.message),parents:[r.commit.sha],tree:c.tree.sha},[4,pxt.github.createObjectAsync(i.fullName,"commit",a)];case 3:return s=e.sent(),[4,pxt.github.fastForwardAsync(i.fullName,i.tag,s)];case 4:return e.sent(),[4,oe(l,{repo:r.repo,sha:s,files:t})];case 5:return e.sent(),[2]}})})},n.mergeUpstreamAsync=function(e,t){return P(this,void 0,void 0,function(){return N(this,function(e){return[2,Promise.resolve()]})})},n.exportToGithubAsync=function(c,u){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l;return N(this,function(e){switch(e.label){case 0:return t=pxt.github.parseRepoId(u),n=pxt.template.packageFiles(c.name),[4,pxt.github.putFileAsync(t.fullName,".gitignore",n[".gitignore"])];case 1:return e.sent(),[4,pxt.github.getRefAsync(t.fullName,t.tag)];case 2:return r=e.sent(),[4,pxt.github.getCommitAsync(t.fullName,r)];case 3:return i=e.sent(),[4,M(c.id)];case 4:return(o=e.sent())[Y]=JSON.stringify({repo:u,commit:i}),(a=o["main.blocks"])&&(s=pxt.blocks.loadWorkspaceXml(a,!0))&&(l=pxt.blocks.saveWorkspaceXml(s,!0))&&(o["main.blocks"]=l),[4,B(c,o)];case 5:return e.sent(),[4,le(c,u,!1,!0)];case 6:return e.sent(),[2]}})})},n.recomputeHeaderFlagsAsync=ae,n.prepareConfigForGithub=se,n.initializeGithubRepoAsync=le,n.importGithubAsync=function(l){return P(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return N(this,function(e){switch(e.label){case 0:t=pxt.github.normalizeRepoId(l).replace(/^github:/,""),n=pxt.github.parseRepoId(t),r="",o=i=!1,e.label=1;case 1:return e.trys.push([1,6,,12]),[4,pxt.github.getRefAsync(n.fullName,n.tag)];case 2:return r=e.sent(),[4,pxt.github.getCommitAsync(n.fullName,r)];case 3:return e.sent().tree.tree.find(function(e){return e.path==pxt.CONFIG_NAME})?[3,5]:(pxt.debug("github: detected import non-makecode project"),pxt.shell.isReadOnly()&&D.userError(lf("This repository looks empty.")),o=!(i=!0),[4,c.confirmAsync({header:lf("Initialize GitHub repository for MakeCode?"),body:lf("We need to add a few files to your GitHub repository to make it work with MakeCode."),agreeLbl:lf("Ok"),hasCloseIcon:!0,helpUrl:"/github/import"})]);case 4:if(!e.sent())return[2,Promise.resolve(void 0)];e.label=5;case 5:return[3,12];case 6:return 409!=(a=e.sent()).statusCode?[3,10]:(pxt.debug("github: detected import empty project"),pxt.shell.isReadOnly()&&D.userError(lf("This repository looks empty.")),[4,L.ensureGitHubTokenAsync()]);case 7:return e.sent(),[4,pxt.github.putFileAsync(n.fullName,".gitignore","# Initial\n")];case 8:return e.sent(),o=i=!0,[4,pxt.github.getRefAsync(n.fullName,n.tag)];case 9:return r=e.sent(),[3,11];case 10:404==a.statusCode&&(c.errorNotification(lf("Sorry, that repository looks invalid.")),D.userError(lf("No such repository or branch."))),e.label=11;case 11:return[3,12];case 12:return[4,oe(null,{repo:t,sha:r,files:{}})];case 13:return(s=e.sent())&&i?[4,le(s,t,o,!1)]:[3,15];case 14:e.sent(),e.label=15;case 15:return[2,s]}})})},n.downloadFilesByIdAsync=function(e){return d.privateGetAsync(e,!0).then(function(e){return $(e.id)})},n.installByIdAsync=function(n){return d.privateGetAsync(n,!0).then(function(t){return $(t.id).then(function(e){return U({name:t.name,pubId:n,pubCurrent:!0,meta:t.meta,editor:t.editor,target:t.target,targetVersion:t.targetVersion||t.meta&&t.meta.versions&&t.meta.versions.target},e)})})},n.saveToCloudAsync=function(e){return A(e),L.saveToCloudAsync(e)},n.resetCloudAsync=function(){return ce().catch(function(e){}).then(function(){return L.resetAsync()}).then(function(){return Promise.all(g.map(function(e){return e.header}).filter(function(e){return e.cloudSync||e.githubId}).map(function(e){return e.isDeleted=!0,e.blobVersion="DELETED",B(e,null,!0)}))}).then(function(){return ce()}).then(function(){})},n.syncAsync=ce,n.resetAsync=function(){return g=[],l.resetAsync().then(L.resetAsync).then(i.destroyAsync).then(pxt.BrowserUtils.clearTranslationDbAsync).then(pxt.BrowserUtils.clearTutorialInfoDbAsync).then(R.clearApiInfoDbAsync).then(function(){pxt.storage.clearLocal(),I.clearCache(),d.localToken&&pxt.storage.setLocal("local_token",d.localToken)}).then(function(){return ce()}).then(function(){})},n.loadedAsync=function(){return l.loadedAsync?l.loadedAsync():Promise.resolve()},n.saveAssetAsync=function(e,t,n){return l.saveAssetAsync?l.saveAssetAsync(e,t,n):Promise.reject(new Error(lf("Assets not supported here.")))},n.listAssetsAsync=function(e){return l.listAssetsAsync?l.listAssetsAsync(e):Promise.resolve([])},n.isBrowserWorkspace=ue,n.fireEvent=function(e){if(l.fireEvent)return l.fireEvent(e)},I.mountVirtualApi("header",{getSync:function(e){return"*"==(e=I.stripProtocol(e))?b():_(e)}}),I.mountVirtualApi("headers",{getAsync:function(e){e=I.stripProtocol(e);var n=b();return e?R.projectSearchAsync({term:e,headers:n}).then(function(e){return e}).then(function(e){var t=D.toDictionary(e||[],function(e){return e.id});return n.filter(function(e){return t[e.id]})}):Promise.resolve(n)},expirationTime:function(e){return 5e3},onInvalidated:function(){R.projectSearchClear()}}),I.mountVirtualApi("text",{getAsync:function(e){var t=/^[\w\-]+:([^\/]+)(\/(.*))?/.exec(e);return M(t[1]).then(function(e){return t[3]?e[t[3]]:e})}})},{"./browserworkspace":3,"./cloudsync":4,"./compiler":5,"./core":31,"./data":33,"./db":34,"./fileworkspace":36,"./idbworkspace":39,"./iframeworkspace":40,"./memoryworkspace":41,"crypto-js/sha1":66}],46:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],47:[function(e,t,n){function r(){return t.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.exports.default=t.exports,t.exports.__esModule=!0,r.apply(this,arguments)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},{}],48:[function(e,t,n){var r=e("./setPrototypeOf.js");t.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":52}],49:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],50:[function(e,t,n){var s=e("@babel/runtime/helpers/typeof").default;function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r},t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime/helpers/typeof":53}],51:[function(e,t,n){t.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i},t.exports.default=t.exports,t.exports.__esModule=!0},{}],52:[function(e,n,t){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n.exports.default=n.exports,n.exports.__esModule=!0,r(e,t)}n.exports=r,n.exports.default=n.exports,n.exports.__esModule=!0},{}],53:[function(e,t,n){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(e){return typeof e}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},{}],54:[function(e,t,n){"use strict";t.exports=function(r){return function(){var e=arguments.length;if(e){for(var t=[],n=-1;++n<e;)t[n]=arguments[n];return r.call(this,t)}return r.call(this,[])}}},{}],55:[function(E,k,e){(function(w){(function(){"use strict";var e=E("object-assign");function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return w.Buffer&&"function"==typeof w.Buffer.isBuffer?w.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var u=E("util/"),r=Object.prototype.hasOwnProperty,f=Array.prototype.slice,n="foo"===function(){}.name;function s(e){return Object.prototype.toString.call(e)}function l(e){return!a(e)&&"function"==typeof w.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var c=k.exports=t,i=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(u.isFunction(e)){if(n)return e.name;var t=e.toString().match(i);return t&&t[1]}}function d(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function h(e){if(n||!u.isFunction(e))return u.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,i){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function t(e,t){e||g(e,!0,t,"==",c.ok)}function m(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===o(e,t);if(u.isDate(e)&&u.isDate(t))return e.getTime()===t.getTime();if(u.isRegExp(e)&&u.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=v(e),o=v(t);if(i&&!o||!i&&o)return!1;if(i)return m(e=f.call(e),t=f.call(t),n);var a,s,l=_(e),c=_(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;0<=s;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;0<=s;s--)if(!m(e[a=l[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function v(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function y(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!e&&i&&!n;if((!e&&u.isError(i)&&o&&y(i,n)||a)&&g(i,n,"Got unwanted exception"+r),e&&i&&n&&!y(i,n)||!e&&i)throw i}c.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(h((t=this).actual),128)+" "+t.operator+" "+d(h(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=p(n),a=i.indexOf("\n"+o);if(0<=a){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},u.inherits(c.AssertionError,Error),c.fail=g,c.ok=t,c.equal=function(e,t,n){e!=t&&g(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){m(e,t,!1)||g(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){m(e,t,!0)||g(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){m(e,t,!1)&&g(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,r){m(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){b(!0,e,t,n)},c.doesNotThrow=function(e,t,n){b(!1,e,t,n)},c.ifError=function(e){if(e)throw e},c.strict=e(function e(t,n){t||g(t,!0,n,"==",e)},c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var _=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":153,"util/":58}],56:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],57:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],58:[function(p,e,P){(function(u,f){(function(){var s=/%[sdj%]/g;P.format=function(e){if(!k(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])w(a)||!c(a)?o+=" "+a:o+=" "+l(a);return o},P.deprecate=function(e,t){if(x(f.process))return function(){return P.deprecate(e,t).apply(this,arguments)};if(!0===u.noDeprecation)return e;var n=!1;return function(){if(!n){if(u.throwDeprecation)throw new Error(t);u.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function l(e,t){var n={seen:[],stylize:o};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&P._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),m(n,e,n.depth)}function i(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function o(e,t){return e}function m(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==P.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return k(e)||(e=m(t,e,r)),e}var i=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(k(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return E(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}(t,n);if(i)return i;var o,a=Object.keys(n),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return v(n);if(0===a.length){if(A(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(S(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return v(n)}var c,u,f,p,d="",h=!1,g=["{","}"];return b(n)&&(h=!0,g=["[","]"]),A(n)&&(d=" [Function"+(n.name?": "+n.name:"")+"]"),S(n)&&(d=" "+RegExp.prototype.toString.call(n)),C(n)&&(d=" "+Date.prototype.toUTCString.call(n)),T(n)&&(d=" "+v(n)),0!==a.length||h&&0!=n.length?r<0?S(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=h?function(t,n,r,i,e){for(var o=[],a=0,s=n.length;a<s;++a)O(n,String(a))?o.push(y(t,n,r,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(y(t,n,r,i,e,!0))}),o}(t,n,r,s,a):a.map(function(e){return y(t,n,r,s,e,h)}),t.seen.pop(),f=d,p=g,60<(u=c).reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?p[0]+(""===f?"":f+"\n ")+" "+u.join(",\n  ")+" "+p[1]:p[0]+f+" "+u.join(", ")+" "+p[1]):g[0]+d+g[1]}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?-1<(s=w(n)?m(e,l.value,null):m(e,l.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function b(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function w(e){return null===e}function E(e){return"number"==typeof e}function k(e){return"string"==typeof e}function x(e){return void 0===e}function S(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function C(e){return c(e)&&"[object Date]"===t(e)}function T(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function A(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}P.debuglog=function(t){if(x(e)&&(e=u.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=u.pid;r[t]=function(){var e=P.format.apply(P,arguments);console.error("%s %d: %s",t,n,e)}}else r[t]=function(){};return r[t]},(P.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},P.isArray=b,P.isBoolean=_,P.isNull=w,P.isNullOrUndefined=function(e){return null==e},P.isNumber=E,P.isString=k,P.isSymbol=function(e){return"symbol"==typeof e},P.isUndefined=x,P.isRegExp=S,P.isObject=c,P.isDate=C,P.isError=T,P.isFunction=A,P.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},P.isBuffer=p("./support/isBuffer");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}P.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),a[e.getMonth()],t].join(" ")),P.format.apply(P,arguments))},P.inherits=p("inherits"),P._extend=function(e,t){if(!t||!c(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,p("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":57,_process:178,inherits:56}],59:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=d(e),i=r[0],o=r[1],a=new p((c=i,u=o,3*(c+u)/4-u)),s=0,l=0<o?i-4:i;var c,u;for(n=0;n<l;n+=4)t=f[e.charCodeAt(n)]<<18|f[e.charCodeAt(n+1)]<<12|f[e.charCodeAt(n+2)]<<6|f[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=f[e.charCodeAt(n)]<<2|f[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=f[e.charCodeAt(n)]<<10|f[e.charCodeAt(n+1)]<<4|f[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(e,o,a<o+16383?a:o+16383));return 1===r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),i.join("")};for(var s=[],f=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],f[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s[(a=r)>>18&63]+s[a>>12&63]+s[a>>6&63]+s[63&a]);var a;return i.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],60:[function(e,n,r){(function(X,S,d){(function(){!function(e){if("object"==typeof r&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:void 0!==S?t=S:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){return function o(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof _dereq_&&_dereq_;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var u="function"==typeof _dereq_&&_dereq_,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";t.exports=function(e){var r=e._SomePromiseArray;function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){"use strict";var r;try{throw new Error}catch(e){r=e}var i=e("./schedule"),o=e("./queue"),a=e("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function l(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function c(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function u(e){this._normalQueue._pushOne(e),this._queueTick()}s.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(e,t){t?(X.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),X.exit(2)):this.throwLater(e)},s.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},s.prototype.invoke=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},s.prototype.settlePromises=function(e){this._trampolineEnabled?u.call(this,e):this._schedule(function(){e._settlePromises()})}):(s.prototype.invokeLater=l,s.prototype.invoke=c,s.prototype.settlePromises=u),s.prototype._drainQueue=function(e){for(;0<e.length();){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=s,t.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(o,a,s,l){var c=!1,n=function(e,t){this._reject(t)},u=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)},f=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},p=function(e,t){t.promiseRejectionQueued||this._reject(e)};o.prototype.bind=function(e){c||(c=!0,o.prototype._propagateFrom=l.propagateFromFunction(),o.prototype._boundValue=l.boundValueFunction());var t=s(e),n=new o(a);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(t),t instanceof o){var i={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:t};r._then(a,u,void 0,n,i),t._then(f,p,void 0,n,i),n._setOnCancel(t)}else n._resolveCallback(r);return n},o.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(i){var o=e("./util"),r=o.canEvaluate;function n(e){return function(e,t){var n;if(null!=e&&(n=e[t]),"function"!=typeof n){var r="Object "+o.classString(e)+" has no method '"+o.toString(t)+"'";throw new i.TypeError(r)}return n}(e,this.pop()).apply(e,this)}function a(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}o.isIdentifier,i.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},i.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(r){var n=(void 0)(e);t=null!==n?n:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(l,e,t){"use strict";e.exports=function(e,t,n,r){var i=l("./util"),o=i.tryCatch,a=i.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=o(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(f){var p=e("./util"),d=e("./es5").keys,h=p.tryCatch,g=p.errorObj;return function(l,c,u){return function(e){var t=u._boundValue();e:for(var n=0;n<l.length;++n){var r=l[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return h(c).call(t,e)}else if("function"==typeof r){var i=h(r).call(t,e);if(i===g)return i;if(i)return h(c).call(t,e)}else if(p.isObject(e)){for(var o=d(r),a=0;a<o.length;++a){var s=o[a];if(r[s]!=e[s])continue e}return h(c).call(t,e)}}return f}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(o){var a=!1,n=[];function s(){this._trace=new s.CapturedTrace(l())}function l(){var e=n.length-1;if(0<=e)return n[e]}return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},s.CapturedTrace=null,s.create=function(){if(a)return new s},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var e=o.prototype._pushContext,t=o.prototype._popContext,n=o._peekContext,r=o.prototype._peekContext,i=o.prototype._promiseCreated;s.deactivateLongStackTraces=function(){o.prototype._pushContext=e,o.prototype._popContext=t,o._peekContext=n,o.prototype._peekContext=r,o.prototype._promiseCreated=i,a=!1},a=!0,o.prototype._pushContext=s.prototype._pushContext,o.prototype._popContext=s.prototype._popContext,o._peekContext=o.prototype._peekContext=l,o.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},s}},{}],9:[function(J,e,t){"use strict";e.exports=function(a,n){var r,i,o,s=a._getDomain,l=a._async,c=J("./errors").Warning,u=J("./util"),f=u.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,d=null,m=null,v=!1,e=!(0==u.env("BLUEBIRD_DEBUG")),t=!(0==u.env("BLUEBIRD_WARNINGS")||!e&&!u.env("BLUEBIRD_WARNINGS")),y=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!e&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(t||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},a.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},a.prototype._notifyUnhandledRejectionIsHandled=function(){U("rejectionHandled",r,void 0,this)},a.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),U("unhandledRejection",i,e,this)}},a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},a.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},a.prototype._warn=function(e,t,n){return M(e,t,n||this)},a.onPossiblyUnhandledRejection=function(e){var t=s();i="function"==typeof e?null===t?e:u.domainBind(t,e):void 0},a.onUnhandledRejectionHandled=function(e){var t=s();r="function"==typeof e?null===t?e:u.domainBind(t,e):void 0};var _=function(){};a.longStackTraces=function(){if(l.haveItemsQueued()&&!Y.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Y.longStackTraces&&G()){var e=a.prototype._captureStackTrace,t=a.prototype._attachExtraTrace;Y.longStackTraces=!0,_=function(){if(l.haveItemsQueued()&&!Y.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");a.prototype._captureStackTrace=e,a.prototype._attachExtraTrace=t,n.deactivateLongStackTraces(),l.enableTrampoline(),Y.longStackTraces=!1},a.prototype._captureStackTrace=D,a.prototype._attachExtraTrace=j,n.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},a.hasLongStackTraces=function(){return Y.longStackTraces&&G()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!u.global.dispatchEvent(n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),u.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!u.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!u.global.dispatchEvent(n)})}catch(e){}return function(){return!1}}(),E=u.isNode?function(){return X.emit.apply(X,arguments)}:u.global?function(e){var t="on"+e.toLowerCase(),n=u.global[t];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function k(e,t){return{promise:t}}var x={promiseCreated:k,promiseFulfilled:k,promiseRejected:k,promiseResolved:k,promiseCancelled:k,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:k},S=function(e){var t=!1;try{t=E.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var n=!1;try{n=w(e,x[e].apply(null,arguments))}catch(e){l.throwLater(e),n=!0}return n||t};function C(){return!1}function T(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+u.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function A(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?u.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function O(){return this._onCancelField}function P(e){this._onCancelField=e}function N(){this._cancellationParent=void 0,this._onCancelField=void 0}function I(e,t){if(0!=(1&t)){var n=(this._cancellationParent=e)._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}a.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?a.longStackTraces():!e.longStackTraces&&a.hasLongStackTraces()&&_()),"warnings"in e){var t=e.warnings;Y.warnings=!!t,b=Y.warnings,u.isObject(t)&&"wForgottenReturn"in t&&(b=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Y.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=N,a.prototype._propagateFrom=I,a.prototype._onCancel=O,a.prototype._setOnCancel=P,a.prototype._attachCancellationCallback=A,a.prototype._execute=T,L=I,Y.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Y.monitoring?(Y.monitoring=!0,a.prototype._fireEvent=S):!e.monitoring&&Y.monitoring&&(Y.monitoring=!1,a.prototype._fireEvent=C)),a},a.prototype._fireEvent=C,a.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},a.prototype._onCancel=function(){},a.prototype._setOnCancel=function(e){},a.prototype._attachCancellationCallback=function(e){},a.prototype._captureStackTrace=function(){},a.prototype._attachExtraTrace=function(){},a.prototype._clearCancellationData=function(){},a.prototype._propagateFrom=function(e,t){};var L=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function R(){var e=this._boundTo;return void 0!==e&&e instanceof a?e.isFulfilled()?e.value():void 0:e}function D(){this._trace=new K(this._peekContext())}function j(e,t){if(f(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=F(e);u.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),u.notEnumerableProp(e,"__stackCleaned__",!0)}}}function M(e,t,n){if(Y.warnings){var r,i=new c(e);if(t)n._attachExtraTrace(i);else if(Y.longStackTraces&&(r=a._peekContext()))r.attachExtraTrace(i);else{var o=F(i);i.stack=o.message+"\n"+o.stack.join("\n")}S("warning",i)||q(i,"",!0)}}function B(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||d.test(r),o=i&&z(r);i&&!o&&(v&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function F(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||d.test(r))break}return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:B(t)}}function q(e,t,n){if("undefined"!=typeof console){var r;if(u.isObject(e)){var i=e.stack;r=t+m(i,e)}else r=t+String(e);"function"==typeof o?o(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function U(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){l.throwLater(e)}"unhandledRejection"===e?S(e,n,r)||i||q(n,"Unhandled rejection "):S(e,r)}function H(e){var t,n;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():u.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+((n=t).length<41?n:n.substr(0,38)+"...")+">, no stack trace)"}function G(){return"function"==typeof $}var z=function(){return!1},W=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function V(e){var t=e.match(W);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function K(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);$(this,K),32<t&&this.uncycle()}u.inherits(K,Error),(n.CapturedTrace=K).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;0<=r;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){0<a&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=0<r?t[r-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=r-2;0<=c;--c)t[c]._length=l,l++;return}}}},K.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=F(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(B(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;0<=s;--s)if(r[s]===o){a=s;break}for(s=a;0<=s;--s){var l=r[s];if(t[i]!==l)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),u.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),u.notEnumerableProp(e,"__stackCleaned__",!0)}};var $=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():H(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,d=e,m=t;var n=Error.captureStackTrace;return z=function(e){return p.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return d=/@/,m=t,v=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(m=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?H(t):t.toString()},null):(d=e,m=t,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(e){console.warn(e)},u.isNode&&X.stderr.isTTY?o=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(o=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Y={warnings:t,longStackTraces:!1,cancellation:!1,monitoring:!1};return y&&a.longStackTraces(),{longStackTraces:function(){return Y.longStackTraces},warnings:function(){return Y.warnings},cancellation:function(){return Y.cancellation},monitoring:function(){return Y.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return R},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&b){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=B(s),c=l.length-1;0<=c;--c){var u=l[c];if(!h.test(u)){var f=u.match(g);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(0<l.length){var p=l[0];for(c=0;c<s.length;++c)if(s[c]===p){0<c&&(a="\n"+s[c-1]);break}}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(d,!0,t)}},setBounds:function(e,t){if(G()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,l=0;l<i.length;++l)if(c=V(i[l])){n=c.fileName,a=c.line;break}for(l=0;l<o.length;++l){var c;if(c=V(o[l])){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||s<=a||(z=function(e){if(p.test(e))return!0;var t=V(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:M,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),M(n)},CapturedTrace:K,fireDomEvent:w,fireGlobalEvent:E}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(n){function r(){return this.value}function i(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:e},void 0)},n.prototype.throw=n.prototype.thenThrow=function(e){return this._then(i,void 0,void 0,{reason:e},void 0)},n.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},n.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof n&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0);var t=arguments[1];return t instanceof n&&t.suppressUnhandledRejections(),this.caught(e,function(){return t})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,n){var r=e.reduce,t=e.all;function i(){return t(this)}e.prototype.each=function(e){return r(this,e,n,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,n,n)},e.each=function(e,t){return r(e,t,n,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,t){return r(e,t,n,n)}}},{}],12:[function(e,t,n){"use strict";var r,i,o=e("./es5"),a=o.freeze,s=e("./util"),l=s.inherits,c=s.notEnumerableProp;function u(t,n){function r(e){if(!(this instanceof r))return new r(e);c(this,"message","string"==typeof e?e:n),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(r,Error),r}var f=u("Warning","warning"),p=u("CancellationError","cancellation error"),d=u("TimeoutError","timeout error"),h=u("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=u("TypeError","type error"),i=u("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<g.length;++m)"function"==typeof Array.prototype[g[m]]&&(h.prototype[g[m]]=Array.prototype[g[m]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return v--,t},l(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:p,TimeoutError:d,OperationalError:y,RejectionError:y,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,r){var i=e.map;e.prototype.filter=function(e,t){return i(this,e,t,r)},e.filter=function(e,t,n){return i(e,t,n,r)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(s,a,l){var c=e("./util"),u=s.CancellationError,f=c.errorObj,p=e("./catch_filter")(l);function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function d(e){this.finallyHandler=e}function h(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),!(e.cancelPromise=null))}function g(){return v.call(this,this.promise._target()._settledValue())}function m(e){if(!h(this,e))return f.e=e,f}function v(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(r===l)return r;if(void 0!==r){t._setReturnedNonUndefined();var i=a(r,t);if(i instanceof s){if(null!=this.cancelPromise){if(i._isCancelled()){var o=new u("late cancellation observer");return t._attachExtraTrace(o),f.e=o,f}i.isPending()&&i._attachCancellationCallback(new d(this))}return i._then(g,m,void 0,this,void 0)}}}return t.isRejected()?(h(this),f.e=e,f):(h(this),e)}return i.prototype.isFinallyHandler=function(){return 0===this.type},d.prototype._resultCancelled=function(){h(this.finallyHandler)},s.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},s.prototype.lastly=s.prototype.finally=function(e){return this._passThrough(e,0,v,v)},s.prototype.tap=function(e){return this._passThrough(e,1,v)},s.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,void 0,v);var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!c.isObject(o))return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(o)));r[i++]=o}r.length=i;var a=arguments[n];return this._passThrough(p(r,a,this),1,void 0,v)},i}},{"./catch_filter":7,"./util":36}],16:[function(n,e,t){"use strict";e.exports=function(s,r,a,l,e,c){var u=n("./errors").TypeError,t=n("./util"),f=t.errorObj,p=t.tryCatch,d=[];function h(e,t,n,r){if(c.cancellation()){var i=new s(a),o=this._finallyPromise=new s(a);this._promise=i.lastly(function(){return o}),i._captureStackTrace(),i._setOnCancel(this)}else(this._promise=new s(a))._captureStackTrace();this._stack=r,this._generatorFunction=e,this._receiver=t,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}t.inherits(h,e),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,c.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var t=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=t,this._promise._attachExtraTrace(t),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,t),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(e){var t=this._promise;if(e===f)return this._cleanup(),this._cancellationPhase?t.cancel():t._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?t.cancel():t._resolveCallback(n);var r=l(n,this._promise);if(r instanceof s||null!==(r=function(e,t,n){for(var r=0;r<t.length;++r){n._pushContext();var i=p(t[r])(e);if(n._popContext(),i===f){n._pushContext();var o=s.reject(f.e);return n._popContext(),o}var a=l(i,n);if(a instanceof s)return a}return null}(r,this._yieldHandlers,this._promise))){var i=(r=r._target())._bitField;0==(50397184&i)?(this._yieldedPromise=r)._proxy(this,null):0!=(33554432&i)?s._async.invoke(this._promiseFulfilled,this,r._value()):0!=(16777216&i)?s._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()}else this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},s.coroutine=function(r,e){if("function"!=typeof r)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,o=h,a=(new Error).stack;return function(){var e=r.apply(this,arguments),t=new o(void 0,void 0,i,a),n=t.promise();return t._generator=e,t._promiseFulfilled(void 0),n}},s.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+t.classString(e));d.push(e)},s.spawn=function(e){if(c.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var t=new h(e,this),n=t.promise();return t._run(s.spawn),n}}},{"./errors":12,"./util":36}],17:[function(s,e,t){"use strict";e.exports=function(e,i,t,n,r,o){var a=s("./util");a.canEvaluate,a.tryCatch,a.errorObj,e.join=function(){var e,t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var r=new i(n).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(d,e,o,h,a,g){var s=d._getDomain,l=t("./util"),m=l.tryCatch,v=l.errorObj,c=d._async;function u(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=s();this._callback=null===i?t:l.domainBind(i,t),this._preservedValues=r===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,void 0)}function i(e,t,n,r){if("function"!=typeof t)return o("expecting a function but got "+l.classString(t));var i=0;if(void 0!==n){if("object"!=typeof n||null===n)return d.reject(new TypeError("options argument must be an object but it is "+l.classString(n)));if("number"!=typeof n.concurrency)return d.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(n.concurrency)));i=n.concurrency}return new u(e,t,i="number"==typeof i&&isFinite(i)&&1<=i?i:0,r).promise()}l.inherits(u,e),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){var n=this._values,r=this.length(),i=this._preservedValues,o=this._limit;if(t<0){if(n[t=-1*t-1]=e,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=o&&this._inFlight>=o)return n[t]=e,this._queue.push(t),!1;null!==i&&(i[t]=e);var a=this._promise,s=this._callback,l=a._boundValue();a._pushContext();var c=m(s).call(l,e,t,r),u=a._popContext();if(g.checkForgottenReturns(c,u,null!==i?"Promise.filter":"Promise.map",a),c===v)return this._reject(c.e),!0;var f=h(c,this._promise);if(f instanceof d){var p=(f=f._target())._bitField;if(0==(50397184&p))return 1<=o&&this._inFlight++,(n[t]=f)._proxy(this,-1*(t+1)),!1;if(0==(33554432&p))return 0!=(16777216&p)?this._reject(f._reason()):this._cancel(),!0;c=f._value()}n[t]=c}return++this._totalResolved>=r&&(null!==i?this._filter(n,i):this._resolve(n),!0)},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},u.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},u.prototype.preservedValues=function(){return this._preservedValues},d.prototype.map=function(e,t){return i(this,e,t,null)},d.map=function(e,t,n,r){return i(e,t,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(a,s,e,l,c){var u=t("./util"),f=u.tryCatch;a.method=function(r){if("function"!=typeof r)throw new a.TypeError("expecting a function but got "+u.classString(r));return function(){var e=new a(s);e._captureStackTrace(),e._pushContext();var t=f(r).apply(this,arguments),n=e._popContext();return c.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},a.attempt=a.try=function(e){if("function"!=typeof e)return l("expecting a function but got "+u.classString(e));var t,n=new a(s);if(n._captureStackTrace(),n._pushContext(),1<arguments.length){c.deprecated("calling Promise.try with more than 1 argument");var r=arguments[1],i=arguments[2];t=u.isArray(r)?f(e).apply(i,r):f(e).call(i,r)}else t=f(e)();var o=n._popContext();return c.checkForgottenReturns(t,o,"Promise.try",n),n._resolveFromSyncValue(t),n},a.prototype._resolveFromSyncValue=function(e){e===u.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var a=e("./util"),s=a.maybeWrapAsError,l=e("./errors").OperationalError,c=e("./es5"),u=/^(?:name|message|stack|cause)$/;t.exports=function(i,o){return function(e,t){if(null!==i){if(e){var n=function(e){var t,n;if((n=e)instanceof Error&&c.getPrototypeOf(n)===Error.prototype){(t=new l(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),i=0;i<r.length;++i){var o=r[i];u.test(o)||(t[o]=e[o])}return t}return a.markAsOriginatingFromRejection(e),e}(s(e));i._attachExtraTrace(n),i._reject(n)}else if(o){var r=[].slice.call(arguments,1);i._fulfill(r)}else i._fulfill(t);i=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var r=t("./util"),i=e._async,o=r.tryCatch,a=r.errorObj;function s(e,t){if(!r.isArray(e))return l.call(this,e,t);var n=o(t).apply(this._boundValue(),[null].concat(e));n===a&&i.throwLater(n.e)}function l(e,t){var n=this._boundValue(),r=void 0===e?o(t).call(n,null):o(t).call(n,null,e);r===a&&i.throwLater(r.e)}function c(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=o(t).call(this._boundValue(),e);r===a&&i.throwLater(r.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){if("function"==typeof e){var n=l;void 0!==t&&Object(t).spread&&(n=s),this._then(n,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(P,N,e){"use strict";N.exports=function(){var l=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},s=function(){return new C.PromiseInspection(this._target())},a=function(e){return C.reject(new f(e))};function c(){}var d,u={},h=P("./util");d=h.isNode?function(){var e=X.domain;return void 0===e&&(e=null),e}:function(){return null},h.notEnumerableProp(C,"_getDomain",d);var e=P("./es5"),t=P("./async"),g=new t;e.defineProperty(C,"_async",{value:g});var n=P("./errors"),f=C.TypeError=n.TypeError;C.RangeError=n.RangeError;var m=C.CancellationError=n.CancellationError;C.TimeoutError=n.TimeoutError,C.OperationalError=n.OperationalError,C.RejectionError=n.OperationalError,C.AggregateError=n.AggregateError;var v=function(){},p={},y={},b=P("./thenables")(C,v),_=P("./promise_array")(C,v,b,a,c),r=P("./context")(C),i=r.create,w=P("./debuggability")(C,r),E=(w.CapturedTrace,P("./finally")(C,b,y)),k=P("./catch_filter")(y),o=P("./nodeback"),x=h.errorObj,S=h.tryCatch;function C(e){e!==v&&function(e,t){if(null==e||e.constructor!==C)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new f("expecting a function but got "+h.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function T(e){this.promise._resolveCallback(e)}function A(e){this.promise._rejectCallback(e,!1)}function O(e){var t=new C(v);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return C.prototype.toString=function(){return"[object Promise]"},C.prototype.caught=C.prototype.catch=function(e){var t=arguments.length;if(1<t){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!h.isObject(o))return a("Catch statement predicate: expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,k(r,e,this))}return this.then(void 0,e)},C.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},C.prototype.then=function(e,t){if(w.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);1<arguments.length&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},C.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},C.prototype.spread=function(e){return"function"!=typeof e?a("expecting a function but got "+h.classString(e)):this.all()._then(e,void 0,void 0,p,void 0)},C.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},C.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},C.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},C.getNewLibraryCopy=N.exports,C.is=function(e){return e instanceof C},C.fromNode=C.fromCallback=function(e){var t=new C(v);t._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=S(e)(o(t,n));return r===x&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},C.all=function(e){return new _(e).promise()},C.resolve=C.fulfilled=C.cast=function(e){var t=b(e);return t instanceof C||((t=new C(v))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},C.reject=C.rejected=function(e){var t=new C(v);return t._captureStackTrace(),t._rejectCallback(e,!0),t},C.setScheduler=function(e){if("function"!=typeof e)throw new f("expecting a function but got "+h.classString(e));return g.setScheduler(e)},C.prototype._then=function(e,t,n,r,i){var o=void 0!==i,a=o?i:new C(v),s=this._target(),l=s._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var c=d();if(0!=(50397184&l)){var u,f,p=s._settlePromiseCtx;0!=(33554432&l)?(f=s._rejectionHandler0,u=e):0!=(16777216&l)?(f=s._fulfillmentHandler0,u=t,s._unsetRejectionIsUnhandled()):(p=s._settlePromiseLateCancellationObserver,f=new m("late cancellation observer"),s._attachExtraTrace(f),u=t),g.invoke(p,s,{handler:null===c?u:"function"==typeof u&&h.domainBind(c,u),promise:a,receiver:r,value:f})}else s._addCallbacks(e,t,a,r,c);return a},C.prototype._length=function(){return 65535&this._bitField},C.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},C.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},C.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},C.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},C.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},C.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},C.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},C.prototype._isFinal=function(){return 0<(4194304&this._bitField)},C.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},C.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},C.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},C.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},C.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},C.prototype._promiseAt=function(e){return this[4*e-4+2]},C.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},C.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},C.prototype._boundValue=function(){},C.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(t,n,r,i,null)},C.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=u),this._addCallbacks(n,r,i,o,null)},C.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(65531<=o&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:h.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:h.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:h.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:h.domainBind(i,t))}return this._setLength(o+1),o},C.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},C.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=b(e,this);if(!(n instanceof C))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var i=r._bitField;if(0==(50397184&i)){var o=this._length();0<o&&r._migrateCallback0(this);for(var a=1;a<o;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var s=new m("late cancellation observer");r._attachExtraTrace(s),this._reject(s)}}else this._reject(l())}},C.prototype._rejectCallback=function(e,t,n){var r=h.ensureErrorObject(e),i=r===e;if(!i&&!n&&w.warnings()){var o="a promise was rejected with a non-error: "+h.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},C.prototype._resolveFromExecutor=function(e){if(e!==v){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},C.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===p?n&&"number"==typeof n.length?o=S(e).apply(this._boundValue(),n):(o=x).e=new f("cannot .spread() a non-array: "+h.classString(n)):o=S(e).call(t,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===y?r._reject(n):o===x?r._rejectCallback(o.e,!1):(w.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},C.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},C.prototype._followee=function(){return this._rejectionHandler0},C.prototype._setFollowee=function(e){this._rejectionHandler0=e},C.prototype._settlePromise=function(e,t,n,r){var i=e instanceof C,o=this._bitField,a=0!=(134217728&o);0!=(65536&o)?(i&&e._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=e,S(t).call(n,r)===x&&e._reject(x.e)):t===s?e._fulfill(s.call(n)):n instanceof c?n._promiseCancelled(e):i||e instanceof _?e._cancel():n.cancel()):"function"==typeof t?i?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof c?n._isResolved()||(0!=(33554432&o)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):i&&(a&&e._setAsyncGuaranteed(),0!=(33554432&o)?e._fulfill(r):e._reject(r))},C.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof C?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof C&&n._reject(i)},C.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},C.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},C.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},C.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0!=(134217728&t)?this._settlePromises():g.settlePromises(this))}},C.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,h.isNode);0<(65535&t)?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},C.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},C.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},C.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(0<t){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},C.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},C.defer=C.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new C(v),resolve:T,reject:A}},h.notEnumerableProp(C,"_makeSelfResolutionError",l),P("./method")(C,v,b,a,w),P("./bind")(C,v,b,w),P("./cancel")(C,_,a,w),P("./direct_resolve")(C),P("./synchronous_inspection")(C),P("./join")(C,_,b,v,g,d),(C.Promise=C).version="3.5.1",P("./map.js")(C,_,a,b,v,w),P("./call_get.js")(C),P("./using.js")(C,a,b,i,v,w),P("./timers.js")(C,v,w),P("./generators.js")(C,a,v,b,c,w),P("./nodeify.js")(C),P("./promisify.js")(C,v),P("./props.js")(C,_,b,a),P("./race.js")(C,v,b,a),P("./reduce.js")(C,_,a,b,v,w),P("./settle.js")(C,_,w),P("./some.js")(C,_,a),P("./filter.js")(C,v),P("./each.js")(C,v),P("./any.js")(C),h.toFastProperties(C),h.toFastProperties(C.prototype),O({a:1}),O({b:2}),O({c:3}),O(1),O(function(){}),O(void 0),O(!1),O(new C(v)),w.setBounds(t.firstLineError,h.lastLineError),C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(r,e,t){"use strict";e.exports=function(s,n,l,a,e){var c=r("./util");function t(e){var t=this._promise=new s(n);e instanceof s&&t._propagateFrom(e,3),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return c.isArray,c.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function e(t,n){var r=l(this._values,this._promise);if(r instanceof s){var i=(r=r._target())._bitField;if(this._values=r,0==(50397184&i))return this._promise._setAsyncGuaranteed(),r._then(e,this._reject,void 0,this,n);if(0==(33554432&i))return 0!=(16777216&i)?this._reject(r._reason()):this._cancel();r=r._value()}if(null!==(r=c.asArray(r)))0!==r.length?this._iterate(r):-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(n){case-2:return[];case-3:return{};case-6:return new Map}}());else{var o=a("expecting an array or an iterable object but got "+c.classString(r)).reason();this._promise._rejectCallback(o,!1)}},t.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var n=this._promise,r=!1,i=null,o=0;o<t;++o){var a=l(e[o],n);i=a instanceof s?(a=a._target())._bitField:null,r?null!==i&&a.suppressUnhandledRejections():null!==i?0==(50397184&i)?(a._proxy(this,o),this._values[o]=a):r=0!=(33554432&i)?this._promiseFulfilled(a._value(),o):0!=(16777216&i)?this._promiseRejected(a._reason(),o):this._promiseCancelled(o):r=this._promiseFulfilled(a,o)}r||n._setAsyncGuaranteed()},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof s)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof s&&e[t].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(n,e,t){"use strict";e.exports=function(c,u){var d={},h=n("./util"),f=n("./nodeback"),p=h.withAppended,g=h.maybeWrapAsError,e=h.canEvaluate,m=n("./errors").TypeError,v={__isPromisified__:!0},t=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),y=function(e){return h.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function a(e){return!t.test(e)}function b(e){try{return!0===e.__isPromisified__}catch(e){return!1}}var _=function(e){return e.replace(/([$])/,"\\$")},w=e?void 0:function(i,o,e,t,n,a){var s=function(){return this}(),l=i;function r(){var e=o;o===d&&(e=this);var t=new c(u);t._captureStackTrace();var n="string"==typeof l&&this!==s?this[l]:i,r=f(t,a);try{n.apply(e,p(arguments,r))}catch(e){t._rejectCallback(g(e),!0,!0)}return t._isFateSealed()||t._setAsyncGuaranteed(),t}return"string"==typeof l&&(i=t),h.notEnumerableProp(r,"__isPromisified__",!0),r};function E(e,t,n,r,i){for(var o=new RegExp(_(t)+"$"),a=function(e,t,n,r){for(var i=h.inheritedDataKeys(e),o=[],a=0;a<i.length;++a){var s=i[a],l=e[s],c=r===y||y(s,l,e);"function"!=typeof l||b(l)||(u=e,f=s,p=t,(d=h.getDataPropertyOrDefault(u,f+p,v))&&b(d))||!r(s,l,e,c)||o.push(s,l)}var u,f,p,d;return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(o,t,n),o}(e,t,o,n),s=0,l=a.length;s<l;s+=2){var c=a[s],u=a[s+1],f=c+t;if(r===w)e[f]=w(c,d,c,u,t,i);else{var p=r(u,function(){return w(c,d,c,u,t,i)});h.notEnumerableProp(p,"__isPromisified__",!0),e[f]=p}}return h.toFastProperties(e),e}c.promisify=function(e,t){if("function"!=typeof e)throw new m("expecting a function but got "+h.classString(e));if(b(e))return e;var n,r,i,o=(n=e,r=void 0===(t=Object(t)).context?d:t.context,i=!!t.multiArgs,w(n,r,void 0,n,null,i));return h.copyDescriptors(e,o,a),o},c.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=y);var o=t.promisifier;if("function"!=typeof o&&(o=w),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=h.inheritedDataKeys(e),s=0;s<a.length;++s){var l=e[a[s]];"constructor"!==a[s]&&h.isClass(l)&&(E(l.prototype,r,i,o,n),E(l,r,i,o,n))}return E(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(f,e,t){"use strict";e.exports=function(r,e,i,o){var s,t=f("./util"),a=t.isObject,l=f("./es5");"function"==typeof Map&&(s=Map);var c=function(){var n=0,r=0;function i(e,t){this[n]=e,this[n+r]=t,n++}return function(e){r=e.size,n=0;var t=new Array(2*e.size);return e.forEach(i,t),t}}();function u(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=c(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function n(e){var t,n=i(e);return a(n)?(t=n instanceof r?n._then(r.props,void 0,void 0,void 0,void 0):new u(n).promise(),n instanceof r&&t._propagateFrom(n,2),t):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.inherits(u,e),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(e){return e>>1},r.prototype.props=function(){return n(this)},r.props=function(e){return n(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(c,u,f,p){var d=e("./util"),h=function(t){return t.then(function(e){return n(e,t)})};function n(e,t){var n=f(e);if(n instanceof c)return h(n);if(null===(e=d.asArray(e)))return p("expecting an array or an iterable object but got "+d.classString(e));var r=new c(u);void 0!==t&&r._propagateFrom(t,3);for(var i=r._fulfill,o=r._reject,a=0,s=e.length;a<s;++a){var l=e[a];(void 0!==l||a in e)&&c.cast(l)._then(i,o,void 0,r,null)}return r}c.race=function(e){return n(e,void 0)},c.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(a,e,i,n,o,s){var l=a._getDomain,c=t("./util"),u=c.tryCatch;function f(e,t,n,r){this.constructor$(e);var i=l();this._fn=null===i?t:c.domainBind(i,t),void 0!==n&&(n=a.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,r){return"function"!=typeof t?i("expecting a function but got "+c.classString(t)):new f(e,t,n,r).promise()}function h(e){this.accum=e,this.array._gotAccum(e);var t=n(this.value,this.array._promise);return t instanceof a?(this.array._currentCancellable=t)._then(r,void 0,void 0,this,void 0):r.call(this,t)}function r(e){var t,n=this.array,r=n._promise,i=u(n._fn);r._pushContext(),(t=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof a&&(n._currentCancellable=t);var o=r._popContext();return s.checkForgottenReturns(t,o,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),t}c.inherits(f,e),f.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},f.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},f.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel())},f.prototype._iterate=function(e){var t,n,r=(this._values=e).length;if(void 0!==this._initialValue?(t=this._initialValue,n=0):(t=a.resolve(e[0]),n=1),!(this._currentCancellable=t).isRejected())for(;n<r;++n){var i={accum:null,value:e[n],index:n,length:r,array:this};t=t._then(h,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(t=t._then(this._eachComplete,void 0,void 0,this,void 0)),t._then(p,p,void 0,t,this)},a.prototype.reduce=function(e,t){return d(this,e,t,null)},a.reduce=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){"use strict";var r,i,o,a,s,l=e("./util"),c=l.getNativePromise();if(l.isNode&&"undefined"==typeof MutationObserver){var u=S.setImmediate,f=X.nextTick;r=l.isRecentNode?function(e){u.call(S,e)}:function(e){f.call(X,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var p=c.resolve();r=function(e){p.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==d?function(e){d(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(i=document.createElement("div"),a=!(o={attributes:!0}),s=document.createElement("div"),new MutationObserver(function(){i.classList.toggle("foo"),a=!1}).observe(s,o),function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(i,o),a||(a=!0,s.classList.toggle("foo"))});t.exports=r},{"./util":36}],30:[function(o,e,t){"use strict";e.exports=function(e,t,n){var r=e.PromiseInspection;function i(e){this.constructor$(e)}o("./util").inherits(i,t),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(u,e,t){"use strict";e.exports=function(e,t,i){var n=u("./util"),r=u("./errors").RangeError,o=u("./errors").AggregateError,a=n.isArray,s={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(e),r=n.promise();return n.setHowMany(t),n.init(),r}n.inherits(l,t),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new o,t=this.length();t<this._values.length;++t)this._values[t]!==s&&e.push(this._values[t]);return 0<e.length?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new r(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return c(e,t)},e.prototype.some=function(e){return c(this,e)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(s,l){var c=e("./util"),u=c.errorObj,i=c.isObject,o={}.hasOwnProperty;return function(e,t){if(i(e)){if(e instanceof s)return e;var n=function(e){try{return e.then}catch(e){return u.e=e,u}}(e);if(n===u){t&&t._pushContext();var r=s.reject(n.e);return t&&t._popContext(),r}if("function"==typeof n)return function(e){try{return o.call(e,"_promise0")}catch(e){return!1}}(e)?(r=new s(l),e._then(r._fulfill,r._reject,void 0,r,null),r):function(e,t,n){var r=new s(l),i=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var o=!0,a=c.tryCatch(t).call(e,function(e){r&&(r._resolveCallback(e),r=null)},function(e){r&&(r._rejectCallback(e,o,!0),r=null)});return o=!1,r&&a===u&&(r._rejectCallback(a.e,!0,!0),r=null),i}(e,n,t)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(i,o,s){var l=e("./util"),c=i.TimeoutError;function u(e){this.handle=e}u.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return t(+this).thenReturn(e)},t=i.delay=function(e,t){var n,r;return void 0!==t?(n=i.resolve(t)._then(a,null,null,e,void 0),s.cancellation()&&t instanceof i&&n._setOnCancel(t)):(n=new i(o),r=setTimeout(function(){n._fulfill()},+e),s.cancellation()&&n._setOnCancel(new u(r)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};function n(e){return clearTimeout(this.handle),e}function r(e){throw clearTimeout(this.handle),e}i.prototype.delay=function(e){return t(e,this)},i.prototype.timeout=function(e,i){var o,a;e=+e;var t=new u(setTimeout(function(){var e,t,n,r;o.isPending()&&(e=o,n=a,r="string"!=typeof(t=i)?t instanceof Error?t:new c("operation timed out"):new c(t),l.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel())},e));return s.cancellation()?(a=this.then(),(o=a._then(n,r,void 0,t,void 0))._setOnCancel(t)):o=this._then(n,r,void 0,t,void 0),o}}},{"./util":36}],35:[function(o,e,t){"use strict";e.exports=function(p,d,h,t,g,m){var v=o("./util"),n=o("./errors").TypeError,e=o("./util").inherits,y=v.errorObj,b=v.tryCatch,i={};function _(e){setTimeout(function(){throw e},0)}function w(e,t,n){this._data=e,this._promise=t,this._context=n}function r(e,t,n){this.constructor$(e,t,n)}function E(e){return w.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function k(e){this.length=e,this.promise=null,this[e-1]=null}w.prototype.data=function(){return this._data},w.prototype.promise=function(){return this._promise},w.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():i},w.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==i?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},w.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},e(r,w),r.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},k.prototype._resultCancelled=function(){for(var e=this.length,t=0;t<e;++t){var n=this[t];n instanceof p&&n.cancel()}},p.using=function(){var e=arguments.length;if(e<2)return d("you must pass at least 2 arguments to Promise.using");var t,o=arguments[e-1];if("function"!=typeof o)return d("expecting a function but got "+v.classString(o));var a=!0;2===e&&Array.isArray(arguments[0])?(e=(t=arguments[0]).length,a=!1):(t=arguments,e--);for(var n=new k(e),r=0;r<e;++r){var i=t[r];if(w.isDisposer(i)){var s=i;(i=i.promise())._setDisposable(s)}else{var l=h(i);l instanceof p&&(i=l._then(E,null,null,{resources:n,index:r},void 0))}n[r]=i}var c=new Array(n.length);for(r=0;r<c.length;++r)c[r]=p.resolve(n[r]).reflect();var u=p.all(c).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void u.cancel();e[t]=n.value()}f._pushContext(),o=b(o);var r=a?o.apply(void 0,e):o(e),i=f._popContext();return m.checkForgottenReturns(r,i,"Promise.using",f),r}),f=u.lastly(function(){var i,o,a,s,l,e=new p.PromiseInspection(u);return o=e,a=0,s=(i=n).length,l=new p(g),function e(){if(s<=a)return l._fulfill();var t,n,r=(t=i[a++],(n=h(t))!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&n._setDisposable(t._getDisposer()),n);if(r instanceof p&&r._isDisposable()){try{r=h(r._getDisposer().tryDispose(o),i.promise)}catch(e){return _(e)}if(r instanceof p)return r._then(e,_,null,null,null)}e()}(),l});return(n.promise=f)._setOnCancel(n),f},p.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},p.prototype._isDisposable=function(){return 0<(131072&this._bitField)},p.prototype._getDisposer=function(){return this._disposer},p.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},p.prototype.disposer=function(e){if("function"==typeof e)return new r(e,this,t());throw new n}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";var r,c=e("./es5"),i="undefined"==typeof navigator,o={e:{}},a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==S?S:void 0!==this?this:null;function s(){try{var e=r;return r=null,e.apply(this,arguments)}catch(e){return o.e=e,o}}function l(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function u(e,t,n){if(l(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return c.defineProperty(e,t,r),e}var f=function(){var i=[Array.prototype,Object.prototype,Function.prototype],s=function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return!0;return!1};if(c.isES5){var l=Object.getOwnPropertyNames;return function(e){for(var t=[],n=Object.create(null);null!=e&&!s(e);){var r;try{r=l(e)}catch(e){return t}for(var i=0;i<r.length;++i){var o=r[i];if(!n[o]){n[o]=!0;var a=Object.getOwnPropertyDescriptor(e,o);null!=a&&null==a.get&&null==a.set&&t.push(o)}}e=c.getPrototypeOf(e)}return t}}var o={}.hasOwnProperty;return function(e){if(s(e))return[];var t=[];e:for(var n in e)if(o.call(e,n))t.push(n);else{for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue e;t.push(n)}return t}}(),p=/this\s*\.\s*\S+\s*=/;var d=/^[a-z$_][a-z$_0-9]*$/i;function h(e){try{return e+""}catch(e){return"[no string representation]"}}function g(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function m(e){return g(e)&&c.propertyIsWritable(e,"stack")}var v="stack"in new Error?function(e){return m(e)?e:new Error(h(e))}:function(e){if(m(e))return e;try{throw new Error(h(e))}catch(e){return e}};function y(e){return{}.toString.call(e)}var b=function(e){return c.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var _="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};b=function(e){return c.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?_(e):null}}var w=void 0!==X&&"[object process]"===y(X).toLowerCase(),E=void 0!==X&&void 0!==X.env;var k,x={isClass:function(e){try{if("function"==typeof e){var t=c.names(e.prototype),n=c.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),i=p.test(e+"")&&0<c.names(e).length;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return d.test(e)},inheritedDataKeys:f,getDataPropertyOrDefault:function(e,t,n){if(!c.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:c.isArray,asArray:b,notEnumerableProp:u,isPrimitive:l,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:g,canEvaluate:i,errorObj:o,tryCatch:function(e){return r=e,s},inherits:function(t,n){var r={}.hasOwnProperty;function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}return e.prototype=n.prototype,t.prototype=new e,t.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return l(e)?new Error(h(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:h,canAttachTrace:m,ensureErrorObject:v,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{u(e,"isOperational",!0)}catch(e){}},classString:y,copyDescriptors:function(e,t,n){for(var r=c.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{c.defineProperty(t,o,c.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:w,hasEnvVariables:E,env:function(e){return E?X.env[e]:void 0},global:a,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};x.isRecentNode=x.isNode&&(0===(k=X.versions.node.split(".").map(Number))[0]&&10<k[1]||0<k[0]),x.isNode&&x.toFastProperties(X);try{throw new Error}catch(e){x.lastLineError=e}t.exports=x},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:178,timers:284}],61:[function(e,t,n){},{}],62:[function(D,e,j){(function(e){(function(){"use strict";var s=D("base64-js"),o=D("ieee754"),e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;j.Buffer=f,j.SlowBuffer=function(e){return+e!=e&&(e=0),f.alloc(+e)},j.INSPECT_MAX_BYTES=50;var n=2147483647;function a(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return i(e)}return r(e,t,n)}function r(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(I(e,Uint8Array)){var t=new Uint8Array(e);return u(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer))return u(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(I(e,SharedArrayBuffer)||e&&I(e.buffer,SharedArrayBuffer)))return u(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);var i=function(e){if(f.isBuffer(e)){var t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||L(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function i(e){return l(e),a(e<0?0:0|p(e))}function c(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,f.prototype),r}function p(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function d(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(i)return r?-1:O(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),L(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var f=!0,p=0;p<l;p++)if(c(e,o+p)!==c(t,p)){f=!1;break}if(f)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(L(s))return a;e[n+a]=s}return a}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,f=239<c?4:223<c?3:191<c?2:1;if(i+f<=n)switch(f){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,f=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=b));return n}(r)}j.kMaxLength=n,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,n){return r(e,t,n)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,n){return i=t,o=n,l(r=e),r<=0?a(r):void 0!==i?"string"==typeof o?a(r).fill(i,o):a(r).fill(i):a(r);var r,i,o},f.allocUnsafe=function(e){return i(e)},f.allocUnsafeSlow=function(e){return i(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(I(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=f.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(I(o,Uint8Array))i+o.length>r.length?f.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},f.byteLength=d,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,n){var r,i,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return w(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=j.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(f.prototype[e]=f.prototype.inspect),f.prototype.compare=function(e,t,n,r,i){if(I(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,a,s,l,c,u,f,p,d,h,g,m=this.length-t;if((void 0===n||m<n)&&(n=m),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var v=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return h=t,g=n,N(O(e,(d=this).length-h),d,h,g);case"ascii":case"latin1":case"binary":return u=this,f=t,p=n,N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),u,f,p);case"base64":return s=this,l=t,c=n,N(P(e),s,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,a=n,N(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,(i=this).length-o),i,o,a);default:if(v)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),v=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function w(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=R[e[o]];return i}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,r,i,o){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function A(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,8),o.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,f.prototype),r},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);S(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return A(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return A(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=f.isBuffer(e)?e:f.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var t=/[^+\/0-9A-Za-z-_]/g;function O(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function P(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}var R=function(){for(var e=new Array(256),t=0;t<16;++t)for(var n=16*t,r=0;r<16;++r)e[n+r]="0123456789abcdef"[t]+"0123456789abcdef"[r];return e}()}).call(this)}).call(this,D("buffer").Buffer)},{"base64-js":59,buffer:62,ieee754:93}],63:[function(e,t,n){!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var i=s.apply(null,n);i&&e.push(i)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var o in n)a.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}void 0!==t&&t.exports?(s.default=s,t.exports=s):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return s}):window.classNames=s}()},{}],64:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===r(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===r(e)},n.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("buffer").Buffer.isBuffer},{buffer:62}],65:[function(e,t,n){var r,i;r=this,i=function(){var u,n,e,t,r,f,i,o,a,s,l,c,p=p||(u=Math,n=Object.create||function(){function n(){}return function(e){var t;return n.prototype=e,t=new n,n.prototype=null,t}}(),t=(e={}).lib={},r=t.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},f=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=u.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,n=[],r=function(t){t=t;var n=987654321,r=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(.5<u.random()?1:-1)}},i=0;i<e;i+=4){var o=r(4294967296*(t||u.random()));t=987654071*o(),n.push(4294967296*o()|0)}return new f.init(n,e)}}),i=e.enc={},o=i.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new f.init(n,t/2)}},a=i.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new f.init(n,t)}},s=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=e?u.ceil(o):u.max((0|o)-this._minBufferSize,0))*i,s=u.min(4*a,r);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(n,l);var c=n.splice(0,a);t.sigBytes-=s}return new f.init(c,s)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new c.HMAC.init(n,t).finalize(e)}}}),c=e.algo={},e);return p},"object"==typeof n?t.exports=n=i():"function"==typeof define&&define.amd?define([],i):r.CryptoJS=i()},{}],66:[function(e,t,n){var r,i;r=this,i=function(e){var t,n,r,i,o,f,a;return n=(t=e).lib,r=n.WordArray,i=n.Hasher,o=t.algo,f=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=0;l<80;l++){if(l<16)f[l]=0|e[t+l];else{var c=f[l-3]^f[l-8]^f[l-14]^f[l-16];f[l]=c<<1|c>>>31}var u=(r<<5|r>>>27)+s+f[l];u+=l<20?1518500249+(i&o|~i&a):l<40?1859775393+(i^o^a):l<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a),e.SHA1},"object"==typeof n?t.exports=n=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(r.CryptoJS)},{"./core":65}],67:[function(e,t,n){t.exports={elementNames:{altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},attributeNames:{definitionurl:"definitionURL",attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"}}},{}],68:[function(e,t,n){var l=e("domelementtype"),c=e("entities"),o=e("./foreignNames.json");o.elementNames.__proto__=null;var u={__proto__:o.attributeNames.__proto__=null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var i={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},f=t.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var n="",r=0;r<e.length;r++){var i=e[r];"root"===i.type?n+=f(i.children,t):l.isTag(i)?n+=p(i,t):i.type===l.Directive?n+="<"+i.data+">":i.type===l.Comment?n+="\x3c!--"+i.data+"--\x3e":i.type===l.CDATA?n+="<![CDATA["+i.children[0].data+"]]>":n+=(a=t,s=void 0,s=(o=i).data||"",!a.decodeEntities||o.parent&&o.parent.name in u||(s=c.encodeXML(s)),s)}var o,a,s;return n},a=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function p(e,t){"foreign"===t.xmlMode&&(e.name=o.elementNames[e.name]||e.name,e.parent&&0<=a.indexOf(e.parent.name)&&(t=Object.assign({},t,{xmlMode:!1}))),!t.xmlMode&&0<=["svg","math"].indexOf(e.name)&&(t=Object.assign({},t,{xmlMode:"foreign"}));var n="<"+e.name,r=function(e,t){if(e){var n,r="";for(var i in e)n=e[i],r&&(r+=" "),"foreign"===t.xmlMode&&(i=o.attributeNames[i]||i),r+=i,(null!==n&&""!==n||t.xmlMode)&&(r+='="'+(t.decodeEntities?c.encodeXML(n):n.replace(/\"/g,"&quot;"))+'"');return r}}(e.attribs,t);return r&&(n+=" "+r),!t.xmlMode||e.children&&0!==e.children.length?(n+=">",e.children&&(n+=f(e.children,t)),i[e.name]&&!t.xmlMode||(n+="</"+e.name+">")):n+="/>",n}},{"./foreignNames.json":67,domelementtype:69,entities:82}],69:[function(e,t,n){"use strict";var r,i;Object.defineProperty(n,"__esModule",{value:!0}),n.Doctype=n.CDATA=n.Tag=n.Style=n.Script=n.Comment=n.Directive=n.Text=n.Root=n.isTag=n.ElementType=void 0,(i=r=n.ElementType||(n.ElementType={})).Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype",n.isTag=function(e){return e.type===r.Tag||e.type===r.Script||e.type===r.Style},n.Root=r.Root,n.Text=r.Text,n.Directive=r.Directive,n.Comment=r.Comment,n.Script=r.Script,n.Style=r.Style,n.Tag=r.Tag,n.CDATA=r.CDATA,n.Doctype=r.Doctype},{}],70:[function(e,t,n){t.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(e){return"tag"===e.type||"script"===e.type||"style"===e.type}}},{}],71:[function(e,t,n){var r=t.exports;[e("./lib/stringify"),e("./lib/traversal"),e("./lib/manipulation"),e("./lib/querying"),e("./lib/legacy"),e("./lib/helpers")].forEach(function(t){Object.keys(t).forEach(function(e){r[e]=t[e].bind(r)})})},{"./lib/helpers":72,"./lib/legacy":73,"./lib/manipulation":74,"./lib/querying":75,"./lib/stringify":76,"./lib/traversal":77}],72:[function(e,t,n){n.removeSubsets=function(e){for(var t,n,r,i=e.length;-1<--i;){for(t=n=e[i],r=!(e[i]=null);n;){if(-1<e.indexOf(n)){r=!1,e.splice(i,1);break}n=n.parent}r&&(e[i]=t)}return e};var u=1,f=2,p=4,d=8,h=16,i=n.compareDocumentPosition=function(e,t){var n,r,i,o,a,s,l=[],c=[];if(e===t)return 0;for(n=e;n;)l.unshift(n),n=n.parent;for(n=t;n;)c.unshift(n),n=n.parent;for(s=0;l[s]===c[s];)s++;return 0===s?u:(i=(r=l[s-1]).children,o=l[s],a=c[s],i.indexOf(o)>i.indexOf(a)?r===t?p|h:p:r===e?f|d:f)};n.uniqueSort=function(e){var t,n,r=e.length;for(e=e.slice();-1<--r;)t=e[r],-1<(n=e.indexOf(t))&&n<r&&e.splice(r,1);return e.sort(function(e,t){var n=i(e,t);return n&f?-1:n&p?1:0}),e}},{}],73:[function(e,t,n){var r=e("domelementtype"),i=n.isTag=r.isTag;n.testElement=function(e,t){for(var n in e)if(e.hasOwnProperty(n))if("tag_name"===n){if(!i(t)||!e.tag_name(t.name))return!1}else if("tag_type"===n){if(!e.tag_type(t.type))return!1}else if("tag_contains"===n){if(i(t)||!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1;return!0};var o={tag_name:function(t){return"function"==typeof t?function(e){return i(e)&&t(e.name)}:"*"===t?i:function(e){return i(e)&&e.name===t}},tag_type:function(t){return"function"==typeof t?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return"function"==typeof t?function(e){return!i(e)&&t(e.data)}:function(e){return!i(e)&&e.data===t}}};function a(t,n){return"function"==typeof n?function(e){return e.attribs&&n(e.attribs[t])}:function(e){return e.attribs&&e.attribs[t]===n}}function s(t,n){return function(e){return t(e)||n(e)}}n.getElements=function(n,e,t,r){var i=Object.keys(n).map(function(e){var t=n[e];return e in o?o[e](t):a(e,t)});return 0===i.length?[]:this.filter(i.reduce(s),e,t,r)},n.getElementById=function(e,t,n){return Array.isArray(t)||(t=[t]),this.findOne(a("id",e),t,!1!==n)},n.getElementsByTagName=function(e,t,n,r){return this.filter(o.tag_name(e),t,n,r)},n.getElementsByTagType=function(e,t,n,r){return this.filter(o.tag_type(e),t,n,r)}},{domelementtype:70}],74:[function(e,t,n){n.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},n.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t}},n.appendChild=function(e,t){if(1!==(t.parent=e).children.push(t)){var n=e.children[e.children.length-2];(n.next=t).prev=n,t.next=null}},n.append=function(e,t){var n=e.parent,r=e.next;if(t.next=r,((t.prev=e).next=t).parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},n.prepend=function(e,t){var n=e.parent;if(n){var r=n.children;r.splice(r.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,(t.next=e).prev=t}},{}],75:[function(e,t,n){var a=e("domelementtype").isTag;function l(e,t,n,r){for(var i,o=[],a=0,s=t.length;a<s&&!(e(t[a])&&(o.push(t[a]),--r<=0))&&(i=t[a].children,!(n&&i&&0<i.length&&(i=l(e,i,n,r),o=o.concat(i),(r-=i.length)<=0)));a++);return o}t.exports={filter:function(e,t,n,r){return Array.isArray(t)||(t=[t]),"number"==typeof r&&isFinite(r)||(r=1/0),l(e,t,!1!==n,r)},find:l,findOneChild:function(e,t){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return t[n];return null},findOne:function e(t,n){for(var r=null,i=0,o=n.length;i<o&&!r;i++)a(n[i])&&(t(n[i])?r=n[i]:0<n[i].children.length&&(r=e(t,n[i].children)));return r},existsOne:function e(t,n){for(var r=0,i=n.length;r<i;r++)if(a(n[r])&&(t(n[r])||0<n[r].children.length&&e(t,n[r].children)))return!0;return!1},findAll:function(e,t){for(var n=[],r=t.slice();r.length;){var i=r.shift();a(i)&&(i.children&&0<i.children.length&&r.unshift.apply(r,i.children),e(i)&&n.push(i))}return n}}},{domelementtype:70}],76:[function(e,t,n){var r=e("domelementtype"),i=e("dom-serializer"),o=r.isTag;t.exports={getInnerHTML:function(e,t){return e.children?e.children.map(function(e){return i(e,t)}).join(""):""},getOuterHTML:i,getText:function e(t){return Array.isArray(t)?t.map(e).join(""):o(t)?"br"===t.name?"\n":e(t.children):t.type===r.CDATA?e(t.children):t.type===r.Text?t.data:""}}},{"dom-serializer":68,domelementtype:70}],77:[function(e,t,n){var r=n.getChildren=function(e){return e.children},i=n.getParent=function(e){return e.parent};n.getSiblings=function(e){var t=i(e);return t?r(t):[e]},n.getAttributeValue=function(e,t){return e.attribs&&e.attribs[t]},n.hasAttrib=function(e,t){return!!e.attribs&&hasOwnProperty.call(e.attribs,t)},n.getName=function(e){return e.name}},{}],78:[function(e,t,n){"use strict";function r(e){if(this._capacity=o(e),this._length=0,this._front=0,i(e)){for(var t=e.length,n=0;n<t;++n)this[n]=e[n];this._length=t}}r.prototype.toArray=function(){for(var e=this._length,t=new Array(e),n=this._front,r=this._capacity,i=0;i<e;++i)t[i]=this[n+i&r-1];return t},r.prototype.push=function(e){var t=arguments.length,n=this._length;if(1<t){var r=this._capacity;if(r<n+t){for(var i=0;i<t;++i)this._checkCapacity(n+1),this[o=this._front+n&this._capacity-1]=arguments[i],n++,this._length=n;return n}var o=this._front;for(i=0;i<t;++i)this[o+n&r-1]=arguments[i],o++;return this._length=n+t,n+t}return 0===t?n:(this._checkCapacity(n+1),this[i=this._front+n&this._capacity-1]=e,this._length=n+1,n+1)},r.prototype.pop=function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,n=this[t];return this[t]=void 0,this._length=e-1,n}},r.prototype.shift=function(){var e=this._length;if(0!==e){var t=this._front,n=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,n}},r.prototype.unshift=function(e){var t=this._length,n=arguments.length;if(1<n){if(t+n>(i=this._capacity)){for(var r=n-1;0<=r;r--){this._checkCapacity(t+1);var i=this._capacity;this[a=(this._front-1&i-1^i)-i]=arguments[r],t++,this._length=t,this._front=a}return t}var o=this._front;for(r=n-1;0<=r;r--){var a;this[a=(o-1&i-1^i)-i]=arguments[r],o=a}return this._front=o,this._length=t+n,t+n}return 0===n?t:(this._checkCapacity(t+1),i=this._capacity,this[r=(this._front-1&i-1^i)-i]=e,this._length=t+1,this._front=r,t+1)},r.prototype.peekBack=function(){var e=this._length;if(0!==e)return this[this._front+e-1&this._capacity-1]},r.prototype.peekFront=function(){if(0!==this._length)return this[this._front]},r.prototype.get=function(e){var t=e;if(t===(0|t)){var n=this._length;if(t<0&&(t+=n),!(t<0||n<=t))return this[this._front+t&this._capacity-1]}},r.prototype.isEmpty=function(){return 0===this._length},r.prototype.clear=function(){for(var e=this._length,t=this._front,n=this._capacity,r=0;r<e;++r)this[t+r&n-1]=void 0;this._length=0,this._front=0},r.prototype.valueOf=r.prototype.toString=function(){return this.toArray().toString()},r.prototype.removeFront=r.prototype.shift,r.prototype.removeBack=r.prototype.pop,r.prototype.insertFront=r.prototype.unshift,r.prototype.insertBack=r.prototype.push,r.prototype.enqueue=r.prototype.push,r.prototype.dequeue=r.prototype.shift,r.prototype.toJSON=r.prototype.toArray,Object.defineProperty(r.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(o(1.5*this._capacity+16))},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,r=this._length;t<n+r&&function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,n+r&t-1)};var i=Array.isArray;function o(e){if("number"!=typeof e){if(!i(e))return 16;e=e.length}return t=Math.min(Math.max(16,e),1073741824),t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16);var t}t.exports=r},{}],79:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.decodeHTML=n.decodeHTMLStrict=n.decodeXML=void 0;var s=r(e("./maps/entities.json")),l=r(e("./maps/legacy.json")),i=r(e("./maps/xml.json")),o=r(e("./decode_codepoint")),a=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function c(e){var t=f(e);return function(e){return String(e).replace(a,t)}}n.decodeXML=c(i.default),n.decodeHTMLStrict=c(s.default);var u=function(e,t){return e<t?1:-1};function f(n){return function(e){if("#"===e.charAt(1)){var t=e.charAt(2);return"X"===t||"x"===t?o.default(parseInt(e.substr(3),16)):o.default(parseInt(e.substr(2),10))}return n[e.slice(1,-1)]||e}}n.decodeHTML=function(){for(var e=Object.keys(l.default).sort(u),t=Object.keys(s.default).sort(u),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var i=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=f(s.default);function a(e){return";"!==e.substr(-1)&&(e+=";"),o(e)}return function(e){return String(e).replace(i,a)}}()},{"./decode_codepoint":80,"./maps/entities.json":84,"./maps/legacy.json":85,"./maps/xml.json":86}],80:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("./maps/decode.json")),o=String.fromCodePoint||function(e){var t="";return 65535<e&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)};n.default=function(e){return 55296<=e&&e<=57343||1114111<e?"�":(e in i.default&&(e=i.default[e]),o(e))}},{"./maps/decode.json":83}],81:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.escapeUTF8=n.escape=n.encodeNonAsciiHTML=n.encodeHTML=n.encodeXML=void 0;var i=u(r(e("./maps/xml.json")).default),o=f(i);n.encodeXML=m(i);var a,s,l=u(r(e("./maps/entities.json")).default),c=f(l);function u(n){return Object.keys(n).sort().reduce(function(e,t){return e[n[t]]="&"+t+";",e},{})}function f(e){for(var t=[],n=[],r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];1===o.length?t.push("\\"+o):n.push(o)}t.sort();for(var a=0;a<t.length-1;a++){for(var s=a;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var l=1+s-a;l<3||t.splice(a,l,t[a]+"-"+t[s])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}n.encodeHTML=(a=l,s=c,function(e){return e.replace(s,function(e){return a[e]}).replace(p,h)}),n.encodeNonAsciiHTML=m(l);var p=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,d=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function h(e){return"&#x"+(1<e.length?d(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var g=new RegExp(o.source+"|"+p.source,"g");function m(t){return function(e){return e.replace(g,function(e){return t[e]||h(e)})}}n.escape=function(e){return e.replace(g,h)},n.escapeUTF8=function(e){return e.replace(o,h)}},{"./maps/entities.json":84,"./maps/xml.json":86}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decodeXMLStrict=n.decodeHTML5Strict=n.decodeHTML4Strict=n.decodeHTML5=n.decodeHTML4=n.decodeHTMLStrict=n.decodeHTML=n.decodeXML=n.encodeHTML5=n.encodeHTML4=n.escapeUTF8=n.escape=n.encodeNonAsciiHTML=n.encodeHTML=n.encodeXML=n.encode=n.decodeStrict=n.decode=void 0;var r=e("./decode"),i=e("./encode");n.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},n.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},n.encode=function(e,t){return(!t||t<=0?i.encodeXML:i.encodeHTML)(e)};var o=e("./encode");Object.defineProperty(n,"encodeXML",{enumerable:!0,get:function(){return o.encodeXML}}),Object.defineProperty(n,"encodeHTML",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(n,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return o.encodeNonAsciiHTML}}),Object.defineProperty(n,"escape",{enumerable:!0,get:function(){return o.escape}}),Object.defineProperty(n,"escapeUTF8",{enumerable:!0,get:function(){return o.escapeUTF8}}),Object.defineProperty(n,"encodeHTML4",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(n,"encodeHTML5",{enumerable:!0,get:function(){return o.encodeHTML}});var a=e("./decode");Object.defineProperty(n,"decodeXML",{enumerable:!0,get:function(){return a.decodeXML}}),Object.defineProperty(n,"decodeHTML",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(n,"decodeHTMLStrict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(n,"decodeHTML4",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(n,"decodeHTML5",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(n,"decodeHTML4Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(n,"decodeHTML5Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(n,"decodeXMLStrict",{enumerable:!0,get:function(){return a.decodeXML}})},{"./decode":79,"./encode":81}],83:[function(e,t,n){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},{}],84:[function(e,t,n){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],85:[function(e,t,n){t.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},{}],86:[function(e,t,n){t.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},{}],87:[function(e,t,n){var r=e("prr");function s(e,t,n){t&&"string"!=typeof t&&(t=t.message||t.name),r(this,{type:e,name:e,cause:"string"!=typeof t?t:n,message:t},"ewr")}function l(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),s.call(this,"CustomError",e,t)}l.prototype=new Error,t.exports=function(a){var e=function(e,t){return n=a,r=e,(o=function(e,t){s.call(this,r,e,t),"FilesystemError"==r&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(n.errno[this.cause.errno]?n.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,o)}).prototype=(i=t)?new i:new l,o;var n,r,i,o};return{CustomError:l,FilesystemError:e("FilesystemError"),createError:e}}},{prr:182}],88:[function(e,t,n){var r=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},r.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":87}],89:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(e){i=!1}function u(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=l(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=u(e))&&0<i&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(p,r);return i.listener=n,r.wrapFn=i}function h(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=m(e,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=m(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=m(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=m(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=m(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,c,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,d(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,d(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var i,o=a(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},r.prototype.listenerCount=g,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],90:[function(e,n,t){!function(){"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),t={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):void 0!==n&&n.exports?n.exports=t:window.ExecutionEnvironment=t}()},{}],91:[function(e,t,n){"use strict";t.exports=function(e){return new v(e||o,null)};var p=0,d=1;function h(e,t,n,r,i,o){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=o}function l(e){return new h(e._color,e.key,e.value,e.left,e.right,e._count)}function g(e,t){return new h(e,t.key,t.value,t.left,t.right,t._count)}function m(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function v(e,t){this._compare=e,this.root=t}var r=v.prototype;function a(e,t){this.tree=e,this._stack=t}Object.defineProperty(r,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}}),Object.defineProperty(r,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}}),Object.defineProperty(r,"length",{get:function(){return this.root?this.root._count:0}}),r.insert=function(e,t){for(var n=this._compare,r=this.root,i=[],o=[];r;){var a=n(e,r.key);i.push(r),o.push(a),r=a<=0?r.left:r.right}i.push(new h(p,e,t,null,null,1));for(var s=i.length-2;0<=s;--s)r=i[s],o[s]<=0?i[s]=new h(r._color,r.key,r.value,i[s+1],r.right,r._count+1):i[s]=new h(r._color,r.key,r.value,r.left,i[s+1],r._count+1);for(s=i.length-1;1<s;--s){var l=i[s-1];if(r=i[s],l._color===d||r._color===d)break;var c=i[s-2];if(c.left===l)if(l.left===r){if(!(u=c.right)||u._color!==p){c._color=p,c.left=l.right,l._color=d,l.right=c,i[s-2]=l,i[s-1]=r,m(c),m(l),3<=s&&((f=i[s-3]).left===c?f.left=l:f.right=l);break}l._color=d,c.right=g(d,u),c._color=p,s-=1}else{if(!(u=c.right)||u._color!==p){l.right=r.left,c._color=p,c.left=r.right,r._color=d,r.left=l,r.right=c,i[s-2]=r,i[s-1]=l,m(c),m(l),m(r),3<=s&&((f=i[s-3]).left===c?f.left=r:f.right=r);break}l._color=d,c.right=g(d,u),c._color=p,s-=1}else if(l.right===r){if(!(u=c.left)||u._color!==p){c._color=p,c.right=l.left,l._color=d,l.left=c,i[s-2]=l,i[s-1]=r,m(c),m(l),3<=s&&((f=i[s-3]).right===c?f.right=l:f.left=l);break}l._color=d,c.left=g(d,u),c._color=p,s-=1}else{var u;if(!(u=c.left)||u._color!==p){var f;l.left=r.right,c._color=p,c.right=r.left,r._color=d,r.right=l,r.left=c,i[s-2]=r,i[s-1]=l,m(c),m(l),m(r),3<=s&&((f=i[s-3]).right===c?f.right=r:f.left=r);break}l._color=d,c.left=g(d,u),c._color=p,s-=1}}return i[0]._color=d,new v(n,i[0])},r.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return function e(t,n){var r;return n.left&&(r=e(t,n.left))?r:(r=t(n.key,n.value))||(n.right?e(t,n.right):void 0)}(e,this.root);case 2:return function e(t,n,r,i){if(n(t,i.key)<=0){var o;if(i.left&&(o=e(t,n,r,i.left)))return o;if(o=r(i.key,i.value))return o}if(i.right)return e(t,n,r,i.right)}(t,this._compare,e,this.root);case 3:if(0<=this._compare(t,n))return;return function e(t,n,r,i,o){var a,s=r(t,o.key),l=r(n,o.key);if(s<=0){if(o.left&&(a=e(t,n,r,i,o.left)))return a;if(0<l&&(a=i(o.key,o.value)))return a}if(0<l&&o.right)return e(t,n,r,i,o.right)}(t,n,this._compare,e,this.root)}},Object.defineProperty(r,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new a(this,e)}}),Object.defineProperty(r,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new a(this,e)}}),r.at=function(e){if(e<0)return new a(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new a(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new a(this,[])},r.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<=0&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new a(this,r)},r.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o<0&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new a(this,r)},r.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0<o&&(i=r.length),n=o<=0?n.left:n.right}return r.length=i,new a(this,r)},r.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0<=o&&(i=r.length),n=o<0?n.left:n.right}return r.length=i,new a(this,r)},r.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new a(this,r);n=i<=0?n.left:n.right}return new a(this,[])},r.remove=function(e){var t=this.find(e);return t?t.remove():this},r.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var i=a.prototype;function c(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function o(e,t){return e<t?-1:t<e?1:0}Object.defineProperty(i,"valid",{get:function(){return 0<this._stack.length}}),Object.defineProperty(i,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0}),i.clone=function(){return new a(this.tree,this._stack.slice())},i.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new h(n._color,n.key,n.value,n.left,n.right,n._count);for(var r=e.length-2;0<=r;--r)(n=e[r]).left===e[r+1]?t[r]=new h(n._color,n.key,n.value,t[r+1],n.right,n._count):t[r]=new h(n._color,n.key,n.value,n.left,t[r+1],n._count);if((n=t[t.length-1]).left&&n.right){var i=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var o=t[i-1];for(t.push(new h(n._color,o.key,o.value,n.left,n.right,n._count)),t[i-1].key=n.key,t[i-1].value=n.value,r=t.length-2;i<=r;--r)n=t[r],t[r]=new h(n._color,n.key,n.value,n.left,t[r+1],n._count);t[i-1].left=t[i]}if((n=t[t.length-1])._color===p){var a=t[t.length-2];for(a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop(),r=0;r<t.length;++r)t[r]._count--;return new v(this.tree._compare,t[0])}if(n.left||n.right){for(n.left?c(n,n.left):n.right&&c(n,n.right),n._color=d,r=0;r<t.length-1;++r)t[r]._count--;return new v(this.tree._compare,t[0])}if(1===t.length)return new v(this.tree._compare,null);for(r=0;r<t.length;++r)t[r]._count--;var s=t[t.length-2];return function(e){for(var t,n,r,i,o=e.length-1;0<=o;--o){if(t=e[o],0===o)return t._color=d;if((n=e[o-1]).left===t){if((r=n.right).right&&r.right._color===p)return i=(r=n.right=l(r)).right=l(r.right),n.right=r.left,r.left=n,r.right=i,r._color=n._color,t._color=d,n._color=d,i._color=d,m(n),m(r),1<o&&((a=e[o-2]).left===n?a.left=r:a.right=r),e[o-1]=r;if(r.left&&r.left._color===p)return i=(r=n.right=l(r)).left=l(r.left),n.right=i.left,r.left=i.right,i.left=n,i.right=r,i._color=n._color,n._color=d,r._color=d,t._color=d,m(n),m(r),m(i),1<o&&((a=e[o-2]).left===n?a.left=i:a.right=i),e[o-1]=i;if(r._color===d){if(n._color===p)return n._color=d,n.right=g(p,r);n.right=g(p,r);continue}r=l(r),n.right=r.left,r.left=n,r._color=n._color,n._color=p,m(n),m(r),1<o&&((a=e[o-2]).left===n?a.left=r:a.right=r),e[o-1]=r,e[o]=n,o+1<e.length?e[o+1]=t:e.push(t),o+=2}else{if((r=n.left).left&&r.left._color===p)return i=(r=n.left=l(r)).left=l(r.left),n.left=r.right,r.right=n,r.left=i,r._color=n._color,t._color=d,n._color=d,i._color=d,m(n),m(r),1<o&&((a=e[o-2]).right===n?a.right=r:a.left=r),e[o-1]=r;if(r.right&&r.right._color===p)return i=(r=n.left=l(r)).right=l(r.right),n.left=i.right,r.right=i.left,i.right=n,i.left=r,i._color=n._color,n._color=d,r._color=d,t._color=d,m(n),m(r),m(i),1<o&&((a=e[o-2]).right===n?a.right=i:a.left=i),e[o-1]=i;if(r._color===d){if(n._color===p)return n._color=d,n.left=g(p,r);n.left=g(p,r);continue}var a;r=l(r),n.left=r.right,r.right=n,r._color=n._color,n._color=p,m(n),m(r),1<o&&((a=e[o-2]).right===n?a.right=r:a.left=r),e[o-1]=r,e[o]=n,o+1<e.length?e[o+1]=t:e.push(t),o+=2}}}(t),s.left===n?s.left=null:s.right=null,new v(this.tree._compare,t[0])},Object.defineProperty(i,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(i,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(i,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;0<=r;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),i.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();0<e.length&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(i,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].left===e[t])return!0;return!1}}),i.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new h(r._color,r.key,e,r.left,r.right,r._count);for(var i=t.length-2;0<=i;--i)(r=t[i]).left===t[i+1]?n[i]=new h(r._color,r.key,r.value,n[i+1],r.right,r._count):n[i]=new h(r._color,r.key,r.value,r.left,n[i+1],r._count);return new v(this.tree._compare,n[0])},i.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();0<e.length&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(i,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],92:[function(e,t,n){"use strict";var r=e("react-is"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function p(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var d=Object.defineProperty,h=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,y=Object.prototype;t.exports=function e(t,n,r){if("string"!=typeof n){if(y){var i=v(n);i&&i!==y&&e(t,i,r)}var o=h(n);g&&(o=o.concat(g(n)));for(var a=p(t),s=p(n),l=0;l<o.length;++l){var c=o[l];if(!(f[c]||r&&r[c]||s&&s[c]||a&&a[c])){var u=m(n,c);try{d(t,c,u)}catch(t){}}}}return t}},{"react-is":188}],93:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?i-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;0<u;o=256*o+e[t+f],f+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+f],f+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,f=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+f?p/l:p*Math.pow(2,1-f))*l&&(a++,l/=2),u<=a+f?(s=0,a=u):1<=a+f?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;e[n+d]=255&a,d+=h,a/=256,c-=8);e[n+d-h]|=128*g}},{}],94:[function(e,u,t){(function(c){(function(){"use strict";var t,r,e=c.MutationObserver||c.WebKitMutationObserver;if(e){var n=0,i=new e(l),o=c.document.createTextNode("");i.observe(o,{characterData:!0}),t=function(){o.data=n=++n%2}}else if(c.setImmediate||void 0===c.MessageChannel)t="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var e=c.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},c.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var a=new c.MessageChannel;a.port1.onmessage=l,t=function(){a.port2.postMessage(0)}}var s=[];function l(){var e,t;r=!0;for(var n=s.length;n;){for(t=s,s=[],e=-1;++e<n;)t[e]();n=s.length}r=!1}u.exports=function(e){1!==s.push(e)||r||t()}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],96:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},{}],97:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],98:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],99:[function(e,t,n){var r=e("./lib/encodings");function i(e){if(!(this instanceof i))return new i(e);this.opts=e||{},this.encodings=r}(t.exports=i).prototype._encoding=function(e){return"string"==typeof e&&(e=r[e]),e||(e=r.id),e},i.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},i.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},i.prototype.encodeKey=function(e,t,n){return this._keyEncoding(t,n).encode(e)},i.prototype.encodeValue=function(e,t,n){return this._valueEncoding(t,n).encode(e)},i.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},i.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},i.prototype.encodeBatch=function(e,n){var r=this;return e.map(function(e){var t={type:e.type,key:r.encodeKey(e.key,n,e)};return r.keyAsBuffer(n,e)&&(t.keyEncoding="binary"),e.prefix&&(t.prefix=e.prefix),"value"in e&&(t.value=r.encodeValue(e.value,n,e),r.valueAsBuffer(n,e)&&(t.valueEncoding="binary")),t})};var o=["lt","gt","lte","gte","start","end"];i.prototype.encodeLtgt=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=-1<o.indexOf(e)?n.encodeKey(t[e],t):t[e]}),r},i.prototype.createStreamDecoder=function(n){var r=this;return n.keys&&n.values?function(e,t){return{key:r.decodeKey(e,n),value:r.decodeValue(t,n)}}:n.keys?function(e){return r.decodeKey(e,n)}:n.values?function(e,t){return r.decodeValue(t,n)}:function(){}},i.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},i.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},{"./lib/encodings":100}],100:[function(e,t,i){(function(r){(function(){i.utf8=i["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:e,buffer:!1,type:"utf8"},i.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},i.binary={encode:function(e){return n(e)?e:r.from(e)},decode:e,buffer:!0,type:"binary"},i.none={encode:e,decode:e,buffer:!1,type:"id"},i.id=i.none;function e(e){return e}function n(e){return null==e||r.isBuffer(e)}["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach(function(t){i[t]={encode:function(e){return n(e)?e:r.from(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this)}).call(this,e("buffer").Buffer)},{buffer:62}],101:[function(e,t,n){var r=e("errno").create,i=r("LevelUPError"),o=r("NotFoundError",i);o.prototype.notFound=!0,o.prototype.status=404,t.exports={LevelUPError:i,InitializationError:r("InitializationError",i),OpenError:r("OpenError",i),ReadError:r("ReadError",i),WriteError:r("WriteError",i),NotFoundError:o,EncodingError:r("EncodingError",i)}},{errno:88}],102:[function(e,t,n){var r=e("inherits"),i=e("readable-stream").Readable,o=e("xtend");function a(e,t){if(!(this instanceof a))return new a(e,t);t=t||{},i.call(this,o(t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}r(t.exports=a,i),a.prototype._read=function(){var r=this,i=this._options;this.destroyed||this._iterator.next(function(e,t,n){if(!r.destroyed)return e?r.destroy(e):void(void 0===t&&void 0===n?r.push(null):!1!==i.keys&&!1===i.values?r.push(t):!1===i.keys&&!1!==i.values?r.push(n):r.push({key:t,value:n}))})},a.prototype._destroy=function(t,n){this._iterator.end(function(e){n(t||e)})}},{inherits:95,"readable-stream":117,xtend:291}],103:[function(e,t,n){"use strict";var r={};function i(e,i,t){t||(t=Error);var n=function(r){function e(e,t,n){return r.call(this,"string"==typeof i?i:i(e,t,n))||this}return n=r,(t=e).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n,e;var t,n}(t);n.prototype.name=t.name,n.prototype.code=e,r[e]=n}function h(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,o,a,s,l,c,u,f,p;if("string"==typeof t&&(f="not ",t.substr(!p||p<0?0:+p,f.length)===f)?(r="must not be",t=t.replace(/^not /,"")):r="must be",l=e,c=" argument",(void 0===u||u>l.length)&&(u=l.length),l.substring(u-c.length,u)===c)i="The ".concat(e," ").concat(r," ").concat(h(t,"type"));else{var d=("number"!=typeof s&&(s=0),s+(a=".").length>(o=e).length||-1===o.indexOf(a,s)?"argument":"property");i='The "'.concat(e,'" ').concat(d," ").concat(r," ").concat(h(t,"type"))}return i+". Received type ".concat(typeof n)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],104:[function(u,f,e){(function(c){(function(){"use strict";var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};f.exports=a;var t=u("./_stream_readable"),n=u("./_stream_writable");u("inherits")(a,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];a.prototype[o]||(a.prototype[o]=n.prototype[o])}function a(e){if(!(this instanceof a))return new a(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||c.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,u("_process"))},{"./_stream_readable":106,"./_stream_writable":108,_process:178,inherits:95}],105:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":107,inherits:95}],106:[function(q,U,e){(function(B,F){(function(){"use strict";var r;(U.exports=w).ReadableState=_;q("events").EventEmitter;var h=function(e,t){return e.listeners(t).length},i=q("./internal/streams/stream"),p=q("buffer").Buffer,d=F.Uint8Array||function(){};var g,e=q("util");g=e&&e.debuglog?e.debuglog("stream"):function(){};var o,t,n,a=q("./internal/streams/buffer_list"),s=q("./internal/streams/destroy"),l=q("./internal/streams/state").getHighWaterMark,c=q("../errors").codes,m=c.ERR_INVALID_ARG_TYPE,v=c.ERR_STREAM_PUSH_AFTER_EOF,u=c.ERR_METHOD_NOT_IMPLEMENTED,y=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;q("inherits")(w,i);var b=s.errorOrDestroy,f=["error","close","destroy","pause","resume"];function _(e,t,n){r=r||q("./_stream_duplex"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=l(this,e,"readableHighWaterMark",n),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o||(o=q("string_decoder/").StringDecoder),this.decoder=new o(e.encoding),this.encoding=e.encoding)}function w(e){if(r=r||q("./_stream_duplex"),!(this instanceof w))return new w(e);var t=this instanceof r;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function E(e,t,n,r,i){g("readableAddChunk",t);var o,a,s,l,c,u,f=e._readableState;if(null===t)f.reading=!1,function(e,t){if(g("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}}(e,f);else if(i||(s=f,u=l=t,p.isBuffer(u)||u instanceof d||"string"==typeof l||void 0===l||s.objectMode||(c=new m("chunk",["string","Buffer","Uint8Array"],l)),o=c),o)b(e,o);else if(f.objectMode||t&&0<t.length)if("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===p.prototype||(a=t,t=p.from(a)),r)f.endEmitted?b(e,new y):k(e,f,t,!0);else if(f.ended)b(e,new v);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!n?(t=f.decoder.write(t),f.objectMode||0!==t.length?k(e,f,t,!1):A(e,f)):k(e,f,t,!1)}else r||(f.reading=!1,A(e,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function k(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),A(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=s.destroy,w.prototype._undestroy=s.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=p.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},w.prototype.unshift=function(e){return E(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){o||(o=q("string_decoder/").StringDecoder);var t=new o(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var x=1073741824;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(x<=(n=e)?n=x:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function C(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,B.nextTick(T,e))}function T(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function A(e,t){t.readingMore||(t.readingMore=!0,B.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(g("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function N(e){g("readable nexttick read 0"),e.read(0)}function I(e,t){g("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var t=e._readableState;g("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,B.nextTick(j,t,e))}function j(e,t){if(g("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}w.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return g("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):C(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return g("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&g("length less than watermark",i=!0),t.ended||t.reading?g("reading or ended",i=!1):i&&(g("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=0<e?R(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(e){b(this,new u("_read()"))},w.prototype.pipe=function(r,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=r;break;case 1:o.pipes=[o.pipes,r];break;default:o.pipes.push(r)}o.pipesCount+=1,g("pipe count=%d opts=%j",o.pipesCount,e);var t=e&&!1===e.end||r===B.stdout||r===B.stderr?d:a;function a(){g("onend"),r.end()}o.endEmitted?B.nextTick(t):i.once("end",t),r.on("unpipe",function e(t,n){g("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,g("cleanup"),r.removeListener("close",f),r.removeListener("finish",p),r.removeListener("drain",s),r.removeListener("error",u),r.removeListener("unpipe",e),i.removeListener("end",a),i.removeListener("end",d),i.removeListener("data",c),l=!0,!o.awaitDrain||r._writableState&&!r._writableState.needDrain||s())});var n,s=(n=i,function(){var e=n._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&h(n,"data")&&(e.flowing=!0,L(n))});r.on("drain",s);var l=!1;function c(e){g("ondata");var t=r.write(e);g("dest.write",t),!1===t&&((1===o.pipesCount&&o.pipes===r||1<o.pipesCount&&-1!==M(o.pipes,r))&&!l&&(g("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function u(e){g("onerror",e),d(),r.removeListener("error",u),0===h(r,"error")&&b(r,e)}function f(){r.removeListener("finish",p),d()}function p(){g("onfinish"),r.removeListener("close",f),d()}function d(){g("unpipe"),i.unpipe(r)}return i.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(r,"error",u),r.once("close",f),r.once("finish",p),r.emit("pipe",i),o.flowing||(g("pipe resume"),i.resume()),r},w.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=M(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},w.prototype.addListener=w.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,g("on readable",r.length,r.reading),r.length?C(this):r.reading||B.nextTick(N,this))),n},w.prototype.removeListener=function(e,t){var n=i.prototype.removeListener.call(this,e,t);return"readable"===e&&B.nextTick(P,this),n},w.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||B.nextTick(P,this),t},w.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(g("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,B.nextTick(I,e,t))),n.paused=!1,this},w.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){if(g("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){g("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<f.length;o++)t.on(f[o],this.emit.bind(this,f[o]));return this._read=function(e){g("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===t&&(t=q("./internal/streams/async_iterator")),t(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=R,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return void 0===n&&(n=q("./internal/streams/from")),n(w,e,t)})}).call(this)}).call(this,q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/async_iterator":109,"./internal/streams/buffer_list":110,"./internal/streams/destroy":111,"./internal/streams/from":113,"./internal/streams/state":115,"./internal/streams/stream":116,_process:178,buffer:62,events:89,inherits:95,"string_decoder/":272,util:61}],107:[function(e,t,n){"use strict";t.exports=c;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(e,t){f(n,e,t)})}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":103,"./_stream_duplex":104,inherits:95}],108:[function(N,I,e){(function(O,P){(function(){"use strict";function f(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;(I.exports=h).WritableState=d;var e={deprecate:N("util-deprecate")},n=N("./internal/streams/stream"),m=N("buffer").Buffer,v=P.Uint8Array||function(){};var r,t=N("./internal/streams/destroy"),o=N("./internal/streams/state").getHighWaterMark,a=N("../errors").codes,y=a.ERR_INVALID_ARG_TYPE,s=a.ERR_METHOD_NOT_IMPLEMENTED,p=a.ERR_MULTIPLE_CALLBACK,l=a.ERR_STREAM_CANNOT_PIPE,c=a.ERR_STREAM_DESTROYED,b=a.ERR_STREAM_NULL_VALUES,_=a.ERR_STREAM_WRITE_AFTER_END,u=a.ERR_UNKNOWN_ENCODING,w=t.errorOrDestroy;function E(){}function d(e,t,n){i=i||N("./_stream_duplex"),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=o(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new p;if(f=n,f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0,t)a=e,s=n,l=r,c=t,u=i,--s.pendingcb,l?(O.nextTick(u,c),O.nextTick(A,a,s),a._writableState.errorEmitted=!0,w(a,c)):(u(c),a._writableState.errorEmitted=!0,w(a,c),A(a,s));else{var o=C(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),r?O.nextTick(x,e,n,o,i):x(e,n,o,i)}var a,s,l,c,u;var f}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function h(e){var t=this instanceof(i=i||N("./_stream_duplex"));if(!t&&!r.call(h,this))return new h(e);this._writableState=new d(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function k(e,t,n,r,i,o){if(!n){var a=(l=r,c=i,(s=t).objectMode||!1===s.decodeStrings||"string"!=typeof l||(l=m.from(l,c)),l);r!==a&&(n=!0,i="buffer",r=a)}var s,l,c,u=t.objectMode?1:r.length;t.length+=u;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,u,r,i,o);return f}function g(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new c("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),A(e,t)}function S(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,g(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback;if(g(e,t,!1,t.objectMode?1:l.length,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(t,n){t._final(function(e){n.pendingcb--,e&&w(t,e),n.prefinished=!0,t.emit("prefinish"),A(t,n)})}function A(e,t){var n,r,i=C(t);if(i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,O.nextTick(T,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return i}N("inherits")(h,n),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function(e){return!!r.call(this,e)||this===h&&e&&e._writableState instanceof d}})):r=function(e){return e instanceof this},h.prototype.pipe=function(){w(this,new l)},h.prototype.write=function(e,t,n){var r,i,o,a,s,l,c,u,f,p,d=this._writableState,h=!1,g=!d.objectMode&&(r=e,m.isBuffer(r)||r instanceof v);return g&&!m.isBuffer(e)&&(p=e,e=m.from(p)),"function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=d.defaultEncoding),"function"!=typeof n&&(n=E),d.ending?(c=this,u=n,f=new _,w(c,f),O.nextTick(u,f)):(g||(i=this,o=d,s=n,null===(a=e)?l=new b:"string"==typeof a||o.objectMode||(l=new y("chunk",["string","Buffer"],a)),!l||(w(i,l),O.nextTick(s,l),!1)))&&(d.pendingcb++,h=k(this,d,g,e,t,n)),h},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||S(this,e))},h.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new u(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),h.prototype._write=function(e,t,n){n(new s("_write()"))},h.prototype._writev=null,h.prototype.end=function(e,t,n){var r,i,o,a=this._writableState;return"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||(r=this,o=n,(i=a).ending=!0,A(r,i),o&&(i.finished?O.nextTick(o):r.once("finish",o)),i.ended=!0,r.writable=!1),this},Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),h.prototype.destroy=t.destroy,h.prototype._undestroy=t.undestroy,h.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,N("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/destroy":111,"./internal/streams/state":115,"./internal/streams/stream":116,_process:178,buffer:62,inherits:95,"util-deprecate":285}],109:[function(r,m,e){(function(g){(function(){"use strict";var e;function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=r("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function d(e){var t=e[o];if(null!==t){var n=e[f].read();null!==n&&(e[c]=null,e[o]=null,e[a]=null,t(p(n,!1)))}}var t=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((n(e={get stream(){return this[f]},next:function(){var n=this,e=this[s];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,t){g.nextTick(function(){n[s]?t(n[s]):e(p(void 0,!0))})});var t,r,i,o=this[c];if(o)t=new Promise((r=o,i=this,function(e,t){r.then(function(){i[l]?e(p(void 0,!0)):i[u](e,t)},t)}));else{var a=this[f].read();if(null!==a)return Promise.resolve(p(a,!1));t=new Promise(this[u])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,n){e[f].destroy(null,function(e){e?n(e):t(p(void 0,!0))})})}),e),t);m.exports=function(e){var t,r=Object.create(h,(n(t={},f,{value:e,writable:!0}),n(t,o,{value:null,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,u,{value:function(e,t){var n=r[f].read();n?(r[c]=null,r[o]=null,r[a]=null,e(p(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[o]=null,r[a]=null,t(e)),void(r[s]=e)}var n=r[o];null!==n&&(r[c]=null,r[o]=null,n(p(void 0,!(r[a]=null)))),r[l]=!0}),e.on("readable",function(e){g.nextTick(d,e)}.bind(null,r)),r}}).call(this)}).call(this,r("_process"))},{"./end-of-stream":112,_process:178}],110:[function(e,t,n){"use strict";function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,o=e("util").inspect,l=o&&o.custom||"inspect";t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t=s.allocUnsafe(e>>>0),n=this.head,r=0;n;)i=n.data,o=t,a=r,s.prototype.copy.call(i,o,a),r+=n.data.length,n=n.next;var i,o,a;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(o);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=i.slice(o);break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return o(this,function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,n),r&&i(t,r),e;var t,n,r}()},{buffer:62,util:61}],111:[function(e,t,n){(function(l){(function(){"use strict";function o(e,t){s(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(s,this,e)):l.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?l.nextTick(a,n):(n._writableState.errorEmitted=!0,l.nextTick(o,n,e)):l.nextTick(o,n,e):t?(l.nextTick(a,n),t(e)):l.nextTick(a,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:178}],112:[function(e,t,n){"use strict";var v=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function y(){}t.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);var i,o;n||(n={}),i=r||y,o=!1,r=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}};var a,s=n.readable||!1!==n.readable&&t.readable,l=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||f()},u=t._writableState&&t._writableState.finished,f=function(){u=!(l=!1),s||r.call(t)},p=t._readableState&&t._readableState.endEmitted,d=function(){p=!(s=!1),l||r.call(t)},h=function(e){r.call(t,e)},g=function(){var e;return s&&!p?(t._readableState&&t._readableState.ended||(e=new v),r.call(t,e)):l&&!u?(t._writableState&&t._writableState.ended||(e=new v),r.call(t,e)):void 0},m=function(){t.req.on("finish",f)};return(a=t).setHeader&&"function"==typeof a.abort?(t.on("complete",f),t.on("abort",g),t.req?m():t.on("request",m)):l&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",d),t.on("finish",f),!1!==n.error&&t.on("error",h),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",m),t.req&&t.req.removeListener("finish",f),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",g)}}},{"../../../errors":103}],113:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],114:[function(l,e,t){"use strict";var c;var n=l("../../../errors").codes,s=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function f(e){if(e)throw e}function p(e){e()}function d(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var i,n,o=(n=r).length?"function"!=typeof n[n.length-1]?f:n.pop():f;if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var a=r.map(function(e,t){var n=t<r.length-1;return function(n,e,t,r){var i,o;i=r,o=!1;var a=!(r=function(){o||(o=!0,i.apply(void 0,arguments))});n.on("close",function(){a=!0}),void 0===c&&(c=l("./end-of-stream")),c(n,{readable:e,writable:t},function(e){if(e)return r(e);a=!0,r()});var s=!1;return function(e){if(!a&&!s)return s=!0,(t=n).setHeader&&"function"==typeof t.abort?n.abort():"function"==typeof n.destroy?n.destroy():void r(e||new u("pipe"));var t}}(e,n,0<t,function(e){i||(i=e),e&&a.forEach(p),n||(a.forEach(p),o(i))})});return r.reduce(d)}},{"../../../errors":103,"./end-of-stream":112}],115:[function(e,t,n){"use strict";var l=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,r){var i,o,a,s=(o=r,a=n,null!=(i=t).highWaterMark?i.highWaterMark:o?i[a]:null);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new l(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},{"../../../errors":103}],116:[function(e,t,n){t.exports=e("events").EventEmitter},{events:89}],117:[function(e,t,n){(((n=t.exports=e("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":104,"./lib/_stream_passthrough.js":105,"./lib/_stream_readable.js":106,"./lib/_stream_transform.js":107,"./lib/_stream_writable.js":108,"./lib/internal/streams/end-of-stream.js":112,"./lib/internal/streams/pipeline.js":114}],118:[function(e,t,n){var o=e("level-errors").WriteError,a=e("./promisify"),s=e("./common").getCallback,l=e("./common").getOptions;function r(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[],this.length=0}r.prototype.put=function(e,t){try{this.batch.put(e,t)}catch(e){throw new o(e)}return this.ops.push({type:"put",key:e,value:t}),this.length++,this},r.prototype.del=function(e){try{this.batch.del(e)}catch(e){throw new o(e)}return this.ops.push({type:"del",key:e}),this.length++,this},r.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new o(e)}return this.ops=[],this.length=0,this},r.prototype.write=function(e,t){var n,r=this._levelup,i=this.ops;(t=s(e,t))||(n=(t=a()).promise),e=l(e);try{this.batch.write(e,function(e){if(e)return t(new o(e));r.emit("batch",i),t()})}catch(e){throw new o(e)}return n},t.exports=r},{"./common":119,"./promisify":121,"level-errors":101}],119:[function(e,t,n){n.getCallback=function(e,t){return"function"==typeof e?e:t},n.getOptions=function(e){return"object"==typeof e&&null!==e?e:{}}},{}],120:[function(b,_,e){(function(y){(function(){var i=b("events").EventEmitter,e=b("util").inherits,t=b("xtend"),o=b("deferred-leveldown"),n=b("level-iterator-stream"),a=b("./batch"),r=b("level-errors"),s=b("assert"),l=b("./promisify"),c=b("./common").getCallback,u=b("./common").getOptions,f=r.WriteError,p=r.ReadError,d=r.NotFoundError,h=r.OpenError,g=r.InitializationError;function m(e,t,n){if(!(this instanceof m))return new m(e,t,n);var r;if(i.call(this),this.setMaxListeners(1/0),"function"==typeof t&&(n=t,t={}),t=t||{},!e||"object"!=typeof e){if(r=new g("First argument must be an abstract-leveldown compliant store"),"function"==typeof n)return y.nextTick(n,r);throw r}s.strictEqual(typeof e.status,"string",".status required, old abstract-leveldown"),this.options=u(t),this._db=e,this.db=new o(e),this.open(n)}function v(e,t){if(!e._isOpening()&&!e.isOpen())return y.nextTick(t,new p("Database is not open")),!0}m.prototype.emit=i.prototype.emit,m.prototype.once=i.prototype.once,e(m,i),m.prototype.open=function(e,t){var n,r=this;return"function"==typeof e&&(t=e,e=null),t||(n=(t=l()).promise),e||(e=this.options),this.isOpen()?y.nextTick(t,null,r):this._isOpening()?this.once("open",function(){t(null,r)}):(this.emit("opening"),this.db.open(e,function(e){if(e)return t(new h(e));r.db=r._db,t(null,r),r.emit("open"),r.emit("ready")})),n},m.prototype.close=function(e){var t,n=this;return e||(t=(e=l()).promise),this.isOpen()?(this.db.close(function(){n.emit("closed"),e.apply(null,arguments)}),this.emit("closing"),this.db=new o(this._db)):this.isClosed()?y.nextTick(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",function(){n.close(e)}),t},m.prototype.isOpen=function(){return"open"===this.db.status},m.prototype._isOpening=function(){return"opening"===this.db.status},m.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},m.prototype.get=function(n,e,r){if(null==n)throw new p("get() requires a key argument");var t;return(r=c(e,r))||(t=(r=l()).promise),v(this,r)||(e=u(e),this.db.get(n,e,function(e,t){if(e)return e=/notfound/i.test(e)||e.notFound?new d("Key not found in database ["+n+"]",e):new p(e),r(e);r(null,t)})),t},m.prototype.put=function(t,n,e,r){if(null==t)throw new f("put() requires a key argument");var i,o=this;return(r=c(e,r))||(i=(r=l()).promise),v(this,r)||(e=u(e),this.db.put(t,n,e,function(e){if(e)return r(new f(e));o.emit("put",t,n),r()})),i},m.prototype.del=function(t,e,n){if(null==t)throw new f("del() requires a key argument");var r,i=this;return(n=c(e,n))||(r=(n=l()).promise),v(this,n)||(e=u(e),this.db.del(t,e,function(e){if(e)return n(new f(e));i.emit("del",t),n()})),r},m.prototype.batch=function(t,e,n){if(!arguments.length)return new a(this);if(!Array.isArray(t))throw new f("batch() requires an array argument");var r,i=this;return(n=c(e,n))||(r=(n=l()).promise),v(this,n)||(e=u(e),this.db.batch(t,e,function(e){if(e)return n(new f(e));i.emit("batch",t),n()})),r},m.prototype.iterator=function(e){return this.db.iterator(e)},m.prototype.readStream=m.prototype.createReadStream=function(e){return"number"!=typeof(e=t({keys:!0,values:!0},e)).limit&&(e.limit=-1),new n(this.db.iterator(e),e)},m.prototype.keyStream=m.prototype.createKeyStream=function(e){return this.createReadStream(t(e,{keys:!0,values:!1}))},m.prototype.valueStream=m.prototype.createValueStream=function(e){return this.createReadStream(t(e,{keys:!1,values:!0}))},m.prototype.toString=function(){return"LevelUP"},m.errors=r,_.exports=m.default=m}).call(this)}).call(this,b("_process"))},{"./batch":118,"./common":119,"./promisify":121,_process:178,assert:55,"deferred-leveldown":127,events:89,"level-errors":101,"level-iterator-stream":102,util:288,xtend:291}],121:[function(e,t,n){t.exports=function(){var e,t=new Promise(function(n,r){e=function(e,t){e?r(e):n(t)}});return e.promise=t,e}},{}],122:[function(e,t,n){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},r.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},r.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},r.prototype._del=function(e){this._operations.push({type:"del",key:e})},r.prototype.clear=function(){return this._checkWritten(),this._clear(),this},r.prototype._clear=function(){this._operations=[]},r.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},r.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},t.exports=r},{}],123:[function(e,t,n){(function(n){(function(){function e(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}e.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?n.nextTick(e,new Error("cannot call next() after end()")):t._nexting?n.nextTick(e,new Error("cannot call next() before previous next() has completed")):(t._nexting=!0,t._next(function(){t._nexting=!1,e.apply(null,arguments)})),t},e.prototype._next=function(e){n.nextTick(e)},e.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},e.prototype._seek=function(e){},e.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return n.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},e.prototype._end=function(e){n.nextTick(e)},t.exports=e}).call(this)}).call(this,e("_process"))},{_process:178}],124:[function(i,o,e){(function(r,c){(function(){var l=i("xtend"),t=i("./abstract-iterator"),e=i("./abstract-chained-batch"),a=Object.prototype.hasOwnProperty,s="start end gt gte lt lte".split(" ");function n(){this.status="new"}n.prototype.open=function(e,t){var n=this,r=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,function(e){if(e)return n.status=r,t(e);n.status="open",t()})},n.prototype._open=function(e,t){c.nextTick(t)},n.prototype.close=function(t){var n=this,r=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");this.status="closing",this._close(function(e){if(e)return n.status=r,t(e);n.status="closed",t()})},n.prototype._close=function(e){c.nextTick(e)},n.prototype.get=function(e,t,n){if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");var r=this._checkKey(e);if(r)return c.nextTick(n,r);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,n)},n.prototype._get=function(e,t,n){c.nextTick(function(){n(new Error("NotFound"))})},n.prototype.put=function(e,t,n,r){if("function"==typeof n&&(r=n),"function"!=typeof r)throw new Error("put() requires a callback argument");var i=this._checkKey(e)||this._checkValue(t);if(i)return c.nextTick(r,i);e=this._serializeKey(e),t=this._serializeValue(t),"object"==typeof n&&null!==n||(n={}),this._put(e,t,n,r)},n.prototype._put=function(e,t,n,r){c.nextTick(r)},n.prototype.del=function(e,t,n){if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");var r=this._checkKey(e);if(r)return c.nextTick(n,r);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),this._del(e,t,n)},n.prototype._del=function(e,t,n){c.nextTick(n)},n.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return c.nextTick(n,new Error("batch(array) requires an array argument"));if(0===e.length)return c.nextTick(n);"object"==typeof t&&null!==t||(t={});for(var r=new Array(e.length),i=0;i<e.length;i++){if("object"!=typeof e[i]||null===e[i])return c.nextTick(n,new Error("batch(array) element must be an object and not `null`"));var o=l(e[i]);if("put"!==o.type&&"del"!==o.type)return c.nextTick(n,new Error("`type` must be 'put' or 'del'"));var a=this._checkKey(o.key);if(a)return c.nextTick(n,a);if(o.key=this._serializeKey(o.key),"put"===o.type){var s=this._checkValue(o.value);if(s)return c.nextTick(n,s);o.value=this._serializeValue(o.value)}r[i]=o}this._batch(r,t,n)},n.prototype._batch=function(e,t,n){c.nextTick(n)},n.prototype._setupIteratorOptions=function(e){return(e=function(e,t){var n,r={};for(var i in t)if(a.call(t,i)){var o=t[i];n=i,-1!==s.indexOf(n)&&(o=e._serializeKey(o)),r[i]=o}return r}(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},n.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},n.prototype._iterator=function(e){return new t(this)},n.prototype._chainedBatch=function(){return new e(this)},n.prototype._serializeKey=function(e){return e},n.prototype._serializeValue=function(e){return e},n.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):r.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},n.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")},o.exports=n}).call(this)}).call(this,{isBuffer:i("../../../is-buffer/index.js")},i("_process"))},{"../../../is-buffer/index.js":97,"./abstract-chained-batch":122,"./abstract-iterator":123,_process:178,xtend:291}],125:[function(e,t,n){n.AbstractLevelDOWN=e("./abstract-leveldown"),n.AbstractIterator=e("./abstract-iterator"),n.AbstractChainedBatch=e("./abstract-chained-batch")},{"./abstract-chained-batch":122,"./abstract-iterator":123,"./abstract-leveldown":124}],126:[function(e,t,n){var r=e("abstract-leveldown").AbstractIterator;function i(e){r.call(this,e),this._options=e,this._iterator=null,this._operations=[]}e("inherits")(i,r),i.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},i.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype.seek=function(){this._operation("seek",arguments)},t.exports=i},{"abstract-leveldown":125,inherits:95}],127:[function(e,t,n){var r=e("abstract-leveldown").AbstractLevelDOWN,i=e("inherits"),o=e("./deferred-iterator"),a="put get del batch".split(" ");function s(e){r.call(this,""),this._db=e,this._operations=[],this._iterators=[],l(this)}function l(t){a.forEach(function(e){t["_"+e]=function(){this._operations.push({method:e,args:arguments})}}),"function"==typeof t._db.approximateSize&&(t.approximateSize=function(){this._operations.push({method:"approximateSize",args:arguments})}),t._iterator=function(e){var t=new o(e);return this._iterators.push(t),t}}i(s,r),s.prototype._open=function(e,n){var r=this;this._db.open(e,function(e){if(e)return n(e);var t;r._operations.forEach(function(e){r._db[e.method].apply(r._db,e.args)}),r._operations=[],r._iterators.forEach(function(e){e.setDb(r._db)}),r._iterators=[],t=r,a.concat("iterator").forEach(function(e){t["_"+e]=function(){return this._db[e].apply(this._db,arguments)}}),t._db.approximateSize&&(t.approximateSize=function(){return this._db.approximateSize.apply(this._db,arguments)}),n()})},s.prototype._close=function(t){var n=this;this._db.close(function(e){if(e)return t(e);l(n),t()})},s.prototype._serializeKey=function(e){return e},s.prototype._serializeValue=function(e){return e},t.exports=s,t.exports.DeferredIterator=o},{"./deferred-iterator":126,"abstract-leveldown":125,inherits:95}],128:[function(e,t,n){var r=e("./_root").Symbol;t.exports=r},{"./_root":135}],129:[function(e,t,n){var r=e("./_Symbol"),i=e("./_getRawTag"),o=e("./_objectToString"),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?i(e):o(e)}},{"./_Symbol":128,"./_getRawTag":132,"./_objectToString":133}],130:[function(e,n,t){(function(t){(function(){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],131:[function(e,t,n){var r=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=r},{"./_overArg":134}],132:[function(e,t,n){var r=e("./_Symbol"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(e){var t=o.call(e,s),n=e[s];try{var r=!(e[s]=void 0)}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},{"./_Symbol":128}],133:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},{}],134:[function(e,t,n){t.exports=function(t,n){return function(e){return t(n(e))}}},{}],135:[function(e,t,n){var r=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},{"./_freeGlobal":130}],136:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],137:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./_getPrototype"),o=e("./isObjectLike"),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,f=c.call(Object);t.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},{"./_baseGetTag":129,"./_getPrototype":131,"./isObjectLike":136}],138:[function(e,t,h){(function(d){(function(){function a(e){return void 0!==e&&""!==e}function l(e,t){return Object.hasOwnProperty.call(e,t)}function t(e,t){return Object.hasOwnProperty.call(e,t)&&t}h.compare=function(e,t){if(d.isBuffer(e)){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e[r]-t[r];if(i)return i}return e.length-t.length}return e<t?-1:t<e?1:0};var r=h.lowerBoundKey=function(e){return t(e,"gt")||t(e,"gte")||t(e,"min")||(e.reverse?t(e,"end"):t(e,"start"))||void 0},s=h.lowerBound=function(e,t){var n=r(e);return n?e[n]:t},n=h.lowerBoundInclusive=function(e){return!l(e,"gt")},i=h.upperBoundInclusive=function(e){return!l(e,"lt")},c=h.lowerBoundExclusive=function(e){return!n(e)},u=h.upperBoundExclusive=function(e){return!i(e)},o=h.upperBoundKey=function(e){return t(e,"lt")||t(e,"lte")||t(e,"max")||(e.reverse?t(e,"start"):t(e,"end"))||void 0},f=h.upperBound=function(e,t){var n=o(e);return n?e[n]:t};function p(e){return e}h.start=function(e,t){return e.reverse?f(e,t):s(e,t)},h.end=function(e,t){return e.reverse?s(e,t):f(e,t)},h.startInclusive=function(e){return e.reverse?i(e):n(e)},h.endInclusive=function(e){return e.reverse?n(e):i(e)},h.toLtgt=function(e,t,n,r,i){t=t||{},n=n||p;var o=3<arguments.length,a=h.lowerBoundKey(e),s=h.upperBoundKey(e);return a?"gt"===a?t.gt=n(e.gt,!1):t.gte=n(e[a],!1):o&&(t.gte=n(r,!1)),s?"lt"===s?t.lt=n(e.lt,!0):t.lte=n(e[s],!0):o&&(t.lte=n(i,!0)),null!=e.reverse&&(t.reverse=!!e.reverse),l(t,"max")&&delete t.max,l(t,"min")&&delete t.min,l(t,"start")&&delete t.start,l(t,"end")&&delete t.end,t},h.contains=function(e,t,n){n=n||h.compare;var r=s(e);if(a(r)&&((i=n(t,r))<0||0===i&&c(e)))return!1;var i,o=f(e);return!a(o)||!(0<(i=n(t,o))||0===i&&u(e))},h.filter=function(t,n){return function(e){return h.contains(t,e,n)}}}).call(this)}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":97}],139:[function(e,t,n){t.exports=e("immediate")},{immediate:146}],140:[function(h,g,e){(function(d){(function(){var e=h("inherits"),t=h("abstract-leveldown").AbstractLevelDOWN,r=h("abstract-leveldown").AbstractIterator,i=h("ltgt"),n=h("functional-red-black-tree"),o={},c=h("./immediate");function a(e){return 0<i.compare(e,this._end)}function s(e){return 0<=i.compare(e,this._end)}function l(e){return i.compare(e,this._end)<0}function u(e){return i.compare(e,this._end)<=0}function f(e,t){r.call(this,e),this._limit=t.limit,-1===this._limit&&(this._limit=1/0);var n=e._store[e._location];this.keyAsBuffer=!1!==t.keyAsBuffer,this.valueAsBuffer=!1!==t.valueAsBuffer,this._reverse=t.reverse,this._options=t,this._done=0,this._reverse?(this._incr="prev",this._start=i.upperBound(t),this._end=i.lowerBound(t),void 0===this._start?this._tree=n.end:i.upperBoundInclusive(t)?this._tree=n.le(this._start):this._tree=n.lt(this._start),this._end&&(i.lowerBoundInclusive(t)?this._test=s:this._test=a)):(this._incr="next",this._start=i.lowerBound(t),this._end=i.upperBound(t),void 0===this._start?this._tree=n.begin:i.lowerBoundInclusive(t)?this._tree=n.ge(this._start):this._tree=n.gt(this._start),this._end&&(i.upperBoundInclusive(t)?this._test=u:this._test=l))}function p(e){if(!(this instanceof p))return new p(e);t.call(this,"string"==typeof e?e:""),this._location=this.location?"$"+this.location:"_tree",this._store=this.location?o:this,this._store[this._location]=this._store[this._location]||n(i.compare)}e(f,r),f.prototype._next=function(e){var t,n;return this._done++>=this._limit?c(e):this._tree.valid?(t=this._tree.key,n=this._tree.value,this._test(t)?(this.keyAsBuffer&&(t=new d(t)),this.valueAsBuffer&&(n=new d(n)),this._tree[this._incr](),void c(function(){e(null,t,n)})):c(e)):c(e)},f.prototype._test=function(){return!0},p.clearGlobalStore=function(e){e?Object.keys(o).forEach(function(e){delete o[e]}):o={}},e(p,t),p.prototype._open=function(e,t){var n=this;c(function(){t(null,n)})},p.prototype._put=function(e,t,n,r){null==t&&(t="");var i=this._store[this._location].find(e);i.valid?this._store[this._location]=i.update(t):this._store[this._location]=this._store[this._location].insert(e,t),c(r)},p.prototype._get=function(e,t,n){var r=this._store[this._location].get(e);if(void 0===r)return c(function(){n(new Error("NotFound"))});!1===t.asBuffer||this._isBuffer(r)||(r=new d(String(r))),c(function(){n(null,r)})},p.prototype._del=function(e,t,n){this._store[this._location]=this._store[this._location].remove(e),c(n)},p.prototype._batch=function(e,t,n){for(var r,i,o,a=-1,s=e.length,l=this._store[this._location];++a<s;)e[a]&&(r=this._isBuffer(e[a].key)?e[a].key:String(e[a].key),o=l.find(r),"put"===e[a].type?(i=this._isBuffer(e[a].value)?e[a].value:String(e[a].value),l=o.valid?o.update(i):l.insert(r,i)):l=o.remove());this._store[this._location]=l,c(n)},p.prototype._iterator=function(e){return new f(this,e)},p.prototype._isBuffer=function(e){return d.isBuffer(e)},p.destroy=function(e,t){var n="$"+e;n in o&&delete o[n],c(t)},g.exports=p}).call(this)}).call(this,h("buffer").Buffer)},{"./immediate":139,"abstract-leveldown":144,buffer:62,"functional-red-black-tree":91,inherits:95,ltgt:152}],141:[function(e,t,n){(function(n){(function(){function e(e){this._db=e,this._operations=[],this._written=!1}e.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},e.prototype.put=function(e,t){this._checkWritten();var n=this._db._checkKey(e,"key",this._db._isBuffer);if(n)throw n;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},e.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},e.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},e.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");return"object"!=typeof e&&(e={}),this._written=!0,"function"==typeof this._write?this._write(t):"function"==typeof this._db._batch?this._db._batch(this._operations,e,t):void n.nextTick(t)},t.exports=e}).call(this)}).call(this,e("_process"))},{_process:178}],142:[function(e,t,n){(function(n){(function(){function e(e){this.db=e,this._ended=!1,this._nexting=!1}e.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?e(new Error("cannot call next() after end()")):t._nexting?e(new Error("cannot call next() before previous next() has completed")):(t._nexting=!0,"function"==typeof t._next?t._next(function(){t._nexting=!1,e.apply(null,arguments)}):void n.nextTick(function(){t._nexting=!1,e()}))},e.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");return this._ended?e(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(e):void n.nextTick(e))},t.exports=e}).call(this)}).call(this,e("_process"))},{_process:178}],143:[function(o,a,e){(function(i,s){(function(){var e=o("xtend"),t=o("./abstract-iterator"),n=o("./abstract-chained-batch");function r(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}r.prototype.open=function(e,t){var n=this,r=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){if(e)return n.status=r,t(e);n.status="open",t()})):(this.status="open",s.nextTick(t))},r.prototype.close=function(t){var n=this,r=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(e){if(e)return n.status=r,t(e);n.status="closed",t()})):(this.status="closed",s.nextTick(t))},r.prototype.get=function(e,t,n){var r;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");return(r=this._checkKey(e,"key",this._isBuffer))?n(r):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,n):void s.nextTick(function(){n(new Error("NotFound"))}))},r.prototype.put=function(e,t,n,r){var i;if("function"==typeof n&&(r=n),"function"!=typeof r)throw new Error("put() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||s.browser||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(e,t,n,r):void s.nextTick(r))},r.prototype.del=function(e,t,n){var r;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");return(r=this._checkKey(e,"key",this._isBuffer))?n(r):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,n):void s.nextTick(n))},r.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return n(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var r,i,o=0,a=e.length;o<a;o++)if("object"==typeof(r=e[o])){if(i=this._checkKey(r.type,"type",this._isBuffer))return n(i);if(i=this._checkKey(r.key,"key",this._isBuffer))return n(i)}if("function"==typeof this._batch)return this._batch(e,t,n);s.nextTick(n)},r.prototype.approximateSize=function(e,t,n){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize)return this._approximateSize(e,t,n);s.nextTick(function(){n(null,0)})},r.prototype._setupIteratorOptions=function(t){var n=this;return t=e(t),["start","end","gt","gte","lt","lte"].forEach(function(e){t[e]&&n._isBuffer(t[e])&&0===t[e].length&&delete t[e]}),t.reverse=!!t.reverse,t.keys=0!=t.keys,t.values=0!=t.values,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=0!=t.keyAsBuffer,t.valueAsBuffer=0!=t.valueAsBuffer,t},r.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new t(this)},r.prototype._chainedBatch=function(){return new n(this)},r.prototype._isBuffer=function(e){return i.isBuffer(e)},r.prototype._checkKey=function(e,t){if(null==e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},a.exports=r}).call(this)}).call(this,{isBuffer:o("../../../is-buffer/index.js")},o("_process"))},{"../../../is-buffer/index.js":97,"./abstract-chained-batch":141,"./abstract-iterator":142,_process:178,xtend:291}],144:[function(e,t,n){n.AbstractLevelDOWN=e("./abstract-leveldown"),n.AbstractIterator=e("./abstract-iterator"),n.AbstractChainedBatch=e("./abstract-chained-batch"),n.isLevelDOWN=e("./is-leveldown")},{"./abstract-chained-batch":141,"./abstract-iterator":142,"./abstract-leveldown":143,"./is-leveldown":145}],145:[function(e,t,n){var r=e("./abstract-leveldown");t.exports=function(t){return!(!t||"object"!=typeof t)&&Object.keys(r.prototype).filter(function(e){return"_"!=e[0]&&"approximateSize"!=e}).every(function(e){return"function"==typeof t[e]})}},{"./abstract-leveldown":143}],146:[function(e,t,n){"use strict";var r,i,o,a=[e("./nextTick"),e("./queueMicrotask"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],s=-1,l=[],c=!1;function u(){r&&i&&(r=!1,i.length?l=i.concat(l):s=-1,l.length&&f())}function f(){if(!r){r=!(c=!1);for(var e=l.length,t=setTimeout(u);e;){for(i=l,l=[];i&&++s<e;)i[s].run();s=-1,e=l.length}i=null,r=!(s=-1),clearTimeout(t)}}for(var p=-1,d=a.length;++p<d;)if(a[p]&&a[p].test&&a[p].test()){o=a[p].install(f);break}function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),c||r||(c=!0,o())}},{"./messageChannel":147,"./mutation.js":148,"./nextTick":61,"./queueMicrotask":149,"./stateChange":150,"./timeout":151}],147:[function(e,t,r){(function(n){(function(){"use strict";r.test=function(){return!n.setImmediate&&void 0!==n.MessageChannel},r.install=function(e){var t=new n.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],148:[function(e,t,n){(function(o){(function(){"use strict";var i=o.MutationObserver||o.WebKitMutationObserver;n.test=function(){return i},n.install=function(e){var t=0,n=new i(e),r=o.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],149:[function(e,t,n){(function(t){(function(){"use strict";n.test=function(){return"function"==typeof t.queueMicrotask},n.install=function(e){return function(){t.queueMicrotask(e)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],150:[function(e,t,r){(function(n){(function(){"use strict";r.test=function(){return"document"in n&&"onreadystatechange"in n.document.createElement("script")},r.install=function(t){return function(){var e=n.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},n.document.documentElement.appendChild(e),t}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],151:[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],152:[function(e,t,h){(function(d){(function(){function l(e,t){return Object.hasOwnProperty.call(e,t)}function a(e){return void 0!==e&&""!==e}function l(e,t){return Object.hasOwnProperty.call(e,t)}function t(e,t){return Object.hasOwnProperty.call(e,t)&&t}h.compare=function(e,t){if(d.isBuffer(e)){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e[r]-t[r];if(i)return i}return e.length-t.length}return e<t?-1:t<e?1:0};var n=h.lowerBoundKey=function(e){return t(e,"gt")||t(e,"gte")||t(e,"min")||(e.reverse?t(e,"end"):t(e,"start"))||void 0},s=h.lowerBound=function(e){var t=n(e);return t&&e[t]},r=h.lowerBoundInclusive=function(e){return!l(e,"gt")},i=h.upperBoundInclusive=function(e){return!l(e,"lt")},c=h.lowerBoundExclusive=function(e){return!r(e)},u=h.upperBoundExclusive=function(e){return!i(e)},o=h.upperBoundKey=function(e){return t(e,"lt")||t(e,"lte")||t(e,"max")||(e.reverse?t(e,"start"):t(e,"end"))||void 0},f=h.upperBound=function(e){var t=o(e);return t&&e[t]};function p(e){return e}h.toLtgt=function(e,t,n,r,i){t=t||{},n=n||p;var o=3<arguments.length,a=h.lowerBoundKey(e),s=h.upperBoundKey(e);return a?"gt"===a?t.gt=n(e.gt,!1):t.gte=n(e[a],!1):o&&(t.gte=n(r,!1)),s?"lt"===s?t.lt=n(e.lt,!0):t.lte=n(e[s],!0):o&&(t.lte=n(i,!0)),null!=e.reverse&&(t.reverse=!!e.reverse),l(t,"max")&&delete t.max,l(t,"min")&&delete t.min,l(t,"start")&&delete t.start,l(t,"end")&&delete t.end,t},h.contains=function(e,t,n){n=n||h.compare;var r=s(e);if(a(r)&&((i=n(t,r))<0||0===i&&c(e)))return!1;var i,o=f(e);return!a(o)||!(0<(i=n(t,o))||0===i&&u(e))},h.filter=function(t,n){return function(e){return h.contains(t,e,n)}}}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":97}],153:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))c.call(n,a)&&(i[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)u.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}},{}],154:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var h=r(e("levelup")),g=r(e("sublevel-pouchdb")),_=e("through2"),m=r(e("argsarray")),v=r(e("double-ended-queue")),N=r(e("buffer-from")),I=e("pouchdb-adapter-utils"),L=e("pouchdb-merge"),i=e("pouchdb-json"),R=e("pouchdb-md5"),D=e("pouchdb-binary-utils"),j=e("pouchdb-collections"),M=e("pouchdb-utils"),B=e("pouchdb-errors");function w(e,t){var n=new Uint8Array(e);return D.blob([n],{type:t})}function o(e,t){var n=t.prefix()[0],r=e._cache,i=r.get(n);return i||(i=new j.Map,r.set(n,i)),i}function F(){this._batch=[],this._cache=new j.Map}F.prototype.get=function(e,n,r){var i=o(this,e),t=i.get(n);return t?M.nextTick(function(){r(null,t)}):null===t?M.nextTick(function(){r({name:"NotFoundError"})}):void e.get(n,function(e,t){if(e)return"NotFoundError"===e.name&&i.set(n,null),r(e);i.set(n,t),r(null,t)})},F.prototype.batch=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=o(this,r.prefix);"put"===r.type?i.set(r.key,r.value):i.set(r.key,null)}this._batch=this._batch.concat(e)},F.prototype.execute=function(e,t){for(var n=new j.Set,r=[],i=this._batch.length-1;0<=i;i--){var o=this._batch[i],a=o.prefix.prefix()[0]+"ÿ"+o.key;n.has(a)||(n.add(a),r.push(o))}e.batch(r,t)};var E="document-store",k="by-sequence",x="attach-store",S="attach-binary-store",C="local-store",T="meta-store",q=new j.Map,U="_local_last_update_seq",H="_local_doc_count",G="_local_uuid",z="md5-",W={encode:i.safeJsonStringify,decode:i.safeJsonParse,buffer:!1,type:"cheap-json"},V=new M.changesHandler;function K(e){return"winningRev"in e?e.winningRev:L.winningRev(e)}function $(e,t){return"deleted"in e?e.deleted:I.isDeleted(e,t)}function Y(e,n,r){var i=[];return e.forEach(function(n){n.doc&&n.doc._attachments&&Object.keys(n.doc._attachments).forEach(function(e){var t=n.doc._attachments[e];"data"in t||i.push(t)})}),Promise.all(i.map(function(e){return t=n,a=r,s=(o=e).content_type,new Promise(function(r,i){t.binaryStore.get(o.digest,function(e,t){var n;if(e){if("NotFoundError"!==e.name)return i(e);n=a.binary?D.binaryStringToBlobOrBuffer("",s):""}else n=a.binary?w(t,s):t.toString("base64");delete o.stub,delete o.length,o.data=n,r()})});var o,t,a,s}))}t.exports=function(t,n){t=M.clone(t);var r,y,b=this,A={},f=t.revs_limit,O=t.name;void 0===t.createIfMissing&&(t.createIfMissing=!0);var i,o=t.db,e=M.functionName(o);function a(){A.docStore=y.sublevel(E,{valueEncoding:W}),A.bySeqStore=y.sublevel(k,{valueEncoding:"json"}),A.attachmentStore=y.sublevel(x,{valueEncoding:"json"}),A.binaryStore=y.sublevel(S,{valueEncoding:"binary"}),A.localStore=y.sublevel(C,{valueEncoding:"json"}),A.metaStore=y.sublevel(T,{valueEncoding:"json"}),"object"==typeof t.migrate?t.migrate.doMigrationTwo(y,A,s):s()}function s(){A.metaStore.get(U,function(e,t){void 0===y._updateSeq&&(y._updateSeq=t||0),A.metaStore.get(H,function(e,t){y._docCount=e?0:t,A.metaStore.get(G,function(e,t){r=e?M.uuid():t,A.metaStore.put(G,r,function(){M.nextTick(function(){n(null,b)})})})})})}function l(e,t){try{e.apply(null,t)}catch(e){t[t.length-1](e)}}function c(){var e,t,n,o=y._queue.peekFront();"read"===o.type?function(e){for(var r=[o],t=1,n=y._queue.get(t);void 0!==n&&"read"===n.type;)r.push(n),t++,n=y._queue.get(t);var i=0;r.forEach(function(e){var t=e.args,n=t[t.length-1];t[t.length-1]=m(function(e){n.apply(null,e),++i===r.length&&M.nextTick(function(){r.forEach(function(){y._queue.shift()}),y._queue.length&&c()})}),l(e.fun,t)})}():(t=(e=o).args,n=t[t.length-1],t[t.length-1]=m(function(e){n.apply(null,e),M.nextTick(function(){y._queue.shift(),y._queue.length&&c()})}),l(e.fun,t))}function u(t){return m(function(e){y._queue.push({fun:t,args:e,type:"write"}),1===y._queue.length&&M.nextTick(c)})}function p(t){return m(function(e){y._queue.push({fun:t,args:e,type:"read"}),1===y._queue.length&&M.nextTick(c)})}function P(e){return("0000000000000000"+e).slice(-16)}function d(e,t){"destroy"in o?o.destroy(e,t):t(null)}q.has(e)?i=q.get(e):(i=new j.Map,q.set(e,i)),i.has(O)?(y=i.get(O),a()):i.set(O,g(h(o(O),t,function(e){if(e)return i.delete(O),n(e);(y=i.get(O))._docCount=-1,y._queue=new v,"object"==typeof t.migrate?t.migrate.doMigrationOne(O,y,a):a()}))),b._remote=!1,b.type=function(){return"leveldb"},b._id=function(e){e(null,r)},b._info=function(e){var t={doc_count:y._docCount,update_seq:y._updateSeq,backend_adapter:M.functionName(o)};return M.nextTick(function(){e(null,t)})},b._get=p(function(e,i,o){i=M.clone(i),A.docStore.get(e,function(e,n){if(e||!n)return o(B.createError(B.MISSING_DOC,"missing"));var r;if(i.rev)r=i.latest?L.latest(i.rev,n):i.rev;else if(r=K(n),$(n,r))return o(B.createError(B.MISSING_DOC,"deleted"));var t=n.rev_map[r];A.bySeqStore.get(P(t),function(e,t){if(!t)return o(B.createError(B.MISSING_DOC));if("_id"in t&&t._id!==n.id)return o(new Error("wrong doc returned"));if(t._id=n.id,"_rev"in t){if(t._rev!==r)return o(new Error("wrong doc returned"))}else t._rev=r;return o(null,{doc:t,metadata:n})})})}),b._getAttachment=function(e,t,n,r,i){var o=n.digest,a=n.content_type;A.binaryStore.get(o,function(e,t){if(e)return"NotFoundError"!==e.name?i(e):i(null,r.binary?(n=a,D.blob([""],{type:n})):"");var n;r.binary?i(null,w(t,a)):i(null,t.toString("base64"))})},b._bulkDocs=u(function(e,t,_){var n=t.new_edits,w=new Array(e.docs.length),E=new j.Map,k=new j.Map,x=new F,S=0,C=y._updateSeq,s=e.docs,r=s.map(function(e){if(e._id&&I.isLocalId(e._id))return e;var t=I.parseDoc(e,n,b.__opts);return t.metadata&&!t.metadata.rev_map&&(t.metadata.rev_map={}),t}),i=r.filter(function(e){return e.error});if(i.length)return _(i[0]);function o(e,t){var n=Promise.resolve();e.forEach(function(e,r){n=n.then(function(){return new Promise(function(t,n){b._doCompactionNoLock(r,e,{ctx:x},function(e){if(e)return n(e);t()})})})}),n.then(function(){t()},t)}function a(){o(k,function(e){if(e&&u(e),b.auto_compaction)return t=u,n=new j.Map,E.forEach(function(e,t){n.set(t,L.compactTree(e))}),void o(n,t);var t,n;u()})}function l(n,e,t,r,i,o,a,s){S+=o;var l=null,c=0;n.metadata.winningRev=e,n.metadata.deleted=t,n.data._id=n.metadata.id,n.data._rev=n.metadata.rev,r&&(n.data._deleted=!0),n.stemmedRevs.length&&k.set(n.metadata.id,n.stemmedRevs);var u,f,p=n.data._attachments?Object.keys(n.data._attachments):[];function d(e){c++,l||(e?s(l=e):c===p.length&&b())}function h(o,a,s){return function(e){var t,n,r,i;R.binaryMd5(e,(t=o,n=a,r=e,i=s,function(e){!function(e,n,t,r,i){var o=e.data._attachments[t];delete o.data,o.digest=n,o.length=r.length;var a=e.metadata.id,s=e.metadata.rev;o.revpos=parseInt(s,10),T(a,s,n,function(e,t){return e?i(e):0===r.length?i(e):t?(x.batch([{type:"put",prefix:A.binaryStore,key:n,value:N(r,"binary")}]),void i()):i(e)})}(t,z+e,n,r,i)}))}}for(var g=0;g<p.length;g++){var m,v=p[g],y=n.data._attachments[v];if(y.stub)T(n.data._id,n.data._rev,y.digest,d);else if("string"==typeof y.data){try{m=D.atob(y.data)}catch(n){return void _(B.createError(B.BAD_ARG,"Attachment is not a valid base64 string"))}h(n,v,d)(m)}else u=y.data,f=h(n,v,d),D.readAsBinaryString(u,f)}function b(){var e=n.metadata.rev_map[n.metadata.rev];if(e)return s();e=++C,n.metadata.rev_map[n.metadata.rev]=n.metadata.seq=e;var t=[{key:P(e),value:n.data,prefix:A.bySeqStore,type:"put"},{key:n.metadata.id,value:n.metadata,prefix:A.docStore,type:"put"}];x.batch(t),w[a]={ok:!0,id:n.metadata.id,rev:n.metadata.rev},E.set(n.metadata.id,n.metadata),s()}p.length||b()}var c={};function T(r,i,o,t){function e(t){var e=[r,i].join("@"),n={};return t?t.refs&&(n.refs=t.refs,n.refs[e]=!0):(n.refs={},n.refs[e]=!0),new Promise(function(e){x.batch([{type:"put",prefix:A.attachmentStore,key:o,value:n}]),e(!t)})}var n=c[o]||Promise.resolve();c[o]=n.then(function(){return new Promise(function(n,r){x.get(A.attachmentStore,o,function(e,t){if(e&&"NotFoundError"!==e.name)return r(e);n(t)})}).then(e).then(function(e){t(null,e)},t)})}function u(e){if(e)return M.nextTick(function(){_(e)});x.batch([{prefix:A.metaStore,type:"put",key:U,value:C},{prefix:A.metaStore,type:"put",key:H,value:y._docCount+S}]),x.execute(y,function(e){if(e)return _(e);y._docCount+=S,y._updateSeq=C,V.notify(O),M.nextTick(function(){_(null,w)})})}if(!r.length)return _(null,[]);!function(t){var i=[];if(s.forEach(function(n){n&&n._attachments&&Object.keys(n._attachments).forEach(function(e){var t=n._attachments[e];t.stub&&i.push(t.digest)})}),!i.length)return t();var o,a=0;i.forEach(function(e){var n,r;n=e,r=function(e){e&&!o&&(o=e),++a===i.length&&t(o)},x.get(A.attachmentStore,n,function(e){if(e){var t=B.createError(B.MISSING_STUB,"unknown stub attachment with digest "+n);r(t)}else r()})})}(function(e){if(e)return _(e);!function(e){var r,t=0;function i(){if(++t===s.length)return e(r)}s.forEach(function(n){if(n._id&&I.isLocalId(n._id))return i();x.get(A.docStore,n._id,function(e,t){e?"NotFoundError"!==e.name&&(r=e):E.set(n._id,t),i()})})}(function(e){if(e)return _(e);I.processDocs(f,r,b,E,x,w,l,t,a)})})}),b._allDocs=function(e,t){return"keys"in e?I.allDocsKeysQuery(this,e):p(function(p,a){var e;p=M.clone(p),e=function(e,t){if(e)return a(e);var l,n={},c=p.skip||0;if(p.startkey&&(n.gte=p.startkey),p.endkey&&(n.lte=p.endkey),p.key&&(n.gte=n.lte=p.key),p.descending){n.reverse=!0;var r=n.lte;n.lte=n.gte,n.gte=r}if("number"==typeof p.limit&&(l=p.limit),0===l||"gte"in n&&"lte"in n&&n.gte>n.lte){var i={total_rows:t,offset:p.skip,rows:[]};return p.update_seq&&(i.update_seq=y._updateSeq),a(null,i)}var u=[],f=A.docStore.readStream(n),o=_.obj(function(e,t,i){var o=e.value,a=K(o),s=$(o,a);if(s){if("ok"!==p.deleted)return void i()}else{if(0<c--)return void i();if("number"==typeof l&&l--<=0)return f.unpipe(),f.destroy(),void i()}function n(e){var t={id:o.id,key:o.id,value:{rev:a}};if(p.include_docs){if(t.doc=e,t.doc._rev=t.value.rev,p.conflicts){var n=L.collectConflicts(o);n.length&&(t.doc._conflicts=n)}for(var r in t.doc._attachments)t.doc._attachments.hasOwnProperty(r)&&(t.doc._attachments[r].stub=!0)}if(!1===p.inclusive_end&&o.id===p.endkey)return i();if(s){if("ok"!==p.deleted)return i();t.value.deleted=!0,t.doc=null}u.push(t),i()}if(p.include_docs){var r=o.rev_map[a];A.bySeqStore.get(P(r),function(e,t){n(t)})}else n()},function(e){Promise.resolve().then(function(){if(p.include_docs&&p.attachments)return Y(u,A,p)}).then(function(){var e={total_rows:t,offset:p.skip,rows:u};p.update_seq&&(e.update_seq=y._updateSeq),a(null,e)},a),e()}).on("unpipe",function(){o.end()});f.on("error",a),f.pipe(o)},y.isClosed()?e(new Error("database is closed")):e(null,y._docCount)})(e,t)},b._changes=function(l){if((l=M.clone(l)).continuous){var e=O+":"+M.uuid();return V.addListener(O,e,b,l),V.notify(O),{cancel:function(){V.removeListener(O,e)}}}var c,u=l.descending,f=[],p=l.since||0,d=0,t={reverse:u};"limit"in l&&0<l.limit&&(c=l.limit),t.reverse||(t.start=P(l.since||0));var h=l.doc_ids&&new j.Set(l.doc_ids),g=M.filterChange(l),m=new j.Map;function v(){l.done=!0,l.return_docs&&l.limit&&l.limit<f.length&&(f.length=l.limit),n.unpipe(r),n.destroy(),l.continuous||l.cancelled||(l.include_docs&&l.attachments&&l.return_docs?Y(f,A,l).then(function(){l.complete(null,{results:f,last_seq:p})}):l.complete(null,{results:f,last_seq:p}))}var n=A.bySeqStore.readStream(t),r=_.obj(function(e,t,i){if(c&&c<=d)return v(),i();if(l.cancelled||l.done)return i();var n,r,o=(n=e.key,parseInt(n,10)),a=e.value;if(o===l.since&&!u)return i();if(h&&!h.has(a._id))return i();function s(r){var e=K(r);function n(e){var t=l.processChange(e,r,l);t.seq=r.seq;var n=g(t);if("object"==typeof n)return l.complete(n);n&&(d++,l.attachments&&l.include_docs?Y([t],A,l).then(function(){l.onChange(t)}):l.onChange(t),l.return_docs&&f.push(t)),i()}if(r.seq!==o)return i();if(p=o,e===a._rev)return n(a);var t=r.rev_map[e];A.bySeqStore.get(P(t),function(e,t){n(t)})}if(r=m.get(a._id))return s(r);A.docStore.get(a._id,function(e,t){if(l.cancelled||l.done||y.isClosed()||I.isLocalId(t.id))return i();m.set(a._id,t),s(t)})},function(e){if(l.cancelled)return e();l.return_docs&&l.limit&&l.limit<f.length&&(f.length=l.limit),e()}).on("unpipe",function(){r.end(),v()});return n.pipe(r),{cancel:function(){l.cancelled=!0,v()}}},b._close=function(t){if(y.isClosed())return t(B.createError(B.NOT_OPEN));y.close(function(e){e?t(e):(i.delete(O),t())})},b._getRevisionTree=function(e,n){A.docStore.get(e,function(e,t){e?n(B.createError(B.MISSING_DOC)):n(null,t.rev_tree)})},b._doCompaction=u(function(e,t,n,r){b._doCompactionNoLock(e,t,n,r)}),b._doCompactionNoLock=function(c,u,f,p){if("function"==typeof f&&(p=f,f={}),!u.length)return p();var d=f.ctx||new F;d.get(A.docStore,c,function(e,n){if(e)return p(e);var t=u.map(function(e){var t=n.rev_map[e];return delete n.rev_map[e],t});L.traverseRevTree(n.rev_tree,function(e,t,n,r,i){var o=t+"-"+n;-1!==u.indexOf(o)&&(i.status="missing")});var s=[];s.push({key:n.id,value:n,type:"put",prefix:A.docStore});var r,i={},o=0;function a(e){if(e&&(r=e),++o===u.length){if(r)return p(r);!function(){var t=Object.keys(i);if(!t.length)return l();var n,r=0;function o(e){e&&(n=e),++r===t.length&&l(n)}var a=new j.Map;u.forEach(function(e){a.set(c+"@"+e,!0)}),t.forEach(function(i){d.get(A.attachmentStore,i,function(e,t){if(e)return"NotFoundError"===e.name?o():o(e);var n=Object.keys(t.refs||{}).filter(function(e){return!a.has(e)}),r={};n.forEach(function(e){r[e]=!0}),n.length?s.push({key:i,type:"put",value:{refs:r},prefix:A.attachmentStore}):s=s.concat([{key:i,type:"del",prefix:A.attachmentStore},{key:i,type:"del",prefix:A.binaryStore}]),o()})})}()}}function l(e){return e?p(e):(d.batch(s),f.ctx?p():void d.execute(y,p))}t.forEach(function(e){s.push({key:P(e),type:"del",prefix:A.bySeqStore}),d.get(A.bySeqStore,P(e),function(e,n){if(e)return"NotFoundError"===e.name?a():a(e);Object.keys(n._attachments||{}).forEach(function(e){var t=n._attachments[e].digest;i[t]=!0}),a()})})})},b._getLocal=function(e,n){A.localStore.get(e,function(e,t){e?n(B.createError(B.MISSING_DOC)):n(null,t)})},b._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),t.ctx?b._putLocalNoLock(e,t,n):b._putLocalWithLock(e,t,n)},b._putLocalWithLock=u(function(e,t,n){b._putLocalNoLock(e,t,n)}),b._putLocalNoLock=function(i,o,a){delete i._revisions;var s=i._rev,l=i._id,c=o.ctx||new F;c.get(A.localStore,l,function(e,t){if(e&&s)return a(B.createError(B.REV_CONFLICT));if(t&&t._rev!==s)return a(B.createError(B.REV_CONFLICT));i._rev=s?"0-"+(parseInt(s.split("-")[1],10)+1):"0-1";var n=[{type:"put",prefix:A.localStore,key:l,value:i}];c.batch(n);var r={ok:!0,id:i._id,rev:i._rev};if(o.ctx)return a(null,r);c.execute(y,function(e){if(e)return a(e);a(null,r)})})},b._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),t.ctx?b._removeLocalNoLock(e,t,n):b._removeLocalWithLock(e,t,n)},b._removeLocalWithLock=u(function(e,t,n){b._removeLocalNoLock(e,t,n)}),b._removeLocalNoLock=function(r,i,o){var a=i.ctx||new F;a.get(A.localStore,r._id,function(e,t){if(e)return"NotFoundError"!==e.name?o(e):o(B.createError(B.MISSING_DOC));if(t._rev!==r._rev)return o(B.createError(B.REV_CONFLICT));a.batch([{prefix:A.localStore,type:"del",key:r._id}]);var n={ok:!0,id:r._id,rev:"0-0"};if(i.ctx)return o(null,n);a.execute(y,function(e){if(e)return o(e);o(null,n)})})},b._destroy=function(e,t){var n,r=M.functionName(o);if(!q.has(r))return d(O,t);(n=q.get(r)).has(O)?(V.removeAllListeners(O),n.get(O).close(function(){n.delete(O),d(O,t)})):d(O,t)}}},{argsarray:54,"buffer-from":155,"double-ended-queue":78,levelup:120,"pouchdb-adapter-utils":158,"pouchdb-binary-utils":159,"pouchdb-collections":160,"pouchdb-errors":161,"pouchdb-json":162,"pouchdb-md5":163,"pouchdb-merge":164,"pouchdb-utils":165,"sublevel-pouchdb":273,through2:156}],155:[function(e,t,n){(function(a){(function(){var i=Object.prototype.toString,o="function"==typeof a.alloc&&"function"==typeof a.allocUnsafe&&"function"==typeof a.from;t.exports=function(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return r=e,"ArrayBuffer"===i.call(r).slice(8,-1)?function(e,t,n){t>>>=0;var r=e.byteLength-t;if(r<0)throw new RangeError("'offset' is out of bounds");if(void 0===n)n=r;else if((n>>>=0)>r)throw new RangeError("'length' is out of bounds");return o?a.from(e.slice(t,t+n)):new a(new Uint8Array(e.slice(t,t+n)))}(e,t,n):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return o?a.from(e,t):new a(e,t)}(e,t):o?a.from(e):new a(e);var r}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:62}],156:[function(r,s,e){(function(n){(function(){var t=r("readable-stream").Transform,i=r("util").inherits;function o(e){t.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function e(r){return function(e,t,n){return"function"==typeof e&&(n=t,t=e,e={}),"function"!=typeof t&&(t=a),"function"!=typeof n&&(n=null),r(e,t,n)}}i(o,t),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},s.exports=e(function(e,t,n){var r=new o(e);return r._transform=t,n&&(r._flush=n),r}),s.exports.ctor=e(function(t,e,n){function r(e){if(!(this instanceof r))return new r(e);this.options=Object.assign({},t,e),o.call(this,this.options)}return i(r,o),r.prototype._transform=e,n&&(r.prototype._flush=n),r}),s.exports.obj=e(function(e,t,n){var r=new o(Object.assign({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r})}).call(this)}).call(this,r("_process"))},{_process:178,"readable-stream":241,util:288}],157:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=e("pouchdb-utils"),o=r(e("pouchdb-adapter-leveldb-core")),a=r(e("memdown"));function s(e,t){var n=i.assign({db:a},e);o.call(this,n,t)}s.valid=function(){return!0},s.use_prefix=!1,t.exports=function(e){e.adapter("memory",s,!0)}},{memdown:140,"pouchdb-adapter-leveldb-core":154,"pouchdb-utils":165}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=e("pouchdb-utils"),a=e("pouchdb-binary-utils"),s=e("pouchdb-md5"),r=e("pouchdb-collections"),b=e("pouchdb-errors"),_=e("pouchdb-merge");function i(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}var p=i(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),d=i(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function h(e){if(!/^\d+-/.test(e))return b.createError(b.INVALID_REV);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function w(e,t,n){var r,i,o;n||(n={deterministic_revs:!0});var a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=f.uuid()),i=f.rev(e,n.deterministic_revs),e._rev){if((o=h(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,a,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,a),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((o=h(e._rev)).error)return o;r=o.prefix,i=o.id,e._rev_tree=[{pos:r,ids:[i,a,[]]}]}f.invalidIdError(e._id),e._rev=r+"-"+i;var s={metadata:{},data:{}};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c="_"===l[0];if(c&&!p[l]){var u=b.createError(b.DOC_VALIDATION,l);throw u.message=b.DOC_VALIDATION.message+": "+l,u}c&&!d[l]?s.metadata[l.slice(1)]=e[l]:s.data[l]=e[l]}return s}function l(t,e,n){var r=function(e){try{return a.atob(e)}catch(e){return{error:b.createError(b.BAD_ARG,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?a.binaryStringToBlobOrBuffer(r,t.content_type):"base64"===e?a.btoa(r):r,s.binaryMd5(r,function(e){t.digest="md5-"+e,n()})}function c(e,t,n){if(e.stub)return n();var r,i,o;"string"==typeof e.data?l(e,t,n):(r=e,i=t,o=n,s.binaryMd5(r.data,function(e){r.digest="md5-"+e,r.length=r.data.size||r.data.length||0,"binary"===i?a.blobOrBufferToBinaryString(r.data,function(e){r.data=e,o()}):"base64"===i?a.blobOrBufferToBase64(r.data,function(e){r.data=e,o()}):o()}))}function g(e,t,n,r,i,o,a,s){if(_.revExists(t.rev_tree,n.metadata.rev)&&!s)return r[i]=n,o();var l=t.winningRev||_.winningRev(t),c="deleted"in t?t.deleted:_.isDeleted(t,l),u="deleted"in n.metadata?n.metadata.deleted:_.isDeleted(n.metadata),f=/^1-/.test(n.metadata.rev);if(c&&!u&&s&&f){var p=n.data;p._rev=l,p._id=n.metadata.id,n=w(p,s)}var d=_.merge(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&u&&"new_leaf"!==d.conflicts||!c&&"new_leaf"!==d.conflicts||c&&!u&&"new_branch"===d.conflicts)){var h=b.createError(b.REV_CONFLICT);return r[i]=h,o()}var g=n.metadata.rev;n.metadata.rev_tree=d.tree,n.stemmedRevs=d.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var m=_.winningRev(n.metadata),v=_.isDeleted(n.metadata,m),y=c===v?0:c<v?-1:1;a(n,m,v,g===m?v:_.isDeleted(n.metadata,g),!0,y,i,o)}n.invalidIdError=f.invalidIdError,n.normalizeDdocFunctionName=f.normalizeDdocFunctionName,n.parseDdocFunctionName=f.parseDdocFunctionName,n.isDeleted=_.isDeleted,n.isLocalId=_.isLocalId,n.allDocsKeysQuery=function(e,o){var t=o.keys,a={offset:o.skip};return Promise.all(t.map(function(i){var t=f.assign({key:i,deleted:"ok"},o);return["limit","skip","keys"].forEach(function(e){delete t[e]}),new Promise(function(n,r){e._allDocs(t,function(e,t){if(e)return r(e);o.update_seq&&void 0!==t.update_seq&&(a.update_seq=t.update_seq),a.total_rows=t.total_rows,n(t.rows[0]||{key:i,error:"not_found"})})})})).then(function(e){return a.rows=e,a})},n.parseDoc=w,n.preprocessAttachments=function(e,o,t){if(!e.length)return t();var a,n=0;function s(){n++,e.length===n&&(a?t(a):t())}e.forEach(function(e){var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!t.length)return s();function r(e){a=e,++n===t.length&&s()}for(var i in e.data._attachments)e.data._attachments.hasOwnProperty(i)&&c(e.data._attachments[i],o,r)})},n.processDocs=function(l,e,i,c,o,u,f,p,t){l=l||1e3;var d=p.new_edits,a=new r.Map,n=0,s=e.length;function h(){++n===s&&t&&t()}e.forEach(function(e,n){if(e._id&&_.isLocalId(e._id)){var t=e._deleted?"_removeLocal":"_putLocal";i[t](e,{ctx:o},function(e,t){u[n]=e||t,h()})}else{var r=e.metadata.id;a.has(r)?(s--,a.get(r).push([e,n])):a.set(r,[[e,n]])}}),a.forEach(function(i,o){var a=0;function s(){++a<i.length?e():h()}function e(){var e=i[a],t=e[0],n=e[1];if(c.has(o))g(l,c.get(o),t,u,n,s,f,d);else{var r=_.merge([],t.metadata.rev_tree[0],l);t.metadata.rev_tree=r.tree,t.stemmedRevs=r.stemmedRevs||[],function(e,t,n){var r=_.winningRev(e.metadata),i=_.isDeleted(e.metadata,r);if("was_delete"in p&&i)return u[t]=b.createError(b.MISSING_DOC,"deleted"),n();if(d&&"missing"===e.metadata.rev_tree[0].ids[1].status){var o=b.createError(b.REV_CONFLICT);return u[t]=o,n()}f(e,r,i,i,!1,i?0:1,t,n)}(t,n,s)}}e()})},n.updateDoc=g},{"pouchdb-binary-utils":159,"pouchdb-collections":160,"pouchdb-errors":161,"pouchdb-md5":163,"pouchdb-merge":164,"pouchdb-utils":165}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return atob(e)},i=function(e){return btoa(e)};function o(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}function a(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function s(e,t){return o([a(e)],{type:t})}function l(e,n){var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var t=e.target.result||"";if(r)return n(t);n(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(t))},r?t.readAsBinaryString(e):t.readAsArrayBuffer(e)}function c(e,t){l(e,function(e){t(e)})}n.atob=r,n.btoa=i,n.base64StringToBlobOrBuffer=function(e,t){return s(r(e),t)},n.binaryStringToArrayBuffer=a,n.binaryStringToBlobOrBuffer=s,n.blob=o,n.blobOrBufferToBase64=function(e,t){c(e,function(e){t(i(e))})},n.blobOrBufferToBinaryString=c,n.readAsArrayBuffer=function(e,n){var t=new FileReader;t.onloadend=function(e){var t=e.target.result||new ArrayBuffer(0);n(t)},t.readAsArrayBuffer(e)},n.readAsBinaryString=l,n.typedBuffer=function(){}},{}],160:[function(e,t,n){"use strict";function r(e){return"$"+e}function i(){this._store={}}function o(e){if(this._store=new i,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.get=function(e){var t=r(e);return this._store[t]},i.prototype.set=function(e,t){var n=r(e);return this._store[n]=t,!0},i.prototype.has=function(e){return r(e)in this._store},i.prototype.delete=function(e){var t=r(e),n=t in this._store;return delete this._store[t],n},i.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=i.substring(1))}},Object.defineProperty(i.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(n){this._store.forEach(function(e,t){n(t)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(n.Set=Set,n.Map=Map):(n.Set=o,n.Map=i)},{}],161:[function(e,t,n){"use strict";var r;function i(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Object.defineProperty(n,"__esModule",{value:!0}),((r=e("inherits"))&&"object"==typeof r&&"default"in r?r.default:r)(i,Error),i.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var o=new i(401,"unauthorized","Name or password is incorrect."),a=new i(400,"bad_request","Missing JSON list of 'docs'"),s=new i(404,"not_found","missing"),l=new i(409,"conflict","Document update conflict"),c=new i(400,"bad_request","_id field must contain a string"),u=new i(412,"missing_id","_id is required for puts"),f=new i(400,"bad_request","Only reserved document ids may start with underscore."),p=new i(412,"precondition_failed","Database not open"),d=new i(500,"unknown_error","Database encountered an unknown error"),h=new i(500,"badarg","Some query argument is invalid"),g=new i(400,"invalid_request","Request was invalid"),m=new i(400,"query_parse_error","Some query parameter is invalid"),v=new i(500,"doc_validation","Bad special document member"),y=new i(400,"bad_request","Something wrong with the request"),b=new i(400,"bad_request","Document must be a JSON object"),_=new i(404,"not_found","Database not found"),w=new i(500,"indexed_db_went_bad","unknown"),E=new i(500,"web_sql_went_bad","unknown"),k=new i(500,"levelDB_went_went_bad","unknown"),x=new i(403,"forbidden","Forbidden by design doc validate_doc_update function"),S=new i(400,"bad_request","Invalid rev format"),C=new i(412,"file_exists","The database could not be created, the file already exists."),T=new i(412,"missing_stub","A pre-existing attachment stub wasn't found"),A=new i(413,"invalid_url","Provided URL is invalid");n.UNAUTHORIZED=o,n.MISSING_BULK_DOCS=a,n.MISSING_DOC=s,n.REV_CONFLICT=l,n.INVALID_ID=c,n.MISSING_ID=u,n.RESERVED_ID=f,n.NOT_OPEN=p,n.UNKNOWN_ERROR=d,n.BAD_ARG=h,n.INVALID_REQUEST=g,n.QUERY_PARSE_ERROR=m,n.DOC_VALIDATION=v,n.BAD_REQUEST=y,n.NOT_AN_OBJECT=b,n.DB_MISSING=_,n.WSQ_ERROR=E,n.LDB_ERROR=k,n.FORBIDDEN=x,n.INVALID_REV=S,n.FILE_EXISTS=C,n.MISSING_STUB=T,n.IDB_ERROR=w,n.INVALID_URL=A,n.createError=function(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=i.prototype,new t(e)},n.generateErrorFromResponse=function(e){if("object"!=typeof e){var t=e;(e=d).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},{inherits:95}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e("vuvuzela"))&&"object"==typeof r&&"default"in r?r.default:r;n.safeJsonParse=function(t){try{return JSON.parse(t)}catch(e){return i.parse(t)}},n.safeJsonStringify=function(t){try{return JSON.stringify(t)}catch(e){return i.stringify(t)}}},{vuvuzela:289}],163:[function(n,e,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e,p=n("pouchdb-binary-utils"),d=(e=n("spark-md5"))&&"object"==typeof e&&"default"in e?e.default:e,h=t.setImmediate||t.setTimeout,g=32768;function m(t,e,n,r,i){var o,a,s;(0<n||r<e.size)&&(a=n,s=r,e=(o=e).webkitSlice?o.webkitSlice(a,s):o.slice(a,s)),p.readAsArrayBuffer(e,function(e){t.append(e),i()})}function v(e,t,n,r,i){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}r.binaryMd5=function(t,n){var e="string"==typeof t,r=e?t.length:t.size,i=Math.min(g,r),o=Math.ceil(r/i),a=0,s=e?new d:new d.ArrayBuffer,l=e?v:m;function c(){h(f)}function u(){var e,t=(e=s.end(!0),p.btoa(e));n(t),s.destroy()}function f(){var e=a*i;l(s,t,e,e+i,++a<o?c:u)}f()},r.stringMd5=function(e){return d.hash(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pouchdb-binary-utils":159,"spark-md5":270}],164:[function(e,t,n){"use strict";function s(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var a=i.ids,s=a[2],l=i.pos;if(s.length)for(var c=0,u=s.length;c<u;c++)o.push({pos:l+1,ids:s[c]});else{var f=!!a[1].deleted,p=a[0];t&&!(r!==f?r:n!==l?n<l:t<p)||(t=p,n=l,r=f)}}return n+"-"+t}function d(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=t(0===a.length,i,o[0],n.ctx,o[1]),l=0,c=a.length;l<c;l++)r.push({pos:i+1,ids:a[l],ctx:s})}function r(e,t){return e.pos-t.pos}function l(e){var o=[];d(e,function(e,t,n,r,i){e&&o.push({rev:t+"-"+n,pos:t,opts:i})}),o.sort(r).reverse();for(var t=0,n=o.length;t<n;t++)delete o[t].pos;return o}function h(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=t.history?t.history.slice():[];u.push({id:a,opts:s}),c&&n.push({pos:i+1-u.length,ids:u});for(var f=0,p=l.length;f<p;f++)r.push({pos:i+1,ids:l[f],history:u})}return n.reverse()}function _(e,t){return e.pos-t.pos}function g(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function m(e,t){return e[0]<t[0]?-1:1}function w(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;0<n.length;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var l=!1,c=0;c<o[2].length;c++)o[2][c][0]===a[2][s][0]&&(n.push({tree1:o[2][c],tree2:a[2][s]}),l=!0);l||(r="new_branch",u=o[2],f=a[2][s],void 0,p=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(u,f,m),u.splice(p,0,f))}else r="new_leaf",o[2][0]=a[2][s]}var u,f,p;return{conflicts:r,tree:e}}function v(e,t,n){var r,i=[],o=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=w(c.ids,t.ids),i.push({pos:c.pos,ids:r.tree}),o=o||r.conflicts,a=!0;else if(!0!==n){var u=c.pos<t.pos?c:t,f=c.pos<t.pos?t:c,p=f.pos-u.pos,d=[],h=[];for(h.push({ids:u.ids,diff:p,parent:null,parentIdx:null});0<h.length;){var g=h.pop();if(0!==g.diff)for(var m=g.ids[2],v=0,y=m.length;v<y;v++)h.push({ids:m[v],diff:g.diff-1,parent:g.ids,parentIdx:v});else g.ids[0]===f.ids[0]&&d.push(g)}var b=d[0];b?(r=w(b.ids,f.ids),b.parent[2][b.parentIdx]=r.tree,i.push({pos:u.pos,ids:u.ids}),o=o||r.conflicts,a=!0):i.push(c)}else i.push(c)}return a||i.push(t),i.sort(_),{tree:i,conflicts:o||"internal_node"}}function o(e){return e.ids}Object.defineProperty(n,"__esModule",{value:!0}),n.collectConflicts=function(e){for(var t=s(e),n=l(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev===t||a.opts.deleted||r.push(a.rev)}return r},n.collectLeaves=l,n.compactTree=function(e){var o=[];return d(e.rev_tree,function(e,t,n,r,i){"available"!==i.status||e||(o.push(t+"-"+n),i.status="missing")}),o},n.isDeleted=function(e,t){t||(t=s(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(o);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}},n.isLocalId=function(e){return/^_local/.test(e)},n.merge=function(e,t,n){var r=v(e,t),i=function(e,t){for(var r,n,i=h(e),o=0,a=i.length;o<a;o++){var s,l=i[o],c=l.ids;if(c.length>t){r||(r={});var u=c.length-t;s={pos:l.pos+u,ids:g(c,u)};for(var f=0;f<u;f++){var p=l.pos+f+"-"+c[f].id;r[p]=!0}}else s={pos:l.pos,ids:g(c,0)};n=n?v(n,s,!0).tree:[s]}return r&&d(n,function(e,t,n){delete r[t+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}},n.revExists=function(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),a=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,c=s.length;l<c;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1},n.rootToLeaf=h,n.traverseRevTree=d,n.winningRev=s,n.latest=function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=n.history?n.history.slice():[];if(u.push({id:a,pos:i,opts:s}),c)for(var f=0,p=u.length;f<p;f++){var d=u[f];if(d.pos+"-"+d.id===e)return i+"-"+a}for(var h=0,g=l.length;h<g;h++)r.push({pos:i+1,ids:l[h],history:u})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}},{}],165:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("argsarray")),s=e("pouchdb-collections"),o=r(e("inherits")),l=r(e("immediate")),a=e("pouchdb-errors"),c=e("events"),u=r(e("uuid")),f=e("pouchdb-md5");function p(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var d=Function.prototype.toString,h=d.call(Object);function g(e){var t,n,r,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=g(e[n]);return t}if(e instanceof Date)return e.toISOString();if(i=e,"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer||"undefined"!=typeof Blob&&i instanceof Blob)return p(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==h}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=g(e[n]);void 0!==o&&(t[n]=o)}return t}function m(t){var n=!1;return i(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function v(a){return i(function(i){i=g(i);var o=this,t="function"==typeof i[i.length-1]&&i.pop(),e=new Promise(function(n,r){var e;try{var t=m(function(e,t){e?r(e):n(t)});i.push(t),(e=a.apply(o,i))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function y(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var b,_=6;function w(e){return e}function E(e){return[{ok:e}]}try{localStorage.setItem("_pouch_check_localstorage",1),b=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){b=!1}function k(){return b}function x(){var t;c.EventEmitter.call(this),this._listeners={},t=this,k()&&addEventListener("storage",function(e){t.emit(e.key)})}function S(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}o(x,c.EventEmitter),x.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=y(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&l(a),o=!1}).on("error",function(){o=!1})}}},x.prototype.removeListener=function(e,t){t in this._listeners&&(c.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},x.prototype.notifyLocalWindows=function(e){k()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},x.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var C="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var T=function(){}.name?function(e){return e.name}:function(e){var t=e.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/);return t&&t[1]?t[1]:""};function A(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}var O=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],P="queryKey",N=/(?:^|&)([^&=]*)=?([^&]*)/g,I=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function L(c,u,f){return new Promise(function(s,l){c.get(u,function(e,t){if(e){if(404!==e.status)return l(e);t={}}var n,r,i,o=t._rev,a=f(t);if(!a)return s({updated:!1,rev:o});a._id=u,a._rev=o,s((r=a,i=f,(n=c).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return L(n,r._id,i)})))})})}var R=u.v4;n.adapterFun=function(o,e){return v(i(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var i=this;return function(r,i,e){if(r.constructor.listeners("debug").length){for(var t=["api",r.name,i],n=0;n<e.length-1;n++)t.push(e[n]);r.constructor.emit("debug",t);var o=e[e.length-1];e[e.length-1]=function(e,t){var n=["api",r.name,i];n=n.concat(e?["error",e]:["success",t]),r.constructor.emit("debug",n),o(e,t)}}}(i,o,r),this.taskqueue.isReady?e.apply(this,r):new Promise(function(t,n){i.taskqueue.addTask(function(e){e?n(e):t(i[o].apply(i,r))})})}))},n.assign=C,n.bulkGetShim=function(i,o,u){var e=o.docs,f=new s.Map;e.forEach(function(e){f.has(e.id)?f.get(e.id).push(e):f.set(e.id,[e])});var p=f.size,d=0,h=new Array(p),n=[];f.forEach(function(e,t){n.push(t)});var a=0;!function c(){if(!(a>=n.length)){var e=Math.min(a+_,n.length),t=n.slice(a,e);r=a,t.forEach(function(a,e){var s=r+e,t=f.get(a),n=y(t[0],["atts_since","attachments"]);n.open_revs=t.map(function(e){return e.rev}),n.open_revs=n.open_revs.filter(w);var l=w;0===n.open_revs.length&&(delete n.open_revs,l=E),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in o&&(n[e]=o[e])}),i.get(a,n,function(e,t){var n,r,i,o;n=e?[{error:e}]:l(t),r=a,i=n,h[s]={id:r,docs:i},++d===p&&(o=[],h.forEach(function(t){t.docs.forEach(function(e){o.push({id:t.id,docs:[e]})})}),u(null,{results:o})),c()})}),a+=t.length}var r}()},n.changesHandler=x,n.clone=g,n.defaultBackOff=function(e){var t,n,r=0;return e||(r=2e3),t=e,n=r,t=parseInt(t,10)||0,(n=parseInt(n,10))!=n||n<=t?n=(t||1)<<1:n+=1,6e5<n&&(t=3e5,n=6e5),~~((n-t)*Math.random()+t)},n.explainError=function(e,t){S("info","The above "+e+" is totally normal. "+t)},n.filterChange=function(r){var i={},o=r.filter&&"function"==typeof r.filter;return i.query=r.query_params,function(e){e.doc||(e.doc={});var t=o&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return a.createError(a.BAD_REQUEST,r)}}(r.filter,e.doc,i);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}},n.flatten=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t},n.functionName=T,n.guardedConsole=S,n.hasLocalStorage=k,n.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=a.createError(a.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=a.createError(a.RESERVED_ID)):t=a.createError(a.MISSING_ID),t)throw t},n.isRemote=function(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(S("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())},n.listenerCount=function(e,t){return"listenerCount"in e?e.listenerCount(t):c.EventEmitter.listenerCount(e,t)},n.nextTick=l,n.normalizeDdocFunctionName=function(e){var t=A(e);return t?t.join("/"):null},n.once=m,n.parseDdocFunctionName=A,n.parseUri=function(e){for(var t=I.exec(e),r={},n=14;n--;){var i=O[n],o=t[n]||"",a=-1!==["user","password"].indexOf(i);r[i]=a?decodeURIComponent(o):o}return r[P]={},r[O[12]].replace(N,function(e,t,n){t&&(r[P][t]=n)}),r},n.pick=y,n.rev=function(e,t){var n=g(e);return t?(delete n._rev_tree,f.stringMd5(JSON.stringify(n))):u.v4().replace(/-/g,"").toLowerCase()},n.scopeEval=function(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)},n.toPromise=v,n.upsert=L,n.uuid=R},{argsarray:54,events:89,immediate:94,inherits:95,"pouchdb-collections":160,"pouchdb-errors":161,"pouchdb-md5":163,uuid:166}],166:[function(e,t,n){var r=e("./v1"),i=e("./v4"),o=i;o.v1=r,o.v4=i,t.exports=o},{"./v1":169,"./v4":170}],167:[function(e,t,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},{}],168:[function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},{}],169:[function(e,t,n){var h,g,m=e("./lib/rng"),v=e("./lib/bytesToUuid"),y=0,b=0;t.exports=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:g;if(null==o||null==a){var s=m();null==o&&(o=h=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=g=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:b+1,u=l-y+(c-b)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||y<l)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=l,g=a;var f=(1e4*(268435455&(l+=122192928e5))+(b=c))%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=255&p,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var d=0;d<6;++d)i[r+d]=o[d];return t||v(i)}},{"./lib/bytesToUuid":167,"./lib/rng":168}],170:[function(e,t,n){var a=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},{"./lib/bytesToUuid":167,"./lib/rng":168}],171:[function(hr,gr,e){(function(pr,dr){(function(){"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var k,O,M=e(hr("immediate")),r=e(hr("uuid")),p=e(hr("spark-md5")),i=e(hr("vuvuzela")),l=e(hr("argsarray")),t=e(hr("inherits")),s=hr("events");function o(e){return"$"+e}function a(){this._store={}}function n(e){if(this._store=new a,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function c(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}a.prototype.get=function(e){var t=o(e);return this._store[t]},a.prototype.set=function(e,t){var n=o(e);return this._store[n]=t,!0},a.prototype.has=function(e){return o(e)in this._store},a.prototype.delete=function(e){var t=o(e),n=t in this._store;return delete this._store[t],n},a.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=i.substring(1))}},Object.defineProperty(a.prototype,"size",{get:function(){return Object.keys(this._store).length}}),n.prototype.add=function(e){return this._store.set(e,!0)},n.prototype.has=function(e){return this._store.has(e)},n.prototype.forEach=function(n){this._store.forEach(function(e,t){n(t)})},Object.defineProperty(n.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(k=Set,O=Map):(k=n,O=a);var u=Function.prototype.toString,f=u.call(Object);function B(e){var t,n,r,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=B(e[n]);return t}if(e instanceof Date)return e.toISOString();if(i=e,"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer||"undefined"!=typeof Blob&&i instanceof Blob)return c(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=B(e[n]);void 0!==o&&(t[n]=o)}return t}function d(t){var n=!1;return l(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function g(a){return l(function(i){i=B(i);var o=this,t="function"==typeof i[i.length-1]&&i.pop(),e=new Promise(function(n,r){var e;try{var t=d(function(e,t){e?r(e):n(t)});i.push(t),(e=a.apply(o,i))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function h(o,e){return g(l(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var i=this;return function(r,i,e){if(r.constructor.listeners("debug").length){for(var t=["api",r.name,i],n=0;n<e.length-1;n++)t.push(e[n]);r.constructor.emit("debug",t);var o=e[e.length-1];e[e.length-1]=function(e,t){var n=["api",r.name,i];n=n.concat(e?["error",e]:["success",t]),r.constructor.emit("debug",n),o(e,t)}}}(i,o,r),this.taskqueue.isReady?e.apply(this,r):new Promise(function(t,n){i.taskqueue.addTask(function(e){e?n(e):t(i[o].apply(i,r))})})}))}function b(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var m,v=6;function y(e){return e}function _(e){return[{ok:e}]}function w(i,o,u){var e=o.docs,f=new O;e.forEach(function(e){f.has(e.id)?f.get(e.id).push(e):f.set(e.id,[e])});var p=f.size,d=0,h=new Array(p);var n=[];f.forEach(function(e,t){n.push(t)});var a=0;!function c(){if(!(a>=n.length)){var e=Math.min(a+v,n.length),t=n.slice(a,e);r=a,t.forEach(function(a,e){var s=r+e,t=f.get(a),n=b(t[0],["atts_since","attachments"]);n.open_revs=t.map(function(e){return e.rev}),n.open_revs=n.open_revs.filter(y);var l=y;0===n.open_revs.length&&(delete n.open_revs,l=_),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in o&&(n[e]=o[e])}),i.get(a,n,function(e,t){var n,r,i,o;n=e?[{error:e}]:l(t),r=a,i=n,h[s]={id:r,docs:i},++d===p&&(o=[],h.forEach(function(t){t.docs.forEach(function(e){o.push({id:t.id,docs:[e]})})}),u(null,{results:o})),c()})}),a+=t.length}var r}()}try{localStorage.setItem("_pouch_check_localstorage",1),m=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){m=!1}function E(){return m}function x(){var t;s.EventEmitter.call(this),this._listeners={},t=this,E()&&addEventListener("storage",function(e){t.emit(e.key)})}function S(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function F(e){var t,n,r=0;return e||(r=2e3),t=e,n=r,t=parseInt(t,10)||0,(n=parseInt(n,10))!=n||n<=t?n=(t||1)<<1:n+=1,6e5<n&&(t=3e5,n=6e5),~~((n-t)*Math.random()+t)}function C(e,t){S("info","The above "+e+" is totally normal. "+t)}t(x,s.EventEmitter),x.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=b(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&M(a),o=!1}).on("error",function(){o=!1})}}},x.prototype.removeListener=function(e,t){t in this._listeners&&(s.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},x.prototype.notifyLocalWindows=function(e){E()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},x.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var T="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function A(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}t(A,Error),A.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new A(401,"unauthorized","Name or password is incorrect.");var P=new A(400,"bad_request","Missing JSON list of 'docs'"),N=new A(404,"not_found","missing"),I=new A(409,"conflict","Document update conflict"),L=new A(400,"bad_request","_id field must contain a string"),R=new A(412,"missing_id","_id is required for puts"),D=new A(400,"bad_request","Only reserved document ids may start with underscore."),j=(new A(412,"precondition_failed","Database not open"),new A(500,"unknown_error","Database encountered an unknown error")),q=new A(500,"badarg","Some query argument is invalid"),U=(new A(400,"invalid_request","Request was invalid"),new A(400,"query_parse_error","Some query parameter is invalid")),H=new A(500,"doc_validation","Bad special document member"),G=new A(400,"bad_request","Something wrong with the request"),z=new A(400,"bad_request","Document must be a JSON object"),W=(new A(404,"not_found","Database not found"),new A(500,"indexed_db_went_bad","unknown")),V=(new A(500,"web_sql_went_bad","unknown"),new A(500,"levelDB_went_went_bad","unknown"),new A(403,"forbidden","Forbidden by design doc validate_doc_update function"),new A(400,"bad_request","Invalid rev format")),K=(new A(412,"file_exists","The database could not be created, the file already exists."),new A(412,"missing_stub","A pre-existing attachment stub wasn't found"));new A(413,"invalid_url","Provided URL is invalid");function $(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=A.prototype,new t(e)}function Y(e){if("object"!=typeof e){var t=e;(e=j).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function J(r){var i={},o=r.filter&&"function"==typeof r.filter;return i.query=r.query_params,function(e){e.doc||(e.doc={});var t=o&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return $(G,r)}}(r.filter,e.doc,i);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}}function X(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function Q(e){var t;if(e?"string"!=typeof e?t=$(L):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=$(D)):t=$(R),t)throw t}function Z(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(S("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ee(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function te(e){var t=ee(e);return t?t.join("/"):null}var ne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],re="queryKey",ie=/(?:^|&)([^&=]*)=?([^&]*)/g,oe=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function ae(e){for(var t=oe.exec(e),r={},n=14;n--;){var i=ne[n],o=t[n]||"",a=-1!==["user","password"].indexOf(i);r[i]=a?decodeURIComponent(o):o}return r[re]={},r[ne[12]].replace(ie,function(e,t,n){t&&(r[re][t]=n)}),r}function se(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function le(c,u,f){return new Promise(function(s,l){c.get(u,function(e,t){if(e){if(404!==e.status)return l(e);t={}}var n,r,i,o=t._rev,a=f(t);if(!a)return s({updated:!1,rev:o});a._id=u,a._rev=o,s((r=a,i=f,(n=c).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return le(n,r._id,i)})))})})}var ce=function(e){return atob(e)},ue=function(e){return btoa(e)};function fe(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}function pe(e,t){return fe([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(e)],{type:t})}function de(e,t){return pe(ce(e),t)}function he(e,n){var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var t=e.target.result||"";if(r)return n(t);n(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(t))},r?t.readAsBinaryString(e):t.readAsArrayBuffer(e)}function ge(e,t){he(e,function(e){t(e)})}function me(e,t){ge(e,function(e){t(ue(e))})}var ve=dr.setImmediate||dr.setTimeout,ye=32768;function be(t,e,n,r,i){var o,a,s,l,c,u;(0<n||r<e.size)&&(c=n,u=r,e=(l=e).webkitSlice?l.webkitSlice(c,u):l.slice(c,u)),o=e,a=function(e){t.append(e),i()},(s=new FileReader).onloadend=function(e){var t=e.target.result||new ArrayBuffer(0);a(t)},s.readAsArrayBuffer(o)}function _e(e,t,n,r,i){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function we(t,n){var e="string"==typeof t,r=e?t.length:t.size,i=Math.min(ye,r),o=Math.ceil(r/i),a=0,s=e?new p:new p.ArrayBuffer,l=e?_e:be;function c(){ve(f)}function u(){var e,t=(e=s.end(!0),ue(e));n(t),s.destroy()}function f(){var e=a*i;l(s,t,e,e+i,++a<o?c:u)}f()}function Ee(e){return p.hash(e)}function ke(e,t){var n=B(e);return t?(delete n._rev_tree,Ee(JSON.stringify(n))):r.v4().replace(/-/g,"").toLowerCase()}var xe=r.v4;function Se(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var a=i.ids,s=a[2],l=i.pos;if(s.length)for(var c=0,u=s.length;c<u;c++)o.push({pos:l+1,ids:s[c]});else{var f=!!a[1].deleted,p=a[0];t&&!(r!==f?r:n!==l?n<l:t<p)||(t=p,n=l,r=f)}}return n+"-"+t}function Ce(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=t(0===a.length,i,o[0],n.ctx,o[1]),l=0,c=a.length;l<c;l++)r.push({pos:i+1,ids:a[l],ctx:s})}function Te(e,t){return e.pos-t.pos}function Ae(e){var o=[];Ce(e,function(e,t,n,r,i){e&&o.push({rev:t+"-"+n,pos:t,opts:i})}),o.sort(Te).reverse();for(var t=0,n=o.length;t<n;t++)delete o[t].pos;return o}function Oe(e){for(var t=Se(e),n=Ae(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function Pe(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=t.history?t.history.slice():[];u.push({id:a,opts:s}),c&&n.push({pos:i+1-u.length,ids:u});for(var f=0,p=l.length;f<p;f++)r.push({pos:i+1,ids:l[f],history:u})}return n.reverse()}function Ne(e,t){return e.pos-t.pos}function Ie(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function Le(e,t){return e[0]<t[0]?-1:1}function Re(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;0<n.length;){var i=n.pop(),o=i.tree1,a=i.tree2;(o[1].status||a[1].status)&&(o[1].status="available"===o[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(o[2][0]){for(var l=!1,c=0;c<o[2].length;c++)o[2][c][0]===a[2][s][0]&&(n.push({tree1:o[2][c],tree2:a[2][s]}),l=!0);l||(r="new_branch",u=o[2],f=a[2][s],void 0,p=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(u,f,Le),u.splice(p,0,f))}else r="new_leaf",o[2][0]=a[2][s]}var u,f,p;return{conflicts:r,tree:e}}function De(e,t,n){var r,i=[],o=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=Re(c.ids,t.ids),i.push({pos:c.pos,ids:r.tree}),o=o||r.conflicts,a=!0;else if(!0!==n){var u=c.pos<t.pos?c:t,f=c.pos<t.pos?t:c,p=f.pos-u.pos,d=[],h=[];for(h.push({ids:u.ids,diff:p,parent:null,parentIdx:null});0<h.length;){var g=h.pop();if(0!==g.diff)for(var m=g.ids[2],v=0,y=m.length;v<y;v++)h.push({ids:m[v],diff:g.diff-1,parent:g.ids,parentIdx:v});else g.ids[0]===f.ids[0]&&d.push(g)}var b=d[0];b?(r=Re(b.ids,f.ids),b.parent[2][b.parentIdx]=r.tree,i.push({pos:u.pos,ids:u.ids}),o=o||r.conflicts,a=!0):i.push(c)}else i.push(c)}return a||i.push(t),i.sort(Ne),{tree:i,conflicts:o||"internal_node"}}function je(e,t,n){var r=De(e,t),i=function(e,t){for(var r,n,i=Pe(e),o=0,a=i.length;o<a;o++){var s,l=i[o],c=l.ids;if(c.length>t){r||(r={});var u=c.length-t;s={pos:l.pos+u,ids:Ie(c,u)};for(var f=0;f<u;f++){var p=l.pos+f+"-"+c[f].id;r[p]=!0}}else s={pos:l.pos,ids:Ie(c,0)};n=n?De(n,s,!0).tree:[s]}return r&&Ce(n,function(e,t,n){delete r[t+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Me(e){return e.ids}function Be(e,t){t||(t=Se(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(Me);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function Fe(e){return/^_local/.test(e)}function qe(i,t,n){s.EventEmitter.call(this);var o=this;this.db=i;var r=(t=t?B(t):{}).complete=d(function(e,t){var n,r;e?(r="error",0<("listenerCount"in(n=o)?n.listenerCount(r):s.EventEmitter.listenerCount(n,r))&&o.emit("error",e)):o.emit("complete",t),o.removeAllListeners(),i.removeListener("destroyed",a)});function a(){o.cancel()}n&&(o.on("complete",function(e){n(null,e)}),o.on("error",n)),i.once("destroyed",a),t.onChange=function(e,t,n){o.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){S("error",'Error in .on("change", function):',e)}}(o,e,t,n)};var e=new Promise(function(n,r){t.complete=function(e,t){e?r(e):n(t)}});o.once("cancel",function(){i.removeListener("destroyed",a),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(function(e){r(null,e)},r),i.taskqueue.isReady?o.validateChanges(t):i.taskqueue.addTask(function(e){e?t.complete(e):o.isCancelled?o.emit("cancel"):o.validateChanges(t)})}function Ue(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=Ae(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:r,doc:e};return Be(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Oe(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function He(e,t){return e<t?-1:t<e?1:0}function Ge(n,r){return function(e,t){e||t[0]&&t[0].error?((e=e||t[0]).docId=r,n(e)):n(null,t.length?t[0]:t)}}function ze(e,t){var n=He(e._id,t._id);return 0!==n?n:He(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function We(){for(var e in s.EventEmitter.call(this),We.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function Ve(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ke(e,t){if(!(this instanceof Ke))return new Ke(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=B(t),n.auto_compaction=t.auto_compaction,n.prefix=Ke.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Ke.adapters,i=Ke.preferredAdapters,o=Ke.prefix,a=t.adapter;if(!a)for(var s=0;s<i.length&&"idb"===(a=i[s])&&"websql"in r&&E()&&localStorage["_pouch__websqldb_"+o+e];++s)S("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var l=r[a];return{name:l&&"use_prefix"in l&&!l.use_prefix?e:o+e,adapter:a}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,n.name=e,n._adapter=t.adapter,Ke.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Ke.adapters[t.adapter]||!Ke.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);We.call(n),n.taskqueue=new Ve,n.adapter=t.adapter,Ke.adapters[t.adapter].call(n,t,function(e){if(e)return n.taskqueue.fail(e);(function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)})(n),n.emit("created",n),Ke.emit("created",n.name),n.taskqueue.ready(n)})}t(qe,s.EventEmitter),qe.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},qe.prototype.validateChanges=function(t){var n=t.complete,r=this;Ke._changesFilterPlugin?Ke._changesFilterPlugin.validate(t,function(e){if(e)return n(e);r.doChanges(t)}):r.doChanges(t)},qe.prototype.doChanges=function(t){var n=this,r=t.complete;if("live"in(t=B(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Ue,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(Ke._changesFilterPlugin){if(Ke._changesFilterPlugin.normalize(t),Ke._changesFilterPlugin.shouldFilter(this,t))return Ke._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&S("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var o=n.cancel;n.cancel=l(function(e){i.cancel(),o.apply(this,e)})}}else this.db.info().then(function(e){n.isCancelled?r(null,{status:"cancelled"}):(t.since=e.update_seq,n.doChanges(t))},r)},t(We,s.EventEmitter),We.prototype.post=h("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n($(z));this.bulkDocs({docs:[e]},t,Ge(n,e._id))}),We.prototype.put=h("put",function(n,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof n||Array.isArray(n))return r($(z));if(Q(n._id),Fe(n._id)&&"function"==typeof this._putLocal)return n._deleted?this._removeLocal(n,r):this._putLocal(n,r);var e,i,o,a,s=this;function l(e){"function"==typeof s._put&&!1!==t.new_edits?s._put(n,t,e):s.bulkDocs({docs:[n]},t,Ge(e,n._id))}t.force&&n._rev?(i=(e=n._rev.split("-"))[1],o=parseInt(e[0],10)+1,a=ke(),n._revisions={start:o,ids:[a,i]},n._rev=o+"-"+a,t.new_edits=!1,l(function(e){var t=e?null:{ok:!0,id:n._id,rev:n._rev};r(e,t)})):l(r)}),We.prototype.putAttachment=h("putAttachment",function(t,n,r,i,o){var a=this;function s(e){var t="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[n]={content_type:o,data:i,revpos:++t},a.put(e)}return"function"==typeof o&&(o=i,i=r,r=null),void 0===o&&(o=i,i=r,r=null),o||S("warn","Attachment",n,"on document",t,"is missing content_type"),a.get(t).then(function(e){if(e._rev!==r)throw $(I);return s(e)},function(e){if(e.reason===N.message)return s({_id:t});throw e})}),We.prototype.removeAttachment=h("removeAttachment",function(e,n,r,i){var o=this;o.get(e,function(e,t){if(e)i(e);else if(t._rev===r){if(!t._attachments)return i();delete t._attachments[n],0===Object.keys(t._attachments).length&&delete t._attachments,o.put(t,i)}else i($(I))})}),We.prototype.remove=h("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Fe(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,Ge(r,o._id))}),We.prototype.revsDiff=h("revsDiff",function(o,e,a){"function"==typeof e&&(a=e,e={});var c=Object.keys(o);if(!c.length)return a(null,{});var u=0,f=new O;function p(e,t){f.has(e)||f.set(e,{missing:[]}),f.get(e).missing.push(t)}c.map(function(i){this._getRevisionTree(i,function(e,t){if(e&&404===e.status&&"missing"===e.message)f.set(i,{missing:o[i]});else{if(e)return a(e);n=t,l=o[s=i].slice(0),Ce(n,function(e,t,n,r,i){var o=t+"-"+n,a=l.indexOf(o);-1!==a&&(l.splice(a,1),"available"!==i.status&&p(s,o))}),l.forEach(function(e){p(s,e)})}var s,n,l;if(++u===c.length){var r={};return f.forEach(function(e,t){r[t]=e}),a(null,r)}})},this)}),We.prototype.bulkGet=h("bulkGet",function(e,t){w(this,e,t)}),We.prototype.compactDocument=h("compactDocument",function(r,i,c){var u=this;this._getRevisionTree(r,function(e,t){if(e)return c(e);var o,a,n=(o={},a=[],Ce(t,function(e,t,n,r){var i=t+"-"+n;return e&&(o[i]=0),void 0!==r&&a.push({from:r,to:i}),i}),a.reverse(),a.forEach(function(e){void 0===o[e.from]?o[e.from]=1+o[e.to]:o[e.from]=Math.min(o[e.from],1+o[e.to])}),o),s=[],l=[];Object.keys(n).forEach(function(e){n[e]>i&&s.push(e)}),Ce(t,function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==s.indexOf(o)&&l.push(o)}),u._doCompaction(r,l,c)})}),We.prototype.compact=h("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function n(r){var e=r._compactionQueue[0],t=e.opts,i=e.callback;r.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),r._compact(t,function(e,t){e?i(e):i(null,t),M(function(){r._compactionQueue.shift(),r._compactionQueue.length&&n(r)})})})}(this)}),We.prototype._compact=function(e,n){var r=this,t={return_docs:!1,last_seq:e.last_seq||0},i=[];r.changes(t).on("change",function(e){i.push(r.compactDocument(e.id,0))}).on("complete",function(e){var t=e.last_seq;Promise.all(i).then(function(){return le(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<t)&&(e.last_seq=t,e)})}).then(function(){n(null,{ok:!0})}).catch(n)}).on("error",n)},We.prototype.get=h("get",function(_,w,E){if("function"==typeof w&&(E=w,w={}),"string"!=typeof _)return E($(L));if(Fe(_)&&"function"==typeof this._getLocal)return this._getLocal(_,E);var n=[],k=this;function r(){var a=[],s=n.length;if(!s)return E(null,a);n.forEach(function(o){k.get(_,{rev:o,revs:w.revs,latest:w.latest,attachments:w.attachments,binary:w.binary},function(e,t){if(e)a.push({missing:o});else{for(var n,r=0,i=a.length;r<i;r++)if(a[r].ok&&a[r].ok._rev===t._rev){n=!0;break}n||a.push({ok:t})}--s||E(null,a)})})}if(!w.open_revs)return this._get(_,w,function(e,t){if(e)return e.docId=_,E(e);var i=t.doc,n=t.metadata,o=t.ctx;if(w.conflicts){var r=Oe(n);r.length&&(i._conflicts=r)}if(Be(n,i._rev)&&(i._deleted=!0),w.revs||w.revs_info){for(var a=i._rev.split("-"),s=parseInt(a[0],10),l=a[1],c=Pe(n.rev_tree),u=null,f=0;f<c.length;f++){var p=c[f],d=p.ids.map(function(e){return e.id}).indexOf(l);(d===s-1||!u&&-1!==d)&&(u=p)}if(!u)return(e=new Error("invalid rev tree")).docId=_,E(e);var h=u.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])+1,g=u.ids.length-h;if(u.ids.splice(h,g),u.ids.reverse(),w.revs&&(i._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(e){return e.id})}),w.revs_info){var m=u.pos+u.ids.length;i._revs_info=u.ids.map(function(e){return{rev:--m+"-"+e.id,status:e.opts.status}})}}if(w.attachments&&i._attachments){var v=i._attachments,y=Object.keys(v).length;if(0===y)return E(null,i);Object.keys(v).forEach(function(r){this._getAttachment(i._id,r,v[r],{rev:i._rev,binary:w.binary,ctx:o},function(e,t){var n=i._attachments[r];n.data=t,delete n.stub,delete n.length,--y||E(null,i)})},k)}else{if(i._attachments)for(var b in i._attachments)i._attachments.hasOwnProperty(b)&&(i._attachments[b].stub=!0);E(null,i)}});if("all"===w.open_revs)this._getRevisionTree(_,function(e,t){if(e)return E(e);n=Ae(t).map(function(e){return e.rev}),r()});else{if(!Array.isArray(w.open_revs))return E($(j,"function_clause"));n=w.open_revs;for(var e=0;e<n.length;e++){var t=n[e];if("string"!=typeof t||!/^\d+-/.test(t))return E($(V))}r()}}),We.prototype.getAttachment=h("getAttachment",function(n,r,i,o){var a=this;i instanceof Function&&(o=i,i={}),this._get(n,i,function(e,t){return e?o(e):t.doc._attachments&&t.doc._attachments[r]?(i.ctx=t.ctx,i.binary=!0,void a._getAttachment(n,r,t.doc._attachments[r],i,o)):o($(N))})}),We.prototype.allDocs=h("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e($(U,"Query parameter `"+n+"` is not compatible with multi-get"));if(!Z(this)&&(i="limit"in(r=t)?r.keys.slice(r.skip,r.limit+r.skip):0<r.skip?r.keys.slice(r.skip):r.keys,r.keys=i,r.skip=0,delete r.limit,r.descending&&(i.reverse(),r.descending=!1),0===t.keys.length))return this._allDocs({limit:0},e)}var r,i;return this._allDocs(t,e)}),We.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new qe(this,e,t)},We.prototype.close=h("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),We.prototype.info=h("info",function(n){var r=this;this._info(function(e,t){if(e)return n(e);t.db_name=t.db_name||r.name,t.auto_compaction=!(!r.auto_compaction||Z(r)),t.adapter=r.adapter,n(null,t)})}),We.prototype.id=h("id",function(e){return this._id(e)}),We.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},We.prototype.bulkDocs=h("bulkDocs",function(e,i,o){if("function"==typeof i&&(o=i,i={}),i=i||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return o($(P));for(var t=0;t<e.docs.length;++t)if("object"!=typeof e.docs[t]||Array.isArray(e.docs[t]))return o($(z));var r;if(e.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(e){var t;r=r||"_"===(t=e).charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'",n._attachments[e].content_type||S("warn","Attachment",e,"on document",n._id,"is missing content_type")})}),r)return o($(G,r));"new_edits"in i||(i.new_edits=!("new_edits"in e)||e.new_edits);var a=this;i.new_edits||Z(a)||e.docs.sort(ze),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=b(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var s=e.docs.map(function(e){return e._id});return this._bulkDocs(e,i,function(e,t){if(e)return o(e);if(i.new_edits||(t=t.filter(function(e){return e.error})),!Z(a))for(var n=0,r=t.length;n<r;n++)t[n].id=t[n].id||s[n];o(null,t)})}),We.prototype.registerDependentDatabase=h("registerDependentDatabase",function(t,e){var n=new this.constructor(t,this.__opts);le(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:n})}).catch(e)}),We.prototype.destroy=h("destroy",function(e,o){"function"==typeof e&&(o=e,e={});var a=this,s=!("use_prefix"in a)||a.use_prefix;function l(){a._destroy(e,function(e,t){if(e)return o(e);a._destroyed=!0,a.emit("destroyed"),o(null,t||{ok:!0})})}if(Z(a))return l();a.get("_local/_pouch_dependentDbs",function(e,t){if(e)return 404!==e.status?o(e):l();var n=t.dependentDbs,r=a.constructor,i=Object.keys(n).map(function(e){var t=s?e.replace(new RegExp("^"+r.prefix),""):e;return new r(t,a.__opts).destroy()});Promise.all(i).then(l,o)})}),Ve.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Ve.prototype.fail=function(e){this.failed=e,this.execute()},Ve.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Ve.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},t(Ke,We);var $e="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},Ye=fetch,Je=Headers;Ke.adapters={},Ke.preferredAdapters=[],Ke.prefix="_pouch_";var Xe=new s.EventEmitter;(function(t){Object.keys(s.EventEmitter.prototype).forEach(function(e){"function"==typeof s.EventEmitter.prototype[e]&&(t[e]=Xe[e].bind(Xe))});var r=t._destructionListeners=new O;t.on("ref",function(e){r.has(e.name)||r.set(e.name,[]),r.get(e.name).push(e)}),t.on("unref",function(e){if(r.has(e.name)){var t=r.get(e.name),n=t.indexOf(e);n<0||(t.splice(n,1),1<t.length?r.set(e.name,t):r.delete(e.name))}}),t.on("destroyed",function(e){if(r.has(e)){var t=r.get(e);r.delete(e),t.forEach(function(e){e.emit("destroyed",!0)})}})})(Ke),Ke.adapter=function(e,t,n){t.valid()&&(Ke.adapters[e]=t,n&&Ke.preferredAdapters.push(e))},Ke.plugin=function(t){if("function"==typeof t)t(Ke);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Ke.prototype[e]=t[e]})}return this.__defaults&&(Ke.__defaults=T({},this.__defaults)),Ke},Ke.defaults=function(e){function n(e,t){if(!(this instanceof n))return new n(e,t);t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),t=T({},n.__defaults,t),Ke.call(this,e,t)}return t(n,Ke),n.preferredAdapters=Ke.preferredAdapters.slice(),Object.keys(Ke).forEach(function(e){e in n||(n[e]=Ke[e])}),n.__defaults=T({},this.__defaults,e),n},Ke.fetch=function(e,t){return Ye(e,t)};function Qe(e,t){for(var n=e,r=0,i=t.length;r<i&&(n=n[t[r]]);r++);return n}function Ze(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?0<r&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var et=["$or","$nor","$not"];function tt(e){return-1<et.indexOf(e)}function nt(e){return Object.keys(e)[0]}function rt(e){var n={};return e.forEach(function(t){Object.keys(t).forEach(function(e){var p=t[e];if("object"!=typeof p&&(p={$eq:p}),tt(e))p instanceof Array?n[e]=p.map(function(e){return rt([e])}):n[e]=rt([p]);else{var d=n[e]=n[e]||{};Object.keys(p).forEach(function(e){var t,n,r,i,o,a,s,l,c,u,f=p[e];return"$gt"===e||"$gte"===e?(l=e,c=f,void(void 0===(u=d).$eq&&(void 0!==u.$gte?"$gte"===l?c>u.$gte&&(u.$gte=c):c>=u.$gte&&(delete u.$gte,u.$gt=c):void 0!==u.$gt?"$gte"===l?c>u.$gt&&(delete u.$gt,u.$gte=c):c>u.$gt&&(u.$gt=c):u[l]=c))):"$lt"===e||"$lte"===e?(o=e,a=f,void(void 0===(s=d).$eq&&(void 0!==s.$lte?"$lte"===o?a<s.$lte&&(s.$lte=a):a<=s.$lte&&(delete s.$lte,s.$lt=a):void 0!==s.$lt?"$lte"===o?a<s.$lt&&(delete s.$lt,s.$lte=a):a<s.$lt&&(s.$lt=a):s[o]=a))):"$ne"===e?(r=f,void("$ne"in(i=d)?i.$ne.push(r):i.$ne=[r])):"$eq"===e?(t=f,delete(n=d).$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,void(n.$eq=t)):void(d[e]=f)})}})}),n}function it(e){var t=B(e),n=!1;(function e(t,n){for(var r in t){"$and"===r&&(n=!0);var i=t[r];"object"==typeof i&&(n=e(i,n))}return n})(t,!1)&&("$and"in(t=function e(t){for(var n in t){if(Array.isArray(t))for(var r in t)t[r].$and&&(t[r]=rt(t[r].$and));var i=t[n];"object"==typeof i&&e(i)}return t}(t))&&(t=rt(t.$and)),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}})}),"$not"in t&&(t.$not=rt([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[o]=a}return t}var ot=-324,at=3,st="";function lt(e,t){if(e===t)return 0;e=ct(e),t=ct(t);var n,r,i=ht(e),o=ht(t);if(i-o!=0)return i-o;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return(n=e)===(r=t)?0:r<n?1:-1}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=lt(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=lt(n[o],r[o]);if(0!==a)return a;if(0!==(a=lt(e[n[o]],t[r[o]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function ct(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=ct(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var o=t[i];void 0!==o&&(e[i]=ct(o))}}}return e}function ut(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(a=((r?-n:n)-ot).toString(),s="0",l=at,function(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}(a,s,l)+a);var a,s,l;i+=st+o;var c=Math.abs(parseFloat(t[0]));r&&(c=10-c);var u=c.toFixed(20);return u=u.replace(/\.?0+$/,""),i+=st+u}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=ft(n[r]);else for(;++r<i;){var a=n[r];o+=ft(a)+ft(e[a])}return o}return""}function ft(e){return ht(e=ct(e))+st+ut(e)+"\0"}function pt(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",a=e.substring(t,t+at),s=parseInt(a,10)+ot;for(i&&(s=-s),t+=at;;){var l=e[t];if("\0"===l)break;o+=l,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function dt(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;Array.isArray(i)?i.push(n):o===e.length-2?i[e.pop()]=n:e.push(n)}}function ht(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function gt(e,t,n){if(e=e.filter(function(e){return mt(e.doc,t.selector,n)}),t.sort){var r=function(e){function o(n){return e.map(function(e){var t=Ze(nt(e));return Qe(n,t)})}return function(e,t){var n,r,i=lt(o(e.doc),o(t.doc));return 0!==i?i:(n=e.doc._id,r=t.doc._id,n<r?-1:r<n?1:0)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===(i=t.sort[0])[nt(i)]&&(e=e.reverse())}var i;if("limit"in t||"skip"in t){var o=t.skip||0,a=("limit"in t?t.limit:e.length)+o;e=e.slice(o,a)}return e}function mt(s,l,e){return e.every(function(e){var t,n,r,i=l[e],o=Ze(e),a=Qe(s,o);return tt(e)?(n=i,r=s,"$or"===(t=e)?n.some(function(e){return mt(r,e,Object.keys(e))}):"$not"===t?!mt(r,n,Object.keys(n)):!n.find(function(e){return mt(r,e,Object.keys(e))})):vt(i,s,o,a)})}function vt(n,r,i,o){return!n||("object"==typeof n?Object.keys(n).every(function(e){var t=n[e];return function(e,t,n,r,i){if(!wt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return wt[e](t,n,r,i)}(e,r,t,i,o)}):n===o)}function yt(e){return null!=e}function bt(e){return void 0!==e}function _t(t,e){return e.some(function(e){return t instanceof Array?-1<t.indexOf(e):t===e})}var wt={$elemMatch:function(t,n,r,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.some(function(e){return mt(e,n,Object.keys(n))}):e.some(function(e){return vt(n,t,r,e)}))},$allMatch:function(t,n,r,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.every(function(e){return mt(e,n,Object.keys(n))}):e.every(function(e){return vt(n,t,r,e)}))},$eq:function(e,t,n,r){return bt(r)&&0===lt(r,t)},$gte:function(e,t,n,r){return bt(r)&&0<=lt(r,t)},$gt:function(e,t,n,r){return bt(r)&&0<lt(r,t)},$lte:function(e,t,n,r){return bt(r)&&lt(r,t)<=0},$lt:function(e,t,n,r){return bt(r)&&lt(r,t)<0},$exists:function(e,t,n,r){return t?bt(r):!bt(r)},$mod:function(e,t,n,r){return yt(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==lt(r,e)})},$in:function(e,t,n,r){return yt(r)&&_t(r,t)},$nin:function(e,t,n,r){return yt(r)&&!_t(r,t)},$size:function(e,t,n,r){return yt(r)&&(i=t,r.length===i);var i},$all:function(e,t,n,r){return Array.isArray(r)&&(i=r,t.every(function(e){return-1<i.indexOf(e)}));var i},$regex:function(e,t,n,r){return yt(r)&&(i=r,new RegExp(t).test(i));var i},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function Et(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function kt(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=te(e.view):e.filter=te(e.filter))}function xt(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!Z(e.db)}function St(r,i){var o=i.complete;if("_view"===i.filter){if(!i.view||"string"!=typeof i.view){var e=$(G,"`view` filter parameter not found or invalid.");return o(e)}var a=ee(i.view);r.db.get("_design/"+a[0],function(e,t){if(r.isCancelled)return o(null,{status:"cancelled"});if(e)return o(Y(e));var n=t&&t.views&&t.views[a[1]]&&t.views[a[1]].map;if(!n)return o($(N,t.views?"missing json key: "+a[1]:"missing json key: views"));i.filter=se(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+n+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),r.doChanges(i)})}else if(i.selector)i.filter=function(e){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=gt([{doc:e}],{selector:t=it(t)},Object.keys(t));return n&&1===n.length}(e,i.selector)},r.doChanges(i);else{var s=ee(i.filter);r.db.get("_design/"+s[0],function(e,t){if(r.isCancelled)return o(null,{status:"cancelled"});if(e)return o(Y(e));var n=t&&t.filters&&t.filters[s[1]];if(!n)return o($(N,t&&t.filters?"missing json key: "+s[1]:"missing json key: filters"));i.filter=se('"use strict";\nreturn '+n+";",{}),r.doChanges(i)})}}function Ct(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Ke.plugin(function(e){e._changesFilterPlugin={validate:Et,normalize:kt,shouldFilter:xt,filter:St}}),Ke.version="7.2.1";var Tt=Ct(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),At=Ct(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Ot(e){if(!/^\d+-/.test(e))return $(V);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Pt(e,t,n){var r,i,o;n||(n={deterministic_revs:!0});var a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=xe()),i=ke(e,n.deterministic_revs),e._rev){if((o=Ot(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,a,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[i,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,a),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((o=Ot(e._rev)).error)return o;r=o.prefix,i=o.id,e._rev_tree=[{pos:r,ids:[i,a,[]]}]}Q(e._id),e._rev=r+"-"+i;var s={metadata:{},data:{}};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c="_"===l[0];if(c&&!Tt[l]){var u=$(H,l);throw u.message=H.message+": "+l,u}c&&!At[l]?s.metadata[l.slice(1)]=e[l]:s.data[l]=e[l]}return s}function Nt(t,e,n){var r=function(e){try{return ce(e)}catch(e){return{error:$(q,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?pe(r,t.content_type):"base64"===e?ue(r):r,we(r,function(e){t.digest="md5-"+e,n()})}function It(e,t,n){if(e.stub)return n();var r,i,o;"string"==typeof e.data?Nt(e,t,n):(i=t,o=n,we((r=e).data,function(e){r.digest="md5-"+e,r.length=r.data.size||r.data.length||0,"binary"===i?ge(r.data,function(e){r.data=e,o()}):"base64"===i?me(r.data,function(e){r.data=e,o()}):o()}))}function Lt(e,t,n,r,i,o,a,s){if(function(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),a=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,c=s.length;l<c;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(t.rev_tree,n.metadata.rev)&&!s)return r[i]=n,o();var l=t.winningRev||Se(t),c="deleted"in t?t.deleted:Be(t,l),u="deleted"in n.metadata?n.metadata.deleted:Be(n.metadata),f=/^1-/.test(n.metadata.rev);if(c&&!u&&s&&f){var p=n.data;p._rev=l,p._id=n.metadata.id,n=Pt(p,s)}var d=je(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&u&&"new_leaf"!==d.conflicts||!c&&"new_leaf"!==d.conflicts||c&&!u&&"new_branch"===d.conflicts)){var h=$(I);return r[i]=h,o()}var g=n.metadata.rev;n.metadata.rev_tree=d.tree,n.stemmedRevs=d.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var m=Se(n.metadata),v=Be(n.metadata,m),y=c===v?0:c<v?-1:1;a(n,m,v,g===m?v:Be(n.metadata,g),!0,y,i,o)}var Rt=5,Dt="document-store",jt="by-sequence",Mt="attach-store",Bt="attach-seq-store",Ft="meta-store",qt="local-store",Ut="detect-blob-support";function Ht(n){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),n($(W,t,e.type))}}function Gt(e,t,n){return{data:function(t){try{return JSON.stringify(t)}catch(e){return i.stringify(t)}}(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function zt(e){if(!e)return null;var t=function(t){try{return JSON.parse(t)}catch(e){return i.parse(t)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function Wt(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Vt(e,t,n,r){n?r(e?"string"!=typeof e?e:de(e,t):fe([""],{type:t})):e?"string"!=typeof e?he(e,function(e){r(ue(e))}):r(e):r("")}function Kt(i,o,a,e){var t=Object.keys(i._attachments||{});if(!t.length)return e&&e();var n=0;function s(){++n===t.length&&e&&e()}t.forEach(function(e){var t,n,r;o.attachments&&o.include_docs?(t=e,n=i._attachments[t],r=n.digest,a.objectStore(Mt).get(r).onsuccess=function(e){n.body=e.target.result.body,s()}):(i._attachments[e].stub=!0,s())})}function $t(e,a){return Promise.all(e.map(function(o){if(o.doc&&o.doc._attachments){var e=Object.keys(o.doc._attachments);return Promise.all(e.map(function(n){var r=o.doc._attachments[n];if("body"in r){var e=r.body,i=r.content_type;return new Promise(function(t){Vt(e,i,a,function(e){o.doc._attachments[n]=T(b(r,["digest","content_type"]),{data:e}),t()})})}}))}}))}function Yt(e,r,t){var i=[],o=t.objectStore(jt),n=t.objectStore(Mt),a=t.objectStore(Bt),s=e.length;function l(){--s||i.length&&i.forEach(function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||n.delete(t)}})}e.forEach(function(e){var t=o.index("_doc_id_rev"),n=r+"::"+e;t.getKey(n).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return l();o.delete(t),a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];i.push(n),a.delete(t.primaryKey),t.continue()}else l()}}})}function Jt(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}var Xt=new x;function Qt(a,e,s,f,t,n){for(var p,d,h,g,m,r,i,o,l=e.docs,c=0,u=l.length;c<u;c++){var v=l[c];v._id&&Fe(v._id)||(v=l[c]=Pt(v,s.new_edits,a)).error&&!i&&(i=v)}if(i)return n(i);var y=!1,b=0,_=new Array(l.length),w=new O,E=!1,k=f._meta.blobSupport?"blob":"base64";function x(){y=!0,S()}function S(){o&&y&&(o.docCount+=b,r.put(o))}function C(){E||(Xt.notify(f._meta.name),n(null,_))}function T(e,t,n,r,i,o,a,s){e.metadata.winningRev=t,e.metadata.deleted=n;var l=e.data;if(l._id=e.metadata.id,l._rev=e.metadata.rev,r&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(s,l,e,t,n,r){var i=s.data,c=0,o=Object.keys(i._attachments);function u(){c===o.length&&A(s,l,e,t,n,r)}function f(){c++,u()}o.forEach(function(e){var n,r,i,t=s.data._attachments[e];if(t.stub)c++,u();else{var o=t.data;delete t.data,t.revpos=parseInt(l,10);var a=t.digest;n=a,r=o,i=f,g.count(n).onsuccess=function(e){if(e.target.result)return i();var t={digest:n,body:r};g.put(t).onsuccess=i}}})}(e,t,n,i,a,s);b+=o,S(),A(e,t,n,i,a,s)}function A(i,a,s,l,e,t){var n=i.data,c=i.metadata;function r(e){var t,o,n=i.stemmedRevs||[];l&&f.auto_compaction&&(n=n.concat((t=i.metadata,o=[],Ce(t.rev_tree,function(e,t,n,r,i){"available"!==i.status||e||(o.push(t+"-"+n),i.status="missing")}),o))),n&&n.length&&Yt(n,i.metadata.id,p),c.seq=e.target.result;var r=Gt(c,a,s);d.put(r).onsuccess=u}function u(){_[e]={ok:!0,id:c.id,rev:c.rev},w.set(i.metadata.id,i.metadata),function(e,t,n){var r,i,o,a=0,s=Object.keys(e.data._attachments||{});if(!s.length)return n();function l(){++a===s.length&&n()}for(var c=0;c<s.length;c++)r=s[c],o=void 0,i=e.data._attachments[r].digest,(o=m.put({seq:t,digestSeq:i+"::"+t})).onsuccess=l,o.onerror=function(e){e.preventDefault(),e.stopPropagation(),l()}}(i,c.seq,t)}n._doc_id_rev=c.id+"::"+c.rev,delete n._id,delete n._rev;var o=h.put(n);o.onsuccess=r,o.onerror=function(e){e.preventDefault(),e.stopPropagation(),h.index("_doc_id_rev").getKey(n._doc_id_rev).onsuccess=function(e){h.put(n,e.target.result).onsuccess=r}}}!function(e,o,t){if(!e.length)return t();var a,n=0;function s(){n++,e.length===n&&(a?t(a):t())}e.forEach(function(e){var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!t.length)return s();function r(e){a=e,++n===t.length&&s()}for(var i in e.data._attachments)e.data._attachments.hasOwnProperty(i)&&It(e.data._attachments[i],o,r)})}(l,k,function(e){if(e)return n(e);!function(){var e=Jt(t,[Dt,jt,Mt,qt,Bt,Ft],"readwrite");if(e.error)return n(e.error);(p=e.txn).onabort=Ht(n),p.ontimeout=Ht(n),p.oncomplete=C,d=p.objectStore(Dt),h=p.objectStore(jt),g=p.objectStore(Mt),m=p.objectStore(Bt),(r=p.objectStore(Ft)).get(Ft).onsuccess=function(e){o=e.target.result,S()},function(t){var i=[];if(l.forEach(function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach(function(e){var t=n.data._attachments[e];t.stub&&i.push(t.digest)})}),!i.length)return t();var o,a=0;i.forEach(function(e){var n,r;n=e,r=function(e){e&&!o&&(o=e),++a===i.length&&t(o)},g.get(n).onsuccess=function(e){if(e.target.result)r();else{var t=$(K,"unknown stub attachment with digest "+n);t.status=412,r(t)}}})}(function(e){if(e)return E=!0,n(e);!function(){if(l.length)for(var e=0,t=0,n=l.length;t<n;t++){var r=l[t];if(r._id&&Fe(r._id))i();else d.get(r.metadata.id).onsuccess=o}function i(){++e===l.length&&function(l,e,i,c,o,u,f,p,t){l=l||1e3;var d=p.new_edits,a=new O,n=0,s=e.length;function h(){++n===s&&t&&t()}e.forEach(function(e,n){if(e._id&&Fe(e._id)){var t=e._deleted?"_removeLocal":"_putLocal";i[t](e,{ctx:o},function(e,t){u[n]=e||t,h()})}else{var r=e.metadata.id;a.has(r)?(s--,a.get(r).push([e,n])):a.set(r,[[e,n]])}}),a.forEach(function(i,o){var a=0;function s(){++a<i.length?e():h()}function e(){var e=i[a],t=e[0],n=e[1];if(c.has(o))Lt(l,c.get(o),t,u,n,s,f,d);else{var r=je([],t.metadata.rev_tree[0],l);t.metadata.rev_tree=r.tree,t.stemmedRevs=r.stemmedRevs||[],function(e,t,n){var r=Se(e.metadata),i=Be(e.metadata,r);if("was_delete"in p&&i)return u[t]=$(N,"deleted"),n();if(d&&"missing"===e.metadata.rev_tree[0].ids[1].status){var o=$(I);return u[t]=o,n()}f(e,r,i,i,!1,i?0:1,t,n)}(t,n,s)}}e()})}(a.revs_limit,l,f,w,p,_,T,s,x)}function o(e){var t=zt(e.target.result);t&&w.set(t.id,t),i()}}()})}()})}function Zt(n,r,e,i,o){var a,s,t;function l(e){s=e.target.result,a&&o(a,s,t)}function c(e){a=e.target.result,s&&o(a,s,t)}function u(e){var t=e.target.result;if(!t)return o();o([t.key],[t.value],t)}-1===i&&(i=1e3),"function"==typeof n.getAll&&"function"==typeof n.getAllKeys&&1<i&&!e?(t={continue:function(){if(!a.length)return o();var e,t=a[a.length-1];if(r&&r.upper)try{e=IDBKeyRange.bound(t,r.upper,!0,r.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return o()}else e=IDBKeyRange.lowerBound(t,!0);r=e,s=a=null,n.getAll(r,i).onsuccess=l,n.getAllKeys(r,i).onsuccess=c}},n.getAll(r,i).onsuccess=l,n.getAllKeys(r,i).onsuccess=c):e?n.openCursor(r,"prev").onsuccess=u:n.openCursor(r).onsuccess=u}function en(s,e,t){var n,r,i="startkey"in s&&s.startkey,o="endkey"in s&&s.endkey,a="key"in s&&s.key,l="keys"in s&&s.keys,c=s.skip||0,u="number"==typeof s.limit?s.limit:-1,f=!1!==s.inclusive_end;if(!l&&(r=(n=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(i,o,f,a,s.descending))&&n.error)&&("DataError"!==r.name||0!==r.code))return t($(W,r.name,r.message));var p=[Dt,jt,Ft];s.attachments&&p.push(Mt);var d=Jt(e,p,"readonly");if(d.error)return t(d.error);var h=d.txn;h.oncomplete=function(){s.attachments?$t(C,s.binary).then(P):P()},h.onabort=Ht(t);var g,m,v,y,b,_,w,E=h.objectStore(Dt),k=h.objectStore(jt),x=h.objectStore(Ft),S=k.index("_doc_id_rev"),C=[];function T(e,t){var n,r,i,o,a={id:t.id,key:t.id,value:{rev:e}};t.deleted?l&&(C.push(a),a.value.deleted=!0,a.doc=null):c--<=0&&(C.push(a),s.include_docs&&(r=a,i=e,o=(n=t).id+"::"+i,S.get(o).onsuccess=function(e){if(r.doc=Wt(e.target.result)||{},s.conflicts){var t=Oe(n);t.length&&(r.doc._conflicts=t)}Kt(r.doc,s,h)}))}function A(e){for(var t=0,n=e.length;t<n&&C.length!==u;t++){var r=e[t];if(r.error&&l)C.push(r);else{var i=zt(r);T(i.winningRev,i)}}}function O(e,t,n){n&&(A(t),C.length<u&&n.continue())}function P(){var e={total_rows:g,offset:s.skip,rows:C};s.update_seq&&void 0!==m&&(e.update_seq=m),t(null,e)}return x.get(Ft).onsuccess=function(e){g=e.target.result.docCount},s.update_seq&&(k.openCursor(null,"prev").onsuccess=function(e){var t,n=e.target.result,r=void 0;return n&&n.key&&(r=n.key),void((t={target:{result:[r]}}).target.result&&0<t.target.result.length&&(m=t.target.result[0]))}),r||0===u?void 0:l?(v=s.keys,y=E,b=O,_=new Array(v.length),w=0,void v.forEach(function(t,n){y.get(t).onsuccess=function(e){e.target.result?_[n]=e.target.result:_[n]={key:t,error:"not_found"},++w===v.length&&b(v,_,{})}})):-1===u?function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(E,n,function(e){var t=e.target.result;s.descending&&(t=t.reverse()),A(t)}):void Zt(E,n,s.descending,u+c,O)}var tn=!1,nn=[];function rn(){!tn&&nn.length&&(tn=!0,nn.shift()())}var on,an=new O,sn=new O;function ln(t,e){var n,r,i,o=this;n=function(e){!function(f,r,p){var d=r.name,h=null;function a(e,i){var o=e.objectStore(Dt);o.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),o.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=Be(n);n.deletedOrLocal=r?"1":"0",o.put(n),t.continue()}else i()}}function s(e,p){var d=e.objectStore(qt),h=e.objectStore(Dt),g=e.objectStore(jt);h.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var t=n.value,r=t.id,i=Fe(r),o=Se(t);if(i){var a=r+"::"+o,s=r+"::",l=r+"::~",c=g.index("_doc_id_rev"),u=IDBKeyRange.bound(s,l,!1,!1),f=c.openCursor(u);f.onsuccess=function(e){if(f=e.target.result){var t=f.value;t._doc_id_rev===a&&d.put(t),g.delete(f.primaryKey),f.continue()}else h.delete(n.primaryKey),n.continue()}}else n.continue()}else p&&p()}}function l(e,c){var t=e.objectStore(jt),n=e.objectStore(Mt),u=e.objectStore(Bt);n.count().onsuccess=function(e){if(!e.target.result)return c();t.openCursor().onsuccess=function(e){var t=e.target.result;if(!t)return c();for(var n=t.value,r=t.primaryKey,i=Object.keys(n._attachments||{}),o={},a=0;a<i.length;a++)o[n._attachments[i[a]].digest]=!0;var s=Object.keys(o);for(a=0;a<s.length;a++){var l=s[a];u.put({seq:r,digestSeq:l+"::"+r})}t.continue()}}}function c(e){var c=e.objectStore(jt),u=e.objectStore(Dt);u.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n,r,i,o,a,s=(n=t.value).data?zt(n):(n.deleted="1"===n.deletedOrLocal,n);if(s.winningRev=s.winningRev||Se(s),s.seq)return l();r=s.id+"::",i=s.id+"::￿",o=c.index("_doc_id_rev").openCursor(IDBKeyRange.bound(r,i)),a=0,o.onsuccess=function(e){var t=e.target.result;if(!t)return s.seq=a,l();var n=t.primaryKey;a<n&&(a=n),t.continue()}}function l(){var e=Gt(s,s.winningRev,s.deleted);u.put(e).onsuccess=function(){t.continue()}}}}f._meta=null,f._remote=!1,f.type=function(){return"idb"},f._id=g(function(e){e(null,f._meta.instanceId)}),f._bulkDocs=function(e,t,n){Qt(r,e,t,f,h,n)},f._get=function(e,i,t){var o,a,s,l=i.ctx;if(!l){var n=Jt(h,[Dt,jt,Mt],"readonly");if(n.error)return t(n.error);l=n.txn}function c(){t(s,{doc:o,metadata:a,ctx:l})}l.objectStore(Dt).get(e).onsuccess=function(e){if(!(a=zt(e.target.result)))return s=$(N,"missing"),c();var t;if(i.rev)t=i.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,a=o[0],s=o[1],l=o[2],c=0===l.length,u=n.history?n.history.slice():[];if(u.push({id:a,pos:i,opts:s}),c)for(var f=0,p=u.length;f<p;f++){var d=u[f];if(d.pos+"-"+d.id===e)return i+"-"+a}for(var h=0,g=l.length;h<g;h++)r.push({pos:i+1,ids:l[h],history:u})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(i.rev,a):i.rev;else if(t=a.winningRev,Be(a))return s=$(N,"deleted"),c();var n=l.objectStore(jt),r=a.id+"::"+t;n.index("_doc_id_rev").get(r).onsuccess=function(e){if((o=e.target.result)&&(o=Wt(o)),!o)return s=$(N,"missing"),c();c()}}},f._getAttachment=function(e,t,n,r,i){var o;if(r.ctx)o=r.ctx;else{var a=Jt(h,[Dt,jt,Mt],"readonly");if(a.error)return i(a.error);o=a.txn}var s=n.digest,l=n.content_type;o.objectStore(Mt).get(s).onsuccess=function(e){Vt(e.target.result.body,l,r.binary,function(e){i(null,e)})}},f._info=function(e){var n,t,r=Jt(h,[Ft,jt],"readonly");if(r.error)return e(r.error);var i=r.txn;i.objectStore(Ft).get(Ft).onsuccess=function(e){t=e.target.result.docCount},i.objectStore(jt).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},i.oncomplete=function(){e(null,{doc_count:t,update_seq:n,idb_attachment_format:f._meta.blobSupport?"binary":"base64"})}},f._allDocs=function(e,t){en(e,h,t)},f._changes=function(e){return function(c,e,t,n){if((c=B(c)).continuous){var r=t+":"+xe();return Xt.addListener(t,r,e,c),Xt.notify(t),{cancel:function(){Xt.removeListener(t,r)}}}var u=c.doc_ids&&new k(c.doc_ids);c.since=c.since||0;var f=c.since,p="limit"in c?c.limit:-1;0===p&&(p=1);var d,i,h,o,g=[],m=0,v=J(c),y=new O;function b(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;o.get(i).onsuccess=function(e){r(n,Wt(e.target.result))}}function a(){c.complete(null,{results:g,last_seq:f})}var s=[Dt,jt];c.attachments&&s.push(Mt);var l=Jt(n,s,"readonly");if(l.error)return c.complete(l.error);(d=l.txn).onabort=Ht(c.complete),d.oncomplete=function(){!c.continuous&&c.attachments?$t(g).then(a):a()},i=d.objectStore(jt),h=d.objectStore(Dt),o=i.index("_doc_id_rev"),Zt(i,c.since&&!c.descending?IDBKeyRange.lowerBound(c.since,!0):null,c.descending,p,function(r,e,o){if(o&&r.length){var a=new Array(r.length),s=new Array(r.length),i=0;e.forEach(function(e,n){!function(t,n,r){if(u&&!u.has(t._id))return r();var i=y.get(t._id);if(i)return b(t,n,i,r);h.get(t._id).onsuccess=function(e){i=zt(e.target.result),y.set(t._id,i),b(t,n,i,r)}}(Wt(e),r[n],function(e,t){s[n]=e,a[n]=t,++i===r.length&&function(){for(var e=[],t=0,n=a.length;t<n&&m!==p;t++){var r=a[t];if(r){var i=s[t];e.push(l(i,r))}}Promise.all(e).then(function(e){for(var t=0,n=e.length;t<n;t++)e[t]&&c.onChange(e[t])}).catch(c.complete),m!==p&&o.continue()}()})})}function l(e,t){var n=c.processChange(t,e,c);f=n.seq=e.seq;var r=v(n);return"object"==typeof r?Promise.reject(r):r?(m++,c.return_docs&&g.push(n),c.attachments&&c.include_docs?new Promise(function(e){Kt(t,c,d,function(){$t([n],c.binary).then(function(){e(n)})})}):Promise.resolve(n)):Promise.resolve()}})}(e,f,d,h)},f._close=function(e){h.close(),an.delete(d),e()},f._getRevisionTree=function(e,n){var t=Jt(h,[Dt],"readonly");if(t.error)return n(t.error);t.txn.objectStore(Dt).get(e).onsuccess=function(e){var t=zt(e.target.result);t?n(null,t.rev_tree):n($(N))}},f._doCompaction=function(i,a,e){var t=Jt(h,[Dt,jt,Mt,Bt],"readwrite");if(t.error)return e(t.error);var o=t.txn;o.objectStore(Dt).get(i).onsuccess=function(e){var t=zt(e.target.result);Ce(t.rev_tree,function(e,t,n,r,i){var o=t+"-"+n;-1!==a.indexOf(o)&&(i.status="missing")}),Yt(a,i,o);var n=t.winningRev,r=t.deleted;o.objectStore(Dt).put(Gt(t,n,r))},o.onabort=Ht(e),o.oncomplete=function(){e()}},f._getLocal=function(e,n){var t=Jt(h,[qt],"readonly");if(t.error)return n(t.error);var r=t.txn.objectStore(qt).get(e);r.onerror=Ht(n),r.onsuccess=function(e){var t=e.target.result;t?(delete t._doc_id_rev,n(null,t)):n($(N))}},f._putLocal=function(n,r,i){"function"==typeof r&&(i=r,r={}),delete n._revisions;var o=n._rev,e=n._id;n._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var a,t=r.ctx;if(!t){var s=Jt(h,[qt],"readwrite");if(s.error)return i(s.error);(t=s.txn).onerror=Ht(i),t.oncomplete=function(){a&&i(null,a)}}var l,c=t.objectStore(qt);o?(l=c.get(e)).onsuccess=function(e){var t=e.target.result;t&&t._rev===o?c.put(n).onsuccess=function(){a={ok:!0,id:n._id,rev:n._rev},r.ctx&&i(null,a)}:i($(I))}:((l=c.add(n)).onerror=function(e){i($(I)),e.preventDefault(),e.stopPropagation()},l.onsuccess=function(){a={ok:!0,id:n._id,rev:n._rev},r.ctx&&i(null,a)})},f._removeLocal=function(n,r,i){"function"==typeof r&&(i=r,r={});var o,e=r.ctx;if(!e){var t=Jt(h,[qt],"readwrite");if(t.error)return i(t.error);(e=t.txn).oncomplete=function(){o&&i(null,o)}}var a=n._id,s=e.objectStore(qt),l=s.get(a);l.onerror=Ht(i),l.onsuccess=function(e){var t=e.target.result;t&&t._rev===n._rev?(s.delete(a),o={ok:!0,id:a,rev:"0-0"},r.ctx&&i(null,o)):i($(N))}},f._destroy=function(e,t){Xt.removeAllListeners(d);var n=sn.get(d);n&&n.result&&(n.result.close(),an.delete(d));var r=indexedDB.deleteDatabase(d);r.onsuccess=function(){sn.delete(d),E()&&d in localStorage&&delete localStorage[d],t(null,{ok:!0})},r.onerror=Ht(t)};var e=an.get(d);if(e)return h=e.idb,f._meta=e.global,M(function(){p(null,f)});var t=indexedDB.open(d,Rt);sn.set(d,t),t.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(Dt,{keyPath:"id"});e.createObjectStore(jt,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(Mt,{keyPath:"digest"}),e.createObjectStore(Ft,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(Ut),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(qt,{keyPath:"_id"});var n=e.createObjectStore(Bt,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n,r=e.currentTarget.transaction;e.oldVersion<3&&t.createObjectStore(qt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.oldVersion<4&&((n=t.createObjectStore(Bt,{autoIncrement:!0})).createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0}));var i=[a,s,l,c],o=e.oldVersion;!function e(){var t=i[o-1];o++,t&&t(r,e)}()},t.onsuccess=function(e){(h=e.target.result).onversionchange=function(){h.close(),an.delete(d)},h.onabort=function(e){S("error","Database has a global failure",e.target.error),h.close(),an.delete(d)};var t,n,r,i,o,a,s=h.transaction([Ft,Ut,Dt],"readwrite"),l=!1;function c(){void 0!==r&&l&&(f._meta={name:d,instanceId:i,blobSupport:r},an.set(d,{idb:h,global:f._meta}),p(null,f))}function u(){if(void 0!==n&&void 0!==t){var e=d+"_id";e in t?i=t[e]:t[e]=i=xe(),t.docCount=n,s.objectStore(Ft).put(t)}}s.objectStore(Ft).get(Ft).onsuccess=function(e){t=e.target.result||{id:Ft},u()},a=function(e){n=e,u()},s.objectStore(Dt).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){a(e.target.result)},on||(o=s,on=new Promise(function(n){var e=fe([""]),t=o.objectStore(Ut).put(e,"key");t.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))},t.onerror=o.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)}}).catch(function(){return!1})),on.then(function(e){r=e,c()}),s.oncomplete=function(){l=!0,c()},s.onabort=Ht(p)},t.onerror=function(e){var t=e.target.error&&e.target.error.message;t?-1!==t.indexOf("stored database is a higher version")&&(t=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):t="Failed to open indexedDB, are you in private browsing mode?",S("error",t),p($(W,t))}}(o,t,e)},r=e,i=o.constructor,nn.push(function(){n(function(e,t){(function(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}})(r,e,t,i),tn=!1,M(function(){rn()})})}),rn()}ln.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};var cn=25,un=50,fn=5e3,pn=1e4,dn={};function hn(e){var t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];t.data=de(t.data,t.content_type)})}function gn(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function mn(n){return n._attachments&&Object.keys(n._attachments)?Promise.all(Object.keys(n._attachments).map(function(e){var t=n._attachments[e];if(t.data&&"string"!=typeof t.data)return new Promise(function(e){me(t.data,e)}).then(function(e){t.data=e})})):Promise.resolve()}function vn(e,t){if(function(e){if(!e.prefix)return!1;var t=ae(e.prefix).protocol;return"http"===t||"https"===t}(t)){var n=t.name.substr(t.prefix.length);e=t.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}var r=ae(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function yn(e,t){return bn(e,e.db+"/"+t)}function bn(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function _n(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function wn(p,e){var t=this,m=vn(p.name,p),n=yn(m,"");p=B(p);var r,s=function(e,t){if((t=t||{}).headers=t.headers||new Je,t.credentials="include",p.auth||m.auth){var n=p.auth||m.auth,r=n.username+":"+n.password,i=ue(unescape(encodeURIComponent(r)));t.headers.set("Authorization","Basic "+i)}var o,a,s,l,c,u,f=p.headers||{};return Object.keys(f).forEach(function(e){t.headers.append(e,f[e])}),o=t,a="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",s=-1!==a.indexOf("msie"),l=-1!==a.indexOf("trident"),c=-1!==a.indexOf("edge"),u=!("method"in o)||"GET"===o.method,(s||l||c)&&u&&(e+=(-1===e.indexOf("?")?"?":"&")+"_nonce="+Date.now()),(p.fetch||Ye)(e,t)};function i(e,n){return h(e,l(function(t){y().then(function(){return n.apply(this,t)}).catch(function(e){t.pop()(e)})})).bind(t)}function v(e,t,n){var r={};return(t=t||{}).headers=t.headers||new Je,t.headers.get("Content-Type")||t.headers.set("Content-Type","application/json"),t.headers.get("Accept")||t.headers.set("Accept","application/json"),s(e,t).then(function(e){return r.ok=e.ok,r.status=e.status,e.json()}).then(function(e){if(r.data=e,!r.ok){r.data.status=r.status;var t=Y(r.data);if(n)return n(t);throw t}if(Array.isArray(r.data)&&(r.data=r.data.map(function(e){return e.error||e.missing?Y(e):e})),!n)return r;n(null,r.data)})}function y(){return p.skip_setup?Promise.resolve():r||((r=v(n).catch(function(e){return e&&e.status&&404===e.status?(C(404,"PouchDB is just detecting if the remote exists."),v(n,{method:"PUT"})):Promise.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||Promise.reject(e)})).catch(function(){r=null}),r)}function c(e){return e.split("/").map(encodeURIComponent).join("/")}M(function(){e(null,t)}),t._remote=!0,t.type=function(){return"http"},t.id=i("id",function(n){s(bn(m,"")).then(function(e){return e.json()}).catch(function(){return{}}).then(function(e){var t=e&&e.uuid?e.uuid+m.db:yn(m,"");n(null,t)})}),t.compact=i("compact",function(r,i){"function"==typeof r&&(i=r,r={}),r=B(r),v(yn(m,"_compact"),{method:"POST"}).then(function(){!function n(){t.info(function(e,t){t&&!t.compact_running?i(null,{ok:!0}):setTimeout(n,r.interval||200)})}()})}),t.bulkGet=h("bulkGet",function(s,l){var c=this;function e(t){var e={};s.revs&&(e.revs=!0),s.attachments&&(e.attachments=!0),s.latest&&(e.latest=!0),v(yn(m,"_bulk_get"+_n(e)),{method:"POST",body:JSON.stringify({docs:s.docs})}).then(function(e){s.attachments&&s.binary&&e.data.results.forEach(function(e){e.docs.forEach(hn)}),t(null,e.data)}).catch(t)}function n(){var e=un,r=Math.ceil(s.docs.length/e),i=0,o=new Array(r);function t(n){return function(e,t){o[n]=t.results,++i===r&&l(null,{results:X(o)})}}for(var n=0;n<r;n++){var a=b(s,["revs","attachments","binary","latest"]);a.docs=s.docs.slice(n*e,Math.min(s.docs.length,(n+1)*e)),w(c,a,t(n))}}var r=bn(m,""),t=dn[r];"boolean"!=typeof t?e(function(e,t){e?(dn[r]=!1,C(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),n()):(dn[r]=!0,l(null,t))}):t?e(l):n()}),t._info=function(t){y().then(function(){return s(yn(m,""))}).then(function(e){return e.json()}).then(function(e){e.host=yn(m,""),t(null,e)}).catch(t)},t.fetch=function(t,n){return y().then(function(){var e="/"===t.substring(0,1)?bn(m,t.substring(1)):yn(m,t);return s(e,n)})},t.get=i("get",function(t,a,n){"function"==typeof a&&(n=a,a={});var e={};function r(i){var f,p,o=i._attachments,e=o&&Object.keys(o);if(o&&e.length)return f=e.map(function(r){return function(){return n=o[e=r],t=gn(i._id)+"/"+c(e)+"?rev="+i._rev,s(yn(m,t)).then(function(e){return"buffer"in e?e.buffer():e.blob()}).then(function(t){if(a.binary){var e=Object.getOwnPropertyDescriptor(t.__proto__,"type");return e&&!e.set||(t.type=n.content_type),t}return new Promise(function(e){me(t,e)})}).then(function(e){delete n.stub,delete n.length,n.data=e});var e,n,t}}),p=5,new Promise(function(e,t){var n,r=0,i=0,o=0,a=f.length;function s(){++o===a?n?t(n):e():u()}function l(){r--,s()}function c(e){r--,n=n||e,s()}function u(){for(;r<p&&i<a;)r++,f[i++]().then(l,c)}u()})}(a=B(a)).revs&&(e.revs=!0),a.revs_info&&(e.revs_info=!0),a.latest&&(e.latest=!0),a.open_revs&&("all"!==a.open_revs&&(a.open_revs=JSON.stringify(a.open_revs)),e.open_revs=a.open_revs),a.rev&&(e.rev=a.rev),a.conflicts&&(e.conflicts=a.conflicts),a.update_seq&&(e.update_seq=a.update_seq),t=gn(t),v(yn(m,t+_n(e))).then(function(t){return Promise.resolve().then(function(){if(a.attachments)return e=t.data,Array.isArray(e)?Promise.all(e.map(function(e){if(e.ok)return r(e.ok)})):r(e);var e}).then(function(){n(null,t.data)})}).catch(function(e){e.docId=t,n(e)})}),t.remove=i("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t));var o=i._rev||n.rev;v(yn(m,gn(i._id))+"?rev="+o,{method:"DELETE"},r).catch(r)}),t.getAttachment=i("getAttachment",function(e,t,n,r){"function"==typeof n&&(r=n,n={});var i,o=n.rev?"?rev="+n.rev:"",a=yn(m,gn(e))+"/"+c(t)+o;s(a,{method:"GET"}).then(function(e){if(i=e.headers.get("content-type"),e.ok)return void 0===pr||pr.browser||"function"!=typeof e.buffer?e.blob():e.buffer();throw e}).then(function(e){void 0===pr||pr.browser||(e.type=i),r(null,e)}).catch(function(e){r(e)})}),t.removeAttachment=i("removeAttachment",function(e,t,n,r){v(yn(m,gn(e)+"/"+c(t))+"?rev="+n,{method:"DELETE"},r).catch(r)}),t.putAttachment=i("putAttachment",function(e,t,n,r,i,o){"function"==typeof i&&(o=i,i=r,r=n,n=null);var a=gn(e)+"/"+c(t),s=yn(m,a);if(n&&(s+="?rev="+n),"string"==typeof r){var l;try{l=ce(r)}catch(e){return o($(q,"Attachment is not a valid base64 string"))}r=l?pe(l,i):""}v(s,{headers:new Je({"Content-Type":i}),method:"PUT",body:r},o).catch(o)}),t._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,y().then(function(){return Promise.all(e.docs.map(mn))}).then(function(){return v(yn(m,"_bulk_docs"),{method:"POST",body:JSON.stringify(e)},n)}).catch(n)},t._put=function(t,e,n){y().then(function(){return mn(t)}).then(function(){return v(yn(m,gn(t._id)),{method:"PUT",body:JSON.stringify(t)})}).then(function(e){n(null,e.data)}).catch(function(e){e.docId=t&&t._id,n(e)})},t.allDocs=i("allDocs",function(t,n){"function"==typeof t&&(n=t,t={});var e,r={},i="GET";(t=B(t)).conflicts&&(r.conflicts=!0),t.update_seq&&(r.update_seq=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(r.limit=t.limit),void 0!==t.skip&&(r.skip=t.skip);var o=_n(r);void 0!==t.keys&&(i="POST",e={keys:t.keys}),v(yn(m,"_all_docs"+o),{method:i,body:JSON.stringify(e)}).then(function(e){t.include_docs&&t.attachments&&t.binary&&e.data.rows.forEach(hn),n(null,e.data)}).catch(n)}),t._changes=function(a){var s="batch_size"in a?a.batch_size:cn;!(a=B(a)).continuous||"heartbeat"in a||(a.heartbeat=pn);var e="timeout"in a?a.timeout:3e4;"timeout"in a&&a.timeout&&e-a.timeout<fn&&(e=a.timeout+fn),"heartbeat"in a&&a.heartbeat&&e-a.heartbeat<fn&&(e=a.heartbeat+fn);var i={};"timeout"in a&&a.timeout&&(i.timeout=a.timeout);var l=void 0!==a.limit&&a.limit,c=l;if(a.style&&(i.style=a.style),(a.include_docs||a.filter&&"function"==typeof a.filter)&&(i.include_docs=!0),a.attachments&&(i.attachments=!0),a.continuous&&(i.feed="longpoll"),a.seq_interval&&(i.seq_interval=a.seq_interval),a.conflicts&&(i.conflicts=!0),a.descending&&(i.descending=!0),a.update_seq&&(i.update_seq=!0),"heartbeat"in a&&a.heartbeat&&(i.heartbeat=a.heartbeat),a.filter&&"string"==typeof a.filter&&(i.filter=a.filter),a.view&&"string"==typeof a.view&&(i.filter="_view",i.view=a.view),a.query_params&&"object"==typeof a.query_params)for(var t in a.query_params)a.query_params.hasOwnProperty(t)&&(i[t]=a.query_params[t]);var o,u="GET";a.doc_ids?(i.filter="_doc_ids",u="POST",o={doc_ids:a.doc_ids}):a.selector&&(i.filter="_selector",u="POST",o={selector:a.selector});var f,p=new $e,d=function(e,t){if(!a.aborted){i.since=e,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),a.descending?l&&(i.limit=c):i.limit=!l||s<c?s:c;var n=yn(m,"_changes"+_n(i)),r={signal:p.signal,method:u,body:JSON.stringify(o)};f=e,a.aborted||y().then(function(){return v(n,r,t)}).catch(t)}},h={results:[]},g=function(e,t){if(!a.aborted){var n=0;if(t&&t.results){n=t.results.length,h.last_seq=t.last_seq;var r=null,i=null;"number"==typeof t.pending&&(r=t.pending),"string"!=typeof h.last_seq&&"number"!=typeof h.last_seq||(i=h.last_seq),a.query_params,t.results=t.results.filter(function(e){c--;var t=J(a)(e);return t&&(a.include_docs&&a.attachments&&a.binary&&hn(e),a.return_docs&&h.results.push(e),a.onChange(e,r,i)),t})}else if(e)return a.aborted=!0,void a.complete(e);t&&t.last_seq&&(f=t.last_seq);var o=l&&c<=0||t&&n<s||a.descending;(!a.continuous||l&&c<=0)&&o?a.complete(null,h):M(function(){d(f,g)})}};return d(a.since||0,g),{cancel:function(){a.aborted=!0,p.abort()}}},t.revsDiff=i("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),v(yn(m,"_revs_diff"),{method:"POST",body:JSON.stringify(e)},n).catch(n)}),t._close=function(e){e()},t._destroy=function(e,t){v(yn(m,""),{method:"DELETE"}).then(function(e){t(null,e)}).catch(function(e){404===e.status?t(null,{ok:!0}):t(e)})}}function En(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,En)}catch(e){}}function kn(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,kn)}catch(e){}}function xn(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,xn)}catch(e){}}function Sn(e,t){return t&&e.then(function(e){M(function(){t(null,e)})},function(e){M(function(){t(e)})}),e}function Cn(n,r){return function(){var e=arguments,t=this;return n.add(function(){return r.apply(t,e)})}}function Tn(e){var t=new k(e),n=new Array(t.size),r=-1;return t.forEach(function(e){n[++r]=e}),n}function An(e){var n=new Array(e.size),r=-1;return e.forEach(function(e,t){n[++r]=t}),n}function On(e){return new xn("builtin "+e+" function requires map values to be numbers or number arrays")}function Pn(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw On("_sum");t="number"==typeof t?[t]:t;for(var o=0,a=i.length;o<a;o++){var s=i[o];if("number"!=typeof s)throw On("_sum");void 0===t[o]?t.push(s):t[o]+=s}}else"number"==typeof t?t+=i:t[0]+=i}return t}wn.valid=function(){return!0},t(En,Error),t(kn,Error),t(xn,Error);var Nn=S.bind(null,"log"),In=Array.isArray,Ln=JSON.parse;function Rn(e,t){return se("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:Pn,log:Nn,isArray:In,toJSON:Ln})}function Dn(){this.promise=new Promise(function(e){e()})}function jn(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function Mn(i,o,a,s,t,n){var l,e,c=(e=s,jn(a)+jn(e)+"undefined");if(!t&&(l=i._cachedViews=i._cachedViews||{})[c])return l[c];var r=i.info().then(function(e){var r=e.db_name+"-mrview-"+(t?"temp":Ee(c));return le(i,"_local/"+n,function(e){e.views=e.views||{};var t=o;-1===t.indexOf("/")&&(t=o+"/"+o);var n=e.views[t]=e.views[t]||{};if(!n[r])return n[r]=!0,e}).then(function(){return i.registerDependentDatabase(r).then(function(e){var t=e.db;t.auto_compaction=!0;var n={name:r,db:t,sourceDB:i,adapter:i.adapter,mapFun:a,reduceFun:s};return n.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return n.seq=e?e.seq:0,l&&n.db.once("destroyed",function(){delete l[c]}),n})})})});return l&&(l[c]=r),r}Dn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},Dn.prototype.finish=function(){return this.promise};var Bn={},Fn=new Dn,qn=50;function Un(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Hn(e,t){try{e.emit("error",t)}catch(e){S("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),S("error",t)}}var Gn={_sum:function(e,t){return Pn(t)},_count:function(e,t){return t.length},_stats:function(e,t){return{sum:Pn(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}(t)}}};var zn=function(u,t,h,f){function p(e,t,n){try{t(n)}catch(t){Hn(e,t)}}function g(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return Hn(e,t),{error:t}}}function d(e,t){var n=lt(e.key,t.key);return 0!==n?n:lt(e.value,t.value)}function m(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function v(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(function(e){var n=e.doc&&e.doc._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];n[e].data=de(t.data,t.content_type)})}),e}}function y(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function a(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function b(n,e){var t=n.descending?"endkey":"startkey",r=n.descending?"startkey":"endkey";if(void 0!==n[t]&&void 0!==n[r]&&0<lt(n[t],n[r]))throw new En("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==n.reduce){if(n.include_docs)throw new En("{include_docs:true} is invalid for reduce");if(n.keys&&1<n.keys.length&&!n.group&&!n.group_level)throw new En("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var t=function(e){if(e){if("number"!=typeof e)return new En('Invalid value for integer: "'+e+'"');if(e<0)return new En('Invalid value for positive integer: "'+e+'"')}}(n[e]);if(t)throw t})}function _(t){return function(e){if(404===e.status)return t;throw e}}function r(e){var t="string"==typeof e?e:e.name,n=Bn[t];return n||(n=Bn[t]=new Dn),n}function w(e){return Cn(r(e),function(){return function(a){var s,l,c=t(a.mapFun,function(e,t){var n={id:l._id,key:ct(e)};null!=t&&(n.value=ct(t)),s.push(n)}),u=a.seq||0;function r(e,t){return function(){return l=e,r=t,(s=a).db.get("_local/lastSeq").catch(_({_id:"_local/lastSeq",seq:0})).then(function(n){var e=An(l);return Promise.all(e.map(function(e){return n=s,o={_id:i="_local/doc_"+(t=e),keys:[]},a=l.get(t),c=a[0],(r=a[1],1===r.length&&/^1-/.test(r[0].rev)?Promise.resolve(o):n.db.get(i).catch(_(o))).then(function(t){return(e=t,e.keys.length?n.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(e){return function(e,t){for(var r=[],i=new k,n=0,o=t.rows.length;n<o;n++){var a=t.rows[n].doc;if(a&&(r.push(a),i.add(a._id),a._deleted=!c.has(a._id),!a._deleted)){var s=c.get(a._id);"value"in s&&(a.value=s.value)}}var l=An(c);return l.forEach(function(e){if(!i.has(e)){var t={_id:e},n=c.get(e);"value"in n&&(t.value=n.value),r.push(t)}}),e.keys=Tn(l.concat(e.keys)),r.push(e),r}(t,e)});var e});var t,n,r,i,o,a,c})).then(function(e){var t=X(e);return n.seq=r,t.push(n),s.db.bulkDocs({docs:t})})});var s,l,r}}var i=new Dn;function o(){return a.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:u,limit:qn}).then(e)}function e(e){var t=e.results;if(t.length){var n=function(e){for(var t=new O,n=0,r=e.length;n<r;n++){var i=e[n];if("_"!==i.doc._id[0]){s=[],(l=i.doc)._deleted||p(a.sourceDB,c,l),s.sort(d);var o=f(s);t.set(i.doc._id,[o,i.changes])}u=i.seq}return t}(t);if(i.add(r(n,u)),!(t.length<qn))return o()}}function f(e){for(var t,n=new O,r=0,i=e.length;r<i;r++){var o=e[r],a=[o.key,o.id];0<r&&0===lt(o.key,t)&&a.push(r),n.set(ft(a),o),t=o.key}return n}return o().then(function(){return i.finish()}).then(function(){a.seq=u})}(e)})()}function E(e,t){return Cn(r(e),function(){return function(r,i){var o,a=r.reduceFun&&!1!==i.reduce,s=i.skip||0;function n(e){return e.include_docs=!0,r.db.allDocs(e).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||n<t))return e.doc.value}var r=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=pt(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var s=e[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var c={element:{},index:t.length};t.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();dt(t,n)}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function e(t){var n;if(n=a?function(e,t,n){0===n.group_level&&delete n.group_level;var r,i,o,a=n.group||n.group_level,s=h(e.reduceFun),l=[],c=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;t.forEach(function(e){var t=l[l.length-1],n=a?e.key:null;if(a&&Array.isArray(n)&&(n=n.slice(0,c)),t&&0===lt(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);l.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var u=0,f=l.length;u<f;u++){var p=l[u],d=g(e.sourceDB,s,p.keys,p.values,!1);if(d.error&&d.error instanceof xn)throw d.error;t.push({value:d.error?null:d.output,key:p.groupKey})}return{rows:(r=t,i=n.limit,o=n.skip,o=o||0,"number"==typeof i?r.slice(o,i+o):0<o?r.slice(o):r)}}(r,t,i):{total_rows:o,offset:s,rows:t},i.update_seq&&(n.update_seq=r.seq),i.include_docs){var e=Tn(t.map(m));return r.sourceDB.allDocs({keys:e,include_docs:!0,conflicts:i.conflicts,attachments:i.attachments,binary:i.binary}).then(function(e){var r=new O;return e.rows.forEach(function(e){r.set(e.id,e.doc)}),t.forEach(function(e){var t=m(e),n=r.get(t);n&&(e.doc=n)}),n})}return n}if(void 0===i.keys||i.keys.length||(i.limit=0,delete i.keys),void 0!==i.keys){var t=i.keys.map(function(e){var t={startkey:ft([e]),endkey:ft([e,{}])};return i.update_seq&&(t.update_seq=!0),n(t)});return Promise.all(t).then(X).then(e)}var l,c,u={descending:i.descending};if(i.update_seq&&(u.update_seq=!0),"start_key"in i&&(l=i.start_key),"startkey"in i&&(l=i.startkey),"end_key"in i&&(c=i.end_key),"endkey"in i&&(c=i.endkey),void 0!==l&&(u.startkey=i.descending?ft([l,{}]):ft([l])),void 0!==c){var f=!1!==i.inclusive_end;i.descending&&(f=!f),u.endkey=ft(f?[c,{}]:[c])}if(void 0!==i.key){var p=ft([i.key]),d=ft([i.key,{}]);u.descending?(u.endkey=p,u.startkey=d):(u.startkey=p,u.endkey=d)}return a||("number"==typeof i.limit&&(u.limit=i.limit),u.skip=s),n(u).then(e)}(e,t)})()}return{query:function(e,t,n){var r,i=this;"function"==typeof t&&(n=t,t={}),t=t?((r=t).group_level=a(r.group_level),r.limit=a(r.limit),r.skip=a(r.skip),r):{},"function"==typeof e&&(e={map:e});var o=Promise.resolve().then(function(){return function(n,e,r){if("function"==typeof n._query)return t=n,i=e,o=r,new Promise(function(n,r){t._query(i,o,function(e,t){if(e)return r(e);n(t)})});var t,i,o;if(Z(n))return function(e,t,n){var r,i,o,a=[],s="GET";if(y("reduce",n,a),y("include_docs",n,a),y("attachments",n,a),y("limit",n,a),y("descending",n,a),y("group",n,a),y("group_level",n,a),y("skip",n,a),y("stale",n,a),y("conflicts",n,a),y("startkey",n,a,!0),y("start_key",n,a,!0),y("endkey",n,a,!0),y("end_key",n,a,!0),y("inclusive_end",n,a),y("key",n,a,!0),y("update_seq",n,a),a=""===(a=a.join("&"))?"":"?"+a,void 0!==n.keys){var l="keys="+encodeURIComponent(JSON.stringify(n.keys));l.length+a.length+1<=2e3?a+=("?"===a[0]?"&":"?")+l:(s="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var c=Un(t);return e.fetch("_design/"+c[0]+"/_view/"+c[1]+a,{headers:new Je({"Content-Type":"application/json"}),method:s,body:JSON.stringify(r)}).then(function(e){return i=e.ok,o=e.status,e.json()}).then(function(e){if(!i)throw e.status=o,Y(e);return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(v(n))}return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.fetch("_temp_view"+a,{headers:new Je({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)}).then(function(e){return i=e.ok,o=e.status,e.json()}).then(function(e){if(!i)throw e.status=o,Y(e);return e}).then(v(n))}(n,e,r);if("string"!=typeof e)return b(r,e),Fn.add(function(){return Mn(n,"temp_view/temp_view",e.map,e.reduce,!0,u).then(function(e){return t=w(e).then(function(){return E(e,r)}),n=function(){return e.db.destroy()},t.then(function(e){return n().then(function(){return e})},function(e){return n().then(function(){throw e})});var t,n})}),Fn.finish();var a=e,s=Un(a),l=s[0],c=s[1];return n.get("_design/"+l).then(function(e){var t=e.views&&e.views[c];if(!t)throw new kn("ddoc "+e._id+" has no view named "+c);return f(e,c),b(r,t),Mn(n,a,t.map,t.reduce,!1,u).then(function(e){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&M(function(){w(e)}),E(e,r)):w(e).then(function(){return E(e,r)})})})}(i,e,t)});return Sn(o,n),o},viewCleanup:(i=function(){var n,e;return"function"==typeof this._viewCleanup?(e=this,new Promise(function(n,r){e._viewCleanup(function(e,t){if(e)return r(e);n(t)})})):Z(this)?this.fetch("_view_cleanup",{headers:new Je({"Content-Type":"application/json"}),method:"POST"}).then(function(e){return e.json()}):(n=this).get("_local/"+u).then(function(s){var l=new O;Object.keys(s.views).forEach(function(e){var t=Un(e),n="_design/"+t[0],r=t[1],i=l.get(n);i||(i=new k,l.set(n,i)),i.add(r)});var e={keys:An(l),include_docs:!0};return n.allDocs(e).then(function(e){var a={};e.rows.forEach(function(i){var o=i.key.substring(8);l.get(i.key).forEach(function(e){var t=o+"/"+e;s.views[t]||(t=e);var n=Object.keys(s.views[t]),r=i.doc&&i.doc.views&&i.doc.views[e];n.forEach(function(e){a[e]=a[e]||r})})});var t=Object.keys(a).filter(function(e){return!a[e]}).map(function(e){return Cn(r(e),function(){return new n.constructor(e,n.__opts).destroy()})()});return Promise.all(t).then(function(){return{ok:!0}})})},_({ok:!0}))},l(function(e){var t=e.pop(),n=i.apply(this,e);return"function"==typeof t&&Sn(n,t),n}))};var i}("mrviews",function(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return Rn(e.toString(),t)},function(e){var t=e.toString();return function(e){if(/^_sum/.test(e))return Gn._sum;if(/^_count/.test(e))return Gn._count;if(/^_stats/.test(e))return Gn._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t)||Rn(t)},function(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new kn("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)});var Wn={query:function(e,t,n){return zn.query.call(this,e,t,n)},viewCleanup:function(e){return zn.viewCleanup.call(this,e)}};function Vn(e){return/^1-/.test(e)}function Kn(t,n){var e=Object.keys(n._attachments);return Promise.all(e.map(function(e){return t.getAttachment(n._id,e,{rev:n._rev})}))}function $n(r,l,i,o){i=B(i);var a=[],c=!0;return Promise.resolve().then(function(){var e,t=Object.keys(i).filter(function(e){var t=i[e].missing;return 1===t.length&&Vn(t[0])});if(0<t.length)return e=t,r.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(e){if(o.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){var t,n;e.deleted||!e.doc||!Vn(e.value.rev)||(t=e.doc)._attachments&&0<Object.keys(t._attachments).length||(n=e.doc)._conflicts&&0<n._conflicts.length||(e.doc._conflicts&&delete e.doc._conflicts,a.push(e.doc),delete i[e.id])})})}).then(function(){var e,n,t=(e=i,n=[],Object.keys(e).forEach(function(t){e[t].missing.forEach(function(e){n.push({id:t,rev:e})})}),{docs:n,revs:!0,latest:!0});if(t.docs.length)return r.bulkGet(t).then(function(e){if(o.cancelled)throw new Error("cancelled");return Promise.all(e.results.map(function(e){return Promise.all(e.docs.map(function(e){var o,a,s,t,n,i=e.ok;return e.error&&(c=!1),i&&i._attachments?(o=l,a=r,s=i,t=Z(a)&&!Z(o),n=Object.keys(s._attachments),t?o.get(s._id).then(function(i){return Promise.all(n.map(function(e){return n=s,r=e,(t=i)._attachments&&t._attachments[r]&&t._attachments[r].digest===n._attachments[r].digest?o.getAttachment(i._id,e):a.getAttachment(s._id,e);var t,n,r}))}).catch(function(e){if(404!==e.status)throw e;return Kn(a,s)}):Kn(a,s)).then(function(e){var r=Object.keys(i._attachments);return e.forEach(function(e,t){var n=i._attachments[r[t]];delete n.stub,delete n.length,n.data=e}),i}):i}))})).then(function(e){a=a.concat(X(e).filter(Boolean))})})}).then(function(){return{ok:c,docs:a}})}var Yn=1,Jn="pouchdb",Xn=5,Qn=0;function Zn(t,n,r,i,o){return t.get(n).catch(function(e){if(404===e.status)return"http"!==t.adapter&&"https"!==t.adapter||C(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:n,history:[],replicator:Jn,version:Yn};throw e}).then(function(e){if(!o.cancelled&&e.last_seq!==r)return e.history=(e.history||[]).filter(function(e){return e.session_id!==i}),e.history.unshift({last_seq:r,session_id:i}),e.history=e.history.slice(0,Xn),e.version=Yn,e.replicator=Jn,e.session_id=i,e.last_seq=r,t.put(e).catch(function(e){if(409===e.status)return Zn(t,n,r,i,o);throw e})})}function er(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}er.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},er.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?Zn(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)},er.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return Zn(this.src,this.id,e,t,this.returnValue).catch(function(e){if(rr(e))return!(n.opts.writeSourceCheckpoint=!1);throw e})}return Promise.resolve(!0)};var tr={undefined:function(e,t){return 0===lt(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return(n=t,r=e,n.session_id===r.session_id?{last_seq:n.last_seq,history:n.history}:function e(t,n){var r=t[0],i=t.slice(1),o=n[0],a=n.slice(1);return r&&0!==n.length?nr(r.session_id,n)?{last_seq:r.last_seq,history:t}:nr(o.session_id,i)?{last_seq:o.last_seq,history:a}:e(i,a):{last_seq:Qn,history:[]}}(n.history,r.history)).last_seq;var n,r}};function nr(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||nr(e,r))}function rr(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}er.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(e){return e.last_seq||Qn}).catch(function(e){if(404!==e.status)throw e;return Qn}):t.target.get(t.id).then(function(n){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?n.last_seq||Qn:t.src.get(t.id).then(function(e){return n.version!==e.version?Qn:(t=n.version?n.version.toString():"undefined")in tr?tr[t](n,e):Qn;var t},function(e){if(404===e.status&&n.last_seq)return t.src.put({_id:t.id,last_seq:Qn}).then(function(){return Qn},function(e){return rr(e)?(t.opts.writeSourceCheckpoint=!1,n.last_seq):Qn});throw e})}).catch(function(e){if(404!==e.status)throw e;return Qn})};var ir=0;function or(e,t,n){var r,i=n.doc_ids?n.doc_ids.sort(lt):"",o=n.filter?n.filter.toString():"",a="",s="",l="";return n.selector&&(l=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify((r=n.query_params,Object.keys(r).sort(lt).reduce(function(e,t){return e[t]=r[t],e},{})))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),Promise.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+o+s+a+i+l;return new Promise(function(e){we(t,e)})}).then(function(e){return"_local/"+e.replace(/\//g,".").replace(/\+/g,"_")})}function ar(r,i,o,a,s){var l,n,c,u=[],f={seq:0,changes:[],docs:[]},p=!1,d=!1,h=!1,g=0,m=o.continuous||o.live||!1,t=o.batch_size||100,v=o.batches_limit||10,y=!1,b=o.doc_ids,_=o.selector,w=[],E=xe();s=s||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};function e(){return c?Promise.resolve():or(r,i,o).then(function(e){n=e;var t;t=!1===o.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===o.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===o.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},c=new er(r,i,n,a,t)})}function x(){if(w=[],0!==l.docs.length){var n=l.docs,e={timeout:o.timeout};return i.bulkDocs({docs:n,new_edits:!1},e).then(function(e){if(a.cancelled)throw P(),new Error("cancelled");var r=Object.create(null);e.forEach(function(e){e.error&&(r[e.id]=e)});var t=Object.keys(r).length;s.doc_write_failures+=t,s.docs_written+=n.length-t,n.forEach(function(e){var t=r[e._id];if(t){s.errors.push(t);var n=(t.name||"").toLowerCase();if("unauthorized"!==n&&"forbidden"!==n)throw t;a.emit("denied",B(t))}else w.push(e)})},function(e){throw s.doc_write_failures+=n.length,e})}}function S(){if(l.error)throw new Error("There was a problem getting docs.");s.last_seq=g=l.seq;var e=B(s);return w.length&&(e.docs=w,"number"==typeof l.pending&&(e.pending=l.pending,delete l.pending),a.emit("change",e)),p=!0,c.writeCheckpoint(l.seq,E).then(function(){if(p=!1,a.cancelled)throw P(),new Error("cancelled");l=void 0,R()}).catch(function(e){throw j(e),e})}function C(){return $n(r,i,l.diffs,a).then(function(e){l.error=!e.ok,e.docs.forEach(function(e){delete l.diffs[e._id],s.docs_read++,l.docs.push(e)})})}function T(){var t;a.cancelled||l||(0!==u.length?(l=u.shift(),(t={},l.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(e){return e.rev}))}),i.revsDiff(t).then(function(e){if(a.cancelled)throw P(),new Error("cancelled");l.diffs=e})).then(C).then(x).then(S).then(T).catch(function(e){O("batch processing terminated with error",e)})):A(!0))}function A(e){0!==f.changes.length?(e||d||f.changes.length>=t)&&(u.push(f),f={seq:0,changes:[],docs:[]},"pending"!==a.state&&"stopped"!==a.state||(a.state="active",a.emit("active")),T()):0!==u.length||l||((m&&k.live||d)&&(a.state="pending",a.emit("paused")),d&&P())}function O(e,t){h||(t.message||(t.message=e),s.ok=!1,s.status="aborting",u=[],f={seq:0,changes:[],docs:[]},P(t))}function P(e){if(!(h||a.cancelled&&(s.status="cancelled",p)))if(s.status=s.status||"complete",s.end_time=(new Date).toISOString(),s.last_seq=g,h=!0,e){(e=$(e)).result=s;var t=(e.name||"").toLowerCase();"unauthorized"===t||"forbidden"===t?(a.emit("error",e),a.removeAllListeners()):function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=F),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=ir};t.once("paused",function(){t.removeListener("active",i)}),t.once("active",i)}e.current_back_off=e.current_back_off||ir,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}(o,a,e,function(){ar(r,i,o,a)})}else a.emit("complete",s),a.removeAllListeners()}function N(e,t,n){if(a.cancelled)return P();"number"==typeof t&&(f.pending=t),J(o)(e)&&(f.seq=e.seq||n,f.changes.push(e),M(function(){A(0===u.length&&k.live)}))}function I(e){if(y=!1,a.cancelled)return P();if(0<e.results.length)k.since=e.results[e.results.length-1].seq,R(),A(!0);else{var t=function(){m?(k.live=!0,R()):d=!0,A(!0)};l||0!==e.results.length?t():(p=!0,c.writeCheckpoint(e.last_seq,E).then(function(){p=!1,s.last_seq=g=e.last_seq,t()}).catch(j))}}function L(e){if(y=!1,a.cancelled)return P();O("changes rejected",e)}function R(){if(!y&&!d&&u.length<v){y=!0,a._changes&&(a.removeListener("cancel",a._abortChanges),a._changes.cancel()),a.once("cancel",t);var e=r.changes(k).on("change",N);e.then(n,n),e.then(I).catch(L),o.retry&&(a._changes=e,a._abortChanges=t)}function t(){e.cancel()}function n(){a.removeListener("cancel",t)}}function D(){e().then(function(){if(!a.cancelled)return c.getCheckpoint().then(function(e){k={since:g=e,limit:t,batch_size:t,style:"all_docs",doc_ids:b,selector:_,return_docs:!0},o.filter&&("string"!=typeof o.filter?k.include_docs=!0:k.filter=o.filter),"heartbeat"in o&&(k.heartbeat=o.heartbeat),"timeout"in o&&(k.timeout=o.timeout),o.query_params&&(k.query_params=o.query_params),o.view&&(k.view=o.view),R()});P()}).catch(function(e){O("getCheckpoint rejected with ",e)})}function j(e){p=!1,O("writeCheckpoint completed with error",e)}a.ready(r,i),a.cancelled?P():(a._addedListeners||(a.once("cancel",P),"function"==typeof o.complete&&(a.once("error",o.complete),a.once("complete",function(e){o.complete(null,e)})),a._addedListeners=!0),void 0===o.since?D():e().then(function(){return p=!0,c.writeCheckpoint(o.since,E)}).then(function(){p=!1,a.cancelled?P():(g=o.since,D())}).catch(j))}function sr(){s.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var n=this,r=new Promise(function(e,t){n.once("complete",e),n.once("error",t)});n.then=function(e,t){return r.then(e,t)},n.catch=function(e){return r.catch(e)},n.catch(function(){})}function lr(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function cr(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw $(G,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=B(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new sr(n);return ar(lr(e,n),lr(t,n),n,i),i}function ur(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=B(n)).PouchConstructor=n.PouchConstructor||this,new fr(e=lr(e,n),t=lr(t,n),n,r)}function fr(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?T({},n,n.push):n,a=n.pull?T({},n,n.pull):n;function s(e){i.emit("change",{direction:"pull",change:e})}function l(e){i.emit("change",{direction:"push",change:e})}function c(e){i.emit("denied",{direction:"push",doc:e})}function u(e){i.emit("denied",{direction:"pull",doc:e})}function f(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function p(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function d(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function h(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=cr(e,t,o),this.pull=cr(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var g={};function m(n){return function(e,t){("change"===e&&(t===s||t===l)||"denied"===e&&(t===u||t===c)||"paused"===e&&(t===p||t===f)||"active"===e&&(t===h||t===d))&&(e in g||(g[e]={}),g[e][n]=!0,2===Object.keys(g[e]).length&&i.removeAllListeners(e))}}function v(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",function(e){"change"===e?(v(i.pull,"change",s),v(i.push,"change",l)):"denied"===e?(v(i.pull,"denied",u),v(i.push,"denied",c)):"active"===e?(v(i.pull,"active",h),v(i.push,"active",d)):"paused"===e&&(v(i.pull,"paused",p),v(i.push,"paused",f))}),this.on("removeListener",function(e){"change"===e?(i.pull.removeListener("change",s),i.push.removeListener("change",l)):"denied"===e?(i.pull.removeListener("denied",u),i.push.removeListener("denied",c)):"active"===e?(i.pull.removeListener("active",h),i.push.removeListener("active",d)):"paused"===e&&(i.pull.removeListener("paused",p),i.push.removeListener("paused",f))}),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));var y=Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return i.emit("complete",t),r&&r(null,t),i.removeAllListeners(),t},function(e){if(i.cancel(),r?r(e):i.emit("error",e),i.removeAllListeners(),r)throw e});this.then=function(e,t){return y.then(e,t)},this.catch=function(e){return y.catch(e)}}t(sr,s.EventEmitter),sr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},sr.prototype.ready=function(e,t){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}))},t(fr,s.EventEmitter),fr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ke.plugin(function(e){e.adapter("idb",ln,!0)}).plugin(function(e){e.adapter("http",wn,!1),e.adapter("https",wn,!1)}).plugin(Wn).plugin(function(e){e.replicate=cr,e.sync=ur,Object.defineProperty(e.prototype,"replicate",{get:function(){var r=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,t,n){return r.constructor.replicate(e,r,t,n)},to:function(e,t,n){return r.constructor.replicate(r,e,t,n)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}}),gr.exports=Ke}).call(this)}).call(this,hr("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:178,argsarray:54,events:89,immediate:94,inherits:95,"spark-md5":270,uuid:172,vuvuzela:289}],172:[function(e,t,n){var r=e("./v1"),i=e("./v4"),o=i;o.v1=r,o.v4=i,t.exports=o},{"./v1":175,"./v4":176}],173:[function(e,t,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},{}],174:[function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},{}],175:[function(e,t,n){var h,g,m=e("./lib/rng"),v=e("./lib/bytesToUuid"),y=0,b=0;t.exports=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:g;if(null==o||null==a){var s=m();null==o&&(o=h=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=g=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:b+1,u=l-y+(c-b)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||y<l)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=l,g=a;var f=(1e4*(268435455&(l+=122192928e5))+(b=c))%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=255&p,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var d=0;d<6;++d)i[r+d]=o[d];return t||v(i)}},{"./lib/bytesToUuid":173,"./lib/rng":174}],176:[function(e,t,n){var a=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},{"./lib/bytesToUuid":173,"./lib/rng":174}],177:[function(e,t,n){(function(s){(function(){"use strict";void 0===s||!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return s.nextTick(function(){e.apply(null,i)})}}}:t.exports=s}).call(this)}).call(this,e("_process"))},{_process:178}],178:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],f=!1,p=-1;function d(){f&&c&&(f=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!f){var e=l(d);f=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||f||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],179:[function(e,t,n){"use strict";var s=e("./lib/ReactPropTypesSecret");function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function e(e,t,n,r,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n}},{"./lib/ReactPropTypesSecret":181}],180:[function(e,t,n){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":179}],181:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],182:[function(e,t,n){var r,i;r=this,i=function(){var u="function"==typeof Object.defineProperty?function(e,t,n){return Object.defineProperty(e,t,n),e}:function(e,t,n){return e[t]=n.value,e};return function(e,t,n,r){var i,o,a,s,l,c;if(o=n,l=!(s="object"==typeof(a=r))&&"string"==typeof a,r={enumerable:(c=function(e){return s?!!a[e]:!!l&&-1<a.indexOf(e[0])})("enumerable"),configurable:c("configurable"),writable:c("writable"),value:o},"object"==typeof t){for(i in t)Object.hasOwnProperty.call(t,i)&&(r.value=t[i],u(e,i,r));return e}return u(e,t,r)}},void 0!==t&&t.exports?t.exports=i():r.prr=i()},{}],183:[function(e,t,n){"use strict";var i=e("react"),g=e("object-assign"),o=e("scheduler");function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(R(227));var c=null,u={};function a(){if(c)for(var e in u){var t=u[e],n=c.indexOf(e);if(!(-1<n))throw Error(R(96,e));if(!p[n]){if(!t.extractEvents)throw Error(R(97,e));for(var r in n=(p[n]=t).eventTypes){var i=void 0,o=n[r],a=t,s=r;if(d.hasOwnProperty(s))throw Error(R(99,s));var l=(d[s]=o).phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&f(l[i],a,s);i=!0}else o.registrationName?(f(o.registrationName,a,s),i=!0):i=!1;if(!i)throw Error(R(98,r,e))}}}}function f(e,t,n){if(m[e])throw Error(R(100,e));m[e]=t,s[e]=t.eventTypes[n].dependencies}var p=[],d={},m={},s={};var h=!1,v=null,y=!1,b=null,_={onError:function(e){h=!0,v=e}};function w(e,t,n,r,i,o,a,s,l){h=!1,v=null,function(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(_,arguments)}var l=null,r=null,E=null;function k(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,o,a,s,l){if(w.apply(this,arguments),h){if(!h)throw Error(R(198));var c=v;h=!1,v=null,y||(y=!0,b=c)}}(r,t,void 0,e),e.currentTarget=null}function x(e,t){if(null==t)throw Error(R(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function S(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var C=null;function T(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)k(e,t[r],n[r]);else t&&k(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function A(e){if(null!==e&&(C=x(C,e)),e=C,C=null,e){if(S(e,T),C)throw Error(R(95));if(y)throw e=b,y=!1,b=null,e}}var O={injectEventPluginOrder:function(e){if(c)throw Error(R(101));c=Array.prototype.slice.call(e),a()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(R(102,t));u[t]=r,n=!0}}n&&a()}};function P(e,t){var n=e.stateNode;if(!n)return null;var r=l(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(R(231,t,typeof n));return n}var N=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;N.hasOwnProperty("ReactCurrentDispatcher")||(N.ReactCurrentDispatcher={current:null}),N.hasOwnProperty("ReactCurrentBatchConfig")||(N.ReactCurrentBatchConfig={suspense:null});var I=/^(.*)[\\\/]/,L="function"==typeof Symbol&&Symbol.for,D=L?Symbol.for("react.element"):60103,j=L?Symbol.for("react.portal"):60106,M=L?Symbol.for("react.fragment"):60107,B=L?Symbol.for("react.strict_mode"):60108,F=L?Symbol.for("react.profiler"):60114,q=L?Symbol.for("react.provider"):60109,U=L?Symbol.for("react.context"):60110,H=L?Symbol.for("react.concurrent_mode"):60111,G=L?Symbol.for("react.forward_ref"):60112,z=L?Symbol.for("react.suspense"):60113,W=L?Symbol.for("react.suspense_list"):60120,V=L?Symbol.for("react.memo"):60115,K=L?Symbol.for("react.lazy"):60116;L&&Symbol.for("react.fundamental"),L&&Symbol.for("react.responder"),L&&Symbol.for("react.scope");var $="function"==typeof Symbol&&Symbol.iterator;function Y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$&&e[$]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case M:return"Fragment";case j:return"Portal";case F:return"Profiler";case B:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case U:return"Context.Consumer";case q:return"Context.Provider";case G:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case V:return J(e.type);case K:if(e=1===e._status?e._result:null)return J(e)}return null}function X(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=J(e.type);n=null,r&&(n=J(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(I,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var Q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Z=null,ee=null,te=null;function ne(e){if(e=r(e)){if("function"!=typeof Z)throw Error(R(280));var t=l(e.stateNode);Z(e.stateNode,e.type,t)}}function re(e){ee?te?te.push(e):te=[e]:ee=e}function ie(){if(ee){var e=ee,t=te;if(te=ee=null,ne(e),t)for(e=0;e<t.length;e++)ne(t[e])}}function oe(e,t){return e(t)}function ae(e,t,n,r){return e(t,n,r)}function se(){}var le=oe,ce=!1,ue=!1;function fe(){null===ee&&null===te||(se(),ie())}new Map;var pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,he={},ge={};function me(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new me(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new me(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new me(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new me(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new me(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new me(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){ve[e]=new me(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){ve[e]=new me(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){ve[e]=new me(e,5,!1,e.toLowerCase(),null,!1)});var ye=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function _e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e,t,n,r){var i,o=ve.hasOwnProperty(t)?ve[t]:null;(null!==o?0===o.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}(t,n,o,r)&&(n=null),r||null===o?(i=t,(de.call(ge,i)||!de.call(he,i)&&(pe.test(i)?ge[i]=!0:!(he[i]=!0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ee(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ke(e){e._valueTracker||(e._valueTracker=function(e){var t=Ee(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ee(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Se(e,t){var n=t.checked;return g({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&we(e,"checked",t,!1)}function Ae(e,t){Te(e,t);var n=_e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pe(e,t.type,_e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Oe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ne(e,t){return e=g({children:void 0},t),n=t.children,r="",i.Children.forEach(n,function(e){null!=e&&(r+=e)}),(t=r)&&(e.children=t),e;var n,r}function Ie(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Le(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(R(91));return g({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(R(92));if(Array.isArray(t)){if(!(t.length<=1))throw Error(R(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:_e(n)}}function De(e,t){var n=_e(t.value),r=_e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ye,be);ve[t]=new me(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ye,be);ve[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ye,be);ve[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!1)}),ve.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!0)});var Me={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Be(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Be(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qe,Ue,He=(Ue=function(e,t){if(e.namespaceURI!==Me.svg||"innerHTML"in e)e.innerHTML=t;else{for((qe=qe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Ue(e,t)})}:Ue);function Ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var We={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},Ve={},Ke={};function $e(e){if(Ve[e])return Ve[e];if(!We[e])return e;var t,n=We[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return Ve[e]=n[t];return e}Q&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);var Ye=$e("animationend"),Je=$e("animationiteration"),Xe=$e("animationstart"),Qe=$e("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(R(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(3!==n.tag)throw Error(R(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,at,st=!1,lt=[],ct=null,ut=null,ft=null,pt=new Map,dt=new Map,ht=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function vt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function yt(e,t){switch(e){case"focus":case"blur":ct=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function bt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=vt(t,n,r,i),null!==t&&null!==(t=fr(t))&&ot(t)):e.eventSystemFlags|=r,e}function _t(e){var t=ur(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,function(){at(n)})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wt(e){if(null!==e.blockedOn)return!1;var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=fr(t);return null!==n&&ot(n),e.blockedOn=t,!1}return!0}function Et(e,t,n){wt(e)&&n.delete(t)}function kt(){for(st=!1;0<lt.length;){var e=lt[0];if(null!==e.blockedOn){null!==(e=fr(e.blockedOn))&&it(e);break}var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:lt.shift()}null!==ct&&wt(ct)&&(ct=null),null!==ut&&wt(ut)&&(ut=null),null!==ft&&wt(ft)&&(ft=null),pt.forEach(Et),dt.forEach(Et)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,kt)))}function St(t){function e(e){return xt(e,t)}if(0<lt.length){xt(lt[0],t);for(var n=1;n<lt.length;n++){var r=lt[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ct&&xt(ct,t),null!==ut&&xt(ut,t),null!==ft&&xt(ft,t),pt.forEach(e),dt.forEach(e),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===t&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)_t(n),null===n.blockedOn&&ht.shift()}function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Tt(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function At(e,t,n){(t=P(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=x(n._dispatchListeners,t),n._dispatchInstances=x(n._dispatchInstances,e))}function Ot(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Tt(t);for(t=n.length;0<t--;)At(n[t],"captured",e);for(t=0;t<n.length;t++)At(n[t],"bubbled",e)}}function Pt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=P(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=x(n._dispatchListeners,t),n._dispatchInstances=x(n._dispatchInstances,e))}function Nt(e){e&&e.dispatchConfig.registrationName&&Pt(e._targetInst,null,e)}function It(e){S(e,Ot)}function Lt(){return!0}function Rt(){return!1}function Dt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Lt:Rt,this.isPropagationStopped=Rt,this}function jt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Mt(e){if(!(e instanceof this))throw Error(R(279));e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function Bt(e){e.eventPool=[],e.getPooled=jt,e.release=Mt}g(Dt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Lt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Lt)},persist:function(){this.isPersistent=Lt},isPersistent:Rt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Rt,this._dispatchInstances=this._dispatchListeners=null}}),Dt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Dt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return g(i,n.prototype),((n.prototype=i).constructor=n).Interface=g({},r.Interface,e),n.extend=r.extend,Bt(n),n},Bt(Dt);var Ft=Dt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),qt=Dt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ut=Dt.extend({view:null,detail:null}),Ht=Ut.extend({relatedTarget:null});function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var zt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Vt[e])&&!!t[e]}function $t(){return Kt}for(var Yt=Ut.extend({key:function(e){if(e.key){var t=zt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Wt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:$t,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Jt=0,Xt=0,Qt=!1,Zt=!1,en=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:$t,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Jt;return Jt=e.screenX,Qt?"mousemove"===e.type?e.screenX-t:0:(Qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Xt;return Xt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),rn=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:$t}),on=Dt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[Je,"animationIteration",2],[Xe,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Qe,"transitionEnd",2],["waiting","waiting",2]],ln={},cn={},un=0;un<sn.length;un++){var fn=sn[un],pn=fn[0],dn=fn[1],hn=fn[2],gn="on"+(dn[0].toUpperCase()+dn.slice(1)),mn={phasedRegistrationNames:{bubbled:gn,captured:gn+"Capture"},dependencies:[pn],eventPriority:hn};ln[dn]=mn,cn[pn]=mn}var vn={eventTypes:ln,getEventPriority:function(e){return void 0!==(e=cn[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=cn[e];if(!i)return null;switch(e){case"keypress":if(0===Gt(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=Ht;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rn;break;case Ye:case Je:case Xe:e=Ft;break;case Qe:e=on;break;case"scroll":e=Ut;break;case"wheel":e=an;break;case"copy":case"cut":case"paste":e=qt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Dt}return It(t=e.getPooled(i,t,n,r)),t}},yn=o.unstable_UserBlockingPriority,bn=o.unstable_runWithPriority,_n=vn.getEventPriority,wn=10,En=[];function kn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=ur(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ct(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,l=0;l<p.length;l++){var c=p[l];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=x(s,c))}A(s)}}var xn=!0;function Sn(e,t){Cn(t,e,!1)}function Cn(e,t,n){switch(_n(t)){case 0:var r=function(e,t,n){ce||se();var r=An,i=ce;ce=!0;try{ae(r,e,t,n)}finally{(ce=i)||fe()}}.bind(null,t,1);break;case 1:r=function(e,t,n){bn(yn,An.bind(null,e,t,n))}.bind(null,t,1);break;default:r=An.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Tn(e,t,n,r){if(En.length){var i=En.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=kn,n=e,ue)t(n,void 0);else{ue=!0;try{le(t,n,void 0)}finally{ue=!1,fe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,En.length<wn&&En.push(e)}}function An(e,t,n){if(xn)if(0<lt.length&&-1<gt.indexOf(e))e=vt(null,e,t,n),lt.push(e);else{var r=On(e,t,n);null===r?yt(e,n):-1<gt.indexOf(e)?(e=vt(r,e,t,n),lt.push(e)):function(e,t,n,r){switch(t){case"focus":return ct=bt(ct,e,t,n,r),!0;case"dragenter":return ut=bt(ut,e,t,n,r),!0;case"mouseover":return ft=bt(ft,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return pt.set(i,bt(pt.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,dt.set(i,bt(dt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(yt(e,n),Tn(e,t,n,null))}}function On(e,t,n){var r=Ct(n);if(null!==(r=ur(r))){var i=et(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=tt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Tn(e,t,n,r),null}function Pn(e){if(!Q)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Nn=new("function"==typeof WeakMap?WeakMap:Map);function In(e){var t=Nn.get(e);return void 0===t&&(t=new Set,Nn.set(e,t)),t}function Ln(e,t,n){if(!n.has(e)){switch(e){case"scroll":Cn(t,"scroll",!0);break;case"focus":case"blur":Cn(t,"focus",!0),Cn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Pn(e)&&Cn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Sn(e,t)}n.add(e)}}var Rn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dn=["Webkit","ms","Moz","O"];function jn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Rn.hasOwnProperty(e)&&Rn[e]?(""+t).trim():t+"px"}function Mn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=jn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Rn).forEach(function(t){Dn.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rn[e]=Rn[t]})});var Bn=g({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fn(e,t){if(t){if(Bn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(R(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(R(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(R(62,""))}}function qn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Un(e,t){var n=In(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=s[t];for(var r=0;r<t.length;r++)Ln(t[r],e,n)}function Hn(){}function Gn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wn(e,t){var n,r=zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zn(r)}}function Vn(){for(var e=window,t=Gn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Gn((e=t.contentWindow).document)}return t}function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var $n="$",Yn="/$",Jn="$?",Xn="$!",Qn=null,Zn=null;function er(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function tr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"==typeof setTimeout?setTimeout:void 0,rr="function"==typeof clearTimeout?clearTimeout:void 0;function ir(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function or(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===$n||n===Xn||n===Jn){if(0===t)return e;t--}else n===Yn&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),sr="__reactInternalInstance$"+ar,lr="__reactEventHandlers$"+ar,cr="__reactContainere$"+ar;function ur(e){var t=e[sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cr]||n[sr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=or(e);null!==e;){if(n=e[sr])return n;e=or(e)}return t}n=(e=n).parentNode}return null}function fr(e){return!(e=e[sr]||e[cr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(R(33))}function dr(e){return e[lr]||null}var hr=null,gr=null,mr=null;function vr(){if(mr)return mr;var e,t,n=gr,r=n.length,i="value"in hr?hr.value:hr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return mr=i.slice(e,1<t?1-t:void 0)}var yr=Dt.extend({data:null}),br=Dt.extend({data:null}),_r=[9,13,27,32],wr=Q&&"CompositionEvent"in window,Er=null;Q&&"documentMode"in document&&(Er=document.documentMode);var kr=Q&&"TextEvent"in window&&!Er,xr=Q&&(!wr||Er&&8<Er&&Er<=11),Sr=String.fromCharCode(32),Cr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Tr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Or(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pr=!1;var Nr={eventTypes:Cr,extractEvents:function(e,t,n,r){var i;if(wr)e:{switch(e){case"compositionstart":var o=Cr.compositionStart;break e;case"compositionend":o=Cr.compositionEnd;break e;case"compositionupdate":o=Cr.compositionUpdate;break e}o=void 0}else Pr?Ar(e,n)&&(o=Cr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Cr.compositionStart);return o?(xr&&"ko"!==n.locale&&(Pr||o!==Cr.compositionStart?o===Cr.compositionEnd&&Pr&&(i=vr()):(gr="value"in(hr=r)?hr.value:hr.textContent,Pr=!0)),o=yr.getPooled(o,t,n,r),i?o.data=i:null!==(i=Or(n))&&(o.data=i),It(o),i=o):i=null,(e=kr?function(e,t){switch(e){case"compositionend":return Or(t);case"keypress":return 32!==t.which?null:(Tr=!0,Sr);case"textInput":return(e=t.data)===Sr&&Tr?null:e;default:return null}}(e,n):function(e,t){if(Pr)return"compositionend"===e||!wr&&Ar(e,t)?(e=vr(),mr=gr=hr=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=br.getPooled(Cr.beforeInput,t,n,r)).data=e,It(t)):t=null,null===i?t:null===t?i:[i,t]}},Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ir[e.type]:"textarea"===t}var Rr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Dr(e,t,n){return(e=Dt.getPooled(Rr.change,e,t,n)).type="change",re(n),It(e),e}var jr=null,Mr=null;function Br(e){A(e)}function Fr(e){if(xe(pr(e)))return e}function qr(e,t){if("change"===e)return t}var Ur=!1;function Hr(){jr&&(jr.detachEvent("onpropertychange",Gr),Mr=jr=null)}function Gr(e){if("value"===e.propertyName&&Fr(Mr))if(e=Dr(Mr,e,Ct(e)),ce)A(e);else{ce=!0;try{oe(Br,e)}finally{ce=!1,fe()}}}function zr(e,t,n){"focus"===e?(Hr(),Mr=n,(jr=t).attachEvent("onpropertychange",Gr)):"blur"===e&&Hr()}function Wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fr(Mr)}function Vr(e,t){if("click"===e)return Fr(t)}function Kr(e,t){if("input"===e||"change"===e)return Fr(t)}Q&&(Ur=Pn("input")&&(!document.documentMode||9<document.documentMode));var $r,Yr={eventTypes:Rr,_isInputEventSupported:Ur,extractEvents:function(e,t,n,r){var i=t?pr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=qr;else if(Lr(i))if(Ur)a=Kr;else{a=Wr;var s=zr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Vr);if(a&&(a=a(e,t)))return Dr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Pe(i,"number",i.value)}},Jr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Xr={eventTypes:Jr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?ur(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=en,l=Jr.mouseLeave,c=Jr.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=tn,l=Jr.pointerLeave,c=Jr.pointerEnter,u="pointer");if(e=null==a?i:pr(a),i=null==t?i:pr(t),(l=s.getPooled(l,a,n,r)).type=u+"leave",l.target=e,l.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=u+"enter",r.target=i,r.relatedTarget=e,u=t,(s=a)&&u)e:{for(e=u,a=0,t=c=s;t;t=Tt(t))a++;for(t=0,i=e;i;i=Tt(i))t++;for(;0<a-t;)c=Tt(c),a--;for(;0<t-a;)e=Tt(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=Tt(c),e=Tt(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=Tt(s);for(s=[];u&&u!==e&&(null===(a=u.alternate)||a!==e);)s.push(u),u=Tt(u);for(u=0;u<c.length;u++)Pt(c[u],"bubbled",l);for(u=s.length;0<u--;)Pt(s[u],"captured",r);return n===$r?($r=null,[l]):($r=n,[l,r])}};var Qr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Zr=Object.prototype.hasOwnProperty;function ei(e,t){if(Qr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zr.call(t,n[r])||!Qr(e[n[r]],t[n[r]]))return!1;return!0}var ti=Q&&"documentMode"in document&&document.documentMode<=11,ni={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ri=null,ii=null,oi=null,ai=!1;function si(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ai||null==ri||ri!==Gn(n)?null:(n="selectionStart"in(n=ri)&&Kn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},oi&&ei(oi,n)?null:(oi=n,(e=Dt.getPooled(ni.select,ii,e,t)).type="select",e.target=ri,It(e),e))}var li={eventTypes:ni,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=In(o),i=s.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?pr(t):window,e){case"focus":(Lr(o)||"true"===o.contentEditable)&&(ri=o,ii=t,oi=null);break;case"blur":oi=ii=ri=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":return ai=!1,si(n,r);case"selectionchange":if(ti)break;case"keydown":case"keyup":return si(n,r)}return null}};O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),l=dr,r=fr,E=pr,O.injectEventPluginsByName({SimpleEventPlugin:vn,EnterLeaveEventPlugin:Xr,ChangeEventPlugin:Yr,SelectEventPlugin:li,BeforeInputEventPlugin:Nr}),new Set;var ci=[],ui=-1;function fi(e){ui<0||(e.current=ci[ui],ci[ui]=null,ui--)}function pi(e,t){ci[++ui]=e.current,e.current=t}var di={},hi={current:di},gi={current:!1},mi=di;function vi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function yi(e){return null!=e.childContextTypes}function bi(e){fi(gi),fi(hi)}function _i(e){fi(gi),fi(hi)}function wi(e,t,n){if(hi.current!==di)throw Error(R(168));pi(hi,t),pi(gi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(R(108,J(t)||"Unknown",i));return g({},n,{},r)}function ki(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||di,mi=hi.current,pi(hi,t),pi(gi,gi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(t=Ei(e,t,mi),r.__reactInternalMemoizedMergedChildContext=t,fi(gi),fi(hi),pi(hi,t)):fi(gi),pi(gi,n)}var Si=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,Oi=o.unstable_requestPaint,Pi=o.unstable_now,Ni=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Di=o.unstable_LowPriority,ji=o.unstable_IdlePriority,Mi={},Bi=void 0!==Oi?Oi:function(){},Fi=null,qi=null,Ui=!1,Hi=Pi(),Gi=Hi<1e4?Pi:function(){return Pi()-Hi};function zi(){switch(Ni()){case Ii:return 99;case Li:return 98;case Ri:return 97;case Di:return 96;case ji:return 95;default:throw Error(R(332))}}function Wi(e){switch(e){case 99:return Ii;case 98:return Li;case 97:return Ri;case 96:return Di;case 95:return ji;default:throw Error(R(332))}}function Vi(e,t){return e=Wi(e),Si(e,t)}function Ki(e,t,n){return e=Wi(e),Ci(e,t,n)}function $i(e){return null===Fi?(Fi=[e],qi=Ci(Ii,Ji)):Fi.push(e),Mi}function Yi(){if(null!==qi){var e=qi;qi=null,Ti(e)}Ji()}function Ji(){if(!Ui&&null!==Fi){Ui=!0;var t=0;try{var n=Fi;Vi(99,function(){for(;t<n.length;t++)for(var e=n[t];null!==(e=e(!0)););}),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(t+1)),Ci(Ii,Yi),n}finally{Ui=!1}}}var Xi=3;function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Zi(e,t){if(e&&e.defaultProps)for(var n in t=g({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var eo={current:null},to=null,no=null,ro=null;function io(){ro=no=to=null}function oo(e,t){var n=e.type._context;pi(eo,n._currentValue),n._currentValue=t}function ao(e){var t=eo.current;fi(eo),e.type._context._currentValue=t}function so(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){ro=no=null,null!==(e=(to=e).dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ga=!0),e.firstContext=null)}function co(e,t){if(ro!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ro=e,t=1073741823),t={context:e,observedBits:t,next:null},null===no){if(null===to)throw Error(R(308));no=t,to.dependencies={expirationTime:0,firstContext:t,responders:null}}else no=no.next=t;return e._currentValue}var uo=!1;function fo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function po(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ho(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function go(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function mo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=fo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=fo(e.memoizedState),i=n.updateQueue=fo(n.memoizedState)):r=e.updateQueue=po(i):null===i&&(i=n.updateQueue=po(r));null===i||r===i?go(r,t):null===r.lastUpdate||null===i.lastUpdate?(go(r,t),go(i,t)):(go(r,t),i.lastUpdate=t)}function vo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=fo(e.memoizedState):yo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function yo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=po(t)),t}function bo(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=n.payload)?e.call(o,r,i):e))break;return g({},r,i);case 2:uo=!0}return r}function _o(e,t,n,r,i){uo=!1;for(var o=(t=yo(e,t)).baseState,a=null,s=0,l=t.firstUpdate,c=o;null!==l;){var u=l.expirationTime;u<i?(null===a&&(a=l,o=c),s<u&&(s=u)):(xl(u,l.suspenseConfig),c=bo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var f=l.expirationTime;f<i?(null===u&&(u=l,null===a&&(o=c)),s<f&&(s=f)):(c=bo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,(l.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===u&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=u,Sl(s),e.expirationTime=s,e.memoizedState=c}function wo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Eo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Eo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Eo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw Error(R(191,n));n.call(r)}e=e.nextEffect}}var ko=N.ReactCurrentBatchConfig,xo=(new i.Component).refs;function So(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:g({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var Co={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=pl(),i=ko.suspense;(i=ho(r=dl(r,e,i),i)).payload=t,null!=n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=pl(),i=ko.suspense;(i=ho(r=dl(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=pl(),r=ko.suspense;(r=ho(n=dl(n,e,r),r)).tag=2,null!=t&&(r.callback=t),mo(e,r),hl(e,n)}};function To(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&ei(n,r)&&ei(i,o))}function Ao(e,t,n){var r=!1,i=di,o=t.contextType;return"object"==typeof o&&null!==o?o=co(o):(i=yi(t)?mi:hi.current,o=(r=null!=(r=t.contextTypes))?vi(e,i):di),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Co,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function Po(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=xo;var o=t.contextType;"object"==typeof o&&null!==o?i.context=co(o):(o=yi(t)?mi:hi.current,i.context=vi(e,o)),null!==(o=e.updateQueue)&&(_o(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(So(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Co.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(_o(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var No=Array.isArray;function Io(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===xo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Lo(e,t){if("textarea"!==e.type)throw Error(R(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ro(f){function p(e,t){if(f){var n=e.lastEffect;null!==n?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function d(e,t){if(!f)return null;for(;null!==t;)p(e,t),t=t.sibling;return null}function h(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return(e=Gl(e,t)).index=0,e.sibling=null,e}function g(e,t,n){return e.index=n,f?null!==(n=e.alternate)?(n=n.index)<t?(e.effectTag=2,t):n:(e.effectTag=2,t):t}function s(e){return f&&null===e.alternate&&(e.effectTag=2),e}function o(e,t,n,r){return null===t||6!==t.tag?(t=Vl(n,e.mode,r)).return=e:(t=a(t,n)).return=e,t}function l(e,t,n,r){return null!==t&&t.elementType===n.type?(r=a(t,n.props)).ref=Io(e,t,n):(r=zl(n.type,n.key,n.props,null,e.mode,r)).ref=Io(e,t,n),r.return=e,r}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Kl(n,e.mode,r)).return=e:(t=a(t,n.children||[])).return=e,t}function u(e,t,n,r,i){return null===t||7!==t.tag?(t=Wl(n,e.mode,r,i)).return=e:(t=a(t,n)).return=e,t}function m(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Vl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case D:return(n=zl(t.type,t.key,t.props,null,e.mode,n)).ref=Io(e,null,t),n.return=e,n;case j:return(t=Kl(t,e.mode,n)).return=e,t}if(No(t)||Y(t))return(t=Wl(t,e.mode,n,null)).return=e,t;Lo(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case D:return n.key===i?n.type===M?u(e,t,n.props.children,r,i):l(e,t,n,r):null;case j:return n.key===i?c(e,t,n,r):null}if(No(n)||Y(n))return null!==i?null:u(e,t,n,r,null);Lo(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case D:return e=e.get(null===r.key?n:r.key)||null,r.type===M?u(t,e,r.props.children,i,r.key):l(t,e,r,i);case j:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(No(r)||Y(r))return u(t,e=e.get(n)||null,r,i,null);Lo(t,r)}return null}return function(e,t,n,r){var i="object"==typeof n&&null!==n&&n.type===M&&null===n.key;i&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case D:e:{for(o=n.key,i=t;null!==i;){if(i.key===o){if(7===i.tag?n.type===M:i.elementType===n.type){d(e,i.sibling),(t=a(i,n.type===M?n.props.children:n.props)).ref=Io(e,i,n),t.return=e,e=t;break e}d(e,i);break}p(e,i),i=i.sibling}n.type===M?((t=Wl(n.props.children,e.mode,r,n.key)).return=e,e=t):((r=zl(n.type,n.key,n.props,null,e.mode,r)).ref=Io(e,t,n),r.return=e,e=r)}return s(e);case j:e:{for(i=n.key;null!==t;){if(t.key===i){if(4===t.tag&&t.stateNode.containerInfo===n.containerInfo&&t.stateNode.implementation===n.implementation){d(e,t.sibling),(t=a(t,n.children||[])).return=e,e=t;break e}d(e,t);break}p(e,t),t=t.sibling}(t=Kl(n,e.mode,r)).return=e,e=t}return s(e)}if("string"==typeof n||"number"==typeof n)return n=""+n,null!==t&&6===t.tag?(d(e,t.sibling),(t=a(t,n)).return=e):(d(e,t),(t=Vl(n,e.mode,r)).return=e),s(e=t);if(No(n))return function(t,e,n,r){for(var i=null,o=null,a=e,s=e=0,l=null;null!==a&&s<n.length;s++){a.index>s?(l=a,a=null):l=a.sibling;var c=v(t,a,n[s],r);if(null===c){null===a&&(a=l);break}f&&a&&null===c.alternate&&p(t,a),e=g(c,e,s),null===o?i=c:o.sibling=c,o=c,a=l}if(s===n.length)return d(t,a),i;if(null===a){for(;s<n.length;s++)null!==(a=m(t,n[s],r))&&(e=g(a,e,s),null===o?i=a:o.sibling=a,o=a);return i}for(a=h(t,a);s<n.length;s++)null!==(l=y(a,t,s,n[s],r))&&(f&&null!==l.alternate&&a.delete(null===l.key?s:l.key),e=g(l,e,s),null===o?i=l:o.sibling=l,o=l);return f&&a.forEach(function(e){return p(t,e)}),i}(e,t,n,r);if(Y(n))return function(t,e,n,r){var i=Y(n);if("function"!=typeof i)throw Error(R(150));if(null==(n=i.call(n)))throw Error(R(151));for(var o=i=null,a=e,s=e=0,l=null,c=n.next();null!==a&&!c.done;s++,c=n.next()){a.index>s?(l=a,a=null):l=a.sibling;var u=v(t,a,c.value,r);if(null===u){null===a&&(a=l);break}f&&a&&null===u.alternate&&p(t,a),e=g(u,e,s),null===o?i=u:o.sibling=u,o=u,a=l}if(c.done)return d(t,a),i;if(null===a){for(;!c.done;s++,c=n.next())null!==(c=m(t,c.value,r))&&(e=g(c,e,s),null===o?i=c:o.sibling=c,o=c);return i}for(a=h(t,a);!c.done;s++,c=n.next())null!==(c=y(a,t,s,c.value,r))&&(f&&null!==c.alternate&&a.delete(null===c.key?s:c.key),e=g(c,e,s),null===o?i=c:o.sibling=c,o=c);return f&&a.forEach(function(e){return p(t,e)}),i}(e,t,n,r);if(o&&Lo(e,n),void 0===n&&!i)switch(e.tag){case 1:case 0:throw e=e.type,Error(R(152,e.displayName||e.name||"Component"))}return d(e,t)}}var Do=Ro(!0),jo=Ro(!1),Mo={},Bo={current:Mo},Fo={current:Mo},qo={current:Mo};function Uo(e){if(e===Mo)throw Error(R(174));return e}function Ho(e,t){pi(qo,t),pi(Fo,e),pi(Bo,Mo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}fi(Bo),pi(Bo,t)}function Go(e){fi(Bo),fi(Fo),fi(qo)}function zo(e){Uo(qo.current);var t=Uo(Bo.current),n=Fe(t,e.type);t!==n&&(pi(Fo,e),pi(Bo,n))}function Wo(e){Fo.current===e&&(fi(Bo),fi(Fo))}var Vo={current:0};function Ko(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Jn||n.data===Xn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function $o(e,t){return{responder:e,props:t}}var Yo=N.ReactCurrentDispatcher,Jo=N.ReactCurrentBatchConfig,Xo=0,Qo=null,Zo=null,ea=null,ta=null,na=null,ra=null,ia=0,oa=null,aa=0,sa=!1,la=null,ca=0;function ua(){throw Error(R(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qr(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,o){if(Xo=o,Qo=t,ea=null!==e?e.memoizedState:null,Yo.current=null===ea?Na:Ia,t=n(r,i),sa){for(;sa=!1,ca+=1,ea=null!==e?e.memoizedState:null,ra=ta,oa=na=Zo=null,Yo.current=Ia,t=n(r,i),sa;);la=null,ca=0}if(Yo.current=Pa,(e=Qo).memoizedState=ta,e.expirationTime=ia,e.updateQueue=oa,e.effectTag|=aa,e=null!==Zo&&null!==Zo.next,ra=na=ta=ea=Zo=Qo=null,oa=null,aa=ia=Xo=0,e)throw Error(R(300));return t}function da(){Yo.current=Pa,ra=na=ta=ea=Zo=Qo=null,sa=!1,la=oa=null,ca=aa=ia=Xo=0}function ha(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===na?ta=na=e:na=na.next=e,na}function ga(){if(null!==ra)ra=(na=ra).next,ea=null!==(Zo=ea)?Zo.next:null;else{if(null===ea)throw Error(R(310));var e={memoizedState:(Zo=ea).memoizedState,baseState:Zo.baseState,queue:Zo.queue,baseUpdate:Zo.baseUpdate,next:null};na=null===na?ta=e:na.next=e,ea=Zo.next}return na}function ma(e,t){return"function"==typeof t?t(e):t}function va(e){var t=ga(),n=t.queue;if(null===n)throw Error(R(311));if(n.lastRenderedReducer=e,0<ca){var r=n.dispatch;if(null!==la){var i=la.get(n);if(void 0!==i){la.delete(n);for(var o=t.memoizedState;o=e(o,i.action),null!==(i=i.next););return Qr(o,t.memoizedState)||(Ga=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),[n.lastRenderedState=o,r]}}return[t.memoizedState,r]}r=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var s=i=null,l=r,c=!1;do{var u=l.expirationTime;u<Xo?(c||(c=!0,s=a,i=o),ia<u&&Sl(ia=u)):(xl(u,l.suspenseConfig),o=l.eagerReducer===e?l.eagerState:e(o,l.action)),l=(a=l).next}while(null!==l&&l!==r);c||(s=a,i=o),Qr(o,t.memoizedState)||(Ga=!0),t.memoizedState=o,t.baseUpdate=s,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function ya(e){var t=ha();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e}).dispatch=Oa.bind(null,Qo,e),[t.memoizedState,e]}function ba(e){return va(ma)}function _a(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===oa?(oa={lastEffect:null}).lastEffect=e.next=e:null===(t=oa.lastEffect)?oa.lastEffect=e.next=e:(n=t.next,(t.next=e).next=n,oa.lastEffect=e),e}function wa(e,t,n,r){var i=ha();aa|=e,i.memoizedState=_a(t,n,void 0,void 0===r?null:r)}function Ea(e,t,n,r){var i=ga();r=void 0===r?null:r;var o=void 0;if(null!==Zo){var a=Zo.memoizedState;if(o=a.destroy,null!==r&&fa(r,a.deps))return void _a(0,n,o,r)}aa|=e,i.memoizedState=_a(t,n,o,r)}function ka(e,t){return wa(516,192,e,t)}function xa(e,t){return Ea(516,192,e,t)}function Sa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ca(){}function Ta(e,t){return ha().memoizedState=[e,void 0===t?null:t],e}function Aa(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oa(e,t,n){if(!(ca<25))throw Error(R(301));var r=e.alternate;if(e===Qo||null!==r&&r===Qo)if(sa=!0,e={expirationTime:Xo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===la&&(la=new Map),void 0===(n=la.get(t)))la.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=pl(),o=ko.suspense;o={expirationTime:i=dl(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)o.next=o;else{var s=a.next;null!==s&&(o.next=s),a.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var l=t.lastRenderedState,c=r(l,n);if(o.eagerReducer=r,o.eagerState=c,Qr(c,l))return}catch(e){}hl(e,i)}}var Pa={readContext:co,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useResponder:ua,useDeferredValue:ua,useTransition:ua},Na={readContext:co,useCallback:Ta,useContext:co,useEffect:ka,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,wa(4,36,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wa(4,36,e,t)},useMemo:function(e,t){var n=ha();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ha();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oa.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ha().memoizedState=e},useState:ya,useDebugValue:Ca,useResponder:$o,useDeferredValue:function(t,n){var e=ya(t),r=e[0],i=e[1];return ka(function(){o.unstable_next(function(){var e=Jo.suspense;Jo.suspense=void 0===n?null:n;try{i(t)}finally{Jo.suspense=e}})},[t,n]),r},useTransition:function(n){var e=ya(!1),t=e[0],r=e[1];return[Ta(function(t){r(!0),o.unstable_next(function(){var e=Jo.suspense;Jo.suspense=void 0===n?null:n;try{r(!1),t()}finally{Jo.suspense=e}})},[n,t]),t]}},Ia={readContext:co,useCallback:Aa,useContext:co,useEffect:xa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ea(4,36,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ea(4,36,e,t)},useMemo:function(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:va,useRef:function(){return ga().memoizedState},useState:ba,useDebugValue:Ca,useResponder:$o,useDeferredValue:function(t,n){var e=ba(),r=e[0],i=e[1];return xa(function(){o.unstable_next(function(){var e=Jo.suspense;Jo.suspense=void 0===n?null:n;try{i(t)}finally{Jo.suspense=e}})},[t,n]),r},useTransition:function(n){var e=ba(),t=e[0],r=e[1];return[Aa(function(t){r(!0),o.unstable_next(function(){var e=Jo.suspense;Jo.suspense=void 0===n?null:n;try{r(!1),t()}finally{Jo.suspense=e}})},[n,t]),t]}},La=null,Ra=null,Da=!1;function ja(e,t){var n=Ul(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ba(e){if(Da){var t=Ra;if(t){var n=t;if(!Ma(e,t)){if(!(t=ir(n.nextSibling))||!Ma(e,t))return e.effectTag=-1025&e.effectTag|2,Da=!1,void(La=e);ja(La,n)}La=e,Ra=ir(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Da=!1,La=e}}function Fa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;La=e}function qa(e){if(e!==La)return!1;if(!Da)return Fa(e),!(Da=!0);var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!tr(t,e.memoizedProps))for(t=Ra;t;)ja(e,t),t=ir(t.nextSibling);if(Fa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Yn){if(0===t){Ra=ir(e.nextSibling);break e}t--}else n!==$n&&n!==Xn&&n!==Jn||t++}e=e.nextSibling}Ra=null}}else Ra=La?ir(e.stateNode.nextSibling):null;return!0}function Ua(){Ra=La=null,Da=!1}var Ha=N.ReactCurrentOwner,Ga=!1;function za(e,t,n,r){t.child=null===e?jo(t,null,n,r):Do(t,e.child,n,r)}function Wa(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=pa(e,t,n,r,o,i),null===e||Ga?(t.effectTag|=1,za(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function Va(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Hl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zl(n.type,null,r,null,t.mode,o)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,Ka(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ei)(i,r)&&e.ref===t.ref)?ls(e,t,o):(t.effectTag|=1,(e=Gl(a,r)).ref=t.ref,(e.return=t).child=e)}function Ka(e,t,n,r,i,o){return null!==e&&ei(e.memoizedProps,r)&&e.ref===t.ref&&(Ga=!1,i<o)?ls(e,t,o):Ya(e,t,n,r,o)}function $a(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ya(e,t,n,r,i){var o=yi(n)?mi:hi.current;return o=vi(t,o),lo(t,i),n=pa(e,t,n,r,o,i),null===e||Ga?(t.effectTag|=1,za(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function Ja(e,t,n,r,i){if(yi(n)){var o=!0;ki(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ao(t,n,r),Po(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?co(c):vi(t,c=yi(n)?mi:hi.current);var u=n.getDerivedStateFromProps,f="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Oo(t,a,r,c),uo=!1;var p=t.memoizedState;l=a.state=p;var d=t.updateQueue;null!==d&&(_o(t,d,r,a,i),l=t.memoizedState),s!==r||p!==l||gi.current||uo?("function"==typeof u&&(So(t,n,u,r),l=t.memoizedState),(s=uo||To(t,n,s,r,p,l,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Zi(t.type,s),l=a.context,c="object"==typeof(c=n.contextType)&&null!==c?co(c):vi(t,c=yi(n)?mi:hi.current),(f="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Oo(t,a,r,c),uo=!1,l=t.memoizedState,p=a.state=l,null!==(d=t.updateQueue)&&(_o(t,d,r,a,i),p=t.memoizedState),s!==r||l!==p||gi.current||uo?("function"==typeof u&&(So(t,n,u,r),p=t.memoizedState),(u=uo||To(t,n,s,r,l,p,c))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Xa(e,t,n,r,o,i)}function Xa(e,t,n,r,i,o){$a(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),ls(e,t,o);r=t.stateNode,Ha.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Do(t,e.child,null,o),t.child=Do(t,null,s,o)):za(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Qa(e){var t=e.stateNode;t.pendingContext?wi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&wi(0,t.context,!1),Ho(e,t.containerInfo)}var Za,es,ts,ns,rs={dehydrated:null,retryTime:0};function is(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Vo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),pi(Vo,1&a),null===e){if(void 0!==o.fallback&&Ba(t),s){if(s=o.fallback,0==(2&((o=Wl(null,i,0,null)).return=t).mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Wl(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=rs,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=jo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,0==(2&((n=Gl(e,e.pendingProps)).return=t).mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Gl(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=rs,t.child=n,i}return n=Do(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Wl(null,i,0,null)).return=t,null!==(o.child=e)&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Wl(s,i,n,null)).return=t,(o.sibling=n).effectTag|=2,o.childExpirationTime=0,t.memoizedState=rs,t.child=o,n}return t.memoizedState=null,t.child=Do(t,e,o.children,n)}function os(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),so(e.return,t)}function as(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function ss(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(za(e,t,r.children,n),0!=(2&(r=Vo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&os(e,n);else if(19===e.tag)os(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Vo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ko(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),as(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ko(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}as(t,!0,n,null,o,t.lastEffect);break;case"together":as(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ls(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Sl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(R(153));if(null!==t.child){for(n=Gl(e=t.child,e.pendingProps,e.expirationTime),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gl(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function cs(e){e.effectTag|=4}function us(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fs(e){switch(e.tag){case 1:yi(e.type)&&bi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Go(),_i(),0!=(64&(t=e.effectTag)))throw Error(R(285));return e.effectTag=-4097&t|64,e;case 5:return Wo(e),null;case 13:return fi(Vo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fi(Vo),null;case 4:return Go(),null;case 10:return ao(e),null;default:return null}}function ps(e,t){return{value:e,source:t,stack:X(t)}}Za=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},es=function(){},ts=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a,s,l=t.stateNode;switch(Uo(Bo.current),e=null,n){case"input":o=Se(l,o),r=Se(l,r),e=[];break;case"option":o=Ne(l,o),r=Ne(l,r),e=[];break;case"select":o=g({},o,{value:void 0}),r=g({},r,{value:void 0}),e=[];break;case"textarea":o=Le(l,o),r=Le(l,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(l.onclick=Hn)}for(a in Fn(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(s in l=o[a])l.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(m.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(l=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&c!==l&&(null!=c||null!=l))if("style"===a)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(a,""+c)):"children"===a?l===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(m.hasOwnProperty(a)?(null!=c&&Un(i,a),e||l===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&cs(t)}},ns=function(e,t,n,r){n!==r&&cs(t)};var ds="function"==typeof WeakSet?WeakSet:Set;function hs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=X(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function gs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){jl(e,t)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:vs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Zi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}function vs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;(r.destroy=void 0)!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ys(e,r,t){switch("function"==typeof Fl&&Fl(r),r.tag){case 0:case 11:case 14:case 15:if(null!==(e=r.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;Vi(97<t?97:t,function(){var e=i;do{var t=e.destroy;if(void 0!==t){var n=r;try{t()}catch(e){jl(n,e)}}e=e.next}while(e!==i)})}break;case 1:gs(r),"function"==typeof(t=r.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){jl(e,t)}}(r,t);break;case 5:gs(r);break;case 4:Es(e,r,t)}}function bs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,(e.memoizedProps=null)!==t&&bs(t)}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(_s(t)){var n=t;break e}t=t.return}throw Error(R(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(R(161))}16&n.effectTag&&(Ge(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var a=o?i.stateNode:i.stateNode.instance;if(n)if(r){var s=a;a=n,8===(o=t).nodeType?o.parentNode.insertBefore(s,a):o.insertBefore(s,a)}else t.insertBefore(a,n);else r?(8===(s=t).nodeType?(o=s.parentNode).insertBefore(a,s):(o=s).appendChild(a),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=Hn)):t.appendChild(a)}else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Es(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(R(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var s=e,l=o,c=n,u=l;;)if(ys(s,u,c),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(s=r,l=o.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o=(o.child.return=o).child;continue}}else if(ys(e,o,n),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:vs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if((t.updateQueue=null)!==o){for(n[lr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Te(n,r),qn(e,i),t=qn(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?Mn(n,s):"dangerouslySetInnerHTML"===a?He(n,s):"children"===a?Ge(n,s):we(n,a,s,t)}switch(e){case"input":Ae(n,r);break;case"textarea":De(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ie(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ie(n,!!r.multiple,r.defaultValue,!0):Ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(R(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,St(t.containerInfo));break;case 12:break;case 13:if(null===(n=t).memoizedState?r=!1:(r=!0,n=t.child,Zs=Gi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=jn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}xs(t);break;case 19:xs(t);break;case 17:case 20:case 21:break;default:throw Error(R(163))}}function xs(n){var e=n.updateQueue;if(null!==e){n.updateQueue=null;var r=n.stateNode;null===r&&(r=n.stateNode=new ds),e.forEach(function(e){var t=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=dl(t=pl(),e,null)),null!==(e=gl(e,t))&&vl(e)}.bind(null,n,e);r.has(e)||(r.add(e),e.then(t,t))})}}var Ss="function"==typeof WeakMap?WeakMap:Map;function Cs(e,t,n){(n=ho(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nl||(nl=!0,rl=r),hs(e,t)},n}function Ts(t,n,e){(e=ho(e,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=n.value;e.payload=function(){return hs(t,n),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){"function"!=typeof r&&(null===il?il=new Set([this]):il.add(this),hs(t,n));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),e}var As,Os=Math.ceil,Ps=N.ReactCurrentDispatcher,Ns=N.ReactCurrentOwner,Is=0,Ls=8,Rs=16,Ds=32,js=0,Ms=1,Bs=2,Fs=3,qs=4,Us=5,Hs=Is,Gs=null,zs=null,Ws=0,Vs=js,Ks=null,$s=1073741823,Ys=1073741823,Js=null,Xs=0,Qs=!1,Zs=0,el=500,tl=null,nl=!1,rl=null,il=null,ol=!1,al=null,sl=90,ll=null,cl=0,ul=null,fl=0;function pl(){return(Hs&(Rs|Ds))!==Is?1073741821-(Gi()/10|0):0!==fl?fl:fl=1073741821-(Gi()/10|0)}function dl(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=zi();if(0==(4&t))return 99===r?1073741823:1073741822;if((Hs&Rs)!==Is)return Ws;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(R(326))}return null!==Gs&&e===Ws&&--e,e}function hl(e,t){if(50<cl)throw cl=0,ul=null,Error(R(185));if(null!==(e=gl(e,t))){var n=zi();1073741823===t?(Hs&Ls)!==Is&&(Hs&(Rs|Ds))===Is?yl(e):(vl(e),Hs===Is&&Yi()):vl(e),(4&Hs)===Is||98!==n&&99!==n||(null===ll?ll=new Map([[e,t]]):(void 0===(n=ll.get(e))||t<n)&&ll.set(e,t))}}function gl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Gs===i&&(Sl(t),Vs===qs&&Jl(i,Ws)),Xl(i,t)),i}function ml(e){var t=e.lastExpiredTime;return 0!==t?t:Yl(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function vl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$i(yl.bind(null,e));else{var t=ml(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=pl();if(r=1073741823===t?99:1===t||2===t?95:(r=10*(1073741821-t)-10*(1073741821-r))<=0?99:r<=250?98:r<=5250?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&r<=i)return;n!==Mi&&Ti(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?$i(yl.bind(null,e)):Ki(r,function e(t,n){if(fl=0,n)return Ql(t,n=pl()),vl(t),null;var r=ml(t);if(0!==r){if(n=t.callbackNode,(Hs&(Rs|Ds))!==Is)throw Error(R(327));if(Ll(),t===Gs&&r===Ws||wl(t,r),null!==zs){var i=Hs;Hs|=Rs;for(var o=kl();;)try{Tl();break}catch(n){El(t,n)}if(io(),Hs=i,Ps.current=o,Vs===Ms)throw n=Ks,wl(t,r),Jl(t,r),vl(t),n;if(null===zs)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,i=Vs,Gs=null,i){case js:case Ms:throw Error(R(345));case Bs:Ql(t,2<r?2:r);break;case Fs:if(Jl(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Pl(o)),1073741823===$s&&10<(o=Zs+el-Gi())){if(Qs){var a=t.lastPingedTime;if(0===a||r<=a){t.lastPingedTime=r,wl(t,r);break}}if(0!==(a=ml(t))&&a!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}t.timeoutHandle=nr(Nl.bind(null,t),o);break}Nl(t);break;case qs:if(Jl(t,r),r===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Pl(o)),Qs&&(0===(o=t.lastPingedTime)||r<=o)){t.lastPingedTime=r,wl(t,r);break}if(0!==(o=ml(t))&&o!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}if(1073741823!==Ys?i=10*(1073741821-Ys)-Gi():1073741823===$s?i=0:(i=10*(1073741821-$s)-5e3,(i=(o=Gi())-i)<0&&(i=0),(r=10*(1073741821-r)-o)<(i=(i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*Os(i/1960))-i)&&(i=r)),10<i){t.timeoutHandle=nr(Nl.bind(null,t),i);break}Nl(t);break;case Us:if(1073741823!==$s&&null!==Js){a=$s;var s=Js;if((i=0|s.busyMinDurationMs)<=0?i=0:(o=0|s.busyDelayMs,i=(a=Gi()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=o?0:o+i-a),10<i){Jl(t,r),t.timeoutHandle=nr(Nl.bind(null,t),i);break}}Nl(t);break;default:throw Error(R(329))}if(vl(t),t.callbackNode===n)return e.bind(null,t)}}return null}.bind(null,e),{timeout:10*(1073741821-t)-Gi()}),e.callbackNode=t}}}function yl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Nl(e);else{if((Hs&(Rs|Ds))!==Is)throw Error(R(327));if(Ll(),e===Gs&&t===Ws||wl(e,t),null!==zs){var n=Hs;Hs|=Rs;for(var r=kl();;)try{Cl();break}catch(t){El(e,t)}if(io(),Hs=n,Ps.current=r,Vs===Ms)throw n=Ks,wl(e,t),Jl(e,t),vl(e),n;if(null!==zs)throw Error(R(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Gs=null,Nl(e),vl(e)}}return null}function bl(e,t){var n=Hs;Hs|=1;try{return e(t)}finally{(Hs=n)===Is&&Yi()}}function _l(e,t){var n=Hs;Hs&=-2,Hs|=Ls;try{return e(t)}finally{(Hs=n)===Is&&Yi()}}function wl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==zs)for(n=zs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=r.type.childContextTypes&&bi();break;case 3:Go(),_i();break;case 5:Wo(r);break;case 4:Go();break;case 13:case 19:fi(Vo);break;case 10:ao(r)}n=n.return}zs=Gl((Gs=e).current,null),Ws=t,Vs=js,Ys=$s=1073741823,Js=Ks=null,Xs=0,Qs=!1}function El(e,t){for(;;){try{if(io(),da(),null===zs||null===zs.return)return Vs=Ms,Ks=t,null;e:{var n=e,r=zs.return,i=zs,o=t;if(t=Ws,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var a=o,s=0!=(1&Vo.current),l=r;do{var c;if(c=13===l.tag){var u=l.memoizedState;if(null!==u)c=null!==u.dehydrated;else{var f=l.memoizedProps;c=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!s)}}if(c){var p=l.updateQueue;if(null===p){var d=new Set;d.add(a),l.updateQueue=d}else p.add(a);if(0==(2&l.mode)){if(l.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var h=ho(1073741823,null);h.tag=2,mo(i,h)}i.expirationTime=1073741823;break e}o=void 0,i=t;var g=n.pingCache;if(null===g?(g=n.pingCache=new Ss,o=new Set,g.set(a,o)):void 0===(o=g.get(a))&&(o=new Set,g.set(a,o)),!o.has(i)){o.add(i);var m=Ml.bind(null,n,a,i);a.then(m,m)}l.effectTag|=4096,l.expirationTime=t;break e}l=l.return}while(null!==l);o=Error((J(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+X(i))}Vs!==Us&&(Vs=Bs),o=ps(o,i),l=r;do{switch(l.tag){case 3:a=o,l.effectTag|=4096,l.expirationTime=t,vo(l,Cs(l,a,t));break e;case 1:a=o;var v=l.type,y=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===il||!il.has(y)))){l.effectTag|=4096,l.expirationTime=t,vo(l,Ts(l,a,t));break e}}l=l.return}while(null!==l)}zs=Ol(zs)}catch(e){t=e;continue}break}}function kl(){var e=Ps.current;return Ps.current=Pa,null===e?Pa:e}function xl(e,t){e<$s&&2<e&&($s=e),null!==t&&e<Ys&&2<e&&(Ys=e,Js=t)}function Sl(e){Xs<e&&(Xs=e)}function Cl(){for(;null!==zs;)zs=Al(zs)}function Tl(){for(;null!==zs&&!Ai();)zs=Al(zs)}function Al(e){var t=As(e.alternate,e,Ws);return e.memoizedProps=e.pendingProps,null===t&&(t=Ol(e)),Ns.current=null,t}function Ol(e){zs=e;do{var t=zs.alternate;if(e=zs.return,0==(2048&zs.effectTag)){e:{var n=t,r=Ws,i=(t=zs).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:yi(t.type)&&bi();break;case 3:Go(),_i(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(null===n||null===n.child)&&qa(t)&&cs(t),es(t);break;case 5:Wo(t),r=Uo(qo.current);var o=t.type;if(null!==n&&null!=t.stateNode)ts(n,t,o,i,r),n.ref!==t.ref&&(t.effectTag|=128);else if(i){var a=Uo(Bo.current);if(qa(t)){var s=(i=t).stateNode;n=i.type;var l=i.memoizedProps,c=r;switch(s[sr]=i,s[lr]=l,o=void 0,r=s,n){case"iframe":case"object":case"embed":Sn("load",r);break;case"video":case"audio":for(s=0;s<Ze.length;s++)Sn(Ze[s],r);break;case"source":Sn("error",r);break;case"img":case"image":case"link":Sn("error",r),Sn("load",r);break;case"form":Sn("reset",r),Sn("submit",r);break;case"details":Sn("toggle",r);break;case"input":Ce(r,l),Sn("invalid",r),Un(c,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Sn("invalid",r),Un(c,"onChange");break;case"textarea":Re(r,l),Sn("invalid",r),Un(c,"onChange")}for(o in Fn(n,l),s=null,l)l.hasOwnProperty(o)&&(a=l[o],"children"===o?"string"==typeof a?r.textContent!==a&&(s=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(s=["children",""+a]):m.hasOwnProperty(o)&&null!=a&&Un(c,o));switch(n){case"input":ke(r),Oe(r,l,!0);break;case"textarea":ke(r),je(r);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(r.onclick=Hn)}o=s,i.updateQueue=o,(i=null!==o)&&cs(t)}else{n=t,c=o,l=i,s=9===r.nodeType?r:r.ownerDocument,a===Me.html&&(a=Be(c)),a===Me.html?"script"===c?((l=s.createElement("div")).innerHTML="<script><\/script>",s=l.removeChild(l.firstChild)):"string"==typeof l.is?s=s.createElement(c,{is:l.is}):(s=s.createElement(c),"select"===c&&(c=s,l.multiple?c.multiple=!0:l.size&&(c.size=l.size))):s=s.createElementNS(a,c),(l=s)[sr]=n,l[lr]=i,Za(l,t,!1,!1),t.stateNode=l;var u=r,f=qn(c=o,n=i);switch(c){case"iframe":case"object":case"embed":Sn("load",l),r=n;break;case"video":case"audio":for(r=0;r<Ze.length;r++)Sn(Ze[r],l);r=n;break;case"source":Sn("error",l),r=n;break;case"img":case"image":case"link":Sn("error",l),Sn("load",l),r=n;break;case"form":Sn("reset",l),Sn("submit",l),r=n;break;case"details":Sn("toggle",l),r=n;break;case"input":Ce(l,n),r=Se(l,n),Sn("invalid",l),Un(u,"onChange");break;case"option":r=Ne(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=g({},n,{value:void 0}),Sn("invalid",l),Un(u,"onChange");break;case"textarea":Re(l,n),r=Le(l,n),Sn("invalid",l),Un(u,"onChange");break;default:r=n}Fn(c,r),s=void 0,a=c;var p=l,d=r;for(s in d)if(d.hasOwnProperty(s)){var h=d[s];"style"===s?Mn(p,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&He(p,h):"children"===s?"string"==typeof h?("textarea"!==a||""!==h)&&Ge(p,h):"number"==typeof h&&Ge(p,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(m.hasOwnProperty(s)?null!=h&&Un(u,s):null!=h&&we(p,s,h,f))}switch(c){case"input":ke(l),Oe(l,n,!1);break;case"textarea":ke(l),je(l);break;case"option":null!=n.value&&l.setAttribute("value",""+_e(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?Ie(r,!!n.multiple,l,!1):null!=n.defaultValue&&Ie(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(l.onclick=Hn)}(i=er(o,i))&&cs(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(R(166));break;case 6:if(n&&null!=t.stateNode)ns(n,t,n.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(R(166));r=Uo(qo.current),Uo(Bo.current),qa(t)?(o=(i=t).stateNode,r=i.memoizedProps,o[sr]=i,(i=o.nodeValue!==r)&&cs(t)):(o=t,(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[sr]=o,t.stateNode=i)}break;case 11:break;case 13:if(fi(Vo),i=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}i=null!==i,o=!1,null===n?void 0!==t.memoizedProps.fallback&&qa(t):(o=null!==(r=n.memoizedState),i||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r).nextEffect=l:(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),i&&!o&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Vo.current)?Vs===js&&(Vs=Fs):(Vs!==js&&Vs!==Fs||(Vs=qs),0!==Xs&&null!==Gs&&(Jl(Gs,Ws),Xl(Gs,Xs)))),(i||o)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Go(),es(t);break;case 10:ao(t);break;case 9:case 14:break;case 17:yi(t.type)&&bi();break;case 19:if(fi(Vo),null===(i=t.memoizedState))break;if(o=0!=(64&t.effectTag),null===(l=i.rendering)){if(o)us(i,!1);else if(Vs!==js||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=Ko(n))){for(t.effectTag|=64,us(i,!1),null!==(o=l.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,o=t.child;null!==o;)n=i,(r=o).effectTag&=2,r.nextEffect=null,r.firstEffect=null,(r.lastEffect=null)===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),o=o.sibling;pi(Vo,1&Vo.current|2),t=t.child;break e}n=n.sibling}}else{if(!o)if(null!==(n=Ko(l))){if(t.effectTag|=64,o=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),us(i,!0),null===i.tail&&"hidden"===i.tailMode){null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null);break}}else Gi()>i.tailExpiration&&1<r&&(t.effectTag|=64,us(i,!(o=!0)),t.expirationTime=t.childExpirationTime=r-1);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}if(null!==i.tail){0===i.tailExpiration&&(i.tailExpiration=Gi()+500),r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,r.sibling=null,i=Vo.current,pi(Vo,i=o?1&i|2:1&i),t=r;break e}break;case 20:case 21:break;default:throw Error(R(156,t.tag))}t=null}if(i=zs,1===Ws||1!==i.childExpirationTime){for(o=0,r=i.child;null!==r;)(n=r.expirationTime)>o&&(o=n),(l=r.childExpirationTime)>o&&(o=l),r=r.sibling;i.childExpirationTime=o}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=zs.firstEffect),null!==zs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=zs.firstEffect),e.lastEffect=zs.lastEffect),1<zs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=zs:e.firstEffect=zs,e.lastEffect=zs))}else{if(null!==(t=fs(zs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=zs.sibling))return t;zs=e}while(null!==zs);return Vs===js&&(Vs=Us),null}function Pl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Nl(e){var t=zi();return Vi(99,function(e,t){if(Ll(),(Hs&(Rs|Ds))!==Is)throw Error(R(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Pl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Gs&&(zs=Gs=null,Ws=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Hs;Hs|=Ds,Ns.current=null,Qn=xn;var a=Vn();if(Kn(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{var l=(s=(s=a.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(l&&0!==l.rangeCount){s=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var f=0,p=-1,d=-1,h=0,g=0,m=a,v=null;t:for(;;){for(var y;m!==s||0!==c&&3!==m.nodeType||(p=f+c),m!==u||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===a)break t;if(v===s&&++h===c&&(p=f),v===u&&++g===l&&(d=f),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}s=-1===p||-1===d?null:{start:p,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;xn=!(Zn={focusedElem:a,selectionRange:s}),tl=i;do{try{Il()}catch(e){if(null===tl)throw Error(R(330));jl(tl,e),tl=tl.nextEffect}}while(null!==tl);tl=i;do{try{for(a=e,s=t;null!==tl;){var b=tl.effectTag;if(16&b&&Ge(tl.stateNode,""),128&b){var _=tl.alternate;if(null!==_){var w=_.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ws(tl),tl.effectTag&=-3;break;case 6:ws(tl),tl.effectTag&=-3,ks(tl.alternate,tl);break;case 1024:tl.effectTag&=-1025;break;case 1028:tl.effectTag&=-1025,ks(tl.alternate,tl);break;case 4:ks(tl.alternate,tl);break;case 8:Es(a,c=tl,s),bs(c)}tl=tl.nextEffect}}catch(e){if(null===tl)throw Error(R(330));jl(tl,e),tl=tl.nextEffect}}while(null!==tl);if(w=Zn,_=Vn(),b=w.focusedElem,s=w.selectionRange,_!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==s&&Kn(b)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),c=b.textContent.length,a=Math.min(s.start,c),s=void 0===s.end?a:Math.min(s.end,c),!w.extend&&s<a&&(c=s,s=a,a=c),c=Wn(b,a),u=Wn(b,s),c&&u&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==u.node||w.focusOffset!==u.offset)&&((_=_.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),s<a?(w.addRange(_),w.extend(u.node,u.offset)):(_.setEnd(u.node,u.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}xn=!!Qn,Qn=Zn=null,e.current=n,tl=i;do{try{for(b=r;null!==tl;){var E=tl.effectTag;if(36&E){var k=tl.alternate;switch(w=b,(_=tl).tag){case 0:case 11:case 15:vs(16,32,_);break;case 1:var x=_.stateNode;if(4&_.effectTag)if(null===k)x.componentDidMount();else{var S=_.elementType===_.type?k.memoizedProps:Zi(_.type,k.memoizedProps);x.componentDidUpdate(S,k.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var C=_.updateQueue;null!==C&&wo(0,C,x);break;case 3:var T=_.updateQueue;if(null!==T){if((a=null)!==_.child)switch(_.child.tag){case 5:a=_.child.stateNode;break;case 1:a=_.child.stateNode}wo(0,T,a)}break;case 5:var A=_.stateNode;null===k&&4&_.effectTag&&er(_.type,_.memoizedProps)&&A.focus();break;case 6:case 4:case 12:break;case 13:if(null===_.memoizedState){var O=_.alternate;if(null!==O){var P=O.memoizedState;if(null!==P){var N=P.dehydrated;null!==N&&St(N)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(R(163))}}if(128&E){_=void 0;var I=tl.ref;if(null!==I){var L=tl.stateNode;switch(tl.tag){case 5:_=L;break;default:_=L}"function"==typeof I?I(_):I.current=_}}tl=tl.nextEffect}}catch(e){if(null===tl)throw Error(R(330));jl(tl,e),tl=tl.nextEffect}}while(null!==tl);tl=null,Bi(),Hs=o}else e.current=n;if(ol)ol=!1,al=e,sl=t;else for(tl=i;null!==tl;)t=tl.nextEffect,tl.nextEffect=null,tl=t;if(0===(t=e.firstPendingTime)&&(il=null),1073741823===t?e===ul?cl++:(cl=0,ul=e):cl=0,"function"==typeof Bl&&Bl(n.stateNode,r),vl(e),nl)throw nl=!1,e=rl,rl=null,e;return(Hs&Ls)!==Is||Yi(),null}.bind(null,e,t)),null}function Il(){for(;null!==tl;){var e=tl.effectTag;0!=(256&e)&&ms(tl.alternate,tl),0==(512&e)||ol||(ol=!0,Ki(97,function(){return Ll(),null})),tl=tl.nextEffect}}function Ll(){if(90!==sl){var e=97<sl?97:sl;return sl=90,Vi(e,Rl)}}function Rl(){if(null===al)return!1;var e=al;if(al=null,(Hs&(Rs|Ds))!==Is)throw Error(R(331));var t=Hs;for(Hs|=Ds,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:vs(128,0,n),vs(0,64,n)}}catch(t){if(null===e)throw Error(R(330));jl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Hs=t,Yi(),!0}function Dl(e,t,n){mo(e,t=Cs(e,t=ps(n,t),1073741823)),null!==(e=gl(e,1073741823))&&vl(e)}function jl(e,t){if(3===e.tag)Dl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Dl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===il||!il.has(r))){mo(n,e=Ts(n,e=ps(t,e),1073741823)),null!==(n=gl(n,1073741823))&&vl(n);break}}n=n.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Gs===e&&Ws===n?Vs===qs||Vs===Fs&&1073741823===$s&&Gi()-Zs<el?wl(e,Ws):Qs=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),vl(e)))}As=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)Ga=!0;else{if(r<n){switch(Ga=!1,t.tag){case 3:Qa(t),Ua();break;case 5:if(zo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:yi(t.type)&&ki(t);break;case 4:Ho(t,t.stateNode.containerInfo);break;case 10:oo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&n<=r?is(e,t,n):(pi(Vo,1&Vo.current),null!==(t=ls(e,t,n))?t.sibling:null);pi(Vo,1&Vo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return ss(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),pi(Vo,Vo.current),!r)return null}return ls(e,t,n)}Ga=!1}}else Ga=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=vi(t,hi.current),lo(t,n),i=pa(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,da(),yi(r)){var o=!0;ki(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&So(t,r,a,e),i.updater=Co,Po((t.stateNode=i)._reactInternalFiber=t,r,e,n),t=Xa(null,t,r,!0,o,n)}else t.tag=0,za(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),(t._result=e).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)})}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Hl(e)?1:0;if(null!=e){if((e=e.$$typeof)===G)return 11;if(e===V)return 14}return 2}(i),e=Zi(i,e),o){case 0:t=Ya(null,t,i,e,n);break;case 1:t=Ja(null,t,i,e,n);break;case 11:t=Wa(null,t,i,e,n);break;case 14:t=Va(null,t,i,Zi(i.type,e),r,n);break;default:throw Error(R(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ya(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ja(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 3:if(Qa(t),null===(r=t.updateQueue))throw Error(R(282));if(i=null!==(i=t.memoizedState)?i.element:null,_o(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)Ua(),t=ls(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ra=ir(t.stateNode.containerInfo.firstChild),La=t,i=Da=!0),i)for(n=jo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else za(e,t,r,n),Ua();t=t.child}return t;case 5:return zo(t),null===e&&Ba(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,tr(r,i)?a=null:null!==o&&tr(r,o)&&(t.effectTag|=16),$a(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(za(e,t,a,n),t=t.child),t;case 6:return null===e&&Ba(t),null;case 13:return is(e,t,n);case 4:return Ho(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Do(t,null,r,n):za(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 7:return za(e,t,t.pendingProps,n),t.child;case 8:case 12:return za(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,oo(t,o=i.value),null!==a){var s=a.value;if(0==(o=Qr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!gi.current){t=ls(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=ho(n,null)).tag=2,mo(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),so(s.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}za(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=co(i,o.unstable_observedBits)),t.effectTag|=1,za(e,t,r,n),t.child;case 14:return o=Zi(i=t.type,t.pendingProps),Va(e,t,i,o=Zi(i.type,o),r,n);case 15:return Ka(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,yi(r)?(e=!0,ki(t)):e=!1,lo(t,n),Ao(t,r,i),Po(t,r,i,n),Xa(null,t,r,!0,e,n);case 19:return ss(e,t,n)}throw Error(R(156,t.tag))};var Bl=null,Fl=null;function ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ul(e,t,n,r){return new ql(e,t,n,r)}function Hl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gl(e,t){var n=e.alternate;return null===n?((n=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zl(e,t,n,r,i,o){var a=2;if("function"==typeof(r=e))Hl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case M:return Wl(n.children,i,o,t);case H:a=8,i|=7;break;case B:a=8,i|=1;break;case F:return(e=Ul(12,n,t,8|i)).elementType=F,e.type=F,e.expirationTime=o,e;case z:return(e=Ul(13,n,t,i)).type=z,e.elementType=z,e.expirationTime=o,e;case W:return(e=Ul(19,n,t,i)).elementType=W,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case q:a=10;break e;case U:a=9;break e;case G:a=11;break e;case V:a=14;break e;case K:a=16,r=null;break e}throw Error(R(130,null==e?e:typeof e,""))}return(t=Ul(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Wl(e,t,n,r){return(e=Ul(7,e,r,t)).expirationTime=n,e}function Vl(e,t,n){return(e=Ul(6,e,null,t)).expirationTime=n,e}function Kl(e,t,n){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&t<=n&&e<=t}function Jl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(t<r||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Xl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(n<=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ql(e,t){var n=e.lastExpiredTime;(0===n||t<n)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,o=pl(),a=ko.suspense;o=dl(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(R(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(R(171))}if(1===n.tag){var l=n.type;if(yi(l)){n=Ei(n,l,s);break e}}n=s}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=ho(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mo(i,t),hl(i,o),o}function ec(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r,i,o=new $l(e,t,n=null!=n&&!0===n.hydrate),a=Ul(3,null,null,2===t?7:1===t?3:0);(o.current=a).stateNode=o,e[cr]=o.current,n&&0!==t&&(r=9===e.nodeType?e:e.ownerDocument,i=In(r),gt.forEach(function(e){Ln(e,r,i)}),mt.forEach(function(e){Ln(e,r,i)})),this._internalRoot=o}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ec(a);s.call(e)}}Zl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=ec(a);l.call(e)}}_l(function(){Zl(t,a,e,i)})}return ec(a)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(R(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}it=function(e){if(13===e.tag){var t=Qi(pl(),150,100);hl(e,t),nc(e,t)}},ot=function(e){if(13===e.tag){pl();var t=Xi++;hl(e,t),nc(e,t)}},at=function(e){if(13===e.tag){var t=pl();hl(e,t=dl(t,e,null)),nc(e,t)}},Z=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=dr(r);if(!i)throw Error(R(90));xe(r),Ae(r,i)}}}break;case"textarea":De(e,n);break;case"select":null!=(t=n.value)&&Ie(e,!!n.multiple,t,!1)}},rc.prototype.render=function(e,t){Zl(e,this._internalRoot,null,void 0===t?null:t)},rc.prototype.unmount=function(e){Zl(null,this._internalRoot,null,void 0===e?null:e)},ae=function(e,t,n,r){var i=Hs;Hs|=4;try{return Vi(98,e.bind(null,t,n,r))}finally{(Hs=i)===Is&&Yi()}},se=function(){(Hs&(1|Rs|Ds))===Is&&(function(){if(null!==ll){var e=ll;ll=null,e.forEach(function(e,t){Ql(t,e),vl(t)}),Yi()}}(),Ll())};var sc,lc,cc={createPortal:ac,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(R(188));throw Error(R(268,Object.keys(e)))}return null===(e=rt(t))?null:e.stateNode},hydrate:function(e,t,n){if(!ic(t))throw Error(R(200));return oc(null,e,t,!0,n)},render:function(e,t,n){if(!ic(t))throw Error(R(200));return oc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!ic(n))throw Error(R(200));if(null==e||void 0===e._reactInternalFiber)throw Error(R(38));return oc(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!ic(e))throw Error(R(40));return!!e._reactRootContainer&&(_l(function(){oc(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ac.apply(void 0,arguments)},unstable_batchedUpdates:oe=bl,flushSync:function(e,t){if((Hs&(Rs|Ds))!==Is)throw Error(R(187));var n=Hs;Hs|=1;try{return Vi(99,e.bind(null,t))}finally{Hs=n,Yi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[fr,pr,dr,O.injectEventPluginsByName,d,It,function(e){S(e,Nt)},re,ie,An,A,Ll,{current:!(le=function(e,t){var n=Hs;Hs|=2;try{return e(t)}finally{(Hs=n)===Is&&Yi()}})}]}};lc=(sc={findFiberByHostInstance:ur,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{var n=t.inject(e);Bl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Fl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}}(g({},sc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return lc?lc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var uc=cc;t.exports=uc.default||uc},{"object-assign":153,react:228,scheduler:186}],184:[function(e,t,n){"use strict";(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),t.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.production.min.js":183}],185:[function(e,t,s){"use strict";var o,l,c,u,n;if(Object.defineProperty(s,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var r=null,i=null,a=function(){if(null!==r)try{var e=s.unstable_now();r(!0,e),r=null}catch(e){throw setTimeout(a,0),e}},f=Date.now();s.unstable_now=function(){return Date.now()-f},o=function(e){null!==r?setTimeout(o,0,e):(r=e,setTimeout(a,0))},l=function(e,t){i=setTimeout(e,t)},c=function(){clearTimeout(i)},u=function(){return!1},n=s.unstable_forceFrameRate=function(){}}else{var p=window.performance,d=window.Date,h=window.setTimeout,g=window.clearTimeout,m=window.requestAnimationFrame,v=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof m&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof p&&"function"==typeof p.now)s.unstable_now=function(){return p.now()};else{var y=d.now();s.unstable_now=function(){return d.now()-y}}var b=!1,_=null,w=-1,E=5,k=0;u=function(){return s.unstable_now()>=k},n=function(){},s.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):33.33};var x=new MessageChannel,S=x.port2;x.port1.onmessage=function(){if(null!==_){var e=s.unstable_now();k=e+E;try{_(!0,e)?S.postMessage(null):(b=!1,_=null)}catch(e){throw S.postMessage(null),e}}else b=!1},o=function(e){_=e,b||(b=!0,S.postMessage(null))},l=function(e,t){w=h(function(){e(s.unstable_now())},t)},c=function(){g(w),w=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<O(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function A(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&O(a,n)<0)void 0!==l&&O(l,a)<0?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&O(l,n)<0))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function O(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],N=[],I=1,L=null,R=3,D=!1,j=!1,M=!1;function B(e){for(var t=T(N);null!==t;){if(null===t.callback)A(N);else{if(!(t.startTime<=e))break;A(N),t.sortIndex=t.expirationTime,C(P,t)}t=T(N)}}function F(e){if(M=!1,B(e),!j)if(null!==T(P))j=!0,o(q);else{var t=T(N);null!==t&&l(F,t.startTime-e)}}function q(e,t){j=!1,M&&(M=!1,c()),D=!0;var n=R;try{for(B(t),L=T(P);null!==L&&(!(L.expirationTime>t)||e&&!u());){var r=L.callback;if(null!==r){L.callback=null,R=L.priorityLevel;var i=r(L.expirationTime<=t);t=s.unstable_now(),"function"==typeof i?L.callback=i:L===T(P)&&A(P),B(t)}else A(P);L=T(P)}if(null!==L)var o=!0;else{var a=T(N);null!==a&&l(F,a.startTime-t),o=!1}return o}finally{L=null,R=n,D=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var H=n;s.unstable_ImmediatePriority=1,s.unstable_UserBlockingPriority=2,s.unstable_NormalPriority=3,s.unstable_IdlePriority=5,s.unstable_LowPriority=4,s.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},s.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},s.unstable_scheduleCallback=function(e,t,n){var r=s.unstable_now();if("object"==typeof n&&null!==n){var i=n.delay;i="number"==typeof i&&0<i?r+i:r,n="number"==typeof n.timeout?n.timeout:U(e)}else n=U(e),i=r;return e={id:I++,callback:t,priorityLevel:e,startTime:i,expirationTime:n=i+n,sortIndex:-1},r<i?(e.sortIndex=i,C(N,e),null===T(P)&&e===T(N)&&(M?c():M=!0,l(F,i-r))):(e.sortIndex=n,C(P,e),j||D||(j=!0,o(q))),e},s.unstable_cancelCallback=function(e){e.callback=null},s.unstable_wrapCallback=function(t){var n=R;return function(){var e=R;R=n;try{return t.apply(this,arguments)}finally{R=e}}},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_shouldYield=function(){var e=s.unstable_now();B(e);var t=T(P);return t!==L&&null!==L&&null!==t&&null!==t.callback&&t.startTime<=e&&t.expirationTime<L.expirationTime||u()},s.unstable_requestPaint=H,s.unstable_continueExecution=function(){j||D||(j=!0,o(q))},s.unstable_pauseExecution=function(){},s.unstable_getFirstCallbackNode=function(){return T(P)},s.unstable_Profiling=null},{}],186:[function(e,t,n){"use strict";t.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.production.min.js":185}],187:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case p:case a:case l:case s:case h:return e;default:switch(e=e&&e.$$typeof){case u:case d:case v:case m:case c:return e;default:return t}}case o:return t}}}function k(e){return E(e)===p}n.AsyncMode=f,n.ConcurrentMode=p,n.ContextConsumer=u,n.ContextProvider=c,n.Element=i,n.ForwardRef=d,n.Fragment=a,n.Lazy=v,n.Memo=m,n.Portal=o,n.Profiler=l,n.StrictMode=s,n.Suspense=h,n.isAsyncMode=function(e){return k(e)||E(e)===f},n.isConcurrentMode=k,n.isContextConsumer=function(e){return E(e)===u},n.isContextProvider=function(e){return E(e)===c},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return E(e)===d},n.isFragment=function(e){return E(e)===a},n.isLazy=function(e){return E(e)===v},n.isMemo=function(e){return E(e)===m},n.isPortal=function(e){return E(e)===o},n.isProfiler=function(e){return E(e)===l},n.isStrictMode=function(e){return E(e)===s},n.isSuspense=function(e){return E(e)===h},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===l||e===s||e===h||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===b||e.$$typeof===_||e.$$typeof===w||e.$$typeof===y)},n.typeOf=E},{}],188:[function(e,t,n){"use strict";t.exports=e("./cjs/react-is.production.min.js")},{"./cjs/react-is.production.min.js":187}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bodyOpenClassName=n.portalClassName=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("react"),l=d(i),c=d(e("react-dom")),o=d(e("prop-types")),u=d(e("./ModalPortal")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../helpers/ariaAppHider")),p=e("../helpers/safeHTMLElement"),a=d(p);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=n.portalClassName="ReactModalPortal",m=n.bodyOpenClassName="ReactModal__Body--open",v=void 0!==c.default.createPortal,y=v?c.default.createPortal:c.default.unstable_renderSubtreeIntoContainer;function b(e){return e()}var _=function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n=h(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i))),n.removePortal=function(){!v&&c.default.unmountComponentAtNode(n.node),b(n.props.parentSelector).removeChild(n.node)},n.portalRef=function(e){n.portal=e},n.renderPortal=function(e){var t=y(n,l.default.createElement(u.default,s({defaultStyles:a.defaultStyles},e)),n.node);n.portalRef(t)},h(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.Component),r(a,[{key:"componentDidMount",value:function(){p.canUseDOM&&(v||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,b(this.props.parentSelector).appendChild(this.node),!v&&this.renderPortal(this.props))}},{key:"componentWillReceiveProps",value:function(e){if(p.canUseDOM){var t=e.isOpen;if(this.props.isOpen||t){var n=b(this.props.parentSelector),r=b(e.parentSelector);r!==n&&(n.removeChild(this.node),r.appendChild(this.node)),!v&&this.renderPortal(e)}}}},{key:"componentWillUpdate",value:function(e){p.canUseDOM&&e.portalClassName!==this.props.portalClassName&&(this.node.className=e.portalClassName)}},{key:"componentWillUnmount",value:function(){if(p.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return p.canUseDOM&&v?(!this.node&&v&&(this.node=document.createElement("div")),y(l.default.createElement(u.default,s({ref:this.portalRef,defaultStyles:a.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){f.setElement(e)}}]),a}();_.propTypes={isOpen:o.default.bool.isRequired,style:o.default.shape({content:o.default.object,overlay:o.default.object}),portalClassName:o.default.string,bodyOpenClassName:o.default.string,htmlOpenClassName:o.default.string,className:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),overlayClassName:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),appElement:o.default.instanceOf(a.default),onAfterOpen:o.default.func,onRequestClose:o.default.func,closeTimeoutMS:o.default.number,ariaHideApp:o.default.bool,shouldFocusAfterRender:o.default.bool,shouldCloseOnOverlayClick:o.default.bool,shouldReturnFocusAfterClose:o.default.bool,parentSelector:o.default.func,aria:o.default.object,role:o.default.string,contentLabel:o.default.string,shouldCloseOnEsc:o.default.bool,overlayRef:o.default.func,contentRef:o.default.func},_.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:m,ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,parentSelector:function(){return document.body}},_.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},n.default=_},{"../helpers/ariaAppHider":191,"../helpers/safeHTMLElement":194,"./ModalPortal":190,"prop-types":180,react:228,"react-dom":184}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("react"),s=g(o),l=g(e("prop-types")),c=h(e("../helpers/focusManager")),u=g(e("../helpers/scopeTab")),f=h(e("../helpers/ariaAppHider")),p=h(e("../helpers/classList")),d=g(e("../helpers/safeHTMLElement"));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var m={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},v=9,y=27,b=0,_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.setFocusAfterRender=function(e){o.focusAfterRender=o.props.shouldFocusAfterRender&&e},o.setOverlayRef=function(e){o.overlay=e,o.props.overlayRef&&o.props.overlayRef(e)},o.setContentRef=function(e){o.content=e,o.props.contentRef&&o.props.contentRef(e)},o.afterClose=function(){var e=o.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName;p.remove(document.body,i),r&&p.remove(document.getElementsByTagName("html")[0],r),n&&0<b&&0==(b-=1)&&f.show(t),o.props.shouldFocusAfterRender&&(o.props.shouldReturnFocusAfterClose?(c.returnFocus(),c.teardownScopedFocus()):c.popWithoutFocus())},o.open=function(){o.beforeOpen(),o.state.afterOpen&&o.state.beforeClose?(clearTimeout(o.closeTimer),o.setState({beforeClose:!1})):(o.props.shouldFocusAfterRender&&(c.setupScopedFocus(o.node),c.markForFocusLater()),o.setState({isOpen:!0},function(){o.setState({afterOpen:!0}),o.props.isOpen&&o.props.onAfterOpen&&o.props.onAfterOpen()}))},o.close=function(){0<o.props.closeTimeoutMS?o.closeWithTimeout():o.closeWithoutTimeout()},o.focusContent=function(){return o.content&&!o.contentHasFocus()&&o.content.focus()},o.closeWithTimeout=function(){var e=Date.now()+o.props.closeTimeoutMS;o.setState({beforeClose:!0,closesAt:e},function(){o.closeTimer=setTimeout(o.closeWithoutTimeout,o.state.closesAt-Date.now())})},o.closeWithoutTimeout=function(){o.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},o.afterClose)},o.handleKeyDown=function(e){e.keyCode===v&&(0,u.default)(o.content,e),o.props.shouldCloseOnEsc&&e.keyCode===y&&(e.stopPropagation(),o.requestClose(e))},o.handleOverlayOnClick=function(e){null===o.shouldClose&&(o.shouldClose=!0),o.shouldClose&&o.props.shouldCloseOnOverlayClick&&(o.ownerHandlesClose()?o.requestClose(e):o.focusContent()),o.shouldClose=null,o.moveFromContentToOverlay=null},o.handleOverlayOnMouseUp=function(){null===o.moveFromContentToOverlay&&(o.shouldClose=!1),o.props.shouldCloseOnOverlayClick&&(o.shouldClose=!0)},o.handleContentOnMouseUp=function(){o.shouldClose=!1},o.handleOverlayOnMouseDown=function(e){o.props.shouldCloseOnOverlayClick||e.target!=o.overlay||e.preventDefault(),o.moveFromContentToOverlay=!1},o.handleContentOnClick=function(){o.shouldClose=!1},o.handleContentOnMouseDown=function(){o.shouldClose=!1,o.moveFromContentToOverlay=!1},o.requestClose=function(e){return o.ownerHandlesClose()&&o.props.onRequestClose(e)},o.ownerHandlesClose=function(){return o.props.onRequestClose},o.shouldBeClosed=function(){return!o.state.isOpen&&!o.state.beforeClose},o.contentHasFocus=function(){return document.activeElement===o.content||o.content.contains(document.activeElement)},o.buildClassName=function(e,t){var n="object"===(void 0===t?"undefined":i(t))?t:{base:m[e],afterOpen:m[e]+"--after-open",beforeClose:m[e]+"--before-close"},r=n.base;return o.state.afterOpen&&(r=r+" "+n.afterOpen),o.state.beforeClose&&(r=r+" "+n.beforeClose),"string"==typeof t&&t?r+" "+t:r},o.ariaAttributes=function(n){return Object.keys(n).reduce(function(e,t){return e["aria-"+t]=n[t],e},{})},o.state={afterOpen:!1,beforeClose:!1},o.shouldClose=null,o.moveFromContentToOverlay=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())}},{key:"componentWillReceiveProps",value:function(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()}},{key:"componentDidUpdate",value:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))}},{key:"componentWillUnmount",value:function(){this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName;p.add(document.body,i),r&&p.add(document.getElementsByTagName("html")[0],r),n&&(b+=1,f.hide(t))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.overlayClassName,r=e.defaultStyles,i=t?{}:r.content,o=n?{}:r.overlay;return this.shouldBeClosed()?null:s.default.createElement("div",{ref:this.setOverlayRef,className:this.buildClassName("overlay",n),style:a({},o,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown,onMouseUp:this.handleOverlayOnMouseUp,"aria-modal":"true"},s.default.createElement("div",a({ref:this.setContentRef,style:a({},i,this.props.style.content),className:this.buildClassName("content",t),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.ariaAttributes(this.props.aria||{})),this.props.children))}}]),t}();_.defaultProps={style:{overlay:{},content:{}}},_.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.instanceOf(d.default),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func},n.default=_,t.exports=n.default},{"../helpers/ariaAppHider":191,"../helpers/classList":192,"../helpers/focusManager":193,"../helpers/safeHTMLElement":194,"../helpers/scopeTab":195,"prop-types":180,react:228}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.assertNodeList=s,n.setElement=function(e){var t=e;if("string"==typeof t){var n=document.querySelectorAll(t);s(n,t),t="length"in n?n[0]:n}return a=t||a},n.validateElement=l,n.hide=function(e){l(e)&&(e||a).setAttribute("aria-hidden","true")},n.show=function(e){l(e)&&(e||a).removeAttribute("aria-hidden")},n.documentNotReadyOrSSRTesting=function(){a=null},n.resetForTesting=function(){a=null};var r,i=e("warning"),o=(r=i)&&r.__esModule?r:{default:r};var a=null;function s(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){return!(!e&&!a&&((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),1))}},{warning:290}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dumpClassLists=function(){};var o={},a={};n.add=function(e,t){return r=e.classList,i="html"==e.nodeName.toLowerCase()?o:a,void t.split(" ").forEach(function(e){var t,n;(t=i)[n=e]||(t[n]=0),t[n]+=1,r.add(e)});var r,i},n.remove=function(e,t){return r=e.classList,i="html"==e.nodeName.toLowerCase()?o:a,void t.split(" ").forEach(function(e){var t,n;(t=i)[n=e]&&(t[n]-=1),0===i[e]&&r.remove(e)});var r,i}},{}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.handleBlur=c,n.handleFocus=u,n.markForFocusLater=function(){a.push(document.activeElement)},n.returnFocus=function(){var t=null;try{return void(0!==a.length&&(t=a.pop()).focus())}catch(e){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},n.popWithoutFocus=function(){0<a.length&&a.pop()},n.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))},n.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))};var r,i=e("../helpers/tabbable"),o=(r=i)&&r.__esModule?r:{default:r};var a=[],s=null,l=!1;function c(){l=!0}function u(){if(l){if(l=!1,!s)return;setTimeout(function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()},0)}}},{"../helpers/tabbable":196}],194:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.canUseDOM=void 0;var r,i=e("exenv");var o=((r=i)&&r.__esModule?r:{default:r}).default,a=o.canUseDOM?window.HTMLElement:{};n.canUseDOM=o.canUseDOM;n.default=a},{exenv:90}],195:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,c.default)(e);if(n.length){var r,i=t.shiftKey,o=n[0],a=n[n.length-1];if(e===document.activeElement){if(!i)return;r=a}if(a!==document.activeElement||i||(r=o),o===document.activeElement&&i&&(r=a),r)return t.preventDefault(),void r.focus();var s=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null!=s&&"Chrome"!=s[1]&&null==/\biPod\b|\biPad\b/g.exec(navigator.userAgent)){var l=n.indexOf(document.activeElement);-1<l&&(l+=i?-1:1),t.preventDefault(),n[l].focus()}}else t.preventDefault()};var r,i=e("./tabbable"),c=(r=i)&&r.__esModule?r:{default:r};t.exports=n.default},{"./tabbable":196}],196:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(a)};var r=/input|select|textarea|button|object/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow"):"none"==n.getPropertyValue("display")}function o(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(i(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||0<=t)&&o(e,!n)}t.exports=n.default},{}],197:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./components/Modal"),o=(r=i)&&r.__esModule?r:{default:r};n.default=o.default,t.exports=n.default},{"./components/Modal":189}],198:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.createProvider=i,n.default=void 0;var o=r(e("@babel/runtime/helpers/inheritsLoose")),a=e("react"),s=r(e("prop-types")),l=e("../utils/PropTypes");r(e("../utils/warning"));function i(i){var e;void 0===i&&(i="store");var n=i+"Subscription",t=function(r){(0,o.default)(t,r);var e=t.prototype;function t(e,t){var n;return(n=r.call(this,e,t)||this)[i]=e.store,n}return e.getChildContext=function(){var e;return(e={})[i]=this[i],e[n]=null,e},e.render=function(){return a.Children.only(this.props.children)},t}(a.Component);return t.propTypes={store:l.storeShape.isRequired,children:s.default.element.isRequired},t.childContextTypes=((e={})[i]=l.storeShape.isRequired,e[n]=l.subscriptionShape,e),t}var c=i();n.default=c},{"../utils/PropTypes":208,"../utils/warning":213,"@babel/runtime/helpers/inheritsLoose":48,"@babel/runtime/helpers/interopRequireDefault":49,"prop-types":180,react:228}],199:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(a,e){var t,n;void 0===e&&(e={});var r=e,i=r.getDisplayName,s=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,o=r.methodName,l=void 0===o?"connectAdvanced":o,c=r.renderCountProp,u=void 0===c?void 0:c,f=r.shouldHandleStateChanges,p=void 0===f||f,d=r.storeKey,h=void 0===d?"store":d,g=r.withRef,m=void 0!==g&&g,v=(0,S.default)(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),y=h+"Subscription",b=I++,_=((t={})[h]=N.storeShape,t[y]=N.subscriptionShape,t),w=((n={})[y]=N.subscriptionShape,n);return function(n){(0,T.default)((0,O.isValidElementType)(n),"You must pass a component to the function returned by "+l+". Instead received "+JSON.stringify(n));var e=n.displayName||n.name||"Component",i=s(e),o=(0,x.default)({},v,{getDisplayName:s,methodName:l,renderCountProp:u,shouldHandleStateChanges:p,storeKey:h,withRef:m,displayName:i,wrappedComponentName:e,WrappedComponent:n}),t=function(r){function e(e,t){var n;return(n=r.call(this,e,t)||this).version=b,n.state={},n.renderCount=0,n.store=e[h]||t[h],n.propsMode=Boolean(e[h]),n.setWrappedInstance=n.setWrappedInstance.bind((0,k.default)((0,k.default)(n))),(0,T.default)(n.store,'Could not find "'+h+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+h+'" as a prop to "'+i+'".'),n.initSelector(),n.initSubscription(),n}(0,E.default)(e,r);var t=e.prototype;return t.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[y]=t||this.context[y],e},t.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},t.componentWillReceiveProps=function(e){this.selector.run(e)},t.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},t.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=R,this.store=null,this.selector.run=R,this.selector.shouldComponentUpdate=!1},t.getWrappedInstance=function(){return(0,T.default)(m,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+l+"() call."),this.wrappedInstance},t.setWrappedInstance=function(e){this.wrappedInstance=e},t.initSelector=function(){var n,r,i,e=a(this.store.dispatch,o);this.selector=(n=e,r=this.store,i={run:function(e){try{var t=n(r.getState(),e);(t!==i.props||i.error)&&(i.shouldComponentUpdate=!0,i.props=t,i.error=null)}catch(e){i.shouldComponentUpdate=!0,i.error=e}}}),this.selector.run(this.props)},t.initSubscription=function(){if(p){var e=(this.propsMode?this.props:this.context)[y];this.subscription=new P.default(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},t.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(L)):this.notifyNestedSubs()},t.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},t.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},t.addExtraProps=function(e){if(!(m||u||this.propsMode&&this.subscription))return e;var t=(0,x.default)({},e);return m&&(t.ref=this.setWrappedInstance),u&&(t[u]=this.renderCount++),this.propsMode&&this.subscription&&(t[y]=this.subscription),t},t.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return(0,A.createElement)(n,this.addExtraProps(e.props))},e}(A.Component);return t.WrappedComponent=n,t.displayName=i,t.childContextTypes=w,t.contextTypes=_,t.propTypes=_,(0,C.default)(t,n)}};var E=r(e("@babel/runtime/helpers/inheritsLoose")),k=r(e("@babel/runtime/helpers/assertThisInitialized")),x=r(e("@babel/runtime/helpers/extends")),S=r(e("@babel/runtime/helpers/objectWithoutPropertiesLoose")),C=r(e("hoist-non-react-statics")),T=r(e("invariant")),A=e("react"),O=e("react-is"),P=r(e("../utils/Subscription")),N=e("../utils/PropTypes"),I=0,L={};function R(){}},{"../utils/PropTypes":208,"../utils/Subscription":209,"@babel/runtime/helpers/assertThisInitialized":46,"@babel/runtime/helpers/extends":47,"@babel/runtime/helpers/inheritsLoose":48,"@babel/runtime/helpers/interopRequireDefault":49,"@babel/runtime/helpers/objectWithoutPropertiesLoose":51,"hoist-non-react-statics":92,invariant:96,react:228,"react-is":188}],200:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.createConnect=i,n.default=void 0;var x=r(e("@babel/runtime/helpers/extends")),S=r(e("@babel/runtime/helpers/objectWithoutPropertiesLoose")),s=r(e("../components/connectAdvanced")),C=r(e("../utils/shallowEqual")),l=r(e("./mapDispatchToProps")),c=r(e("./mapStateToProps")),u=r(e("./mergeProps")),f=r(e("./selectorFactory"));function T(n,e,r){for(var t=e.length-1;0<=t;t--){var i=e[t](n);if(i)return i}return function(e,t){throw new Error("Invalid value of type "+typeof n+" for "+r+" argument when connecting component "+t.wrappedComponentName+".")}}function A(e,t){return e===t}function i(e){var t=void 0===e?{}:e,n=t.connectHOC,b=void 0===n?s.default:n,r=t.mapStateToPropsFactories,_=void 0===r?c.default:r,i=t.mapDispatchToPropsFactories,w=void 0===i?l.default:i,o=t.mergePropsFactories,E=void 0===o?u.default:o,a=t.selectorFactory,k=void 0===a?f.default:a;return function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,l=void 0===s?A:s,c=i.areOwnPropsEqual,u=void 0===c?C.default:c,f=i.areStatePropsEqual,p=void 0===f?C.default:f,d=i.areMergedPropsEqual,h=void 0===d?C.default:d,g=(0,S.default)(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=T(e,_,"mapStateToProps"),v=T(t,w,"mapDispatchToProps"),y=T(n,E,"mergeProps");return b(k,(0,x.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:m,initMapDispatchToProps:v,initMergeProps:y,pure:a,areStatesEqual:l,areOwnPropsEqual:u,areStatePropsEqual:p,areMergedPropsEqual:h},g))}}var o=i();n.default=o},{"../components/connectAdvanced":199,"../utils/shallowEqual":211,"./mapDispatchToProps":201,"./mapStateToProps":202,"./mergeProps":203,"./selectorFactory":204,"@babel/runtime/helpers/extends":47,"@babel/runtime/helpers/interopRequireDefault":49,"@babel/runtime/helpers/objectWithoutPropertiesLoose":51}],201:[function(e,t,n){"use strict";n.__esModule=!0,n.whenMapDispatchToPropsIsFunction=o,n.whenMapDispatchToPropsIsMissing=a,n.whenMapDispatchToPropsIsObject=s,n.default=void 0;var r=e("redux"),i=e("./wrapMapToProps");function o(e){return"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function a(e){return e?void 0:(0,i.wrapMapToPropsConstant)(function(e){return{dispatch:e}})}function s(t){return t&&"object"==typeof t?(0,i.wrapMapToPropsConstant)(function(e){return(0,r.bindActionCreators)(t,e)}):void 0}var l=[o,a,s];n.default=l},{"./wrapMapToProps":206,redux:249}],202:[function(e,t,n){"use strict";n.__esModule=!0,n.whenMapStateToPropsIsFunction=i,n.whenMapStateToPropsIsMissing=o,n.default=void 0;var r=e("./wrapMapToProps");function i(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function o(e){return e?void 0:(0,r.wrapMapToPropsConstant)(function(){return{}})}var a=[i,o];n.default=a},{"./wrapMapToProps":206}],203:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.defaultMergeProps=o,n.wrapMergePropsFunc=a,n.whenMergePropsIsFunction=s,n.whenMergePropsIsOmitted=l,n.default=void 0;var i=r(e("@babel/runtime/helpers/extends"));r(e("../utils/verifyPlainObject"));function o(e,t,n){return(0,i.default)({},n,e,t)}function a(l){return function(e,t){t.displayName;var i,o=t.pure,a=t.areMergedPropsEqual,s=!1;return function(e,t,n){var r=l(e,t,n);return s?o&&a(r,i)||(i=r):(s=!0,i=r),i}}}function s(e){return"function"==typeof e?a(e):void 0}function l(e){return e?void 0:function(){return o}}var c=[s,l];n.default=c},{"../utils/verifyPlainObject":212,"@babel/runtime/helpers/extends":47,"@babel/runtime/helpers/interopRequireDefault":49}],204:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.impureFinalPropsSelectorFactory=u,n.pureFinalPropsSelectorFactory=f,n.default=function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=(0,c.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),l=i(e,o);return(o.pure?f:u)(a,s,l,e,o)};var c=r(e("@babel/runtime/helpers/objectWithoutPropertiesLoose"));r(e("./verifySubselectors"));function u(n,r,i,o){return function(e,t){return i(n(e,t),r(o,t),t)}}function f(l,c,u,f,e){var p,d,h,g,m,v=e.areStatesEqual,y=e.areOwnPropsEqual,b=e.areStatePropsEqual,_=!1;return function(e,t){return _?(n=e,a=!y(r=t,d),s=!v(n,p),p=n,d=r,a&&s?(h=l(p,d),c.dependsOnOwnProps&&(g=c(f,d)),m=u(h,g,d)):a?(l.dependsOnOwnProps&&(h=l(p,d)),c.dependsOnOwnProps&&(g=c(f,d)),m=u(h,g,d)):(s&&(i=l(p,d),o=!b(i,h),h=i,o&&(m=u(h,g,d))),m)):(h=l(p=e,d=t),g=c(f,d),m=u(h,g,d),_=!0,m);var n,r,i,o,a,s}}},{"./verifySubselectors":205,"@babel/runtime/helpers/interopRequireDefault":49,"@babel/runtime/helpers/objectWithoutPropertiesLoose":51}],205:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(e,t,n,r){o(e,"mapStateToProps",r),o(t,"mapDispatchToProps",r),o(n,"mergeProps",r)};var i=r(e("../utils/warning"));function o(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||(0,i.default)("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}},{"../utils/warning":213,"@babel/runtime/helpers/interopRequireDefault":49}],206:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.wrapMapToPropsConstant=function(i){return function(e,t){var n=i(e,t);function r(){return n}return r.dependsOnOwnProps=!1,r}},n.getDependsOnOwnProps=o,n.wrapMapToPropsFunc=function(i,e){return function(e,t){t.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,t){r.mapToProps=i,r.dependsOnOwnProps=o(i);var n=r(e,t);return"function"==typeof n&&(r.mapToProps=n,r.dependsOnOwnProps=o(n),n=r(e,t)),n},r}};r(e("../utils/verifyPlainObject"));function o(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},{"../utils/verifyPlainObject":212,"@babel/runtime/helpers/interopRequireDefault":49}],207:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=e("@babel/runtime/helpers/interopRequireWildcard");n.__esModule=!0;var o=i(e("./components/Provider"));n.Provider=o.default,n.createProvider=o.createProvider;var a=r(e("./components/connectAdvanced"));n.connectAdvanced=a.default;var s=r(e("./connect/connect"));n.connect=s.default},{"./components/Provider":198,"./components/connectAdvanced":199,"./connect/connect":200,"@babel/runtime/helpers/interopRequireDefault":49,"@babel/runtime/helpers/interopRequireWildcard":50}],208:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.storeShape=n.subscriptionShape=void 0;var i=r(e("prop-types")),o=i.default.shape({trySubscribe:i.default.func.isRequired,tryUnsubscribe:i.default.func.isRequired,notifyNestedSubs:i.default.func.isRequired,isSubscribed:i.default.func.isRequired});n.subscriptionShape=o;var a=i.default.shape({subscribe:i.default.func.isRequired,dispatch:i.default.func.isRequired,getState:i.default.func.isRequired});n.storeShape=a},{"@babel/runtime/helpers/interopRequireDefault":49,"prop-types":180}],209:[function(e,t,n){"use strict";n.__esModule=!0,n.default=void 0;var i=null,r={notify:function(){}};var o=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=r}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var n,r;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(n=[],r=[],{clear:function(){n=r=i},notify:function(){for(var e=n=r,t=0;t<e.length;t++)e[t]()},get:function(){return r},subscribe:function(e){var t=!0;return r===n&&(r=n.slice()),r.push(e),function(){t&&n!==i&&(t=!1,r===n&&(r=n.slice()),r.splice(r.indexOf(e),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=r)},e}();n.default=o},{}],210:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}},{}],211:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!o.call(t,n[i])||!a(e[n[i]],t[n[i]]))return!1;return!0};var o=Object.prototype.hasOwnProperty;function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}},{}],212:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");n.__esModule=!0,n.default=function(e,t,n){(0,i.default)(e)||(0,o.default)(n+"() in "+t+" must return a plain object. Instead received "+e+".")};var i=r(e("./isPlainObject")),o=r(e("./warning"))},{"./isPlainObject":210,"./warning":213,"@babel/runtime/helpers/interopRequireDefault":49}],213:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},{}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}}},{}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.prototype.isCustomEvent=function(e){return this.state.event||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(n){var r=this,e=this.state,t=e.event,i=e.eventOff,o=n.getAttribute("data-event")||t,a=n.getAttribute("data-event-off")||i;o.split(" ").forEach(function(e){n.removeEventListener(e,c.get(n,e));var t=s.bind(r,a);c.set(n,e,t),n.addEventListener(e,t,!1)}),a&&a.split(" ").forEach(function(e){n.removeEventListener(e,r.hideTooltip),n.addEventListener(e,r.hideTooltip,!1)})},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,r=t.eventOff,i=n||e.getAttribute("data-event"),o=r||e.getAttribute("data-event-off");e.removeEventListener(i,c.get(e,n)),o&&e.removeEventListener(o,this.hideTooltip)}};var s=function(e,t){var n=this.state.show,r=this.props.id,i=t.currentTarget.getAttribute("data-iscapture"),o=i&&"true"===i||this.props.isCapture,a=t.currentTarget.getAttribute("currentItem");o||t.stopPropagation(),n&&"true"===a?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),l(t.currentTarget,this.getTargetArray(r)),this.showTooltip(t))},l=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},c={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(e,t,n){var r,i,o;this.id in e?e[this.id][t]=n:Object.defineProperty(e,this.id,{configurable:!0,value:(r={},i=t,o=n,i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r)})},get:function(e,t){var n=e[this.id];if(void 0!==n)return n[t]}}},{}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.prototype.getEffect=function(e){return e.getAttribute("data-effect")||this.props.effect||"float"}}},{}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.prototype.isCapture=function(e){return e&&"true"===e.getAttribute("data-iscapture")||this.props.isCapture||!1}}},{}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.hide=function(e){a(o.default.GLOBAL.HIDE,{target:e})},e.rebuild=function(){a(o.default.GLOBAL.REBUILD)},e.show=function(e){a(o.default.GLOBAL.SHOW,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t={currentTarget:e.detail.target};this.showTooltip(t,!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.hideTooltip({currentTarget:t&&e.detail.target},t)}}};var r,i=e("../constant"),o=(r=i)&&r.__esModule?r:{default:r};var a=function(e,t){var n=void 0;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):((n=document.createEvent("Event")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)}},{"../constant":214}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.prototype.bindRemovalTracker=function(){var i=this,e=r();if(null!=e){var t=new e(function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.removedNodes.length;r++)if(n.removedNodes[r]===i.state.currentTarget)return void i.hideTooltip()});t.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=t}},e.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}};var r=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}},{}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(o.default.GLOBAL.HIDE,this.globalHide),window.addEventListener(o.default.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(o.default.GLOBAL.SHOW,this.globalShow),window.addEventListener(o.default.GLOBAL.SHOW,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(o.default.GLOBAL.HIDE,this.globalHide),window.removeEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(o.default.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}};var r,i=e("../constant"),o=(r=i)&&r.__esModule?r:{default:r}},{"../constant":214}],221:[function(e,t,n){"use strict";var r,i,o,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),p=x(e("react")),s=x(e("prop-types")),y=x(e("react-dom")),d=x(e("classnames")),h=x(e("sanitize-html-react")),l=x(e("./decorators/staticMethods")),c=x(e("./decorators/windowListener")),u=x(e("./decorators/customEvent")),g=x(e("./decorators/isCapture")),m=x(e("./decorators/getEffect")),v=x(e("./decorators/trackRemoval")),b=x(e("./utils/getPosition")),_=x(e("./utils/getTipContent")),w=e("./utils/aria"),E=x(e("./utils/nodeListToArray")),k=x(e("./style"));function x(e){return e&&e.__esModule?e:{default:e}}var S=(0,l.default)(r=(0,c.default)(r=(0,u.default)(r=(0,g.default)(r=(0,m.default)(r=(0,v.default)((o=i=function(e){function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.state={place:e.place||"top",desiredPlace:e.place||"top",type:"dark",effect:"float",show:!1,border:!1,offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:(0,w.parseAria)(e),isEmptyTip:!1,disable:!1,originTooltip:null,isMultiline:!1},t.bind(["showTooltip","updateTooltip","hideTooltip","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),t.mount=!0,t.delayShowLoop=null,t.delayHideLoop=null,t.delayReshow=null,t.intervalUpdateContent=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,p.default.Component),a(u,[{key:"bind",value:function(e){var t=this;e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.insecure,n=e.resizeHide;t&&this.setStyleHeader(),this.bindListener(),this.bindWindowEvents(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.ariaProps,n=(0,w.parseAria)(e);Object.keys(n).some(function(e){return n[e]!==t[e]})&&this.setState({ariaProps:n})}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(),this.unbindWindowEvents()}},{key:"mouseOnToolTip",value:function(){return!(!this.state.show||!this.tooltipRef)&&(this.tooltipRef.matches||(this.tooltipRef.matches=this.tooltipRef.msMatchesSelector),this.tooltipRef.matches(":hover"))}},{key:"getTargetArray",value:function(e){var t=void 0;if(e){var n=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t=document.querySelectorAll('[data-tip][data-for="'+n+'"]')}else t=document.querySelectorAll("[data-tip]:not([data-for])");return(0,E.default)(t)}},{key:"bindListener",value:function(){var r=this,e=this.props,t=e.id,n=e.globalEventOff,i=e.isCapture;this.getTargetArray(t).forEach(function(e){var t=r.isCapture(e),n=r.getEffect(e);null===e.getAttribute("currentItem")&&e.setAttribute("currentItem","false"),r.unbindBasicListener(e),r.isCustomEvent(e)?r.customBindListener(e):(e.addEventListener("mouseenter",r.showTooltip,t),"float"===n&&e.addEventListener("mousemove",r.updateTooltip,t),e.addEventListener("mouseleave",r.hideTooltip,t))}),n&&(window.removeEventListener(n,this.hideTooltip),window.addEventListener(n,this.hideTooltip,i)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var t=this,e=this.props,n=e.id,r=e.globalEventOff;this.getTargetArray(n).forEach(function(e){t.unbindBasicListener(e),t.isCustomEvent(e)&&t.customUnbindListener(e)}),r&&window.removeEventListener(r,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"getTooltipContent",value:function(){var e=this.props,t=e.getContent,n=e.children,r=void 0;return t&&(r=Array.isArray(t)?t[0]&&t[0](this.state.originTooltip):t(this.state.originTooltip)),(0,_.default)(this.state.originTooltip,n,r,this.state.isMultiline)}},{key:"isEmptyTip",value:function(e){return"string"==typeof e&&""===e||null===e}},{key:"showTooltip",value:function(t,e){if(!e||this.getTargetArray(this.props.id).some(function(e){return e===t.currentTarget})){var n=this.props,r=n.multiline,i=n.getContent,o=t.currentTarget.getAttribute("data-tip"),a=t.currentTarget.getAttribute("data-multiline")||r||!1,s=t instanceof window.FocusEvent||e,l=!0;t.currentTarget.getAttribute("data-scroll-hide")?l="true"===t.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(l=this.props.scrollHide);var c=t.currentTarget.getAttribute("data-place")||this.props.place||"top",u=s?"solid":this.getEffect(t.currentTarget),f=t.currentTarget.getAttribute("data-offset")||this.props.offset||{},p=(0,b.default)(t,t.currentTarget,y.default.findDOMNode(this),c,c,u,f),d=p.isNewState?p.newState.place:c;this.clearTimer();var h=t.currentTarget,g=this.state.show?h.getAttribute("data-delay-update")||this.props.delayUpdate:0,m=this,v=function(){m.setState({originTooltip:o,isMultiline:a,desiredPlace:c,place:d,type:h.getAttribute("data-type")||m.props.type||"dark",effect:u,offset:f,html:h.getAttribute("data-html")?"true"===h.getAttribute("data-html"):m.props.html||!1,delayShow:h.getAttribute("data-delay-show")||m.props.delayShow||0,delayHide:h.getAttribute("data-delay-hide")||m.props.delayHide||0,delayUpdate:h.getAttribute("data-delay-update")||m.props.delayUpdate||0,border:h.getAttribute("data-border")?"true"===h.getAttribute("data-border"):m.props.border||!1,extraClass:h.getAttribute("data-class")||m.props.class||m.props.className||"",disable:h.getAttribute("data-tip-disable")?"true"===h.getAttribute("data-tip-disable"):m.props.disable||!1,currentTarget:h},function(){l&&m.addScrollListener(m.state.currentTarget),m.updateTooltip(t),i&&Array.isArray(i)&&(m.intervalUpdateContent=setInterval(function(){if(m.mount){var e=m.props.getContent,t=(0,_.default)(o,"",e[0](),a),n=m.isEmptyTip(t);m.setState({isEmptyTip:n}),m.updatePosition()}},i[1]))})};g?this.delayReshow=setTimeout(v,g):v()}}},{key:"updateTooltip",value:function(t){var n=this,e=this.state,r=e.delayShow,i=e.disable,o=this.props.afterShow,a=this.getTooltipContent(),s=parseInt(r,10),l=t.currentTarget||t.target;if(!this.mouseOnToolTip()&&!this.isEmptyTip(a)&&!i){var c=function(){if(Array.isArray(a)&&0<a.length||a){var e=!n.state.show;n.setState({currentEvent:t,currentTarget:l,show:!0},function(){n.updatePosition(),e&&o&&o()})}};clearTimeout(this.delayShowLoop),r?this.delayShowLoop=setTimeout(c,s):c()}}},{key:"listenForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(t,e){var n=this,r=this.state,i=r.delayHide,o=r.disable,a=this.props.afterHide,s=this.getTooltipContent();if(this.mount&&!this.isEmptyTip(s)&&!o){if(e&&(!this.getTargetArray(this.props.id).some(function(e){return e===t.currentTarget})||!this.state.show))return;var l=function(){var e=n.state.show;n.mouseOnToolTip()?n.listenForTooltipExit():(n.removeListenerForTooltipExit(),n.setState({show:!1},function(){n.removeScrollListener(),e&&a&&a()}))};this.clearTimer(),i?this.delayHideLoop=setTimeout(l,parseInt(i,10)):l()}}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e);window.addEventListener("scroll",this.hideTooltip,t)}},{key:"removeScrollListener",value:function(){window.removeEventListener("scroll",this.hideTooltip)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,r=t.currentTarget,i=t.place,o=t.desiredPlace,a=t.effect,s=t.offset,l=y.default.findDOMNode(this),c=(0,b.default)(n,r,l,i,o,a,s);if(c.isNewState)return this.setState(c.newState,function(){e.updatePosition()});l.style.left=c.position.left+"px",l.style.top=c.position.top+"px"}},{key:"setStyleHeader",value:function(){var e=document.getElementsByTagName("head")[0];if(!e.querySelector('style[id="react-tooltip"]')){var t=document.createElement("style");t.id="react-tooltip",t.innerHTML=k.default,"undefined"!=typeof __webpack_nonce__&&__webpack_nonce__&&t.setAttribute("nonce",__webpack_nonce__),e.insertBefore(t,e.firstChild)}}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:"render",value:function(){var t=this,e=this.state,n=e.extraClass,r=e.html,i=e.ariaProps,o=e.disable,a=this.getTooltipContent(),s=this.isEmptyTip(a),l=(0,d.default)("__react_component_tooltip",{show:this.state.show&&!o&&!s},{border:this.state.border},{"place-top":"top"===this.state.place},{"place-bottom":"bottom"===this.state.place},{"place-left":"left"===this.state.place},{"place-right":"right"===this.state.place},{"type-dark":"dark"===this.state.type},{"type-success":"success"===this.state.type},{"type-warning":"warning"===this.state.type},{"type-error":"error"===this.state.type},{"type-info":"info"===this.state.type},{"type-light":"light"===this.state.type},{allow_hover:this.props.delayUpdate}),c=this.props.wrapper;return u.supportedWrappers.indexOf(c)<0&&(c=u.defaultProps.wrapper),r?p.default.createElement(c,f({className:l+" "+n,id:this.props.id,ref:function(e){return t.tooltipRef=e}},i,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:(0,h.default)(a,this.props.sanitizeHtmlOptions)}})):p.default.createElement(c,f({className:l+" "+n,id:this.props.id},i,{ref:function(e){return t.tooltipRef=e},"data-id":"tooltip"}),a)}}]),u}(),i.propTypes={children:s.default.any,place:s.default.string,type:s.default.string,effect:s.default.string,offset:s.default.object,multiline:s.default.bool,border:s.default.bool,insecure:s.default.bool,class:s.default.string,className:s.default.string,id:s.default.string,html:s.default.bool,delayHide:s.default.number,delayUpdate:s.default.number,delayShow:s.default.number,event:s.default.string,eventOff:s.default.string,watchWindow:s.default.bool,isCapture:s.default.bool,globalEventOff:s.default.string,getContent:s.default.any,afterShow:s.default.func,afterHide:s.default.func,disable:s.default.bool,scrollHide:s.default.bool,resizeHide:s.default.bool,wrapper:s.default.string,sanitizeHtmlOptions:s.default.any},i.defaultProps={insecure:!0,resizeHide:!0,wrapper:"div"},i.supportedWrappers=["div","span"],i.displayName="ReactTooltip",r=o))||r)||r)||r)||r)||r)||r;t.exports=S},{"./decorators/customEvent":215,"./decorators/getEffect":216,"./decorators/isCapture":217,"./decorators/staticMethods":218,"./decorators/trackRemoval":219,"./decorators/windowListener":220,"./style":222,"./utils/aria":223,"./utils/getPosition":224,"./utils/getTipContent":225,"./utils/nodeListToArray":226,classnames:63,"prop-types":180,react:228,"react-dom":184,"sanitize-html-react":253}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default='.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip.allow_hover{pointer-events:auto}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top-color:#222;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom-color:#222;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-dark.place-left:after{border-left-color:#222;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-dark.place-right:after{border-right-color:#222;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top-color:#8DC572;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-success.place-bottom:after{border-bottom-color:#8DC572;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-success.place-left:after{border-left-color:#8DC572;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-success.place-right:after{border-right-color:#8DC572;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top-color:#F0AD4E;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom-color:#F0AD4E;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-warning.place-left:after{border-left-color:#F0AD4E;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-warning.place-right:after{border-right-color:#F0AD4E;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top-color:#BE6464;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-error.place-bottom:after{border-bottom-color:#BE6464;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-error.place-left:after{border-left-color:#BE6464;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-error.place-right:after{border-right-color:#BE6464;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top-color:#337AB7;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-info.place-bottom:after{border-bottom-color:#337AB7;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-info.place-left:after{border-left-color:#337AB7;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-info.place-right:after{border-right-color:#337AB7;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top-color:#fff;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-light.place-bottom:after{border-bottom-color:#fff;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-light.place-left:after{border-left-color:#fff;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-light.place-right:after{border-right-color:#fff;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}'},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parseAria=function(t){var n={};return Object.keys(t).filter(function(e){return/(^aria-\w+$|^role$)/.test(e)}).forEach(function(e){n[e]=t[e]}),n}},{}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,o,a){for(var s=D(n),l=s.width,c=s.height,u=D(t),f=u.width,p=u.height,d=j(e,t,o),h=d.mouseX,g=d.mouseY,m=M(o,f,p,l,c),v=B(a),y=v.extraOffset_X,b=v.extraOffset_Y,_=window.innerWidth,w=window.innerHeight,E=F(n),k=E.parentTop,x=E.parentLeft,S=function(e){var t=m[e].l;return h+t+y},C=function(e){var t=m[e].t;return g+t+b},T=function(e){return S(e)<0||(n=m[e].r,_<h+n+y)||C(e)<0||(t=m[e].b,w<g+t+b);var t,n},A=function(e){return!T(e)},O=["top","bottom","left","right"],P=[],N=0;N<4;N++){var I=O[N];A(I)&&P.push(I)}var L=!1,R=void 0;return A(i)&&i!==r?(L=!0,R=i):0<P.length&&T(i)&&T(r)&&(L=!0,R=P[0]),L?{isNewState:!0,newState:{place:R}}:{isNewState:!1,position:{left:parseInt(S(r)-x,10),top:parseInt(C(r)-k,10)}}};var D=function(e){var t=e.getBoundingClientRect(),n=t.height,r=t.width;return{height:parseInt(n,10),width:parseInt(r,10)}},j=function(e,t,n){var r=t.getBoundingClientRect(),i=r.top,o=r.left,a=D(t),s=a.width,l=a.height;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:o+s/2,mouseY:i+l/2}},M=function(e,t,n,r,i){var o=void 0,a=void 0,s=void 0,l=void 0;return"float"===e?(o={l:-r/2,r:r/2,t:-(i+3+2),b:-3},s={l:-r/2,r:r/2,t:15,b:i+3+2+12},l={l:-(r+3+2),r:-3,t:-i/2,b:i/2},a={l:3,r:r+3+2,t:-i/2,b:i/2}):"solid"===e&&(o={l:-r/2,r:r/2,t:-(n/2+i+2),b:-n/2},s={l:-r/2,r:r/2,t:n/2,b:n/2+i+2},l={l:-(r+t/2+2),r:-t/2,t:-i/2,b:i/2},a={l:t/2,r:r+t/2+2,t:-i/2,b:i/2}),{top:o,bottom:s,left:l,right:a}},B=function(e){var t=0,n=0;for(var r in"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/\'/g,'"'))),e)"top"===r?n-=parseInt(e[r],10):"bottom"===r?n+=parseInt(e[r],10):"left"===r?t-=parseInt(e[r],10):"right"===r&&(t+=parseInt(e[r],10));return{extraOffset_X:t,extraOffset_Y:n}},F=function(e){for(var t=e;t&&"none"===window.getComputedStyle(t).getPropertyValue("transform");)t=t.parentElement;return{parentTop:t&&t.getBoundingClientRect().top||0,parentLeft:t&&t.getBoundingClientRect().left||0}}},{}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){if(t)return t;if(null!=n)return n;if(null===n)return null;var i=/<br\s*\/?>/;return r&&"false"!==r&&i.test(e)?e.split(i).map(function(e,t){return o.default.createElement("span",{key:t,className:"multi-line"},e)}):e};var r,i=e("react"),o=(r=i)&&r.__esModule?r:{default:r}},{react:228}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=t.length;return t.hasOwnProperty?Array.prototype.slice.call(t):new Array(e).fill().map(function(e){return t[e]})}},{}],227:[function(e,t,n){"use strict";var u=e("object-assign"),r="function"==typeof Symbol&&Symbol.for,f=r?Symbol.for("react.element"):60103,c=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,s=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||b}function E(){}function k(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=w.prototype;var x=k.prototype=new E;x.constructor=k,u(x,w.prototype),x.isPureReactComponent=!0;var S={current:null},C={current:null},T=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:f,type:e,key:o,ref:a,props:i,_owner:C.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===f}var N=/\/+/g,I=[];function L(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,I.length<10&&I.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case f:case c:a=!0}}if(a)return r(i,t,""===n?"."+j(t,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var l=n+j(o=t[s],s);a+=e(o,l,r,i)}else if("function"==typeof(l=null===t||"object"!=typeof t?null:"function"==typeof(l=v&&t[v]||t["@@iterator"])?l:null))for(t=l.call(t),s=0;!(o=t.next()).done;)a+=e(o=o.value,l=n+j(o,s++),r,i);else"object"===o&&y("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return a}(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function M(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r,i,o=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,o,n,function(e){return e}):null!=e&&(P(e)&&(i=a+(!(r=e).key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n,e={$$typeof:f,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),o.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(N,"$&/")+"/"),D(e,B,t=L(t,o,r,i)),R(t)}function q(){var e=S.current;return null===e&&y("307"),e}var U={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,M,t=L(null,null,t,n)),R(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return F(e,t,null,function(e){return e}),t},only:function(e){return P(e)||y("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:l,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return q().useCallback(e,t)},useContext:function(e,t){return q().useContext(e,t)},useEffect:function(e,t){return q().useEffect(e,t)},useImperativeHandle:function(e,t,n){return q().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return q().useLayoutEffect(e,t)},useMemo:function(e,t){return q().useMemo(e,t)},useReducer:function(e,t,n){return q().useReducer(e,t,n)},useRef:function(e){return q().useRef(e)},useState:function(e){return q().useState(e)},Fragment:i,StrictMode:o,Suspense:h,createElement:O,cloneElement:function(e,t,n){null==e&&y("267",e);var r=void 0,i=u({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,s=C.current),void 0!==t.key&&(o=""+t.key);var l=void 0;for(r in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)T.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==l?l[r]:t[r])}if(1==(r=arguments.length-2))i.children=n;else if(1<r){l=Array(r);for(var c=0;c<r;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:f,type:e.type,key:o,ref:a,props:i,_owner:s}},createFactory:function(e){var t=O.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.8.3",unstable_ConcurrentMode:p,unstable_Profiler:a,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentOwner:C,assign:u}},H=U;t.exports=H.default||H},{"object-assign":153}],228:[function(e,t,n){"use strict";t.exports=e("./cjs/react.production.min.js")},{"./cjs/react.production.min.js":227}],229:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":230}],230:[function(e,t,n){"use strict";var r=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=f;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");o.inherits(f,a);for(var l=i(s.prototype),c=0;c<l.length;c++){var u=l[c];f.prototype[u]||(f.prototype[u]=s.prototype[u])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":232,"./_stream_writable":234,"core-util-is":64,inherits:95,"process-nextick-args":177}],231:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_transform"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":233,"core-util-is":64,inherits:95}],232:[function(L,R,e){(function(N,I){(function(){"use strict";var g=L("process-nextick-args");R.exports=o;var a,m=L("isarray");o.ReadableState=r;L("events").EventEmitter;var v=function(e,t){return e.listeners(t).length},i=L("./internal/streams/stream"),d=L("safe-buffer").Buffer,h=I.Uint8Array||function(){};var e=Object.create(L("core-util-is"));e.inherits=L("inherits");var t=L("util"),y=void 0;y=t&&t.debuglog?t.debuglog("stream"):function(){};var s,l=L("./internal/streams/BufferList"),n=L("./internal/streams/destroy");e.inherits(o,i);var c=["error","close","destroy","pause","resume"];function r(e,t){e=e||{};var n=t instanceof(a=a||L("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=L("string_decoder/").StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function o(e){if(a=a||L("./_stream_duplex"),!(this instanceof o))return new o(e);this._readableState=new r(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function u(e,t,n,r,i){var o,a,s,l,c,u,f,p=e._readableState;return null===t?(p.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}(e,p)):(i||(s=p,u=l=t,d.isBuffer(u)||u instanceof h||"string"==typeof l||void 0===l||s.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),o=c),o?e.emit("error",o):p.objectMode||t&&0<t.length?("string"==typeof t||p.objectMode||Object.getPrototypeOf(t)===d.prototype||(a=t,t=d.from(a)),r?p.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):b(e,p,t,!0):p.ended?e.emit("error",new Error("stream.push() after EOF")):(p.reading=!1,p.decoder&&!n?(t=p.decoder.write(t),p.objectMode||0!==t.length?b(e,p,t,!1):E(e,p)):b(e,p,t,!1))):r||(p.reading=!1)),!(f=p).ended&&(f.needReadable||f.length<f.highWaterMark||0===f.length)}function b(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),E(e,t)}Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=n.destroy,o.prototype._undestroy=n.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},o.prototype.unshift=function(e){return u(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return s||(s=L("string_decoder/").StringDecoder),this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var f=8388608;function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(f<=(n=e)?n=f:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?g.nextTick(w,e):w(e))}function w(e){y("emit readable"),e.emit("readable"),C(e)}function E(e,t){t.readingMore||(t.readingMore=!0,g.nextTick(k,e,t))}function k(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function x(e){y("readable nexttick read 0"),e.read(0)}function S(e,t){t.reading||(y("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(y("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?a=t.buffer.shift():!e||e>=t.length?(a=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):(n=e,r=t.buffer,i=t.decoder,n<r.head.data.length?(o=r.head.data.slice(0,n),r.head.data=r.head.data.slice(n)):o=n===r.head.data.length?r.shift():i?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(a);break}++r}return t.length-=r,i}(n,r):function(e,t){var n=d.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=o.slice(a);break}++i}return t.length-=i,n}(n,r),a=o),a);var n,r,i,o,a}function A(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,g.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}o.prototype.read=function(e){y("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return y("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&A(this),null;var r,i=t.needReadable;return y("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",i=!0),t.ended||t.reading?y("reading or ended",i=!1):i&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t))),null===(r=0<e?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(r,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=r;break;case 1:o.pipes=[o.pipes,r];break;default:o.pipes.push(r)}o.pipesCount+=1,y("pipe count=%d opts=%j",o.pipesCount,e);var t=e&&!1===e.end||r===N.stdout||r===N.stderr?h:a;function a(){y("onend"),r.end()}o.endEmitted?g.nextTick(t):i.once("end",t),r.on("unpipe",function e(t,n){y("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,y("cleanup"),r.removeListener("close",p),r.removeListener("finish",d),r.removeListener("drain",s),r.removeListener("error",f),r.removeListener("unpipe",e),i.removeListener("end",a),i.removeListener("end",h),i.removeListener("data",u),l=!0,!o.awaitDrain||r._writableState&&!r._writableState.needDrain||s())});var n,s=(n=i,function(){var e=n._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v(n,"data")&&(e.flowing=!0,C(n))});r.on("drain",s);var l=!1,c=!1;function u(e){y("ondata"),(c=!1)!==r.write(e)||c||((1===o.pipesCount&&o.pipes===r||1<o.pipesCount&&-1!==P(o.pipes,r))&&!l&&(y("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,c=!0),i.pause())}function f(e){y("onerror",e),h(),r.removeListener("error",f),0===v(r,"error")&&r.emit("error",e)}function p(){r.removeListener("finish",d),h()}function d(){y("onfinish"),r.removeListener("close",p),h()}function h(){y("unpipe"),i.unpipe(r)}return i.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?m(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(r,"error",f),r.once("close",p),r.once("finish",d),r.emit("pipe",i),o.flowing||(y("pipe resume"),i.resume()),r},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=P(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},o.prototype.addListener=o.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):g.nextTick(x,this))}return n},o.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(y("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,g.nextTick(S,e,t))),this},o.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){if(y("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){y("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<c.length;o++)t.on(c[o],this.emit.bind(this,c[o]));return this._read=function(e){y("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),o._fromList=T}).call(this)}).call(this,L("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":230,"./internal/streams/BufferList":235,"./internal/streams/destroy":236,"./internal/streams/stream":237,_process:178,"core-util-is":64,events:89,inherits:95,isarray:98,"process-nextick-args":177,"safe-buffer":238,"string_decoder/":239,util:61}],233:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_duplex"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":230,"core-util-is":64,inherits:95}],234:[function(x,S,e){(function(c,u,k){(function(){"use strict";var v=x("process-nextick-args");function f(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}S.exports=a;var s,p=!c.browser&&-1<["v0.10","v0.9."].indexOf(c.version.slice(0,5))?k:v.nextTick;a.WritableState=o;var e=Object.create(x("core-util-is"));e.inherits=x("inherits");var t={deprecate:x("util-deprecate")},n=x("./internal/streams/stream"),y=x("safe-buffer").Buffer,b=u.Uint8Array||function(){};var r,i=x("./internal/streams/destroy");function _(){}function o(e,t){s=s||x("./_stream_duplex"),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(f=n,f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0,t)a=e,s=n,l=r,c=t,u=i,--s.pendingcb,l?(v.nextTick(u,c),v.nextTick(E,a,s),a._writableState.errorEmitted=!0,a.emit("error",c)):(u(c),a._writableState.errorEmitted=!0,a.emit("error",c),E(a,s));else{var o=m(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||g(e,n),r?p(h,e,n,o,i):h(e,n,o,i)}var a,s,l,c,u;var f}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function a(e){if(s=s||x("./_stream_duplex"),!(r.call(a,this)||this instanceof s))return new a(e);this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function w(e,t,n,r,i,o){if(!n){var a=(l=r,c=i,(s=t).objectMode||!1===s.decodeStrings||"string"!=typeof l||(l=y.from(l,c)),l);r!==a&&(n=!0,i="buffer",r=a)}var s,l,c,u=t.objectMode?1:r.length;t.length+=u;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,u,r,i,o);return f}function d(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),E(e,t)}function g(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,d(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback;if(d(e,t,!1,t.objectMode?1:l.length,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function l(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),E(t,n)})}function E(e,t){var n,r,i=m(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,v.nextTick(l,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}e.inherits(a,n),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!r.call(this,e)||this===a&&e&&e._writableState instanceof o}})):r=function(e){return e instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(e,t,n){var r,i,o,a,s,l,c,u,f,p,d,h=this._writableState,g=!1,m=!h.objectMode&&(r=e,y.isBuffer(r)||r instanceof b);return m&&!y.isBuffer(e)&&(d=e,e=y.from(d)),"function"==typeof t&&(n=t,t=null),m?t="buffer":t||(t=h.defaultEncoding),"function"!=typeof n&&(n=_),h.ended?(u=this,f=n,p=new Error("write after end"),u.emit("error",p),v.nextTick(f,p)):(m||(i=this,o=h,s=n,c=!(l=!0),null===(a=e)?c=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||o.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(i.emit("error",c),v.nextTick(s,c),l=!1),l))&&(h.pendingcb++,g=w(this,h,m,e,t,n)),g},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var r,i,o,a=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||(r=this,o=n,(i=a).ending=!0,E(r,i),o&&(i.finished?v.nextTick(o):r.once("finish",o)),i.ended=!0,r.writable=!1)},Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),a.prototype.destroy=i.destroy,a.prototype._undestroy=i.undestroy,a.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},x("timers").setImmediate)},{"./_stream_duplex":230,"./internal/streams/destroy":236,"./internal/streams/stream":237,_process:178,"core-util-is":64,inherits:95,"process-nextick-args":177,"safe-buffer":238,timers:284,"util-deprecate":285}],235:[function(e,t,n){"use strict";var s=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t=s.allocUnsafe(e>>>0),n=this.head,r=0;n;)i=n.data,o=t,a=r,i.copy(o,a),r+=n.data.length,n=n.next;var i,o,a;return t},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":238,util:61}],236:[function(e,t,n){"use strict";var o=e("process-nextick-args");function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":177}],237:[function(e,t,n){t.exports=e("events").EventEmitter},{events:89}],238:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:62}],239:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=f,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":238}],240:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":241}],241:[function(e,t,n){(((n=t.exports=e("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":230,"./lib/_stream_passthrough.js":231,"./lib/_stream_readable.js":232,"./lib/_stream_transform.js":233,"./lib/_stream_writable.js":234}],242:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":241}],243:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":234}],244:[function(e,t,n){"use strict";n.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n.default=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return function(s){return function(e,t,n){var r,i=s(e,t,n),o=i.dispatch,a={getState:i.getState,dispatch:function(e){return o(e)}};return r=l.map(function(e){return e(a)}),o=u.default.apply(void 0,r)(i.dispatch),c({},i,{dispatch:o})}}};var r,i=e("./compose"),u=(r=i)&&r.__esModule?r:{default:r}},{"./compose":247}],245:[function(e,t,n){"use strict";function s(e,t){return function(){return t(e.apply(void 0,arguments))}}n.__esModule=!0,n.default=function(e,t){if("function"==typeof e)return s(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=s(a,t))}return r}},{}],246:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){for(var t=Object.keys(e),d={},n=0;n<t.length;n++){var r=t[n];"function"==typeof e[r]&&(d[r]=e[r])}var h=Object.keys(d),g=void 0;try{i=d,Object.keys(i).forEach(function(e){var t=i[e];if(void 0===t(void 0,{type:o.ActionTypes.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){g=e}var i;return function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];if(g)throw g;for(var o=!1,a={},s=0;s<h.length;s++){var l=h[s],c=d[l],u=r[l],f=c(u,i);if(void 0===f){var p=(e=l,n=void 0,"Given action "+((n=(t=i)&&t.type)&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(p)}a[l]=f,o=o||f!==u}return o?a:r}};var o=e("./createStore");r(e("lodash/isPlainObject")),r(e("./utils/warning"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./createStore":248,"./utils/warning":250,"lodash/isPlainObject":137}],247:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}},{}],248:[function(e,t,n){"use strict";n.__esModule=!0,n.ActionTypes=void 0,n.default=function e(t,n,r){var i;if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var o=t,a=n,s=[],l=s,c=!1;function u(){l===s&&(l=s.slice())}function f(){return a}function p(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var n=!0;return u(),l.push(t),function(){if(n){n=!1,u();var e=l.indexOf(t);l.splice(e,1)}}}function d(e){if(!(0,h.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,a=o(a,e)}finally{c=!1}for(var t=s=l,n=0;n<t.length;n++)(0,t[n])();return e}return d({type:m.INIT}),(i={dispatch:d,subscribe:p,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,d({type:m.INIT})}})[g.default]=function(){var e,n=p;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(f())}return t(),{unsubscribe:n(t)}}})[g.default]=function(){return this},e},i};var h=r(e("lodash/isPlainObject")),g=r(e("symbol-observable"));function r(e){return e&&e.__esModule?e:{default:e}}var m=n.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":137,"symbol-observable":282}],249:[function(e,t,n){"use strict";n.__esModule=!0,n.compose=n.applyMiddleware=n.bindActionCreators=n.combineReducers=n.createStore=void 0;var r=l(e("./createStore")),i=l(e("./combineReducers")),o=l(e("./bindActionCreators")),a=l(e("./applyMiddleware")),s=l(e("./compose"));l(e("./utils/warning"));function l(e){return e&&e.__esModule?e:{default:e}}n.createStore=r.default,n.combineReducers=i.default,n.bindActionCreators=o.default,n.applyMiddleware=a.default,n.compose=s.default},{"./applyMiddleware":244,"./bindActionCreators":245,"./combineReducers":246,"./compose":247,"./createStore":248,"./utils/warning":250}],250:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},{}],251:[function(e,t,n){t.exports=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}},{}],252:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:62}],253:[function(e,t,n){var r=e("htmlparser2"),i=e("xtend"),o=e("regexp-quote");function w(t,n){t&&Object.keys(t).forEach(function(e){n(t[e],e)})}function E(e,t){return{}.hasOwnProperty.call(e,t)}function k(e,a,t){var s="";function l(e,t){var n=this;this.tag=e,this.attribs=t||{},this.tagPosition=s.length,this.text="",this.updateParentNodeText=function(){m.length&&(m[m.length-1].text+=n.text)}}a?(a=i(k.defaults,a)).parser?a.parser=i(x,a.parser):a.parser=x:(a=k.defaults).parser=x;var c,u,f=a.nonTextTags||["script","style","textarea"];a.allowedAttributes&&(c={},u={},w(a.allowedAttributes,function(e,t){c[t]=[];var n=[];e.forEach(function(e){0<=e.indexOf("*")?n.push(o(e).replace(/\\\*/g,".*")):c[t].push(e)}),u[t]=new RegExp("^("+n.join("|")+")$")}));var p={};w(a.allowedClasses,function(e,t){c&&(E(c,t)||(c[t]=[]),c[t].push("class")),p[t]=e});var d,h={};w(a.transformTags,function(e,t){var n;"function"==typeof e?n=e:"string"==typeof e&&(n=k.simpleTransform(e)),"*"===t?d=n:h[t]=n});var g=0,m=[],v={},y={},b=!1,_=0,n=new r.Parser({onopentag:function(r,e){if(b)_++;else{var o=new l(r,e);m.push(o);var t,n=!1,i=!!o.text;E(h,r)&&(t=h[r](r,e),o.attribs=e=t.attribs,void 0!==t.text&&(o.innerText=t.text),r!==t.tagName&&(o.name=r=t.tagName,y[g]=t.tagName)),d&&(t=d(r,e),o.attribs=e=t.attribs,r!==t.tagName&&(o.name=r=t.tagName,y[g]=t.tagName)),a.allowedTags&&-1===a.allowedTags.indexOf(r)&&(n=!0,-1!==f.indexOf(r)&&(b=!0,_=1),v[g]=!0),g++,n||(s+="<"+r,(!c||E(c,r)||c["*"])&&w(e,function(i,e){if(!c||E(c,r)&&-1!==c[r].indexOf(e)||c["*"]&&-1!==c["*"].indexOf(e)||E(u,r)&&u[r].test(e)||u["*"]&&u["*"].test(e)){if(("href"===e||"src"===e)&&function(e,t){var n=i.replace(/[\x00-\x20]+/g,"").replace(/<\!\-\-.*?\-\-\>/g,"").match(/^([a-zA-Z]+)\:/);if(!n)return!1;var r=n[1].toLowerCase();return E(a.allowedSchemesByTag,e)?-1===a.allowedSchemesByTag[e].indexOf(r):!a.allowedSchemes||-1===a.allowedSchemes.indexOf(r)}(r))return void delete o.attribs[e];if("class"===e&&!(t=i,n=p[r],i=n?(t=t.split(/\s+/)).filter(function(e){return-1!==n.indexOf(e)}).join(" "):t).length)return void delete o.attribs[e];s+=" "+e,i.length&&(s+='="'+i+'"')}else delete o.attribs[e];var t,n}),-1!==a.selfClosing.indexOf(r)?s+=" />":(s+=">",!o.innerText||i||a.textFilter||(s+=o.innerText)))}},ontext:function(e){if(!b){var t,n=m[m.length-1];n&&(t=n.tag,e=void 0!==n.innerText?n.innerText:e),"script"===t||"style"===t?s+=e:a.textFilter?s+=a.textFilter(e):s+=e,m.length&&(m[m.length-1].text+=e)}},onclosetag:function(e){if(b){if(--_)return;b=!1}var t=m.pop();if(t){if(b=!1,v[--g])return delete v[g],void t.updateParentNodeText();y[g]&&(e=y[g],delete y[g]),a.exclusiveFilter&&a.exclusiveFilter(t)?s=s.substr(0,t.tagPosition):(t.updateParentNodeText(),-1===a.selfClosing.indexOf(e)&&(s+="</"+e+">"))}}},a.parser);return n.write(e),n.end(),s}t.exports=k;var x={decodeEntities:!0};k.defaults={allowedTags:["h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre"],allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{}},k.simpleTransform=function(r,i,o){return o=void 0===o||o,i=i||{},function(e,t){var n;if(o)for(n in i)t[n]=i[n];else t=i;return{tagName:r,attribs:t}}}},{htmlparser2:269,"regexp-quote":251,xtend:291}],254:[function(e,t,n){var i=e("domelementtype"),o=/\s+/g,r=e("./lib/node"),a=e("./lib/element");function s(e,t,n){"object"==typeof e?(n=t,t=e,e=null):"function"==typeof t&&(n=t,t=l),this._callback=e,this._options=t||l,this._elementCB=n,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var l={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};s.prototype.onparserinit=function(e){this._parser=e},s.prototype.onreset=function(){s.call(this,this._callback,this._options,this._elementCB)},s.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},s.prototype._handleCallback=s.prototype.onerror=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},s.prototype.onclosetag=function(){var e=this._tagStack.pop();this._options.withEndIndices&&e&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e)},s.prototype._createDomElement=function(e){if(!this._options.withDomLvl1)return e;var t;for(var n in t="tag"===e.type?Object.create(a):Object.create(r),e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},s.prototype._addDomElement=function(e){var t=this._tagStack[this._tagStack.length-1],n=t?t.children:this.dom,r=n[n.length-1];e.next=null,this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),r?(e.prev=r).next=e:e.prev=null,n.push(e),e.parent=t||null},s.prototype.onopentag=function(e,t){var n={type:"script"===e?i.Script:"style"===e?i.Style:i.Tag,name:e,attribs:t,children:[]},r=this._createDomElement(n);this._addDomElement(r),this._tagStack.push(r)},s.prototype.ontext=function(e){var t,n=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(t=this.dom[this.dom.length-1]).type===i.Text)n?t.data=(t.data+e).replace(o," "):t.data+=e;else if(this._tagStack.length&&(t=this._tagStack[this._tagStack.length-1])&&(t=t.children[t.children.length-1])&&t.type===i.Text)n?t.data=(t.data+e).replace(o," "):t.data+=e;else{n&&(e=e.replace(o," "));var r=this._createDomElement({data:e,type:i.Text});this._addDomElement(r)}},s.prototype.oncomment=function(e){var t=this._tagStack[this._tagStack.length-1];if(t&&t.type===i.Comment)t.data+=e;else{var n={data:e,type:i.Comment},r=this._createDomElement(n);this._addDomElement(r),this._tagStack.push(r)}},s.prototype.oncdatastart=function(){var e={children:[{data:"",type:i.Text}],type:i.CDATA},t=this._createDomElement(e);this._addDomElement(t),this._tagStack.push(t)},s.prototype.oncommentend=s.prototype.oncdataend=function(){this._tagStack.pop()},s.prototype.onprocessinginstruction=function(e,t){var n=this._createDomElement({name:e,data:t,type:i.Directive});this._addDomElement(n)},t.exports=s},{"./lib/element":255,"./lib/node":256,domelementtype:70}],255:[function(e,t,n){var r=e("./node"),i=t.exports=Object.create(r),o={tagName:"name"};Object.keys(o).forEach(function(e){var t=o[e];Object.defineProperty(i,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e}})})},{"./node":256}],256:[function(e,t,n){var r=t.exports={get firstChild(){var e=this.children;return e&&e[0]||null},get lastChild(){var e=this.children;return e&&e[e.length-1]||null},get nodeType(){return o[this.type]||o.element}},i={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},o={element:1,text:3,cdata:4,comment:8};Object.keys(i).forEach(function(e){var t=i[e];Object.defineProperty(r,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e}})})},{}],257:[function(e,t,n){var r=e("../maps/decode.json");t.exports=function(e){if(55296<=e&&e<=57343||1114111<e)return"�";e in r&&(e=r[e]);var t="";return 65535<e&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)}},{"../maps/decode.json":258}],258:[function(e,t,n){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},{}],259:[function(e,t,n){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],260:[function(e,t,n){t.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},{}],261:[function(e,t,n){arguments[4][86][0].apply(n,arguments)},{dup:86}],262:[function(e,t,n){function r(e){this._cbs=e||{},this.events=[]}t.exports=r;var i=e("./").EVENTS;Object.keys(i).forEach(function(n){if(0===i[n])r.prototype[n="on"+n]=function(){this.events.push([n]),this._cbs[n]&&this._cbs[n]()};else if(1===i[n])r.prototype[n="on"+n]=function(e){this.events.push([n,e]),this._cbs[n]&&this._cbs[n](e)};else{if(2!==i[n])throw Error("wrong number of arguments");r.prototype[n="on"+n]=function(e,t){this.events.push([n,e,t]),this._cbs[n]&&this._cbs[n](e,t)}}}),r.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},r.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var e=0,t=this.events.length;e<t;e++)if(this._cbs[this.events[e][0]]){var n=this.events[e].length;1===n?this._cbs[this.events[e][0]]():2===n?this._cbs[this.events[e][0]](this.events[e][1]):this._cbs[this.events[e][0]](this.events[e][1],this.events[e][2])}}},{"./":269}],263:[function(e,t,n){var i=e("domhandler"),r=e("domutils");function o(e,t){this.init(e,t)}function a(e,t){return r.getElementsByTagName(e,t,!0)}function s(e,t){return r.getElementsByTagName(e,t,!0,1)[0]}function l(e,t,n){return r.getText(r.getElementsByTagName(e,t,n,1)).trim()}function c(e,t,n,r,i){var o=l(n,r,i);o&&(e[t]=o)}e("inherits")(o,i),o.prototype.init=i;var u=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};o.prototype.onend=function(){var e,t,n={},r=s(u,this.dom);r&&("feed"===r.name?(t=r.children,n.type="atom",c(n,"id","id",t),c(n,"title","title",t),(e=s("link",t))&&(e=e.attribs)&&(e=e.href)&&(n.link=e),c(n,"description","subtitle",t),(e=l("updated",t))&&(n.updated=new Date(e)),c(n,"author","email",t,!0),n.items=a("entry",t).map(function(e){var t,n={};return c(n,"id","id",e=e.children),c(n,"title","title",e),(t=s("link",e))&&(t=t.attribs)&&(t=t.href)&&(n.link=t),(t=l("summary",e)||l("content",e))&&(n.description=t),(t=l("updated",e))&&(n.pubDate=new Date(t)),n})):(t=s("channel",r.children).children,n.type=r.name.substr(0,3),n.id="",c(n,"title","title",t),c(n,"link","link",t),c(n,"description","description",t),(e=l("lastBuildDate",t))&&(n.updated=new Date(e)),c(n,"author","managingEditor",t,!0),n.items=a("item",r.children).map(function(e){var t,n={};return c(n,"id","guid",e=e.children),c(n,"title","title",e),c(n,"link","link",e),c(n,"description","description",e),(t=l("pubDate",e))&&(n.pubDate=new Date(t)),n}))),this.dom=n,i.prototype._handleCallback.call(this,r?null:Error("couldn't find root of feed"))},t.exports=o},{domhandler:254,domutils:71,inherits:95}],264:[function(e,t,n){var r=e("./Tokenizer.js"),i={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},o={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:i,input:i,output:i,button:i,datalist:i,textarea:i,option:{option:!0},optgroup:{optgroup:!0}},a={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s={__proto__:null,math:!0,svg:!0},l={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},c=/\s|\//;function u(e,t){this._options=t||{},this._cbs=e||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._foreignContext=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(r=this._options.Tokenizer),this._tokenizer=new r(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}e("inherits")(u,e("events").EventEmitter),u.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},u.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},u.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&e in o)for(var t;(t=this._stack[this._stack.length-1])in o[e];this.onclosetag(t));!this._options.xmlMode&&e in a||(this._stack.push(e),e in s?this._foreignContext.push(!0):e in l&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},u.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in a&&this._cbs.onclosetag(this._tagname),this._tagname=""},u.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(e in s||e in l)&&this._foreignContext.pop(),!this._stack.length||e in a&&!this._options.xmlMode)this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(-1!==t)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},u.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},u.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},u.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},u.prototype.onattribdata=function(e){this._attribvalue+=e},u.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},u.prototype._getInstructionName=function(e){var t=e.search(c),n=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(n=n.toLowerCase()),n},u.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},u.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},u.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},u.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},u.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},u.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;0<e;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},u.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},u.prototype.parseComplete=function(e){this.reset(),this.end(e)},u.prototype.write=function(e){this._tokenizer.write(e)},u.prototype.end=function(e){this._tokenizer.end(e)},u.prototype.pause=function(){this._tokenizer.pause()},u.prototype.resume=function(){this._tokenizer.resume()},u.prototype.parseChunk=u.prototype.write,u.prototype.done=u.prototype.end,t.exports=u},{"./Tokenizer.js":267,events:89,inherits:95}],265:[function(e,t,n){function r(e){this._cbs=e||{}}t.exports=r;var i=e("./").EVENTS;Object.keys(i).forEach(function(n){if(0===i[n])r.prototype[n="on"+n]=function(){this._cbs[n]&&this._cbs[n]()};else if(1===i[n])r.prototype[n="on"+n]=function(e){this._cbs[n]&&this._cbs[n](e)};else{if(2!==i[n])throw Error("wrong number of arguments");r.prototype[n="on"+n]=function(e,t){this._cbs[n]&&this._cbs[n](e,t)}}})},{"./":269}],266:[function(e,t,n){t.exports=i;var r=e("./WritableStream.js");function i(e){r.call(this,new o(this),e)}function o(e){this.scope=e}e("inherits")(i,r),i.prototype.readable=!0;var a=e("../").EVENTS;Object.keys(a).forEach(function(n){if(0===a[n])o.prototype["on"+n]=function(){this.scope.emit(n)};else if(1===a[n])o.prototype["on"+n]=function(e){this.scope.emit(n,e)};else{if(2!==a[n])throw Error("wrong number of arguments!");o.prototype["on"+n]=function(e,t){this.scope.emit(n,e,t)}}})},{"../":269,"./WritableStream.js":268,inherits:95}],267:[function(e,t,n){t.exports=me;var o=e("entities/lib/decode_codepoint.js"),r=e("entities/maps/entities.json"),i=e("entities/maps/legacy.json"),a=e("entities/maps/xml.json"),s=0,l=s++,c=s++,u=s++,f=s++,p=s++,d=s++,h=s++,g=s++,m=s++,v=s++,y=s++,b=s++,_=s++,w=s++,E=s++,k=s++,x=s++,S=s++,C=s++,T=s++,A=s++,O=s++,P=s++,N=s++,I=s++,L=s++,R=s++,D=s++,j=s++,M=s++,B=s++,F=s++,q=s++,U=s++,H=s++,G=s++,z=s++,W=s++,V=s++,K=s++,$=s++,Y=s++,J=s++,X=s++,Q=s++,Z=s++,ee=s++,te=s++,ne=s++,re=s++,ie=s++,oe=s++,ae=s++,se=s++,le=s++,ce=0,ue=ce++,fe=ce++,pe=ce++;function de(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function he(t,n,r){var i=t.toLowerCase();return t===i?function(e){e===i?this._state=n:(this._state=r,this._index--)}:function(e){e===i||e===t?this._state=n:(this._state=r,this._index--)}}function ge(t,n){var r=t.toLowerCase();return function(e){e===r||e===t?this._state=n:(this._state=u,this._index--)}}function me(e,t){this._state=l,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=l,this._special=ue,this._cbs=t,this._running=!0,this._ended=!1,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}me.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=c,this._sectionStart=this._index):this._decodeEntities&&this._special===ue&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=l,this._state=ie,this._sectionStart=this._index)},me.prototype._stateBeforeTagName=function(e){"/"===e?this._state=p:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||this._special!==ue||de(e)?this._state=l:"!"===e?(this._state=E,this._sectionStart=this._index+1):"?"===e?(this._state=x,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?u:B,this._sectionStart=this._index)},me.prototype._stateInTagName=function(e){("/"===e||">"===e||de(e))&&(this._emitToken("onopentagname"),this._state=g,this._index--)},me.prototype._stateBeforeCloseingTagName=function(e){de(e)||(">"===e?this._state=l:this._special!==ue?"s"===e||"S"===e?this._state=F:(this._state=l,this._index--):(this._state=d,this._sectionStart=this._index))},me.prototype._stateInCloseingTagName=function(e){(">"===e||de(e))&&(this._emitToken("onclosetag"),this._state=h,this._index--)},me.prototype._stateAfterCloseingTagName=function(e){">"===e&&(this._state=l,this._sectionStart=this._index+1)},me.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=l,this._sectionStart=this._index+1):"/"===e?this._state=f:de(e)||(this._state=m,this._sectionStart=this._index)},me.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=l,this._sectionStart=this._index+1):de(e)||(this._state=g,this._index--)},me.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||de(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=v,this._index--)},me.prototype._stateAfterAttributeName=function(e){"="===e?this._state=y:"/"===e||">"===e?(this._cbs.onattribend(),this._state=g,this._index--):de(e)||(this._cbs.onattribend(),this._state=m,this._sectionStart=this._index)},me.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=b,this._sectionStart=this._index+1):"'"===e?(this._state=_,this._sectionStart=this._index+1):de(e)||(this._state=w,this._sectionStart=this._index,this._index--)},me.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=g):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ie,this._sectionStart=this._index)},me.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=g):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ie,this._sectionStart=this._index)},me.prototype._stateInAttributeValueNoQuotes=function(e){de(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=g,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ie,this._sectionStart=this._index)},me.prototype._stateBeforeDeclaration=function(e){this._state="["===e?O:"-"===e?S:k},me.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=l,this._sectionStart=this._index+1)},me.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=l,this._sectionStart=this._index+1)},me.prototype._stateBeforeComment=function(e){"-"===e?(this._state=C,this._sectionStart=this._index+1):this._state=k},me.prototype._stateInComment=function(e){"-"===e&&(this._state=T)},me.prototype._stateAfterComment1=function(e){this._state="-"===e?A:C},me.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=l,this._sectionStart=this._index+1):"-"!==e&&(this._state=C)},me.prototype._stateBeforeCdata1=he("C",P,k),me.prototype._stateBeforeCdata2=he("D",N,k),me.prototype._stateBeforeCdata3=he("A",I,k),me.prototype._stateBeforeCdata4=he("T",L,k),me.prototype._stateBeforeCdata5=he("A",R,k),me.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=D,this._sectionStart=this._index+1):(this._state=k,this._index--)},me.prototype._stateInCdata=function(e){"]"===e&&(this._state=j)},me.prototype._stateAfterCdata1=function(e){this._state="]"===e?M:D},me.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=l,this._sectionStart=this._index+1):"]"!==e&&(this._state=D)},me.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=q:"t"===e||"T"===e?this._state=J:(this._state=u,this._index--)},me.prototype._stateBeforeSpecialEnd=function(e){this._special!==fe||"c"!==e&&"C"!==e?this._special!==pe||"t"!==e&&"T"!==e?this._state=l:this._state=ee:this._state=W},me.prototype._stateBeforeScript1=ge("R",U),me.prototype._stateBeforeScript2=ge("I",H),me.prototype._stateBeforeScript3=ge("P",G),me.prototype._stateBeforeScript4=ge("T",z),me.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||de(e))&&(this._special=fe),this._state=u,this._index--},me.prototype._stateAfterScript1=he("R",V,l),me.prototype._stateAfterScript2=he("I",K,l),me.prototype._stateAfterScript3=he("P",$,l),me.prototype._stateAfterScript4=he("T",Y,l),me.prototype._stateAfterScript5=function(e){">"===e||de(e)?(this._special=ue,this._state=d,this._sectionStart=this._index-6,this._index--):this._state=l},me.prototype._stateBeforeStyle1=ge("Y",X),me.prototype._stateBeforeStyle2=ge("L",Q),me.prototype._stateBeforeStyle3=ge("E",Z),me.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||de(e))&&(this._special=pe),this._state=u,this._index--},me.prototype._stateAfterStyle1=he("Y",te,l),me.prototype._stateAfterStyle2=he("L",ne,l),me.prototype._stateAfterStyle3=he("E",re,l),me.prototype._stateAfterStyle4=function(e){">"===e||de(e)?(this._special=ue,this._state=d,this._sectionStart=this._index-5,this._index--):this._state=l},me.prototype._stateBeforeEntity=he("#",oe,ae),me.prototype._stateBeforeNumericEntity=he("X",le,se),me.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?a:r;t.hasOwnProperty(e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},me.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(6<t&&(t=6);2<=t;){var n=this._buffer.substr(e,t);if(i.hasOwnProperty(n))return this._emitPartial(i[n]),void(this._sectionStart+=t+1);t--}},me.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||"z"<e)&&(e<"A"||"Z"<e)&&(e<"0"||"9"<e)&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==l?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},me.prototype._decodeNumericEntity=function(e,t){var n=this._sectionStart+e;if(n!==this._index){var r=this._buffer.substring(n,this._index),i=parseInt(r,t);this._emitPartial(o(i)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},me.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||"9"<e)&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},me.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||"f"<e)&&(e<"A"||"F"<e)&&(e<"0"||"9"<e)&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},me.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===l?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},me.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},me.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);this._state===l?this._stateText(e):this._state===c?this._stateBeforeTagName(e):this._state===u?this._stateInTagName(e):this._state===p?this._stateBeforeCloseingTagName(e):this._state===d?this._stateInCloseingTagName(e):this._state===h?this._stateAfterCloseingTagName(e):this._state===f?this._stateInSelfClosingTag(e):this._state===g?this._stateBeforeAttributeName(e):this._state===m?this._stateInAttributeName(e):this._state===v?this._stateAfterAttributeName(e):this._state===y?this._stateBeforeAttributeValue(e):this._state===b?this._stateInAttributeValueDoubleQuotes(e):this._state===_?this._stateInAttributeValueSingleQuotes(e):this._state===w?this._stateInAttributeValueNoQuotes(e):this._state===E?this._stateBeforeDeclaration(e):this._state===k?this._stateInDeclaration(e):this._state===x?this._stateInProcessingInstruction(e):this._state===S?this._stateBeforeComment(e):this._state===C?this._stateInComment(e):this._state===T?this._stateAfterComment1(e):this._state===A?this._stateAfterComment2(e):this._state===O?this._stateBeforeCdata1(e):this._state===P?this._stateBeforeCdata2(e):this._state===N?this._stateBeforeCdata3(e):this._state===I?this._stateBeforeCdata4(e):this._state===L?this._stateBeforeCdata5(e):this._state===R?this._stateBeforeCdata6(e):this._state===D?this._stateInCdata(e):this._state===j?this._stateAfterCdata1(e):this._state===M?this._stateAfterCdata2(e):this._state===B?this._stateBeforeSpecial(e):this._state===F?this._stateBeforeSpecialEnd(e):this._state===q?this._stateBeforeScript1(e):this._state===U?this._stateBeforeScript2(e):this._state===H?this._stateBeforeScript3(e):this._state===G?this._stateBeforeScript4(e):this._state===z?this._stateBeforeScript5(e):this._state===W?this._stateAfterScript1(e):this._state===V?this._stateAfterScript2(e):this._state===K?this._stateAfterScript3(e):this._state===$?this._stateAfterScript4(e):this._state===Y?this._stateAfterScript5(e):this._state===J?this._stateBeforeStyle1(e):this._state===X?this._stateBeforeStyle2(e):this._state===Q?this._stateBeforeStyle3(e):this._state===Z?this._stateBeforeStyle4(e):this._state===ee?this._stateAfterStyle1(e):this._state===te?this._stateAfterStyle2(e):this._state===ne?this._stateAfterStyle3(e):this._state===re?this._stateAfterStyle4(e):this._state===ie?this._stateBeforeEntity(e):this._state===oe?this._stateBeforeNumericEntity(e):this._state===ae?this._stateInNamedEntity(e):this._state===se?this._stateInNumericEntity(e):this._state===le?this._stateInHexEntity(e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},me.prototype.pause=function(){this._running=!1},me.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},me.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},me.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},me.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);this._state===D||this._state===j||this._state===M?this._cbs.oncdata(e):this._state===C||this._state===T||this._state===A?this._cbs.oncomment(e):this._state!==ae||this._xmlMode?this._state!==se||this._xmlMode?this._state!==le||this._xmlMode?this._state!==u&&this._state!==g&&this._state!==y&&this._state!==v&&this._state!==m&&this._state!==_&&this._state!==b&&this._state!==w&&this._state!==d&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},me.prototype.reset=function(){me.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},me.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},me.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},me.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},me.prototype._emitPartial=function(e){this._baseState!==l?this._cbs.onattribdata(e):this._cbs.ontext(e)}},{"entities/lib/decode_codepoint.js":257,"entities/maps/entities.json":259,"entities/maps/legacy.json":260,"entities/maps/xml.json":261}],268:[function(e,t,n){t.exports=s;var i=e("./Parser.js"),o=e("readable-stream").Writable,a=e("string_decoder").StringDecoder,r=e("buffer").Buffer;function s(e,t){var n=this._parser=new i(e,t),r=this._decoder=new a;o.call(this,{decodeStrings:!1}),this.once("finish",function(){n.end(r.end())})}e("inherits")(s,o),s.prototype._write=function(e,t,n){e instanceof r&&(e=this._decoder.write(e)),this._parser.write(e),n()}},{"./Parser.js":264,buffer:62,inherits:95,"readable-stream":61,string_decoder:272}],269:[function(e,r,t){var i=e("./Parser.js"),o=e("domhandler");function n(e,t){return delete r.exports[e],r.exports[e]=t}r.exports={Parser:i,Tokenizer:e("./Tokenizer.js"),ElementType:e("domelementtype"),DomHandler:o,get FeedHandler(){return n("FeedHandler",e("./FeedHandler.js"))},get Stream(){return n("Stream",e("./Stream.js"))},get WritableStream(){return n("WritableStream",e("./WritableStream.js"))},get ProxyHandler(){return n("ProxyHandler",e("./ProxyHandler.js"))},get DomUtils(){return n("DomUtils",e("domutils"))},get CollectingHandler(){return n("CollectingHandler",e("./CollectingHandler.js"))},DefaultHandler:o,get RssHandler(){return n("RssHandler",this.FeedHandler)},parseDOM:function(e,t){var n=new o(t);return new i(n,t).end(e),n.dom},parseFeed:function(e,t){var n=new r.exports.FeedHandler(t);return new i(n,t).end(e),n.dom},createDomStream:function(e,t,n){var r=new o(e,t,n);return new i(r,t)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},{"./CollectingHandler.js":262,"./FeedHandler.js":263,"./Parser.js":264,"./ProxyHandler.js":265,"./Stream.js":266,"./Tokenizer.js":267,"./WritableStream.js":268,domelementtype:70,domhandler:254,domutils:71}],270:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}(function(u){"use strict";var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function f(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function p(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,n,r,i,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)c(l,f(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(c(l,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,c(l,r),l}function n(e){var t,n="";for(t=0;t<4;t+=1)n+=r[e>>8*t+4&15]+r[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=n(e[t]);return e.join("")}function o(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function s(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function c(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var n,r,i,o,a=this.byteLength,s=c(e,a),l=a;return t!==u&&(l=c(t,a)),l<s?new ArrayBuffer(0):(n=l-s,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new Uint8Array(this,s,n),i.set(o),r)}}(),l.prototype.append=function(e){return this.appendBinary(o(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)c(this._hash,f(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=s(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),55<o)for(c(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,c(this._hash,e)},l.hash=function(e,t){return l.hashBinary(o(e),t)},l.hashBinary=function(e,t){var n=a(i(e));return t?s(n):n},(l.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n,r,i,o=(n=this._buff.buffer,r=e,!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),i),a=o.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)c(this._hash,p(o.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=s(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return o}(e.buff),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var n=a(function(e){var t,n,r,i,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)c(l,p(e.subarray(t-64,t)));for(n=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(c(l,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,c(l,r),l}(new Uint8Array(e)));return t?s(n):n},l})},{}],271:[function(e,t,n){t.exports=r;var u=e("events").EventEmitter;function r(){u.call(this)}e("inherits")(r,u),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(c(),0===u.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},{events:89,inherits:95,"readable-stream/duplex.js":229,"readable-stream/passthrough.js":240,"readable-stream/readable.js":241,"readable-stream/transform.js":242,"readable-stream/writable.js":243}],272:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=f,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":252}],273:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(e("ltgt")),i=r(e("events")),a=r(e("level-codec")),s=r(e("readable-stream")),l=r(e("inherits"));function c(){Error.call(this)}l(c,Error),c.prototype.name="NotFoundError";var u=i.EventEmitter,f=new c,p=function(i,o,r,a){var s=new u;function l(e){var t,n={};if(a)for(t in a)void 0!==a[t]&&(n[t]=a[t]);if(e)for(t in e)void 0!==e[t]&&(n[t]=e[t]);return n}return s.sublevels={},s.options=a,s.version="6.5.4",s.methods={},o=o||[],s.put=function(t,n,e,r){"function"==typeof e&&(r=e,e={}),i.apply([{key:t,value:n,prefix:o.slice(),type:"put"}],l(e),function(e){if(e)return r(e);s.emit("put",t,n),r(null)})},s.prefix=function(){return o.slice()},s.batch=function(t,e,n){"function"==typeof e&&(n=e,e={}),t=t.map(function(e){return{key:e.key,value:e.value,prefix:e.prefix||o,keyEncoding:e.keyEncoding,valueEncoding:e.valueEncoding,type:e.type}}),i.apply(t,l(e),function(e){if(e)return n(e);s.emit("batch",t),n(null)})},s.get=function(e,t,n){"function"==typeof t&&(n=t,t={}),i.get(e,o,l(t),function(e,t){e?n(f):n(null,t)})},s.sublevel=function(e,t){return s.sublevels[e]=s.sublevels[e]||p(i,o.concat(e),r,l(t))},s.readStream=s.createReadStream=function(e){var t;(e=l(e)).prefix=o;var n=i.iterator(e);return(t=r(e,i.createDecoder(e))).setIterator(n),t},s.close=function(e){i.close(e)},s.isOpen=i.isOpen,s.isClosed=i.isClosed,s},d=s.Readable;function h(e,t){if(!(this instanceof h))return new h(e,t);d.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._waiting=!1,this._options=e,this._makeData=t}l(h,d),h.prototype.setIterator=function(e){return this._iterator=e,this._destroyed?e.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this},h.prototype._read=function(){var r=this;if(!r._destroyed)return r._iterator?void r._iterator.next(function(e,t,n){if(e||void 0===t&&void 0===n)return e||r._destroyed||r.push(null),r._cleanup(e);n=r._makeData(t,n),r._destroyed||r.push(n)}):this._waiting=!0},h.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;e&&"iterator has ended"!==e.message&&t.emit("error",e),t._iterator?t._iterator.end(function(){t._iterator=null,t.emit("close")}):t.emit("close")}},h.prototype.destroy=function(){this._cleanup()};var g={encode:function(e){return"ÿ"+e[0]+"ÿ"+e[1]},decode:function(e){var t=e.toString(),n=t.indexOf("ÿ",1);return[t.substring(1,n),t.substring(n+1)]},lowerBound:"\0",upperBound:"ÿ"},m=new a;t.exports=function(e){return p(function(u,i,f){function p(e,t,n,r){return i.encode([e,f.encodeKey(t,n,r)])}return u.open(function(){}),{apply:function(e,t,n){t=t||{};for(var r=[],i=-1,o=e.length;++i<o;){var a=e[i];(c=(l=a).prefix)&&c.options&&(l.keyEncoding=l.keyEncoding||c.options.keyEncoding,l.valueEncoding=l.valueEncoding||c.options.valueEncoding),a.prefix="function"==typeof(s=a.prefix).prefix?s.prefix():s,r.push({key:p(a.prefix,a.key,t,a),value:"del"!==a.type&&f.encodeValue(a.value,t,a),type:a.type})}var s,l,c;u.db.batch(r,t,n)},get:function(e,t,n,r){return n.asBuffer=f.valueAsBuffer(n),u.db.get(p(t,e,n),n,function(e,t){e?r(e):r(null,f.decodeValue(t,n))})},createDecoder:function(n){return function(e,t){return{key:f.decodeKey(i.decode(e)[1],n),value:f.decodeValue(t,n)}}},isClosed:function(){return u.isClosed()},close:function(e){return u.close(e)},iterator:function(e){var t,n=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{}),r=e.prefix||[];return o.toLtgt(e,n,function(e){return p(r,e,n,{})},i.lowerBound,i.upperBound),n.prefix=null,n.keyAsBuffer=n.valueAsBuffer=!1,"number"!=typeof n.limit&&(n.limit=-1),n.keyAsBuffer=i.buffer,n.valueAsBuffer=f.valueAsBuffer(n),t=u.db.iterator(n),{next:function(e){return t.next(e)},end:function(e){t.end(e)}}}}}(e,g,m),[],h,e.options)}},{events:89,inherits:95,"level-codec":99,ltgt:138,"readable-stream":280}],274:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],275:[function(s,l,e){(function(a){(function(){l.exports=i;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},t=s("core-util-is");t.inherits=s("inherits");var n=s("./_stream_readable"),r=s("./_stream_writable");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),r.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||a.nextTick(this.end.bind(this))}t.inherits(i,n),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(e(r.prototype),function(e){i.prototype[e]||(i.prototype[e]=r.prototype[e])})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":277,"./_stream_writable":279,_process:178,"core-util-is":64,inherits:95}],276:[function(e,t,n){t.exports=o;var r=e("./_stream_transform"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":278,"core-util-is":64,inherits:95}],277:[function(p,w,e){(function(_){(function(){w.exports=n;var h=p("isarray"),d=p("buffer").Buffer;n.ReadableState=t;var g=p("events").EventEmitter;g.listenerCount||(g.listenerCount=function(e,t){return e.listeners(t).length});var r,i=p("stream"),e=p("core-util-is");function t(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(r||(r=p("string_decoder/").StringDecoder),this.decoder=new r(e.encoding),this.encoding=e.encoding)}function n(e){if(!(this instanceof n))return new n(e);this._readableState=new t(e,this),this.readable=!0,i.call(this)}function o(e,t,n,r,i){var o,a,s,l,c,u,f=(o=t,a=n,s=null,d.isBuffer(a)||"string"==typeof a||null==a||o.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s);if(f)e.emit("error",f);else if(null==n)t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,0<t.length?m(e):b(e)}(e,t);else if(t.objectMode||n&&0<n.length)if(t.ended&&!i){var p=new Error("stream.push() after EOF");e.emit("error",p)}else t.endEmitted&&i?(p=new Error("stream.unshift() after end event"),e.emit("error",p)):(!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&m(e),l=e,(c=t).readingMore||(c.readingMore=!0,_.nextTick(function(){!function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(l,c)})));else i||(t.reading=!1);return!(u=t).ended&&(u.needReadable||u.length<u.highWaterMark||0===u.length)}e.inherits=p("inherits"),e.inherits(n,i),n.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding)!==n.encoding&&(e=new d(e,t),t=""),o(this,n,e,t,!1)},n.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},n.prototype.setEncoding=function(e){r||(r=p("string_decoder/").StringDecoder),this._readableState.decoder=new r(e),this._readableState.encoding=e};var a=8388608;function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(a<=e)e=a;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?_.nextTick(function(){l(e)}):l(e))}function l(e){e.emit("readable")}function v(e){var r,i=e._readableState;function t(e,t,n){!1===e.write(r)&&i.awaitDrain++}for(i.awaitDrain=0;i.pipesCount&&null!==(r=e.read());)if(1===i.pipesCount?t(i.pipes):f(i.pipes,t),e.emit("data",r),0<i.awaitDrain)return;if(0===i.pipesCount)return i.flowing=!1,void(0<g.listenerCount(e,"data")&&c(e));i.ranOut=!0}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function c(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=e||!1,r=!1;t.readable=!0,t.pipe=i.prototype.pipe,t.on=t.addListener=i.prototype.on,t.on("readable",function(){var e;for(r=!0;!n&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)}),t.pause=function(){n=!0,this.emit("pause")},t.resume=function(){n=!1,r?_.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function u(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!e||i<=e)n=o?r.join(""):d.concat(r,i),r.length=0;else if(e<r[0].length)n=(u=r[0]).slice(0,e),r[0]=u.slice(e);else if(e===r[0].length)n=r.shift();else{n=o?"":new d(e);for(var s=0,l=0,c=r.length;l<c&&s<e;l++){var u=r[0],f=Math.min(e-s,u.length);o?n+=u.slice(0,f):u.copy(n,s,0,f),f<u.length?r[0]=u.slice(f):r.shift(),s+=f}}return n}function b(e){var t=e._readableState;if(0<t.length)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,_.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function f(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}n.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m(this),null;if(0===(e=s(e,t))&&t.ended)return n=null,0<t.length&&t.decoder&&(n=u(e,t),t.length-=n.length),0===t.length&&b(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=s(r,t)),null===(n=0<e?u(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&b(this),n},n.prototype._read=function(e){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1;var i=e&&!1===e.end||t===_.stdout||t===_.stderr?c:a;function o(e){e===n&&c()}function a(){t.end()}r.endEmitted?_.nextTick(i):n.once("end",i),t.on("unpipe",o);var s,l=(s=n,function(){var e=s._readableState;e.awaitDrain--,0===e.awaitDrain&&v(s)});function c(){t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",u),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",c),t._writableState&&!t._writableState.needDrain||l()}function u(e){d(),t.removeListener("error",u),0===g.listenerCount(t,"error")&&t.emit("error",e)}function f(){t.removeListener("finish",p),d()}function p(){t.removeListener("close",f),d()}function d(){n.unpipe(t)}return t.on("drain",l),t._events&&t._events.error?h(t._events.error)?t._events.error.unshift(u):t._events.error=[u,t._events.error]:t.on("error",u),t.once("close",f),t.once("finish",p),t.emit("pipe",n),r.flowing||(this.on("readable",y),r.flowing=!0,_.nextTick(function(){v(n)})),t},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e))||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},n.prototype.addListener=n.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||c(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&m(this):this.read(0))}return n},n.prototype.resume=function(){c(this),this.read(0),this.emit("resume")},n.prototype.pause=function(){c(this,!0),this.emit("pause")},n.prototype.wrap=function(t){var n=this._readableState,r=!1,i=this;for(var e in t.on("end",function(){if(n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),t.on("data",function(e){n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&(i.push(e)||(r=!0,t.pause()))}),t)"function"==typeof t[e]&&void 0===this[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));return f(["error","close","destroy","pause","resume"],function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){r&&(r=!1,t.resume())},i},n._fromList=u}).call(this)}).call(this,p("_process"))},{_process:178,buffer:62,"core-util-is":64,events:89,inherits:95,isarray:274,stream:271,"string_decoder/":281}],278:[function(e,t,n){t.exports=a;var r=e("./_stream_duplex"),i=e("core-util-is");function o(e,n){this.afterTransform=function(e,t){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,(r.writecb=null)!=n&&e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":275,"core-util-is":64,inherits:95}],279:[function(o,t,e){(function(g){(function(){t.exports=i;var u=o("buffer").Buffer;i.WritableState=r;var e=o("core-util-is");e.inherits=o("inherits");var n=o("stream");function f(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1;var r=(this.finished=!1)===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(u=n,u.writing=!1,u.writecb=null,u.length-=u.writelen,u.writelen=0,t)a=e,s=r,l=t,c=i,s?g.nextTick(function(){c(l)}):c(l),a._writableState.errorEmitted=!0,a.emit("error",l);else{var o=h(e,n);o||n.bufferProcessing||!n.buffer.length||function(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],i=r.chunk,o=r.encoding,a=r.callback;if(p(e,t,t.objectMode?1:i.length,i,o,a),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}(e,n),r?g.nextTick(function(){d(e,n,o,i)}):d(e,n,o,i)}var a,s,l,c;var u}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(e){var t=o("./_stream_duplex");if(!(this instanceof i||this instanceof t))return new i(e);this._writableState=new r(e,this),this.writable=!0,n.call(this)}function l(e,t,n,r,i){var o,a,s;a=n,s=r,(o=t).objectMode||!1===o.decodeStrings||"string"!=typeof a||(a=new u(a,s)),n=a,u.isBuffer(n)&&(r="buffer");var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;return c||(t.needDrain=!0),t.writing?t.buffer.push(new f(n,r,i)):p(e,t,l,n,r,i),c}function p(e,t,n,r,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1}function d(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),r(),n&&s(e,t)}function h(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function s(e,t){var n=h(0,t);return n&&(t.finished=!0,e.emit("finish")),n}e.inherits(i,n),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,n){var r,i,o,a=this._writableState,s=!1;return"function"==typeof t&&(n=t,t=null),u.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=function(){}),a.ended?(r=this,i=n,o=new Error("write after end"),r.emit("error",o),g.nextTick(function(){i(o)})):function(e,t,n,r){var i=!0;if(!u.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),g.nextTick(function(){r(o)}),i=!1}return i}(this,a,e,n)&&(s=l(this,a,e,t,n)),s},i.prototype._write=function(e,t,n){n(new Error("not implemented"))},i.prototype.end=function(e,t,n){var r,i,o,a=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.ending||a.finished||(r=this,o=n,(i=a).ending=!0,s(r,i),o&&(i.finished?g.nextTick(o):r.once("finish",o)),i.ended=!0)}}).call(this)}).call(this,o("_process"))},{"./_stream_duplex":275,_process:178,buffer:62,"core-util-is":64,inherits:95,stream:271}],280:[function(e,t,n){var r=e("stream");(n=t.exports=e("./lib/_stream_readable.js")).Stream=r,(n.Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":275,"./lib/_stream_passthrough.js":276,"./lib/_stream_readable.js":277,"./lib/_stream_transform.js":278,"./lib/_stream_writable.js":279,stream:271}],281:[function(e,t,n){var r=e("buffer").Buffer,i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var o=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function l(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!(55296<=(r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,55296<=(r=t.charCodeAt(i))&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:62}],282:[function(a,s,l){(function(o){(function(){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e,t,n=a("./ponyfill.js"),r=(t=n)&&t.__esModule?t:{default:t};e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o?o:void 0!==s?s:Function("return this")();var i=(0,r.default)(e);l.default=i}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":283}],283:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},{}],284:[function(l,e,c){(function(n,s){(function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,r(function(){o[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete o[e]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":178,timers:284}],285:[function(e,t,n){(function(n){(function(){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],286:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],287:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],288:[function(p,e,P){(function(u,f){(function(){var s=/%[sdj%]/g;P.format=function(e){if(!k(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])w(a)||!c(a)?o+=" "+a:o+=" "+l(a);return o},P.deprecate=function(e,t){if(x(f.process))return function(){return P.deprecate(e,t).apply(this,arguments)};if(!0===u.noDeprecation)return e;var n=!1;return function(){if(!n){if(u.throwDeprecation)throw new Error(t);u.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function l(e,t){var n={seen:[],stylize:o};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&P._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),m(n,e,n.depth)}function i(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function o(e,t){return e}function m(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==P.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return k(e)||(e=m(t,e,r)),e}var i=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(k(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return E(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}(t,n);if(i)return i;var o,a=Object.keys(n),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return v(n);if(0===a.length){if(A(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(S(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return v(n)}var c,u,f,p,d="",h=!1,g=["{","}"];return b(n)&&(h=!0,g=["[","]"]),A(n)&&(d=" [Function"+(n.name?": "+n.name:"")+"]"),S(n)&&(d=" "+RegExp.prototype.toString.call(n)),C(n)&&(d=" "+Date.prototype.toUTCString.call(n)),T(n)&&(d=" "+v(n)),0!==a.length||h&&0!=n.length?r<0?S(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=h?function(t,n,r,i,e){for(var o=[],a=0,s=n.length;a<s;++a)O(n,String(a))?o.push(y(t,n,r,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(y(t,n,r,i,e,!0))}),o}(t,n,r,s,a):a.map(function(e){return y(t,n,r,s,e,h)}),t.seen.pop(),f=d,p=g,60<(u=c).reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?p[0]+(""===f?"":f+"\n ")+" "+u.join(",\n  ")+" "+p[1]:p[0]+f+" "+u.join(", ")+" "+p[1]):g[0]+d+g[1]}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?-1<(s=w(n)?m(e,l.value,null):m(e,l.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function b(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function w(e){return null===e}function E(e){return"number"==typeof e}function k(e){return"string"==typeof e}function x(e){return void 0===e}function S(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function C(e){return c(e)&&"[object Date]"===t(e)}function T(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function A(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}P.debuglog=function(t){if(x(e)&&(e=u.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=u.pid;r[t]=function(){var e=P.format.apply(P,arguments);console.error("%s %d: %s",t,n,e)}}else r[t]=function(){};return r[t]},(P.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},P.isArray=b,P.isBoolean=_,P.isNull=w,P.isNullOrUndefined=function(e){return null==e},P.isNumber=E,P.isString=k,P.isSymbol=function(e){return"symbol"==typeof e},P.isUndefined=x,P.isRegExp=S,P.isObject=c,P.isDate=C,P.isError=T,P.isFunction=A,P.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},P.isBuffer=p("./support/isBuffer");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}P.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),a[e.getMonth()],t].join(" ")),P.format.apply(P,arguments))},P.inherits=p("inherits"),P._extend=function(e,t){if(!t||!c(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,p("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":287,_process:178,inherits:286}],289:[function(e,t,n){"use strict";function d(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;Array.isArray(i)?i.push(e):o===t.length-2?i[t.pop()]=e:t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,o,a,s,l,c,u,f,p="";n=t.pop();)if(r=n.obj,p+=n.prefix||"",i=n.val||"")p+=i;else if("object"!=typeof r)p+=void 0===r?null:JSON.stringify(r);else if(null===r)p+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;0<=o;o--)a=0===o?"":",",t.push({obj:r[o],prefix:a});t.push({val:"["})}else{for(l in s=[],r)r.hasOwnProperty(l)&&s.push(l);for(t.push({val:"}"}),o=s.length-1;0<=o;o--)u=r[c=s[o]],f=0<o?",":"",f+=JSON.stringify(c)+":",t.push({obj:u,prefix:f});t.push({val:"{"})}return p},n.parse=function(e){for(var t,n,r,i,o,a,s,l,c,u=[],f=[],p=0;;)if("}"!==(t=e[p++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,d(null,u,f);break;case"t":p+=3,d(!0,u,f);break;case"f":p+=4,d(!1,u,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(r=e[p++],!/[\d\.\-e\+]/.test(r)){p--;break}n+=r}d(parseFloat(n),u,f);break;case'"':for(i="",o=void 0,a=0;'"'!==(s=e[p++])||"\\"===o&&a%2==1;)i+=s,"\\"===(o=s)?a++:a=0;d(JSON.parse('"'+i+'"'),u,f);break;case"[":l={element:[],index:u.length},u.push(l.element),f.push(l);break;case"{":c={element:{},index:u.length},u.push(c.element),f.push(c);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===u.length)return u.pop();d(u.pop(),u,f)}}},{}],290:[function(e,t,n){"use strict";t.exports=function(){}},{}],291:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}]},{},[1]);